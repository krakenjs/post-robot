{"version":3,"sources":["webpack://postRobot/webpack/universalModuleDefinition","webpack://postRobot/webpack/bootstrap","webpack://postRobot/../zalgo-promise/index.js","webpack://postRobot/../belter/index.js","webpack://postRobot/../universal-serialize/index.js","webpack://postRobot/../cross-domain-safe-weakmap/index.js","webpack://postRobot/../zalgo-promise/dist/zalgo-promise.js","webpack://postRobot/../belter/dist/belter.js","webpack://postRobot/../cross-domain-safe-weakmap/dist/cross-domain-safe-weakmap.js","webpack://postRobot/../universal-serialize/dist/universal-serialize.js","webpack://postRobot/../cross-domain-utils/dist/module/util.js","webpack://postRobot/../cross-domain-utils/dist/module/constants.js","webpack://postRobot/../cross-domain-utils/dist/module/utils.js","webpack://postRobot/../cross-domain-utils/dist/module/types.js","webpack://postRobot/./src/global.ts","webpack://postRobot/./src/lib/hello.ts","webpack://postRobot/./src/conf/constants.ts","webpack://postRobot/./src/lib/windows.ts","webpack://postRobot/../zalgo-promise/src/utils.ts","webpack://postRobot/../zalgo-promise/src/exceptions.ts","webpack://postRobot/../zalgo-promise/src/flush.ts","webpack://postRobot/../zalgo-promise/src/promise.ts","webpack://postRobot/../cross-domain-safe-weakmap/src/util.ts","webpack://postRobot/../cross-domain-safe-weakmap/src/weakmap.ts","webpack://postRobot/../belter/src/util.ts","webpack://postRobot/../cross-domain-safe-weakmap/src/native.ts","webpack://postRobot/../belter/src/dom.ts","webpack://postRobot/./src/serialize/window.ts","webpack://postRobot/../belter/src/constants.ts","webpack://postRobot/./src/bridge/common.ts","webpack://postRobot/./src/serialize/function.ts","webpack://postRobot/./src/serialize/serialize.ts","webpack://postRobot/./src/serialize/promise.ts","webpack://postRobot/./src/drivers/send/strategies.ts","webpack://postRobot/./src/drivers/send/index.ts","webpack://postRobot/./src/drivers/listeners.ts","webpack://postRobot/./src/drivers/receive/types.ts","webpack://postRobot/./src/drivers/receive/index.ts","webpack://postRobot/./src/public/on.ts","webpack://postRobot/./src/public/send.ts","webpack://postRobot/./src/conf/config.ts","webpack://postRobot/./src/setup.ts","webpack://postRobot/./src/types.ts","webpack://postRobot/./src/clean.ts","webpack://postRobot/./src/index.ts"],"names":["root","factory","exports","module","define","amd","self","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","hasOwnProperty","p","s","require","e","default","Promise","window","Window","constructor","toString","then","u","resolve","f","a","resolved","rejected","errorHandled","error","handlers","dispatching","stack","reject","prototype","Error","dispatch","setTimeout","indexOf","push","length","asyncReject","onSuccess","onError","h","promise","catch","finally","try","timeout","clearTimeout","toPromise","TypeError","all","hash","map","onPossiblyUnhandledException","cancel","splice","apply","delay","isPromise","flush","location","protocol","parent","host","mockDomain","closed","message","getOwnPropertyDescriptor","mockclosed","top","contentWindow","parentNode","ownerDocument","documentElement","contains","__cross_domain_utils_window_check__","weakmap","keys","values","Math","random","WeakMap","freeze","set","_cleanupClosedWindows","delete","isSafeToReadWrite","writable","has","getOrSet","__webpack_exports__","getUserAgent","isDevice","isWebView","isStandAlone","isFacebookWebView","isFirefox","isFirefoxIOS","isEdgeIOS","isOperaMini","isAndroid","isIos","isGoogleSearchApp","isQQBrowser","isIosWebview","isSFVC","isSFVCorSafari","isAndroidWebview","device_isIE","isIECompHeader","isElectron","isIEIntranet","isMacOsCna","supportsPopups","isChrome","isSafari","isApplePaySupported","getBody","isDocumentReady","isDocumentInteractive","urlEncode","waitForWindowReady","waitForDocumentReady","waitForDocumentBody","parseQuery","getQueryParam","urlWillRedirectPage","formatQuery","extendQuery","extendUrl","redirect","hasMetaViewPort","isElementVisible","getPerformance","enablePerformance","getPageRenderTime","htmlEncode","dom_isBrowser","querySelectorAll","onClick","getScript","isLocalStorageEnabled","getBrowserLocales","appendChild","isElement","getElementSafe","getElement","elementReady","dom_PopupOpenError","popup","writeToWindow","writeElementToWindow","setStyle","awaitFrameLoad","awaitFrameWindow","createElement","iframe","addEventListener","bindEvents","setVendorCSS","animate","makeElementVisible","makeElementInvisible","showElement","hideElement","destroyElement","showAndAnimate","animateAndHide","addClass","removeClass","isElementClosed","watchElementForClose","fixScripts","onResize","getResourceLoadTime","isShadowElement","getShadowRoot","getShadowHost","insertShadowSlot","preventClickFocus","getStackTrace","getCurrentScript","getCurrentScriptUID","submitForm","experiment","getGlobalNameSpace","getStorage","getFunctionName","setFunctionName","base64encode","base64decode","uniqueID","getGlobal","getObjectID","getEmptyObject","memoize","promiseIdentity","memoizePromise","promisify","inlineMemoize","src_util_noop","once","hashStr","strHashStr","match","awaitKey","stringifyError","stringifyErrorMessage","stringify","domainMatches","patchMethod","extend","util_values","memoizedValues","perc","min","max","roundUp","regexMap","svgToBase64","objFilter","identity","regexTokenize","promiseDebounce","safeInterval","isInteger","isFloat","serializePrimitive","deserializePrimitive","dotify","undotify","eventEmitter","camelToDasherize","dasherizeToCamel","capitalizeFirstLetter","util_get","safeTimeout","defineLazyProp","arrayFrom","isObject","isObjectObject","isPlainObject","replaceObject","copyProp","regex","regexAll","isDefined","cycle","debounce","util_isRegex","util_weakMapMemoize","util_weakMapMemoizePromise","cleanup","tryCatch","removeFromArray","assertExists","unique","constHas","dedupeErrors","util_ExtendableError","request","addHeaderBuilder","types_TYPES","memoized","decorators_promise","isPerc","isPx","toNum","toPx","toCSS","percOf","normalizeDimension","wrapPromise","KEY_CODES","ATTRIBUTES","UID_HASH_LENGTH","iPhoneScreenHeightMatrix","926","device","textSizeHeights","zoomHeight","1.15","1.25","1.5","1.75","2","2.5","3","maybeSafari","896","844","812","736","667","navigator","mockUserAgent","userAgent","test","standalone","matchMedia","matches","ua","outerHeight","height","innerHeight","scale","round","screen","width","innerWidth","computedHeight","sfvc","possibleSafariSizes","document","documentMode","Boolean","mHttp","querySelector","mContent","process","versions","electron","status","err","ApplePaySession","supportsVersion","canMakePayments","_setPrototypeOf","setPrototypeOf","__proto__","_inheritsLoose","subClass","superClass","_extends","assign","target","arguments","source","zalgo_promise","IE_WIN_ACCESS_ERROR","isAboutProtocol","win","canReadFromWindow","getActualDomain","getDomain","domain","isSameDomain","desc","iframeWindows","iframeFrames","isWindowClosed","allowMock","iframeIndex","collection","item","frame","doc","isWindow","obj","cross_domain_safe_weakmap","_getPrototypeOf","getPrototypeOf","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","construct_construct","Parent","args","Class","instance","Function","wrapNativeSuper_wrapNativeSuper","_cache","Map","Wrapper","configurable","util_safeIndexOf","objectIDs","weakmap_CrossDomainSafeWeakMap","CrossDomainSafeWeakMap","testWeakMap","testKey","_proto","entry","index","fn","__name__","displayName","str","btoa","encodeURIComponent","replace","p1","String","fromCharCode","parseInt","Buffer","from","atob","decodeURIComponent","charCodeAt","slice","join","chars","charAt","floor","toISOString","toLowerCase","uid","serializeArgs","JSON","subkey","val","memoizeGlobalIndex","memoizeGlobalIndexValidFrom","method","options","simpleCache","thisCache","_options$thisNamespac","thisNamespace","cacheTime","time","memoizeIndex","memoizedFunction","_len","Array","_key","cache","cacheKey","cacheResult","now","reset","ZalgoPromise","memoizedPromiseFunction","_arguments","_this","_len2","_key2","promisifiedFunction","logic","__inline_memoize_cache__","called","pow","sqrt","total","abs","pattern","regmatch","level","newErr","defaultMessage","hostname","split","handler","original","_arguments2","_this2","context","callOriginal","result","clear","pixels","percentage","num","nearest","remainder","regexp","results","svg","filter","text","token","localPromise","loop","parseFloat","prefix","newobj","isArray","every","keyResult","parts","part","isLast","isIndex","triggered","emitter","on","eventName","handlerList","cancelled","listener","trigger","_len3","_key3","promises","_loop","_i2","triggerOnce","_len4","_key4","concat","string","g","toUpperCase","path","def","pathParts","interval","replacer","fullKey","_loop2","itemKey","child","_result","_loop3","descriptor","start","RegExp","groups","end","_arguments3","_this3","arg","_this4","_this5","cleanErr","tasks","cleaned","cleaner","register","task","shift","arr","thing","_i4","constant","seenErrors","seenStringifiedErrors","stringifiedError","_Error","ExtendableError","_this6","captureStackTrace","ReferenceError","ENTER","SPACE","UID","body","readyState","setInterval","clearInterval","queryString","params","_queryString$split2","pair","search","url","href","originalQuery","props","originalUrl","originalHash","query","_url$split","_originalUrl$split","hashString","meta","el","offsetWidth","offsetHeight","getClientRects","performance","timing","connectEnd","navigationStart","domInteractive","html","selector","element","event","keyCode","_ref","_ref$host","_ref$reverse","reverse","scripts","getElementsByTagName","script","src","localStorage","setItem","getItem","removeItem","nav","locales","languages","language","userLanguage","locale","_locale$split","country","lang","container","Element","nodeType","style","id","awaitFrameLoadPromises","_ExtendableError","PopupOpenError","left","outerWidth","screenX","screenY","toolbar","menubar","resizable","scrollbars","open","_win","close","write","err2","tag","tagName","_i6","_arrayFrom2","children","removeChild","_i8","_arrayFrom4","styleText","styleSheet","cssText","createTextNode","_promise","loadedFrame","class","className","setAttribute","attributes","_i10","_Object$keys2","innerHTML","allowTransparency","backgroundColor","border","isIE","hasAttribute","removeEventListener","eventNames","_i12","_i14","VENDOR_PREFIXES","capitalizedName","_i16","ANIMATION_START_EVENTS","ANIMATION_END_EVENTS","clean","startTimeout","endTimeout","startEvent","endEvent","hasStarted","cleanUp","animationName","stopPropagation","setProperty","animation","classList","add","remove","sacrificialFrame","sacrificialFrameWin","mutationObservers","_i18","disconnect","elementClosed","MutationObserver","mutationElement","parentElement","mutationObserver","observe","childList","display","frameWin","_i20","_querySelectorAll2","newScript","textContent","replaceChild","_temp","_ref2","_ref2$width","_ref2$height","_ref2$interval","_ref2$win","currentWidth","currentHeight","canceled","observer","check","newWidth","newHeight","ResizeObserver","subtree","characterData","getEntries","entries","duration","shadowRoot","shadowHost","slotName","slot","slotProvider","onFocus","preventDefault","blur","currentScript","stackDetails","exec","scriptLocation","_i22","_Array$prototype$slic2","currentUID","getAttribute","hashedString","dataset","_ref3","_ref3$method","form","_i24","_Object$keys4","_body$key","input","submit","_ref$lifetime","lifetime","accessedStorage","STORAGE_KEY","newStateID","getState","storage","localStorageEnabled","rawStorage","parse","getID","getSession","session","__session__","created","guid","isStateFresh","getSessionState","state","getSessionID","getBelterExperimentStorage","isEventUnique","loggedBeacons","getRandomInteger","range","group","_ref$sample","sample","_ref$logTreatment","logTreatment","_ref$logCheckpoint","logCheckpoint","_ref$sticky","sticky","throttle","throttlePercentiles","treatment","started","forced","exp","isEnabled","isDisabled","getTreatment","log","checkpoint","payload","logStart","logComplete","_ref$version","version","global","globalKey","namespace","defValue","headerBuilders","_ref$method","_ref$headers","headers","json","data","_ref$win","_ref$timeout","normalizedHeaders","accept","builtHeaders","xhr","XMLHttpRequest","responseHeaders","rawHeaders","_rawHeaders$trim$spli2","trim","_line$split","getAllResponseHeaders","contentType","isJSON","responseBody","responseText","evt","setRequestHeader","ontimeout","send","dim","expected","timer","expect","_tryCatch","_handler","avoid","_fn","expectError","_tryCatch2","_handler2","wait","prom","P","E","y","O","z","v","b","N","R","_","T","D","S","A","U","I","j","G","FUNCTION","ERROR","PROMISE","REGEX","DATE","ARRAY","OBJECT","STRING","NUMBER","BOOLEAN","NULL","UNDEFINED","__type__","__val__","toJSON","code","x","B","F","L","M","isRegex","getParent","getOpener","opener","PROTOCOL","isActuallySameDomain","assertSameDomain","isAncestorParent","childParent","getParents","getFrames","frames","len","_i","_frame","safeIndexOf","isFrameWindowClosed","getAncestor","matchDomain","origin","some","subpattern","closeWindow","__POST_ROBOT__","getObj","globalStore","defStore","store","storeKey","defVal","del","WildCard","getWildcard","WINDOW_WILDCARD","windowStore","winStore","getStore","getInstanceID","resolveHelloPromise","helloPromises","existingPromise","newPromise","sayHello","instanceID","getWindowInstanceID","markWindowKnown","flushPromise","dispatchedErrors","possiblyUnhandledPromiseHandlers","activeCount","flushActive","startActive","endActive","isAsync","res","dispatchPossiblyUnhandledError","chain","firstPromise","secondPromise","undefined","onFinally","count","awaitPromises","items","hasNativeWeakMap","inferCurrentScript","cleanupProxyWindows","idToProxyWindow","shouldClean","getSerializedWindow","winPromise","windowNamePromise","windowTypePromise","noop","getName","getType","focus","isClosed","setLocation","opts","setName","sameDomain","frameElement","_i21","_document$querySelect2","getFrameForWindow","ProxyWindow","serializedWindow","isProxyWindow","actualWindow","actualWindowPromise","setWindow","isPopup","type","isPopupPromise","getNamePromise","reopenPromise","focusPromise","getWindow","awaitWindow","matchWindow","proxyInstanceID","knownWindowInstanceID","unwrap","serialize","toProxyWindow","deserialize","addMethod","methodStore","proxyWindowMethods","lookupMethod","serializeFunction","destination","meth","methodSource","__id__","serializeType","serializeMessage","TYPE","serializePromise","serializeWindow","deserializeMessage","serializedPromise","deserializePromise","serializedFunction","getDeserializedFunction","crossDomainFunctionWrapper","fireAndForget","__origin__","__source__","deserializeFunction","SEND_MESSAGE_STRATEGIES","sendMessage","domainBuffer","buffer","serializedMessage","strategies","errors","strategyName","getResponseListener","deleteResponseListener","isResponseListenerErrored","getRequestListener","requestListeners","winQualifier","nameListeners","domainListeners","handleRequest","logName","sendResponse","ack","pathname","handleError","handleAck","handleResponse","receiveMessage","receivedMessages","messages","parsedMessage","parseMessages","deserializeMessages","requestListener","addRequestListener","listenersCollection","existingListener","regexListeners","regexListener","strDomain","errorHandler","postMessage","domainMatcher","responseTimeout","childTimeout","validateOptions","actualParent","_i7","_getAllChildFrames4","getAllChildFrames","_i3","_getFrames2","_i5","_getAllChildFrames2","getTop","_i15","_getFrames8","isAncestor","getHelloPromise","awaitWindowHello","targetDomain","actualDomain","normalizedDomain","normalizeDomain","responseListener","addResponseListener","reqPromises","markResponseListenerErrored","totalAckTimeout","isWindowKnown","totalResTimeout","ackTimeout","resTimeout","internalSerializeMessage","internalDeserializeMessage","createProxyWindow","setup","initialized","sourceElement","originalEvent","messageListener","listenForMessages","initHello","destroy","responseListeners","cancelResponseListeners","TYPES","cleanUpWindow"],"mappings":"CAAA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,IACQ,mBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,YAAa,GAAIH,GACE,iBAAZC,QACdA,QAAmB,UAAID,IAEvBD,EAAgB,UAAIC,IARtB,CASoB,oBAATK,KAAuBA,KAAOC,MAAO,WAChD,O,YCTE,IAAIC,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUR,QAGnC,IAAIC,EAASK,EAAiBE,GAAY,CACzCC,EAAGD,EACHE,GAAG,EACHV,QAAS,IAUV,OANAW,EAAQH,GAAUI,KAAKX,EAAOD,QAASC,EAAQA,EAAOD,QAASO,GAG/DN,EAAOS,GAAI,EAGJT,EAAOD,QA0Df,OArDAO,EAAoBM,EAAIF,EAGxBJ,EAAoBO,EAAIR,EAGxBC,EAAoBQ,EAAI,SAASf,EAASgB,EAAMC,GAC3CV,EAAoBW,EAAElB,EAASgB,IAClCG,OAAOC,eAAepB,EAASgB,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEV,EAAoBgB,EAAI,SAASvB,GACX,oBAAXwB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAepB,EAASwB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,KAQvDnB,EAAoBoB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQnB,EAAoBmB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFAxB,EAAoBgB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOnB,EAAoBQ,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRvB,EAAoB2B,EAAI,SAASjC,GAChC,IAAIgB,EAAShB,GAAUA,EAAO4B,WAC7B,WAAwB,OAAO5B,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAM,EAAoBQ,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRV,EAAoBW,EAAI,SAASiB,EAAQC,GAAY,MAAOjB,GAAiBkB,eAAezB,KAAKuB,EAAQC,IAGzG7B,EAAoB+B,EAAI,GAIjB/B,EAAoBA,EAAoBgC,EAAI,G,kBCjFrDtC,EAAOD,QAAUwC,EAAQ,I,gBCEzBvC,EAAOD,QAAUwC,EAAQ,I,gBCHzBvC,EAAOD,QAAUwC,EAAQ,I,gBCCzBvC,EAAOD,QAAUwC,EAAQ,I,gBCDmM,oBAAoBpC,MAAKA,KAApLH,EAAOD,QAA0M,SAASyC,GAAG,IAAId,EAAE,GAAG,SAASJ,EAAEW,GAAG,GAAGP,EAAEO,GAAG,OAAOP,EAAEO,GAAGlC,QAAQ,IAAIkB,EAAES,EAAEO,GAAG,CAACzB,EAAEyB,EAAExB,GAAE,EAAGV,QAAQ,IAAI,OAAOyC,EAAEP,GAAGtB,KAAKM,EAAElB,QAAQkB,EAAEA,EAAElB,QAAQuB,GAAGL,EAAER,GAAE,EAAGQ,EAAElB,QAAQ,OAAOuB,EAAEV,EAAE4B,EAAElB,EAAET,EAAEa,EAAEJ,EAAER,EAAE,SAAS0B,EAAEd,EAAEO,GAAGX,EAAEL,EAAEuB,EAAEd,IAAIR,OAAOC,eAAeqB,EAAEd,EAAE,CAACN,YAAW,EAAGC,IAAIY,KAAKX,EAAEA,EAAE,SAASkB,GAAG,oBAAoBjB,QAAQA,OAAOC,aAAaN,OAAOC,eAAeqB,EAAEjB,OAAOC,YAAY,CAACC,MAAM,WAAWP,OAAOC,eAAeqB,EAAE,aAAa,CAACf,OAAM,KAAMH,EAAEI,EAAE,SAASc,EAAEd,GAAG,GAAG,EAAEA,IAAIc,EAAElB,EAAEkB,IAAI,EAAEd,EAAE,OAAOc,EAAE,GAAG,EAAEd,GAAG,iBAAiBc,GAAGA,GAAGA,EAAEZ,WAAW,OAAOY,EAAE,IAAIP,EAAEf,OAAOY,OAAO,MAAM,GAAGR,EAAEA,EAAEW,GAAGf,OAAOC,eAAec,EAAE,UAAU,CAACb,YAAW,EAAGK,MAAMe,IAAI,EAAEd,GAAG,iBAAiBc,EAAE,IAAI,IAAIvB,KAAKuB,EAAElB,EAAER,EAAEmB,EAAEhB,EAAE,SAASS,GAAG,OAAOc,EAAEd,IAAIM,KAAK,KAAKf,IAAI,OAAOgB,GAAGX,EAAEW,EAAE,SAASO,GAAG,IAAId,EAAEc,GAAGA,EAAEZ,WAAW,WAAW,OAAOY,EAAEC,SAAS,WAAW,OAAOD,GAAG,OAAOlB,EAAER,EAAEY,EAAE,IAAIA,GAAGA,GAAGJ,EAAEL,EAAE,SAASuB,EAAEd,GAAG,MAAM,GAAGU,eAAezB,KAAK6B,EAAEd,IAAIJ,EAAEe,EAAE,GAAGf,EAAEA,EAAEgB,EAAE,GAAl4B,CAAs4B,CAAC,SAASE,EAAEd,EAAEJ,GAAG,aAAa,SAASW,EAAEO,GAAG,IAAI,IAAIA,EAAE,OAAM,EAAG,GAAG,oBAAoBE,SAASF,aAAaE,QAAQ,OAAM,EAAG,GAAG,oBAAoBC,QAAQ,mBAAmBA,OAAOC,QAAQJ,aAAaG,OAAOC,OAAO,OAAM,EAAG,GAAG,oBAAoBD,QAAQ,mBAAmBA,OAAOE,aAAaL,aAAaG,OAAOE,YAAY,OAAM,EAAG,IAAInB,EAAE,GAAGoB,SAAS,GAAGpB,EAAE,CAAC,IAAIJ,EAAEI,EAAEf,KAAK6B,GAAG,GAAG,oBAAoBlB,GAAG,oBAAoBA,GAAG,uBAAuBA,EAAE,OAAM,EAAG,GAAG,mBAAmBkB,EAAEO,KAAK,OAAM,EAAG,MAAMP,GAAG,OAAM,EAAG,OAAM,EAAGlB,EAAEA,EAAEI,GAAGJ,EAAER,EAAEY,EAAE,gBAAe,WAAY,OAAOjB,KAAK,IAAIQ,EAAET,EAAE,GAAGK,EAAE,GAAGmC,EAAE,EAAE,SAASV,IAAI,IAAIU,GAAG/B,EAAE,CAAC,IAAIuB,EAAEvB,EAAEA,EAAE,KAAKuB,EAAES,WAAW,SAASC,IAAIF,GAAG,EAAE,SAASG,IAAIH,GAAG,EAAEV,IAAI,IAAI7B,EAAE,WAAW,SAAS+B,EAAEA,GAAG,IAAId,EAAEtB,KAAK,GAAGA,KAAKgD,cAAS,EAAOhD,KAAKiD,cAAS,EAAOjD,KAAKkD,kBAAa,EAAOlD,KAAKqB,WAAM,EAAOrB,KAAKmD,WAAM,EAAOnD,KAAKoD,cAAS,EAAOpD,KAAKqD,iBAAY,EAAOrD,KAAKsD,WAAM,EAAOtD,KAAKgD,UAAS,EAAGhD,KAAKiD,UAAS,EAAGjD,KAAKkD,cAAa,EAAGlD,KAAKoD,SAAS,GAAGhB,EAAE,CAAC,IAAIlB,EAAEW,EAAEhB,GAAE,EAAGT,GAAE,EAAGK,GAAE,EAAGqC,IAAI,IAAIV,GAAE,SAAUA,GAAG3B,EAAEa,EAAEuB,QAAQT,IAAIvB,GAAE,EAAGK,EAAEkB,MAAK,SAAUA,GAAG3B,EAAEa,EAAEiC,OAAOnB,IAAIhC,GAAE,EAAGyB,EAAEO,MAAM,MAAMA,GAAG,OAAOW,SAAS/C,KAAKuD,OAAOnB,GAAGW,IAAItC,GAAE,EAAGI,EAAEb,KAAK6C,QAAQ3B,GAAGd,GAAGJ,KAAKuD,OAAO1B,IAAI,IAAIP,EAAEc,EAAEoB,UAAU,OAAOlC,EAAEuB,QAAQ,SAAST,GAAG,GAAGpC,KAAKgD,UAAUhD,KAAKiD,SAAS,OAAOjD,KAAK,GAAG6B,EAAEO,GAAG,MAAM,IAAIqB,MAAM,gDAAgD,OAAOzD,KAAKgD,UAAS,EAAGhD,KAAKqB,MAAMe,EAAEpC,KAAK0D,WAAW1D,MAAMsB,EAAEiC,OAAO,SAASnB,GAAG,IAAId,EAAEtB,KAAK,GAAGA,KAAKgD,UAAUhD,KAAKiD,SAAS,OAAOjD,KAAK,GAAG6B,EAAEO,GAAG,MAAM,IAAIqB,MAAM,+CAA+C,IAAIrB,EAAE,CAAC,IAAIlB,EAAEkB,GAAG,mBAAmBA,EAAEM,SAASN,EAAEM,WAAW,GAAGA,SAASnC,KAAK6B,GAAGA,EAAE,IAAIqB,MAAM,gDAAgDvC,GAAG,OAAOlB,KAAKiD,UAAS,EAAGjD,KAAKmD,MAAMf,EAAEpC,KAAKkD,cAAcS,YAAW,WAAYrC,EAAE4B,cAAc,SAASd,EAAEd,GAAG,IAAI,IAAIlB,EAAEwD,QAAQxB,GAAG,CAAChC,EAAEyD,KAAKzB,GAAGuB,YAAW,WAAY,MAAMvB,IAAI,GAAG,IAAI,IAAIlB,EAAE,EAAEA,EAAET,EAAEqD,OAAO5C,IAAIT,EAAES,GAAGkB,EAAEd,IAApH,CAAyHc,EAAEd,KAAK,GAAGtB,KAAK0D,WAAW1D,MAAMsB,EAAEyC,YAAY,SAAS3B,GAAG,OAAOpC,KAAKkD,cAAa,EAAGlD,KAAKuD,OAAOnB,GAAGpC,MAAMsB,EAAEoC,SAAS,WAAW,IAAIpC,EAAEtB,KAAKgD,SAAS9B,EAAElB,KAAKiD,SAASpC,EAAEb,KAAKoD,SAAS,IAAIpD,KAAKqD,cAAc/B,GAAGJ,GAAG,CAAClB,KAAKqD,aAAY,EAAGP,IAAI,IAAI,IAAI1C,EAAE,SAASgC,EAAEd,GAAG,OAAOc,EAAEO,MAAK,SAAUP,GAAGd,EAAEuB,QAAQT,MAAK,SAAUA,GAAGd,EAAEiC,OAAOnB,OAAO3B,EAAE,EAAEA,EAAEI,EAAEiD,OAAOrD,IAAI,CAAC,IAAImC,EAAE/B,EAAEJ,GAAGyB,EAAEU,EAAEoB,UAAU3D,EAAEuC,EAAEqB,QAAQC,EAAEtB,EAAEuB,QAAQzD,OAAE,EAAO,GAAGY,EAAE,IAAIZ,EAAEwB,EAAEA,EAAElC,KAAKqB,OAAOrB,KAAKqB,MAAM,MAAMe,GAAG8B,EAAEX,OAAOnB,GAAG,cAAc,GAAGlB,EAAE,CAAC,IAAIb,EAAE,CAAC6D,EAAEX,OAAOvD,KAAKmD,OAAO,SAAS,IAAIzC,EAAEL,EAAEL,KAAKmD,OAAO,MAAMf,GAAG8B,EAAEX,OAAOnB,GAAG,UAAU1B,aAAa0B,IAAI1B,EAAEsC,UAAUtC,EAAEuC,WAAWvC,EAAEsC,SAASkB,EAAErB,QAAQnC,EAAEW,OAAO6C,EAAEX,OAAO7C,EAAEyC,OAAOzC,EAAEwC,cAAa,GAAIrB,EAAEnB,GAAGA,aAAa0B,IAAI1B,EAAEsC,UAAUtC,EAAEuC,UAAUvC,EAAEsC,SAASkB,EAAErB,QAAQnC,EAAEW,OAAO6C,EAAEX,OAAO7C,EAAEyC,OAAO/C,EAAEM,EAAEwD,GAAGA,EAAErB,QAAQnC,GAAGG,EAAEiD,OAAO,EAAE9D,KAAKqD,aAAY,EAAGN,MAAMzB,EAAEqB,KAAK,SAASrB,EAAEJ,GAAG,GAAGI,GAAG,mBAAmBA,IAAIA,EAAEf,KAAK,MAAM,IAAIkD,MAAM,wDAAwD,GAAGvC,GAAG,mBAAmBA,IAAIA,EAAEX,KAAK,MAAM,IAAIkD,MAAM,sDAAsD,IAAI5B,EAAE,IAAIO,EAAE,OAAOpC,KAAKoD,SAASS,KAAK,CAACM,QAAQtC,EAAEmC,UAAU1C,EAAE2C,QAAQ/C,IAAIlB,KAAKkD,cAAa,EAAGlD,KAAK0D,WAAW7B,GAAGP,EAAE8C,MAAM,SAAShC,GAAG,OAAOpC,KAAK2C,UAAK,EAAOP,IAAId,EAAE+C,QAAQ,SAAS/C,GAAG,GAAGA,GAAG,mBAAmBA,IAAIA,EAAEf,KAAK,MAAM,IAAIkD,MAAM,uCAAuC,OAAOzD,KAAK2C,MAAK,SAAUzB,GAAG,OAAOkB,EAAEkC,IAAIhD,GAAGqB,MAAK,WAAY,OAAOzB,QAAO,SAAUA,GAAG,OAAOkB,EAAEkC,IAAIhD,GAAGqB,MAAK,WAAY,MAAMzB,SAASI,EAAEiD,QAAQ,SAASnC,EAAEd,GAAG,IAAIJ,EAAElB,KAAK,GAAGA,KAAKgD,UAAUhD,KAAKiD,SAAS,OAAOjD,KAAK,IAAI6B,EAAE8B,YAAW,WAAYzC,EAAE8B,UAAU9B,EAAE+B,UAAU/B,EAAEqC,OAAOjC,GAAG,IAAImC,MAAM,2BAA2BrB,EAAE,SAASA,GAAG,OAAOpC,KAAK2C,MAAK,SAAUP,GAAG,OAAOoC,aAAa3C,GAAGO,MAAMd,EAAEmD,UAAU,WAAW,GAAG,oBAAoBnC,QAAQ,MAAM,IAAIoC,UAAU,0BAA0B,OAAOpC,QAAQO,QAAQ7C,OAAOoC,EAAES,QAAQ,SAASvB,GAAG,OAAOA,aAAac,EAAEd,EAAEO,EAAEP,GAAG,IAAIc,GAAE,SAAUA,EAAElB,GAAG,OAAOI,EAAEqB,KAAKP,EAAElB,OAAM,IAAKkB,GAAGS,QAAQvB,IAAIc,EAAEmB,OAAO,SAASjC,GAAG,OAAM,IAAKc,GAAGmB,OAAOjC,IAAIc,EAAE2B,YAAY,SAASzC,GAAG,OAAM,IAAKc,GAAG2B,YAAYzC,IAAIc,EAAEuC,IAAI,SAASrD,GAAG,IAAIJ,EAAE,IAAIkB,EAAEvB,EAAES,EAAEwC,OAAO1D,EAAE,GAAG,IAAIS,EAAE,OAAOK,EAAE2B,QAAQzC,GAAGc,EAAE,IAAI,IAAIT,EAAE,SAAS2B,EAAEd,EAAEO,GAAG,OAAOP,EAAEqB,MAAK,SAAUrB,GAAGlB,EAAEgC,GAAGd,EAAE,IAAIT,GAAG,IAAIK,EAAE2B,QAAQzC,MAAK,SAAUgC,GAAGP,EAAE0B,OAAOnB,OAAOQ,EAAE,EAAEA,EAAEtB,EAAEwC,OAAOlB,IAAI,CAAC,IAAIV,EAAEZ,EAAEsB,GAAG,GAAGV,aAAaE,GAAG,GAAGF,EAAEc,SAAS,CAAC5C,EAAEwC,GAAGV,EAAEb,MAAMR,GAAG,EAAE,eAAe,IAAIgB,EAAEK,GAAG,CAAC9B,EAAEwC,GAAGV,EAAErB,GAAG,EAAE,SAASJ,EAAEmC,EAAER,EAAES,QAAQX,GAAGhB,GAAG,OAAO,IAAIL,GAAGK,EAAE2B,QAAQzC,GAAGc,GAAGkB,EAAEwC,KAAK,SAAStD,GAAG,IAAIJ,EAAE,GAAGL,EAAE,GAAGT,EAAE,SAASgC,GAAG,GAAGd,EAAEU,eAAeI,GAAG,CAAC,IAAIhC,EAAEkB,EAAEc,GAAGP,EAAEzB,GAAGS,EAAEgD,KAAKzD,EAAEuC,MAAK,SAAUrB,GAAGJ,EAAEkB,GAAGd,MAAMJ,EAAEkB,GAAGhC,IAAI,IAAI,IAAIK,KAAKa,EAAElB,EAAEK,GAAG,OAAO2B,EAAEuC,IAAI9D,GAAG8B,MAAK,WAAY,OAAOzB,MAAMkB,EAAEyC,IAAI,SAASvD,EAAEJ,GAAG,OAAOkB,EAAEuC,IAAIrD,EAAEuD,IAAI3D,KAAKkB,EAAE0C,6BAA6B,SAAS1C,GAAG,OAAO,SAASA,GAAG,OAAO3B,EAAEoD,KAAKzB,GAAG,CAAC2C,OAAO,WAAWtE,EAAEuE,OAAOvE,EAAEmD,QAAQxB,GAAG,KAAtE,CAA4EA,IAAIA,EAAEkC,IAAI,SAAShD,EAAEJ,EAAEW,GAAG,GAAGP,GAAG,mBAAmBA,IAAIA,EAAEf,KAAK,MAAM,IAAIkD,MAAM,mCAAmC,IAAI5C,EAAEiC,IAAI,IAAIjC,EAAES,EAAE2D,MAAM/D,EAAEW,GAAG,IAAI,MAAMP,GAAG,OAAOyB,IAAIX,EAAEmB,OAAOjC,GAAG,OAAOyB,IAAIX,EAAES,QAAQhC,IAAIuB,EAAE8C,MAAM,SAAS5D,GAAG,OAAO,IAAIc,GAAE,SAAUA,GAAGuB,WAAWvB,EAAEd,OAAOc,EAAE+C,UAAU,SAAS7D,GAAG,SAASA,GAAGA,aAAac,IAAIP,EAAEP,IAAIc,EAAEgD,MAAM,WAAW,OAAO9D,EAAET,EAAEA,GAAG,IAAIuB,EAAEF,IAAIZ,EAAE,IAAIA,GAAGc,EAAxzI,O,gBCE50D,oBAAsBrC,MAAOA,KAD+BH,EAAOD,QAE1D,SAASW,GACZ,IAAIL,EAAmB,GACvB,SAASC,EAAoBC,GACzB,GAAIF,EAAiBE,GAAW,OAAOF,EAAiBE,GAAUR,QAClE,IAAIC,EAASK,EAAiBE,GAAY,CACtCC,EAAGD,EACHE,GAAG,EACHV,QAAS,IAIb,OAFAW,EAAQH,GAAUI,KAAKX,EAAOD,QAASC,EAAQA,EAAOD,QAASO,GAC/DN,EAAOS,GAAI,EACJT,EAAOD,QA8ClB,OA5CAO,EAAoBM,EAAIF,EACxBJ,EAAoBO,EAAIR,EACxBC,EAAoBQ,EAAI,SAASf,EAASgB,EAAMC,GAC5CV,EAAoBW,EAAElB,EAASgB,IAASG,OAAOC,eAAepB,EAASgB,EAAM,CACzEK,YAAY,EACZC,IAAKL,KAGbV,EAAoBgB,EAAI,SAASvB,GAC7B,oBAAsBwB,QAAUA,OAAOC,aAAeN,OAAOC,eAAepB,EAASwB,OAAOC,YAAa,CACrGC,MAAO,WAEXP,OAAOC,eAAepB,EAAS,aAAc,CACzC0B,OAAO,KAGfnB,EAAoBoB,EAAI,SAASD,EAAOE,GAEpC,GADA,EAAIA,IAASF,EAAQnB,EAAoBmB,IACrC,EAAIE,EAAM,OAAOF,EACrB,GAAI,EAAIE,GAAQ,iBAAmBF,GAASA,GAASA,EAAMG,WAAY,OAAOH,EAC9E,IAAII,EAAKX,OAAOY,OAAO,MAMvB,GALAxB,EAAoBgB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CACjCT,YAAY,EACZK,MAAOA,IAEP,EAAIE,GAAQ,iBAAmBF,EAAO,IAAK,IAAIM,KAAON,EAAOnB,EAAoBQ,EAAEe,EAAIE,EAAK,SAASA,GACrG,OAAON,EAAMM,IACfC,KAAK,KAAMD,IACb,OAAOF,GAEXvB,EAAoB2B,EAAI,SAASjC,GAC7B,IAAIgB,EAAShB,GAAUA,EAAO4B,WAAa,WACvC,OAAO5B,EAAOyC,SACd,WACA,OAAOzC,GAGX,OADAM,EAAoBQ,EAAEE,EAAQ,IAAKA,GAC5BA,GAEXV,EAAoBW,EAAI,SAASiB,EAAQC,GACrC,MAAO,GAAGC,eAAezB,KAAKuB,EAAQC,IAE1C7B,EAAoB+B,EAAI,GACjB/B,EAAoBA,EAAoBgC,EAAI,GAzDhD,CA0DL,CAAE,SAAStC,EAAQD,EAASO,GAC1BN,EAAOD,QAAUO,EAAoB,IACtC,SAASN,EAAQD,EAASO,GACzBN,EAAOD,QAAUO,EAAoB,IACtC,SAASN,EAAQD,EAASO,GACzB,oBAAsBH,MAAQA,KAAMH,EAAOD,QAAU,SAASyC,GAC1D,IAAId,EAAI,GACR,SAASJ,EAAEW,GACP,GAAIP,EAAEO,GAAI,OAAOP,EAAEO,GAAGlC,QACtB,IAAIkB,EAAIS,EAAEO,GAAK,CACXzB,EAAGyB,EACHxB,GAAG,EACHV,QAAS,IAEb,OAAOyC,EAAEP,GAAGtB,KAAKM,EAAElB,QAASkB,EAAGA,EAAElB,QAASuB,GAAIL,EAAER,GAAI,EAAIQ,EAAElB,QAE9D,OAAOuB,EAAEV,EAAI4B,EAAGlB,EAAET,EAAIa,EAAGJ,EAAER,EAAI,SAAS0B,EAAGd,EAAGO,GAC1CX,EAAEL,EAAEuB,EAAGd,IAAMR,OAAOC,eAAeqB,EAAGd,EAAG,CACrCN,YAAY,EACZC,IAAKY,KAEVX,EAAEA,EAAI,SAASkB,GACd,oBAAsBjB,QAAUA,OAAOC,aAAeN,OAAOC,eAAeqB,EAAGjB,OAAOC,YAAa,CAC/FC,MAAO,WACPP,OAAOC,eAAeqB,EAAG,aAAc,CACvCf,OAAO,KAEZH,EAAEI,EAAI,SAASc,EAAGd,GACjB,GAAI,EAAIA,IAAMc,EAAIlB,EAAEkB,IAAK,EAAId,EAAG,OAAOc,EACvC,GAAI,EAAId,GAAK,iBAAmBc,GAAKA,GAAKA,EAAEZ,WAAY,OAAOY,EAC/D,IAAIP,EAAIf,OAAOY,OAAO,MACtB,GAAIR,EAAEA,EAAEW,GAAIf,OAAOC,eAAec,EAAG,UAAW,CAC5Cb,YAAY,EACZK,MAAOe,IACP,EAAId,GAAK,iBAAmBc,EAAG,IAAK,IAAIvB,KAAKuB,EAAGlB,EAAER,EAAEmB,EAAGhB,EAAG,SAASS,GACnE,OAAOc,EAAEd,IACXM,KAAK,KAAMf,IACb,OAAOgB,GACRX,EAAEW,EAAI,SAASO,GACd,IAAId,EAAIc,GAAKA,EAAEZ,WAAa,WACxB,OAAOY,EAAEC,SACT,WACA,OAAOD,GAEX,OAAOlB,EAAER,EAAEY,EAAG,IAAKA,GAAIA,GACxBJ,EAAEL,EAAI,SAASuB,EAAGd,GACjB,MAAO,GAAGU,eAAezB,KAAK6B,EAAGd,IAClCJ,EAAEe,EAAI,GAAIf,EAAEA,EAAEgB,EAAI,GA1C4B,CA2CnD,CAAE,SAASE,EAAGd,EAAGJ,GACf,aACA,SAASW,EAAEO,GACP,IACI,IAAKA,EAAG,OAAO,EACf,GAAI,oBAAsBE,SAAWF,aAAaE,QAAS,OAAO,EAClE,GAAI,oBAAsBC,QAAU,mBAAqBA,OAAOC,QAAUJ,aAAaG,OAAOC,OAAQ,OAAO,EAC7G,GAAI,oBAAsBD,QAAU,mBAAqBA,OAAOE,aAAeL,aAAaG,OAAOE,YAAa,OAAO,EACvH,IAAInB,EAAI,GAAGoB,SACX,GAAIpB,EAAG,CACH,IAAIJ,EAAII,EAAEf,KAAK6B,GACf,GAAI,oBAAsBlB,GAAK,oBAAsBA,GAAK,uBAAyBA,EAAG,OAAO,EAEjG,GAAI,mBAAqBkB,EAAEO,KAAM,OAAO,EAC1C,MAAOP,GACL,OAAO,EAEX,OAAO,EAEXlB,EAAEA,EAAEI,GAAIJ,EAAER,EAAEY,EAAG,gBAAgB,WAC3B,OAAOjB,KAEX,IAAIQ,EAAGT,EAAI,GAAIK,EAAI,GAAImC,EAAI,EAC3B,SAASV,IACL,IAAKU,GAAK/B,EAAG,CACT,IAAIuB,EAAIvB,EACRA,EAAI,KAAMuB,EAAES,WAGpB,SAASC,IACLF,GAAK,EAET,SAASG,IACLH,GAAK,EAAGV,IAEZ,IAAI7B,EAAI,WACJ,SAAS+B,EAAEA,GACP,IAAId,EAAItB,KACR,GAAIA,KAAKgD,cAAW,EAAQhD,KAAKiD,cAAW,EAAQjD,KAAKkD,kBAAe,EACxElD,KAAKqB,WAAQ,EAAQrB,KAAKmD,WAAQ,EAAQnD,KAAKoD,cAAW,EAAQpD,KAAKqD,iBAAc,EACrFrD,KAAKsD,WAAQ,EAAQtD,KAAKgD,UAAW,EAAIhD,KAAKiD,UAAW,EAAIjD,KAAKkD,cAAe,EACjFlD,KAAKoD,SAAW,GAAIhB,EAAG,CACnB,IAAIlB,EAAGW,EAAGhB,GAAI,EAAIT,GAAI,EAAIK,GAAI,EAC9BqC,IACA,IACIV,GAAE,SAAUA,GACR3B,EAAIa,EAAEuB,QAAQT,IAAMvB,GAAI,EAAIK,EAAIkB,MAChC,SAAUA,GACV3B,EAAIa,EAAEiC,OAAOnB,IAAMhC,GAAI,EAAIyB,EAAIO,MAErC,MAAOA,GACL,OAAOW,SAAU/C,KAAKuD,OAAOnB,GAEjCW,IAAKtC,GAAI,EAAII,EAAIb,KAAK6C,QAAQ3B,GAAKd,GAAKJ,KAAKuD,OAAO1B,IAG5D,IAAIP,EAAIc,EAAEoB,UACV,OAAOlC,EAAEuB,QAAU,SAAST,GACxB,GAAIpC,KAAKgD,UAAYhD,KAAKiD,SAAU,OAAOjD,KAC3C,GAAI6B,EAAEO,GAAI,MAAM,IAAIqB,MAAM,gDAC1B,OAAOzD,KAAKgD,UAAW,EAAIhD,KAAKqB,MAAQe,EAAGpC,KAAK0D,WAAY1D,MAC7DsB,EAAEiC,OAAS,SAASnB,GACnB,IAAId,EAAItB,KACR,GAAIA,KAAKgD,UAAYhD,KAAKiD,SAAU,OAAOjD,KAC3C,GAAI6B,EAAEO,GAAI,MAAM,IAAIqB,MAAM,+CAC1B,IAAKrB,EAAG,CACJ,IAAIlB,EAAIkB,GAAK,mBAAqBA,EAAEM,SAAWN,EAAEM,WAAa,GAAGA,SAASnC,KAAK6B,GAC/EA,EAAI,IAAIqB,MAAM,gDAAkDvC,GAEpE,OAAOlB,KAAKiD,UAAW,EAAIjD,KAAKmD,MAAQf,EAAGpC,KAAKkD,cAAgBS,YAAW,WACvErC,EAAE4B,cAAgB,SAASd,EAAGd,GAC1B,IAAK,IAAMlB,EAAEwD,QAAQxB,GAAI,CACrBhC,EAAEyD,KAAKzB,GAAIuB,YAAW,WAClB,MAAMvB,IACN,GACJ,IAAK,IAAIlB,EAAI,EAAGA,EAAIT,EAAEqD,OAAQ5C,IAAKT,EAAES,GAAGkB,EAAGd,IALjC,CAOhBc,EAAGd,KACL,GAAItB,KAAK0D,WAAY1D,MAC1BsB,EAAEyC,YAAc,SAAS3B,GACxB,OAAOpC,KAAKkD,cAAe,EAAIlD,KAAKuD,OAAOnB,GAAIpC,MAChDsB,EAAEoC,SAAW,WACZ,IAAIpC,EAAItB,KAAKgD,SAAU9B,EAAIlB,KAAKiD,SAAUpC,EAAIb,KAAKoD,SACnD,IAAKpD,KAAKqD,cAAgB/B,GAAKJ,GAAI,CAC/BlB,KAAKqD,aAAc,EAAIP,IACvB,IAAK,IAAI1C,EAAI,SAASgC,EAAGd,GACrB,OAAOc,EAAEO,MAAK,SAAUP,GACpBd,EAAEuB,QAAQT,MACV,SAAUA,GACVd,EAAEiC,OAAOnB,OAEd3B,EAAI,EAAGA,EAAII,EAAEiD,OAAQrD,IAAK,CACzB,IAAImC,EAAI/B,EAAEJ,GAAIyB,EAAIU,EAAEoB,UAAW3D,EAAIuC,EAAEqB,QAASC,EAAItB,EAAEuB,QAASzD,OAAI,EACjE,GAAIY,EAAG,IACHZ,EAAIwB,EAAIA,EAAElC,KAAKqB,OAASrB,KAAKqB,MAC/B,MAAOe,GACL8B,EAAEX,OAAOnB,GACT,cACG,GAAIlB,EAAG,CACV,IAAKb,EAAG,CACJ6D,EAAEX,OAAOvD,KAAKmD,OACd,SAEJ,IACIzC,EAAIL,EAAEL,KAAKmD,OACb,MAAOf,GACL8B,EAAEX,OAAOnB,GACT,UAGR1B,aAAa0B,IAAM1B,EAAEsC,UAAYtC,EAAEuC,WAAavC,EAAEsC,SAAWkB,EAAErB,QAAQnC,EAAEW,OAAS6C,EAAEX,OAAO7C,EAAEyC,OAC7FzC,EAAEwC,cAAe,GAAMrB,EAAEnB,GAAKA,aAAa0B,IAAM1B,EAAEsC,UAAYtC,EAAEuC,UAAYvC,EAAEsC,SAAWkB,EAAErB,QAAQnC,EAAEW,OAAS6C,EAAEX,OAAO7C,EAAEyC,OAAS/C,EAAEM,EAAGwD,GAAKA,EAAErB,QAAQnC,GAE3JG,EAAEiD,OAAS,EAAG9D,KAAKqD,aAAc,EAAIN,MAE1CzB,EAAEqB,KAAO,SAASrB,EAAGJ,GACpB,GAAII,GAAK,mBAAqBA,IAAMA,EAAEf,KAAM,MAAM,IAAIkD,MAAM,wDAC5D,GAAIvC,GAAK,mBAAqBA,IAAMA,EAAEX,KAAM,MAAM,IAAIkD,MAAM,sDAC5D,IAAI5B,EAAI,IAAIO,EACZ,OAAOpC,KAAKoD,SAASS,KAAK,CACtBM,QAAStC,EACTmC,UAAW1C,EACX2C,QAAS/C,IACTlB,KAAKkD,cAAe,EAAIlD,KAAK0D,WAAY7B,GAC9CP,EAAE8C,MAAQ,SAAShC,GAClB,OAAOpC,KAAK2C,UAAK,EAAQP,IAC1Bd,EAAE+C,QAAU,SAAS/C,GACpB,GAAIA,GAAK,mBAAqBA,IAAMA,EAAEf,KAAM,MAAM,IAAIkD,MAAM,uCAC5D,OAAOzD,KAAK2C,MAAK,SAAUzB,GACvB,OAAOkB,EAAEkC,IAAIhD,GAAGqB,MAAK,WACjB,OAAOzB,QAEX,SAAUA,GACV,OAAOkB,EAAEkC,IAAIhD,GAAGqB,MAAK,WACjB,MAAMzB,SAGfI,EAAEiD,QAAU,SAASnC,EAAGd,GACvB,IAAIJ,EAAIlB,KACR,GAAIA,KAAKgD,UAAYhD,KAAKiD,SAAU,OAAOjD,KAC3C,IAAI6B,EAAI8B,YAAW,WACfzC,EAAE8B,UAAY9B,EAAE+B,UAAY/B,EAAEqC,OAAOjC,GAAK,IAAImC,MAAM,2BAA6BrB,EAAI,SACrFA,GACJ,OAAOpC,KAAK2C,MAAK,SAAUP,GACvB,OAAOoC,aAAa3C,GAAIO,MAE7Bd,EAAEmD,UAAY,WACb,GAAI,oBAAsBnC,QAAS,MAAM,IAAIoC,UAAU,0BACvD,OAAOpC,QAAQO,QAAQ7C,OACxBoC,EAAES,QAAU,SAASvB,GACpB,OAAOA,aAAac,EAAId,EAAIO,EAAEP,GAAK,IAAIc,GAAE,SAAUA,EAAGlB,GAClD,OAAOI,EAAEqB,KAAKP,EAAGlB,OACf,IAAKkB,GAAGS,QAAQvB,IACvBc,EAAEmB,OAAS,SAASjC,GACnB,OAAO,IAAKc,GAAGmB,OAAOjC,IACvBc,EAAE2B,YAAc,SAASzC,GACxB,OAAO,IAAKc,GAAG2B,YAAYzC,IAC5Bc,EAAEuC,IAAM,SAASrD,GAChB,IAAIJ,EAAI,IAAIkB,EAAGvB,EAAIS,EAAEwC,OAAQ1D,EAAI,GACjC,IAAKS,EAAG,OAAOK,EAAE2B,QAAQzC,GAAIc,EAC7B,IAAK,IAAIT,EAAI,SAAS2B,EAAGd,EAAGO,GACxB,OAAOP,EAAEqB,MAAK,SAAUrB,GACpBlB,EAAEgC,GAAKd,EAAG,IAAMT,GAAK,IAAMK,EAAE2B,QAAQzC,MACrC,SAAUgC,GACVP,EAAE0B,OAAOnB,OAEdQ,EAAI,EAAGA,EAAItB,EAAEwC,OAAQlB,IAAK,CACzB,IAAIV,EAAIZ,EAAEsB,GACV,GAAIV,aAAaE,GACb,GAAIF,EAAEc,SAAU,CACZ5C,EAAEwC,GAAKV,EAAEb,MAAOR,GAAK,EACrB,eAED,IAAKgB,EAAEK,GAAI,CACd9B,EAAEwC,GAAKV,EAAGrB,GAAK,EACf,SAEJJ,EAAEmC,EAAGR,EAAES,QAAQX,GAAIhB,GAEvB,OAAO,IAAML,GAAKK,EAAE2B,QAAQzC,GAAIc,GACjCkB,EAAEwC,KAAO,SAAStD,GACjB,IAAIJ,EAAI,GAAIL,EAAI,GAAIT,EAAI,SAASgC,GAC7B,GAAId,EAAEU,eAAeI,GAAI,CACrB,IAAIhC,EAAIkB,EAAEc,GACVP,EAAEzB,GAAKS,EAAEgD,KAAKzD,EAAEuC,MAAK,SAAUrB,GAC3BJ,EAAEkB,GAAKd,MACJJ,EAAEkB,GAAKhC,IAGtB,IAAK,IAAIK,KAAKa,EAAGlB,EAAEK,GACnB,OAAO2B,EAAEuC,IAAI9D,GAAG8B,MAAK,WACjB,OAAOzB,MAEZkB,EAAEyC,IAAM,SAASvD,EAAGJ,GACnB,OAAOkB,EAAEuC,IAAIrD,EAAEuD,IAAI3D,KACpBkB,EAAE0C,6BAA+B,SAAS1C,GACzC,OAAO,SAASA,GACZ,OAAO3B,EAAEoD,KAAKzB,GAAI,CACd2C,OAAQ,WACJtE,EAAEuE,OAAOvE,EAAEmD,QAAQxB,GAAI,KAH5B,CAMLA,IACHA,EAAEkC,IAAM,SAAShD,EAAGJ,EAAGW,GACtB,GAAIP,GAAK,mBAAqBA,IAAMA,EAAEf,KAAM,MAAM,IAAIkD,MAAM,mCAC5D,IAAI5C,EACJiC,IACA,IACIjC,EAAIS,EAAE2D,MAAM/D,EAAGW,GAAK,IACtB,MAAOP,GACL,OAAOyB,IAAKX,EAAEmB,OAAOjC,GAEzB,OAAOyB,IAAKX,EAAES,QAAQhC,IACvBuB,EAAE8C,MAAQ,SAAS5D,GAClB,OAAO,IAAIc,GAAE,SAAUA,GACnBuB,WAAWvB,EAAGd,OAEnBc,EAAE+C,UAAY,SAAS7D,GACtB,SAAUA,GAAKA,aAAac,IAAMP,EAAEP,IACrCc,EAAEgD,MAAQ,WACT,OAAO9D,EAAIT,EAAIA,GAAK,IAAIuB,EAAGF,IAAKZ,EAChC,IAAIA,GACLc,EA3LC,OA8Lb,SAASxC,EAAQD,EAASO,GACzB,oBAAsBH,MAAQA,KAAMH,EAAOD,QAAU,SAASyC,GAC1D,IAAId,EAAI,GACR,SAASJ,EAAEW,GACP,GAAIP,EAAEO,GAAI,OAAOP,EAAEO,GAAGlC,QACtB,IAAIS,EAAIkB,EAAEO,GAAK,CACXzB,EAAGyB,EACHxB,GAAG,EACHV,QAAS,IAEb,OAAOyC,EAAEP,GAAGtB,KAAKH,EAAET,QAASS,EAAGA,EAAET,QAASuB,GAAId,EAAEC,GAAI,EAAID,EAAET,QAE9D,OAAOuB,EAAEV,EAAI4B,EAAGlB,EAAET,EAAIa,EAAGJ,EAAER,EAAI,SAAS0B,EAAGd,EAAGO,GAC1CX,EAAEL,EAAEuB,EAAGd,IAAMR,OAAOC,eAAeqB,EAAGd,EAAG,CACrCN,YAAY,EACZC,IAAKY,KAEVX,EAAEA,EAAI,SAASkB,GACd,oBAAsBjB,QAAUA,OAAOC,aAAeN,OAAOC,eAAeqB,EAAGjB,OAAOC,YAAa,CAC/FC,MAAO,WACPP,OAAOC,eAAeqB,EAAG,aAAc,CACvCf,OAAO,KAEZH,EAAEI,EAAI,SAASc,EAAGd,GACjB,GAAI,EAAIA,IAAMc,EAAIlB,EAAEkB,IAAK,EAAId,EAAG,OAAOc,EACvC,GAAI,EAAId,GAAK,iBAAmBc,GAAKA,GAAKA,EAAEZ,WAAY,OAAOY,EAC/D,IAAIP,EAAIf,OAAOY,OAAO,MACtB,GAAIR,EAAEA,EAAEW,GAAIf,OAAOC,eAAec,EAAG,UAAW,CAC5Cb,YAAY,EACZK,MAAOe,IACP,EAAId,GAAK,iBAAmBc,EAAG,IAAK,IAAIhC,KAAKgC,EAAGlB,EAAER,EAAEmB,EAAGzB,EAAG,SAASkB,GACnE,OAAOc,EAAEd,IACXM,KAAK,KAAMxB,IACb,OAAOyB,GACRX,EAAEW,EAAI,SAASO,GACd,IAAId,EAAIc,GAAKA,EAAEZ,WAAa,WACxB,OAAOY,EAAEC,SACT,WACA,OAAOD,GAEX,OAAOlB,EAAER,EAAEY,EAAG,IAAKA,GAAIA,GACxBJ,EAAEL,EAAI,SAASuB,EAAGd,GACjB,MAAO,GAAGU,eAAezB,KAAK6B,EAAGd,IAClCJ,EAAEe,EAAI,GAAIf,EAAEA,EAAEgB,EAAI,GA1C4B,CA2CnD,CAAE,SAASE,EAAGd,EAAGJ,GACf,aACAA,EAAEA,EAAEI,GAAIJ,EAAER,EAAEY,EAAG,WAAW,WACtB,OAAOjB,KAEX,IAAIwB,EAAI,mCACR,SAASzB,EAAEgC,GACP,YAAO,IAAWA,IAAMA,EAAIG,QAAS,WAAaH,EAAEiD,SAASC,SAEjE,SAASvC,EAAEX,GACP,IACI,OAAO,EACT,MAAOA,IACT,OAAO,EAEX,SAASvB,EAAEuB,QACP,IAAWA,IAAMA,EAAIG,QACrB,IAAIjB,EAAIc,EAAEiD,SACV,IAAK/D,EAAG,MAAM,IAAImC,MAAM,gCACxB,IAAIvC,EAAII,EAAEgE,SACV,IAAKpE,EAAG,MAAM,IAAIuC,MAAM,gCACxB,GAAI,UAAYvC,EAAG,MAAO,UAC1B,GAAI,WAAaA,EAAG,CAChB,IAAIW,EAAI,SAASO,GACb,QAAI,IAAWA,IAAMA,EAAIG,QAASH,EAAG,IACjC,GAAIA,EAAEmD,QAAUnD,EAAEmD,SAAWnD,EAAG,OAAOA,EAAEmD,OAC3C,MAAOnD,KAHL,CAINA,GACF,OAAOP,GAAKkB,IAAMlC,EAAEgB,GAAK,WAE7B,IAAIzB,EAAIkB,EAAEkE,KACV,IAAKpF,EAAG,MAAM,IAAIqD,MAAM,4BACxB,OAAOvC,EAAI,KAAOd,EAEtB,SAASK,EAAE2B,QACP,IAAWA,IAAMA,EAAIG,QACrB,IAAIjB,EAAIT,EAAEuB,GACV,OAAOd,GAAKc,EAAEqD,YAAc,IAAMrD,EAAEqD,WAAW7B,QAAQ,SAAWxB,EAAEqD,WAAanE,EAErF,IAAIsB,EAAI,GAAIE,EAAI,GAChB,SAASZ,EAAEE,EAAGd,QACV,IAAWA,IAAMA,GAAI,GACrB,IACI,GAAIc,IAAMG,OAAQ,OAAO,EAC3B,MAAOH,GACL,OAAO,EAEX,IACI,IAAKA,EAAG,OAAO,EACjB,MAAOA,GACL,OAAO,EAEX,IACI,GAAIA,EAAEsD,OAAQ,OAAO,EACvB,MAAOtD,GACL,OAAQA,GAAKA,EAAEuD,UAAY9D,EAE/B,GAAIP,GAAK,SAASc,GACd,IAAK,SAASA,GACV,IACI,GAAIA,IAAMG,OAAQ,OAAO,EAC3B,MAAOH,IACT,IACI,IAAId,EAAIR,OAAO8E,yBAAyBxD,EAAG,YAC3C,GAAId,IAAK,IAAOA,EAAEN,WAAY,OAAO,EACvC,MAAOoB,IACT,IACI,GAAIhC,EAAEgC,IAAMW,IAAK,OAAO,EAC1B,MAAOX,IACT,IACI,GAAIvB,EAAEuB,KAAOvB,EAAE0B,QAAS,OAAO,EACjC,MAAOH,IACT,OAAO,EAdN,CAeHA,GAAI,OAAO,EACb,IACI,GAAIA,IAAMG,OAAQ,OAAO,EACzB,GAAInC,EAAEgC,IAAMW,IAAK,OAAO,EACxB,GAAItC,EAAE8B,UAAY9B,EAAE2B,GAAI,OAAO,EACjC,MAAOA,IACT,OAAO,EAtBF,CAuBPA,GAAI,IACF,GAAIA,EAAEyD,WAAY,OAAO,EAC3B,MAAOzD,IACT,IACI,IAAKA,EAAEmD,SAAWnD,EAAE0D,IAAK,OAAO,EAClC,MAAO1D,IACT,IAAIlB,EAAI,SAASkB,EAAGd,GAChB,IAAK,IAAIJ,EAAI,EAAGA,EAAIkB,EAAE0B,OAAQ5C,IAAK,IAC/B,GAAIkB,EAAElB,KAAOI,EAAG,OAAOJ,EACzB,MAAOkB,IACT,OAAQ,EAJJ,CAKNQ,EAAGR,GACL,IAAK,IAAMlB,EAAG,CACV,IAAIgB,EAAIY,EAAE5B,GACV,GAAIgB,GAAK,SAASE,GACd,IAAKA,EAAE2D,cAAe,OAAO,EAC7B,IAAK3D,EAAE4D,WAAY,OAAO,EAC1B,IAAI1E,EAAIc,EAAE6D,cACV,GAAI3E,GAAKA,EAAE4E,kBAAoB5E,EAAE4E,gBAAgBC,SAAS/D,GAAI,CAC1D,IAAK,IAAIlB,EAAIkB,EAAGlB,EAAE8E,YAAc9E,EAAE8E,aAAe9E,GAAKA,EAAIA,EAAE8E,WAC5D,IAAK9E,EAAEsE,OAASlE,EAAE4E,gBAAgBC,SAASjF,EAAEsE,MAAO,OAAO,EAE/D,OAAO,EARF,CASPtD,GAAI,OAAO,EAEjB,OAAO,EAEX,SAASxB,EAAE0B,GACP,IACI,GAAIA,IAAMG,OAAQ,OAAO,EAC3B,MAAOH,GACL,GAAIA,GAAKA,EAAEuD,UAAY9D,EAAG,OAAO,EAErC,IACI,GAAI,oBAAsB,GAAGa,SAASnC,KAAK6B,GAAI,OAAO,EACxD,MAAOA,GACL,GAAIA,GAAKA,EAAEuD,UAAY9D,EAAG,OAAO,EAErC,IACI,GAAIU,OAAOC,QAAUJ,aAAaG,OAAOC,OAAQ,OAAO,EAC1D,MAAOJ,GACL,GAAIA,GAAKA,EAAEuD,UAAY9D,EAAG,OAAO,EAErC,IACI,GAAIO,GAAKA,EAAErC,OAASqC,EAAG,OAAO,EAChC,MAAOA,GACL,GAAIA,GAAKA,EAAEuD,UAAY9D,EAAG,OAAO,EAErC,IACI,GAAIO,GAAKA,EAAEmD,SAAWnD,EAAG,OAAO,EAClC,MAAOA,GACL,GAAIA,GAAKA,EAAEuD,UAAY9D,EAAG,OAAO,EAErC,IACI,GAAIO,GAAKA,EAAE0D,MAAQ1D,EAAG,OAAO,EAC/B,MAAOA,GACL,GAAIA,GAAKA,EAAEuD,UAAY9D,EAAG,OAAO,EAErC,IACI,GAAIO,GAAK,uBAAyBA,EAAEgE,oCAAqC,OAAO,EAClF,MAAOhE,GACL,OAAO,EAEX,IACI,GAAI,gBAAiBA,GAAK,SAAUA,GAAK,aAAcA,EAAG,OAAO,EACnE,MAAOA,IACT,OAAO,EAEX,SAAS8B,EAAE9B,EAAGd,GACV,IAAK,IAAIJ,EAAI,EAAGA,EAAIkB,EAAE0B,OAAQ5C,IAAK,IAC/B,GAAIkB,EAAElB,KAAOI,EAAG,OAAOJ,EACzB,MAAOkB,IACT,OAAQ,EAEZ,IAAI/B,EAAI,WACJ,SAAS+B,IACL,GAAIpC,KAAKW,UAAO,EAAQX,KAAKqG,aAAU,EAAQrG,KAAKsG,UAAO,EAAQtG,KAAKuG,YAAS,EACjFvG,KAAKW,KAAO,cAAgB,IAAM6F,KAAKC,WAAa,GAAK,KAAM,WAC3D,GAAI,oBAAsBC,QAAS,OAAO,EAC1C,QAAI,IAAW5F,OAAO6F,OAAQ,OAAO,EACrC,IACI,IAAIvE,EAAI,IAAIsE,QAASpF,EAAI,GACzB,OAAOR,OAAO6F,OAAOrF,GAAIc,EAAEwE,IAAItF,EAAG,iBAAkB,kBAAoBc,EAAEnB,IAAIK,GAChF,MAAOc,GACL,OAAO,GAPgD,GAS1D,IACDpC,KAAKqG,QAAU,IAAIK,QACrB,MAAOtE,IACTpC,KAAKsG,KAAO,GAAItG,KAAKuG,OAAS,GAElC,IAAIjF,EAAIc,EAAEoB,UACV,OAAOlC,EAAEuF,sBAAwB,WAC7B,IAAK,IAAIzE,EAAIpC,KAAKqG,QAAS/E,EAAItB,KAAKsG,KAAMpF,EAAI,EAAGA,EAAII,EAAEwC,OAAQ5C,IAAK,CAChE,IAAIW,EAAIP,EAAEJ,GACV,GAAIR,EAAEmB,IAAMK,EAAEL,GAAI,CACd,GAAIO,EAAG,IACHA,EAAE0E,OAAOjF,GACX,MAAOO,IACTd,EAAE0D,OAAO9D,EAAG,GAAIlB,KAAKuG,OAAOvB,OAAO9D,EAAG,GAAIA,GAAK,KAGxDI,EAAEyF,kBAAoB,SAAS3E,GAC9B,OAAQ1B,EAAE0B,IACXd,EAAEsF,IAAM,SAASxE,EAAGd,GACnB,IAAKc,EAAG,MAAM,IAAIqB,MAAM,wBACxB,IAAIvC,EAAIlB,KAAKqG,QACb,GAAInF,EAAG,IACHA,EAAE0F,IAAIxE,EAAGd,GACX,MAAOc,UACEpC,KAAKqG,QAEhB,GAAIrG,KAAK+G,kBAAkB3E,GAAI,IAC3B,IAAIP,EAAI7B,KAAKW,KAAMP,EAAIgC,EAAEP,GACzB,YAAazB,GAAKA,EAAE,KAAOgC,EAAIhC,EAAE,GAAKkB,EAAIR,OAAOC,eAAeqB,EAAGP,EAAG,CAClER,MAAO,CAAEe,EAAGd,GACZ0F,UAAU,KAEhB,MAAO5E,IACTpC,KAAK6G,wBACL,IAAI9D,EAAI/C,KAAKsG,KAAMzF,EAAIb,KAAKuG,OAAQ9F,EAAIyD,EAAEnB,EAAGX,IAC5C,IAAM3B,GAAKsC,EAAEc,KAAKzB,GAAIvB,EAAEgD,KAAKvC,IAAMT,EAAEJ,GAAKa,GAC5CA,EAAEL,IAAM,SAASmB,GAChB,IAAKA,EAAG,MAAM,IAAIqB,MAAM,wBACxB,IAAInC,EAAItB,KAAKqG,QACb,GAAI/E,EAAG,IACH,GAAIA,EAAE2F,IAAI7E,GAAI,OAAOd,EAAEL,IAAImB,GAC7B,MAAOA,UACEpC,KAAKqG,QAEhB,GAAIrG,KAAK+G,kBAAkB3E,GAAI,IAC3B,IAAIlB,EAAIkB,EAAEpC,KAAKW,MACf,OAAOO,GAAKA,EAAE,KAAOkB,EAAIlB,EAAE,QAAK,EAClC,MAAOkB,IACTpC,KAAK6G,wBACL,IAAIhF,EAAIqC,EAAElE,KAAKsG,KAAMlE,GACrB,IAAK,IAAMP,EAAG,OAAO7B,KAAKuG,OAAO1E,IAClCP,EAAEwF,OAAS,SAAS1E,GACnB,IAAKA,EAAG,MAAM,IAAIqB,MAAM,wBACxB,IAAInC,EAAItB,KAAKqG,QACb,GAAI/E,EAAG,IACHA,EAAEwF,OAAO1E,GACX,MAAOA,UACEpC,KAAKqG,QAEhB,GAAIrG,KAAK+G,kBAAkB3E,GAAI,IAC3B,IAAIlB,EAAIkB,EAAEpC,KAAKW,MACfO,GAAKA,EAAE,KAAOkB,IAAMlB,EAAE,GAAKA,EAAE,QAAK,GACpC,MAAOkB,IACTpC,KAAK6G,wBACL,IAAIhF,EAAI7B,KAAKsG,KAAMlG,EAAI8D,EAAErC,EAAGO,IAC3B,IAAMhC,IAAMyB,EAAEmD,OAAO5E,EAAG,GAAIJ,KAAKuG,OAAOvB,OAAO5E,EAAG,KACpDkB,EAAE2F,IAAM,SAAS7E,GAChB,IAAKA,EAAG,MAAM,IAAIqB,MAAM,wBACxB,IAAInC,EAAItB,KAAKqG,QACb,GAAI/E,EAAG,IACH,GAAIA,EAAE2F,IAAI7E,GAAI,OAAO,EACvB,MAAOA,UACEpC,KAAKqG,QAEhB,GAAIrG,KAAK+G,kBAAkB3E,GAAI,IAC3B,IAAIlB,EAAIkB,EAAEpC,KAAKW,MACf,SAAUO,GAAKA,EAAE,KAAOkB,GAC1B,MAAOA,IACT,OAAOpC,KAAK6G,yBAA0B,IAAM3C,EAAElE,KAAKsG,KAAMlE,IAC1Dd,EAAE4F,SAAW,SAAS9E,EAAGd,GACxB,GAAItB,KAAKiH,IAAI7E,GAAI,OAAOpC,KAAKiB,IAAImB,GACjC,IAAIlB,EAAII,IACR,OAAOtB,KAAK4G,IAAIxE,EAAGlB,GAAIA,GACxBkB,EA/FC,OAkGb,SAASxC,EAAQuH,EAAqBjH,GACrC,aACAA,EAAoBgB,EAAEiG,GACtBjH,EAAoBQ,EAAEyG,EAAqB,gBAAgB,WACvD,OAAOC,KAEXlH,EAAoBQ,EAAEyG,EAAqB,YAAY,WACnD,OAAOE,KAEXnH,EAAoBQ,EAAEyG,EAAqB,aAAa,WACpD,OAAOG,KAEXpH,EAAoBQ,EAAEyG,EAAqB,gBAAgB,WACvD,OAAOI,KAEXrH,EAAoBQ,EAAEyG,EAAqB,qBAAqB,WAC5D,OAAOK,KAEXtH,EAAoBQ,EAAEyG,EAAqB,aAAa,WACpD,OAAOM,KAEXvH,EAAoBQ,EAAEyG,EAAqB,gBAAgB,WACvD,OAAOO,KAEXxH,EAAoBQ,EAAEyG,EAAqB,aAAa,WACpD,OAAOQ,KAEXzH,EAAoBQ,EAAEyG,EAAqB,eAAe,WACtD,OAAOS,KAEX1H,EAAoBQ,EAAEyG,EAAqB,aAAa,WACpD,OAAOU,KAEX3H,EAAoBQ,EAAEyG,EAAqB,SAAS,WAChD,OAAOW,KAEX5H,EAAoBQ,EAAEyG,EAAqB,qBAAqB,WAC5D,OAAOY,KAEX7H,EAAoBQ,EAAEyG,EAAqB,eAAe,WACtD,OAAOa,KAEX9H,EAAoBQ,EAAEyG,EAAqB,gBAAgB,WACvD,OAAOc,KAEX/H,EAAoBQ,EAAEyG,EAAqB,UAAU,WACjD,OAAOe,KAEXhI,EAAoBQ,EAAEyG,EAAqB,kBAAkB,WACzD,OAAOgB,KAEXjI,EAAoBQ,EAAEyG,EAAqB,oBAAoB,WAC3D,OAAOiB,KAEXlI,EAAoBQ,EAAEyG,EAAqB,QAAQ,WAC/C,OAAOkB,KAEXnI,EAAoBQ,EAAEyG,EAAqB,kBAAkB,WACzD,OAAOmB,KAEXpI,EAAoBQ,EAAEyG,EAAqB,cAAc,WACrD,OAAOoB,KAEXrI,EAAoBQ,EAAEyG,EAAqB,gBAAgB,WACvD,OAAOqB,KAEXtI,EAAoBQ,EAAEyG,EAAqB,cAAc,WACrD,OAAOsB,KAEXvI,EAAoBQ,EAAEyG,EAAqB,kBAAkB,WACzD,OAAOuB,KAEXxI,EAAoBQ,EAAEyG,EAAqB,YAAY,WACnD,OAAOwB,KAEXzI,EAAoBQ,EAAEyG,EAAqB,YAAY,WACnD,OAAOyB,KAEX1I,EAAoBQ,EAAEyG,EAAqB,uBAAuB,WAC9D,OAAO0B,KAEX3I,EAAoBQ,EAAEyG,EAAqB,WAAW,WAClD,OAAO2B,MAEX5I,EAAoBQ,EAAEyG,EAAqB,mBAAmB,WAC1D,OAAO4B,MAEX7I,EAAoBQ,EAAEyG,EAAqB,yBAAyB,WAChE,OAAO6B,MAEX9I,EAAoBQ,EAAEyG,EAAqB,aAAa,WACpD,OAAO8B,MAEX/I,EAAoBQ,EAAEyG,EAAqB,sBAAsB,WAC7D,OAAO+B,MAEXhJ,EAAoBQ,EAAEyG,EAAqB,wBAAwB,WAC/D,OAAOgC,MAEXjJ,EAAoBQ,EAAEyG,EAAqB,uBAAuB,WAC9D,OAAOiC,MAEXlJ,EAAoBQ,EAAEyG,EAAqB,cAAc,WACrD,OAAOkC,MAEXnJ,EAAoBQ,EAAEyG,EAAqB,iBAAiB,WACxD,OAAOmC,MAEXpJ,EAAoBQ,EAAEyG,EAAqB,uBAAuB,WAC9D,OAAOoC,MAEXrJ,EAAoBQ,EAAEyG,EAAqB,eAAe,WACtD,OAAOqC,MAEXtJ,EAAoBQ,EAAEyG,EAAqB,eAAe,WACtD,OAAOsC,MAEXvJ,EAAoBQ,EAAEyG,EAAqB,aAAa,WACpD,OAAOuC,MAEXxJ,EAAoBQ,EAAEyG,EAAqB,YAAY,WACnD,OAAOwC,MAEXzJ,EAAoBQ,EAAEyG,EAAqB,mBAAmB,WAC1D,OAAOyC,MAEX1J,EAAoBQ,EAAEyG,EAAqB,oBAAoB,WAC3D,OAAO0C,MAEX3J,EAAoBQ,EAAEyG,EAAqB,kBAAkB,WACzD,OAAO2C,MAEX5J,EAAoBQ,EAAEyG,EAAqB,qBAAqB,WAC5D,OAAO4C,MAEX7J,EAAoBQ,EAAEyG,EAAqB,qBAAqB,WAC5D,OAAO6C,MAEX9J,EAAoBQ,EAAEyG,EAAqB,cAAc,WACrD,OAAO8C,MAEX/J,EAAoBQ,EAAEyG,EAAqB,aAAa,WACpD,OAAO+C,MAEXhK,EAAoBQ,EAAEyG,EAAqB,oBAAoB,WAC3D,OAAOgD,MAEXjK,EAAoBQ,EAAEyG,EAAqB,WAAW,WAClD,OAAOiD,MAEXlK,EAAoBQ,EAAEyG,EAAqB,aAAa,WACpD,OAAOkD,MAEXnK,EAAoBQ,EAAEyG,EAAqB,yBAAyB,WAChE,OAAOmD,MAEXpK,EAAoBQ,EAAEyG,EAAqB,qBAAqB,WAC5D,OAAOoD,MAEXrK,EAAoBQ,EAAEyG,EAAqB,eAAe,WACtD,OAAOqD,MAEXtK,EAAoBQ,EAAEyG,EAAqB,aAAa,WACpD,OAAOsD,MAEXvK,EAAoBQ,EAAEyG,EAAqB,kBAAkB,WACzD,OAAOuD,MAEXxK,EAAoBQ,EAAEyG,EAAqB,cAAc,WACrD,OAAOwD,MAEXzK,EAAoBQ,EAAEyG,EAAqB,gBAAgB,WACvD,OAAOyD,MAEX1K,EAAoBQ,EAAEyG,EAAqB,kBAAkB,WACzD,OAAO0D,MAEX3K,EAAoBQ,EAAEyG,EAAqB,SAAS,WAChD,OAAO2D,MAEX5K,EAAoBQ,EAAEyG,EAAqB,iBAAiB,WACxD,OAAO4D,MAEX7K,EAAoBQ,EAAEyG,EAAqB,wBAAwB,WAC/D,OAAO6D,MAEX9K,EAAoBQ,EAAEyG,EAAqB,YAAY,WACnD,OAAO8D,MAEX/K,EAAoBQ,EAAEyG,EAAqB,kBAAkB,WACzD,OAAO+D,MAEXhL,EAAoBQ,EAAEyG,EAAqB,oBAAoB,WAC3D,OAAOgE,MAEXjL,EAAoBQ,EAAEyG,EAAqB,iBAAiB,WACxD,OAAOiE,MAEXlL,EAAoBQ,EAAEyG,EAAqB,UAAU,WACjD,OAAOkE,MAEXnL,EAAoBQ,EAAEyG,EAAqB,oBAAoB,WAC3D,OAAOmE,MAEXpL,EAAoBQ,EAAEyG,EAAqB,cAAc,WACrD,OAAOoE,MAEXrL,EAAoBQ,EAAEyG,EAAqB,gBAAgB,WACvD,OAAOqE,MAEXtL,EAAoBQ,EAAEyG,EAAqB,WAAW,WAClD,OAAOsE,MAEXvL,EAAoBQ,EAAEyG,EAAqB,sBAAsB,WAC7D,OAAOuE,MAEXxL,EAAoBQ,EAAEyG,EAAqB,wBAAwB,WAC/D,OAAOwE,MAEXzL,EAAoBQ,EAAEyG,EAAqB,eAAe,WACtD,OAAOyE,MAEX1L,EAAoBQ,EAAEyG,EAAqB,eAAe,WACtD,OAAO0E,MAEX3L,EAAoBQ,EAAEyG,EAAqB,kBAAkB,WACzD,OAAO2E,MAEX5L,EAAoBQ,EAAEyG,EAAqB,kBAAkB,WACzD,OAAO4E,MAEX7L,EAAoBQ,EAAEyG,EAAqB,kBAAkB,WACzD,OAAO6E,MAEX9L,EAAoBQ,EAAEyG,EAAqB,YAAY,WACnD,OAAO8E,MAEX/L,EAAoBQ,EAAEyG,EAAqB,eAAe,WACtD,OAAO+E,MAEXhM,EAAoBQ,EAAEyG,EAAqB,mBAAmB,WAC1D,OAAOgF,MAEXjM,EAAoBQ,EAAEyG,EAAqB,wBAAwB,WAC/D,OAAOiF,MAEXlM,EAAoBQ,EAAEyG,EAAqB,cAAc,WACrD,OAAOkF,MAEXnM,EAAoBQ,EAAEyG,EAAqB,YAAY,WACnD,OAAOmF,MAEXpM,EAAoBQ,EAAEyG,EAAqB,uBAAuB,WAC9D,OAAOoF,MAEXrM,EAAoBQ,EAAEyG,EAAqB,mBAAmB,WAC1D,OAAOqF,MAEXtM,EAAoBQ,EAAEyG,EAAqB,iBAAiB,WACxD,OAAOsF,MAEXvM,EAAoBQ,EAAEyG,EAAqB,iBAAiB,WACxD,OAAOuF,MAEXxM,EAAoBQ,EAAEyG,EAAqB,oBAAoB,WAC3D,OAAOwF,MAEXzM,EAAoBQ,EAAEyG,EAAqB,qBAAqB,WAC5D,OAAOyF,MAEX1M,EAAoBQ,EAAEyG,EAAqB,iBAAiB,WACxD,OAAO0F,MAEX3M,EAAoBQ,EAAEyG,EAAqB,oBAAoB,WAC3D,OAAO2F,MAEX5M,EAAoBQ,EAAEyG,EAAqB,uBAAuB,WAC9D,OAAO4F,MAEX7M,EAAoBQ,EAAEyG,EAAqB,cAAc,WACrD,OAAO6F,MAEX9M,EAAoBQ,EAAEyG,EAAqB,cAAc,WACrD,OAAO8F,MAEX/M,EAAoBQ,EAAEyG,EAAqB,sBAAsB,WAC7D,OAAO+F,MAEXhN,EAAoBQ,EAAEyG,EAAqB,cAAc,WACrD,OAAOgG,MAEXjN,EAAoBQ,EAAEyG,EAAqB,mBAAmB,WAC1D,OAAOiG,KAEXlN,EAAoBQ,EAAEyG,EAAqB,mBAAmB,WAC1D,OAAOkG,KAEXnN,EAAoBQ,EAAEyG,EAAqB,gBAAgB,WACvD,OAAOmG,MAEXpN,EAAoBQ,EAAEyG,EAAqB,gBAAgB,WACvD,OAAOoG,MAEXrN,EAAoBQ,EAAEyG,EAAqB,YAAY,WACnD,OAAOqG,MAEXtN,EAAoBQ,EAAEyG,EAAqB,aAAa,WACpD,OAAOsG,MAEXvN,EAAoBQ,EAAEyG,EAAqB,eAAe,WACtD,OAAOuG,MAEXxN,EAAoBQ,EAAEyG,EAAqB,kBAAkB,WACzD,OAAOwG,MAEXzN,EAAoBQ,EAAEyG,EAAqB,WAAW,WAClD,OAAOyG,MAEX1N,EAAoBQ,EAAEyG,EAAqB,mBAAmB,WAC1D,OAAO0G,MAEX3N,EAAoBQ,EAAEyG,EAAqB,kBAAkB,WACzD,OAAO2G,MAEX5N,EAAoBQ,EAAEyG,EAAqB,aAAa,WACpD,OAAO4G,MAEX7N,EAAoBQ,EAAEyG,EAAqB,iBAAiB,WACxD,OAAO6G,MAEX9N,EAAoBQ,EAAEyG,EAAqB,QAAQ,WAC/C,OAAO8G,MAEX/N,EAAoBQ,EAAEyG,EAAqB,QAAQ,WAC/C,OAAO+G,MAEXhO,EAAoBQ,EAAEyG,EAAqB,WAAW,WAClD,OAAOgH,MAEXjO,EAAoBQ,EAAEyG,EAAqB,cAAc,WACrD,OAAOiH,MAEXlO,EAAoBQ,EAAEyG,EAAqB,SAAS,WAChD,OAAOkH,MAEXnO,EAAoBQ,EAAEyG,EAAqB,YAAY,WACnD,OAAOmH,MAEXpO,EAAoBQ,EAAEyG,EAAqB,kBAAkB,WACzD,OAAOoH,MAEXrO,EAAoBQ,EAAEyG,EAAqB,yBAAyB,WAChE,OAAOqH,MAEXtO,EAAoBQ,EAAEyG,EAAqB,aAAa,WACpD,OAAOsH,MAEXvO,EAAoBQ,EAAEyG,EAAqB,iBAAiB,WACxD,OAAOuH,MAEXxO,EAAoBQ,EAAEyG,EAAqB,eAAe,WACtD,OAAOwH,MAEXzO,EAAoBQ,EAAEyG,EAAqB,UAAU,WACjD,OAAOyH,MAEX1O,EAAoBQ,EAAEyG,EAAqB,UAAU,WACjD,OAAO0H,MAEX3O,EAAoBQ,EAAEyG,EAAqB,kBAAkB,WACzD,OAAO2H,MAEX5O,EAAoBQ,EAAEyG,EAAqB,QAAQ,WAC/C,OAAO4H,MAEX7O,EAAoBQ,EAAEyG,EAAqB,OAAO,WAC9C,OAAO6H,MAEX9O,EAAoBQ,EAAEyG,EAAqB,OAAO,WAC9C,OAAO8H,MAEX/O,EAAoBQ,EAAEyG,EAAqB,WAAW,WAClD,OAAO+H,MAEXhP,EAAoBQ,EAAEyG,EAAqB,YAAY,WACnD,OAAOgI,MAEXjP,EAAoBQ,EAAEyG,EAAqB,eAAe,WACtD,OAAOiI,MAEXlP,EAAoBQ,EAAEyG,EAAqB,aAAa,WACpD,OAAOkI,MAEXnP,EAAoBQ,EAAEyG,EAAqB,YAAY,WACnD,OAAOmI,MAEXpP,EAAoBQ,EAAEyG,EAAqB,iBAAiB,WACxD,OAAOoI,MAEXrP,EAAoBQ,EAAEyG,EAAqB,mBAAmB,WAC1D,OAAOqI,MAEXtP,EAAoBQ,EAAEyG,EAAqB,gBAAgB,WACvD,OAAOsI,MAEXvP,EAAoBQ,EAAEyG,EAAqB,aAAa,WACpD,OAAOuI,MAEXxP,EAAoBQ,EAAEyG,EAAqB,WAAW,WAClD,OAAOwI,MAEXzP,EAAoBQ,EAAEyG,EAAqB,sBAAsB,WAC7D,OAAOyI,MAEX1P,EAAoBQ,EAAEyG,EAAqB,wBAAwB,WAC/D,OAAO0I,MAEX3P,EAAoBQ,EAAEyG,EAAqB,UAAU,WACjD,OAAO2I,MAEX5P,EAAoBQ,EAAEyG,EAAqB,YAAY,WACnD,OAAO4I,MAEX7P,EAAoBQ,EAAEyG,EAAqB,gBAAgB,WACvD,OAAO6I,MAEX9P,EAAoBQ,EAAEyG,EAAqB,oBAAoB,WAC3D,OAAO8I,MAEX/P,EAAoBQ,EAAEyG,EAAqB,oBAAoB,WAC3D,OAAO+I,MAEXhQ,EAAoBQ,EAAEyG,EAAqB,yBAAyB,WAChE,OAAOgJ,MAEXjQ,EAAoBQ,EAAEyG,EAAqB,OAAO,WAC9C,OAAOiJ,MAEXlQ,EAAoBQ,EAAEyG,EAAqB,eAAe,WACtD,OAAOkJ,MAEXnQ,EAAoBQ,EAAEyG,EAAqB,kBAAkB,WACzD,OAAOmJ,MAEXpQ,EAAoBQ,EAAEyG,EAAqB,aAAa,WACpD,OAAOoJ,MAEXrQ,EAAoBQ,EAAEyG,EAAqB,YAAY,WACnD,OAAOqJ,MAEXtQ,EAAoBQ,EAAEyG,EAAqB,kBAAkB,WACzD,OAAOsJ,MAEXvQ,EAAoBQ,EAAEyG,EAAqB,iBAAiB,WACxD,OAAOuJ,MAEXxQ,EAAoBQ,EAAEyG,EAAqB,iBAAiB,WACxD,OAAOwJ,MAEXzQ,EAAoBQ,EAAEyG,EAAqB,YAAY,WACnD,OAAOyJ,MAEX1Q,EAAoBQ,EAAEyG,EAAqB,SAAS,WAChD,OAAO0J,MAEX3Q,EAAoBQ,EAAEyG,EAAqB,YAAY,WACnD,OAAO2J,MAEX5Q,EAAoBQ,EAAEyG,EAAqB,aAAa,WACpD,OAAO4J,MAEX7Q,EAAoBQ,EAAEyG,EAAqB,SAAS,WAChD,OAAO6J,MAEX9Q,EAAoBQ,EAAEyG,EAAqB,YAAY,WACnD,OAAO8J,MAEX/Q,EAAoBQ,EAAEyG,EAAqB,WAAW,WAClD,OAAO+J,MAEXhR,EAAoBQ,EAAEyG,EAAqB,kBAAkB,WACzD,OAAOgK,MAEXjR,EAAoBQ,EAAEyG,EAAqB,yBAAyB,WAChE,OAAOiK,MAEXlR,EAAoBQ,EAAEyG,EAAqB,YAAY,WACnD,OAAOD,MAEXhH,EAAoBQ,EAAEyG,EAAqB,WAAW,WAClD,OAAOkK,MAEXnR,EAAoBQ,EAAEyG,EAAqB,YAAY,WACnD,OAAOmK,MAEXpR,EAAoBQ,EAAEyG,EAAqB,mBAAmB,WAC1D,OAAOoK,MAEXrR,EAAoBQ,EAAEyG,EAAqB,gBAAgB,WACvD,OAAOqK,MAEXtR,EAAoBQ,EAAEyG,EAAqB,UAAU,WACjD,OAAOsK,MAEXvR,EAAoBQ,EAAEyG,EAAqB,YAAY,WACnD,OAAOuK,MAEXxR,EAAoBQ,EAAEyG,EAAqB,gBAAgB,WACvD,OAAOwK,MAEXzR,EAAoBQ,EAAEyG,EAAqB,mBAAmB,WAC1D,OAAOyK,MAEX1R,EAAoBQ,EAAEyG,EAAqB,WAAW,WAClD,OAAO0K,MAEX3R,EAAoBQ,EAAEyG,EAAqB,oBAAoB,WAC3D,OAAO2K,MAEX5R,EAAoBQ,EAAEyG,EAAqB,SAAS,WAChD,OAAO4K,MAEX7R,EAAoBQ,EAAEyG,EAAqB,YAAY,WACnD,OAAO6K,MAEX9R,EAAoBQ,EAAEyG,EAAqB,WAAW,WAClD,OAAO8K,MAEX/R,EAAoBQ,EAAEyG,EAAqB,UAAU,WACjD,OAAO+K,MAEXhS,EAAoBQ,EAAEyG,EAAqB,QAAQ,WAC/C,OAAOgL,MAEXjS,EAAoBQ,EAAEyG,EAAqB,SAAS,WAChD,OAAOiL,MAEXlS,EAAoBQ,EAAEyG,EAAqB,QAAQ,WAC/C,OAAOkL,MAEXnS,EAAoBQ,EAAEyG,EAAqB,SAAS,WAChD,OAAOmL,MAEXpS,EAAoBQ,EAAEyG,EAAqB,UAAU,WACjD,OAAOoL,MAEXrS,EAAoBQ,EAAEyG,EAAqB,sBAAsB,WAC7D,OAAOqL,MAEXtS,EAAoBQ,EAAEyG,EAAqB,eAAe,WACtD,OAAOsL,MAEXvS,EAAoBQ,EAAEyG,EAAqB,aAAa,WACpD,OAAOuL,MAEXxS,EAAoBQ,EAAEyG,EAAqB,cAAc,WACrD,OAAOwL,MAEXzS,EAAoBQ,EAAEyG,EAAqB,mBAAmB,WAC1D,OAAOyL,MAEX1S,EAAoBQ,EAAEyG,EAAqB,4BAA4B,WACnE,OAAO0L,KAEX,IAAIA,EAA2B,CAC3BC,IAAK,CACDC,OAAQ,oBACRC,gBAAiB,CAAE,IAAK,IAAK,IAAK,KAClCC,WAAY,CACRC,KAAM,CAAE,IAAK,IAAK,IAAK,KACvBC,KAAM,CAAE,IAAK,IAAK,IAAK,KACvBC,IAAK,CAAE,IAAK,IAAK,IAAK,KACtBC,KAAM,CAAE,IAAK,IAAK,IAAK,KACvBC,EAAG,CAAE,IAAK,IAAK,KACfC,IAAK,CAAE,IAAK,KACZC,EAAG,CAAE,IAAK,MAEdC,YAAa,CACTH,EAAG,CAAE,KACLC,IAAK,CAAE,IAAK,KACZC,EAAG,CAAE,IAAK,OAGlBE,IAAK,CACDX,OAAQ,yDACRC,gBAAiB,CAAE,IAAK,IAAK,IAAK,KAClCC,WAAY,CACRC,KAAM,CAAE,IAAK,IAAK,IAAK,KACvBC,KAAM,CAAE,IAAK,IAAK,IAAK,KACvBC,IAAK,CAAE,IAAK,IAAK,KACjBC,KAAM,CAAE,IAAK,IAAK,IAAK,KACvBC,EAAG,CAAE,IAAK,IAAK,IAAK,KACpBC,IAAK,CAAE,IAAK,IAAK,IAAK,KACtBC,EAAG,CAAE,IAAK,IAAK,MAEnBC,YAAa,CACTL,IAAK,CAAE,KACPI,EAAG,CAAE,OAGbG,IAAK,CACDZ,OAAQ,2BACRC,gBAAiB,CAAE,IAAK,IAAK,IAAK,KAClCC,WAAY,CACRC,KAAM,CAAE,IAAK,IAAK,KAClBC,KAAM,CAAE,IAAK,IAAK,IAAK,KACvBC,IAAK,CAAE,IAAK,IAAK,KACjBC,KAAM,CAAE,IAAK,IAAK,IAAK,KACvBC,EAAG,CAAE,IAAK,IAAK,KACfC,IAAK,CAAE,IAAK,KACZC,EAAG,CAAE,IAAK,IAAK,IAAK,MAExBC,YAAa,CACTP,KAAM,CAAE,KACRE,IAAK,CAAE,KACPE,EAAG,CAAE,KACLC,IAAK,CAAE,IAAK,KACZC,EAAG,CAAE,OAGbI,IAAK,CACDb,OAAQ,qDACRC,gBAAiB,CAAE,IAAK,IAAK,IAAK,KAClCC,WAAY,CACRC,KAAM,CAAE,IAAK,IAAK,IAAK,KACvBC,KAAM,CAAE,IAAK,IAAK,IAAK,KACvBC,IAAK,CAAE,IAAK,IAAK,IAAK,KACtBC,KAAM,CAAE,IAAK,IAAK,KAClBC,EAAG,CAAE,IAAK,IAAK,IAAK,KACpBC,IAAK,CAAE,IAAK,IAAK,IAAK,KACtBC,EAAG,CAAE,IAAK,MAEdC,YAAa,CACTJ,KAAM,CAAE,KACRG,EAAG,CAAE,IAAK,OAGlBK,IAAK,CACDd,OAAQ,8DACRC,gBAAiB,CAAE,IAAK,IAAK,IAAK,KAClCC,WAAY,CACRC,KAAM,CAAE,IAAK,IAAK,IAAK,KACvBC,KAAM,CAAE,IAAK,IAAK,IAAK,KACvBC,IAAK,CAAE,IAAK,IAAK,KACjBC,KAAM,CAAE,IAAK,IAAK,IAAK,KACvBC,EAAG,CAAE,IAAK,IAAK,KACfC,IAAK,CAAE,IAAK,IAAK,IAAK,KACtBC,EAAG,CAAE,IAAK,IAAK,MAEnBC,YAAa,CACTL,IAAK,CAAE,KACPE,EAAG,CAAE,KACLE,EAAG,CAAE,OAGbM,IAAK,CACDf,OAAQ,uDACRC,gBAAiB,CAAE,IAAK,IAAK,IAAK,KAClCC,WAAY,CACRC,KAAM,CAAE,IAAK,IAAK,IAAK,KACvBC,KAAM,CAAE,IAAK,IAAK,IAAK,KACvBC,IAAK,CAAE,IAAK,IAAK,KACjBC,KAAM,CAAE,IAAK,IAAK,KAClBC,EAAG,CAAE,IAAK,IAAK,IAAK,KACpBC,IAAK,CAAE,IAAK,IAAK,KACjBC,EAAG,CAAE,IAAK,IAAK,MAEnBC,YAAa,CACTL,IAAK,CAAE,KACPC,KAAM,CAAE,KACRE,IAAK,CAAE,KACPC,EAAG,CAAE,QAIjB,SAASpM,IACL,OAAO7E,OAAOwR,UAAUC,eAAiBzR,OAAOwR,UAAUE,UAE9D,SAAS5M,EAAS4M,GAEd,YADA,IAAWA,IAAcA,EAAY7M,OAC5B6M,EAAU5F,MAAM,wGAE7B,SAAS/G,IACL,IAAI2M,EAAY7M,IAChB,MAAO,qEAAqE8M,KAAKD,IAAc,SAASC,KAAKD,IAAc,gCAAgCC,KAAKD,GAEpK,SAAS1M,IACL,OAAO,IAAOhF,OAAOwR,UAAUI,YAAc5R,OAAO6R,WAAW,8BAA8BC,QAEjG,SAAS7M,EAAkB8M,GAEvB,YADA,IAAWA,IAAOA,EAAKlN,KAChB,OAAO8M,KAAKI,IAAO,OAAOJ,KAAKI,GAE1C,SAAS7M,EAAU6M,GAEf,YADA,IAAWA,IAAOA,EAAKlN,KAChB,WAAW8M,KAAKI,GAE3B,SAAS5M,EAAa4M,GAElB,YADA,IAAWA,IAAOA,EAAKlN,KAChB,SAAS8M,KAAKI,GAEzB,SAAS3M,EAAU2M,GAEf,YADA,IAAWA,IAAOA,EAAKlN,KAChB,UAAU8M,KAAKI,GAE1B,SAAS1M,EAAY0M,GAEjB,YADA,IAAWA,IAAOA,EAAKlN,KAChB,cAAc8M,KAAKI,GAE9B,SAASzM,EAAUyM,GAEf,YADA,IAAWA,IAAOA,EAAKlN,KAChB,UAAU8M,KAAKI,GAE1B,SAASxM,EAAMwM,GAEX,YADA,IAAWA,IAAOA,EAAKlN,KAChB,mBAAmB8M,KAAKI,GAEnC,SAASvM,EAAkBuM,GAEvB,YADA,IAAWA,IAAOA,EAAKlN,KAChB,UAAU8M,KAAKI,GAE1B,SAAStM,EAAYsM,GAEjB,YADA,IAAWA,IAAOA,EAAKlN,KAChB,YAAY8M,KAAKI,GAE5B,SAASrM,EAAaqM,GAElB,YADA,IAAWA,IAAOA,EAAKlN,OACdU,EAAMwM,OAAUvM,EAAkBuM,IAAO,wCAAwCJ,KAAKI,IAEnG,SAASpM,EAAOoM,GAEZ,QADA,IAAWA,IAAOA,EAAKlN,KACnBU,EAAMwM,GAAK,CACX,IAAIvB,EAASF,EAAyBtQ,OAAOgS,aAC7C,IAAKxB,EAAQ,OAAO,EACpB,IAAIyB,EAASjS,OAAOkS,YAChBC,EAAQlO,KAAKmO,MAAMpS,OAAOqS,OAAOC,MAAQtS,OAAOuS,WAAa,KAAO,IACpEC,EAAiBvO,KAAKmO,MAAMH,EAASE,GACzC,OAAOA,EAAQ,GAAK3B,EAAOE,WAAWyB,IAAU,IAAM3B,EAAOE,WAAWyB,GAAO9Q,QAAQmR,IAAmB,IAAMhC,EAAOC,gBAAgBpP,QAAQmR,GAEnJ,OAAO,EAEX,SAAS5M,EAAemM,GAEpB,QADA,IAAWA,IAAOA,EAAKlN,KACnBU,EAAMwM,GAAK,CACX,IAAIU,EAAO9M,EAAOoM,GACdvB,EAASF,EAAyBtQ,OAAOgS,aAC7C,IAAKxB,EAAQ,OAAO,EACpB,IAAIyB,EAASjS,OAAOkS,YAChBC,EAAQlO,KAAKmO,MAAMpS,OAAOqS,OAAOC,MAAQtS,OAAOuS,WAAa,KAAO,IACpEC,EAAiBvO,KAAKmO,MAAMH,EAASE,GACrCO,EAAsBlC,EAAOU,YAC7BA,GAAc,EAElB,OADAiB,EAAQ,GAAKO,EAAoBP,KAAW,IAAMO,EAAoBP,GAAO9Q,QAAQmR,KAAoBtB,GAAc,GAChHuB,GAAQvB,EAEnB,OAAO,EAEX,SAASrL,EAAiBkM,GAEtB,YADA,IAAWA,IAAOA,EAAKlN,OACdS,EAAUyM,IAAO,kBAAkBJ,KAAKI,KAAQ1M,EAAY0M,GAEzE,SAASjM,IACL,QAAS9F,OAAO2S,SAASC,cAAgBC,QAAQ7S,OAAOwR,WAAaxR,OAAOwR,UAAUE,WAAa,mBAAmBC,KAAK3R,OAAOwR,UAAUE,YAEhJ,SAAS3L,IACL,IAAI+M,EAAQ9S,OAAO2S,SAASI,cAAc,sCACtCC,EAAWhT,OAAO2S,SAASI,cAAc,2BAC7C,SAAUD,IAAUE,GAExB,SAAShN,IACL,QAAS,oBAAsBiN,UAAYA,QAAQC,WAAaD,QAAQC,SAASC,UAErF,SAASlN,IACL,GAAIjG,OAAO2S,SAASC,aAAc,IAC9B,IAAIQ,EAASpT,OAAOoT,OAEpB,OADApT,OAAOoT,OAAS,mBACZ,qBAAuBpT,OAAOoT,SAC9BpT,OAAOoT,OAASA,GACT,GAGb,MAAOC,GACL,OAAO,EAEX,OAAO,EAEX,SAASnN,IACL,IAAIwL,EAAY7M,IAChB,MAAO,sCAAsC8M,KAAKD,GAEtD,SAASvL,EAAe4L,GAEpB,YADA,IAAWA,IAAOA,EAAKlN,OACda,EAAaqM,IAAOlM,EAAiBkM,IAAO1M,EAAY0M,IAAO5M,EAAa4M,IAAO3M,EAAU2M,IAAO9M,EAAkB8M,IAAOtM,EAAYsM,IAAO/L,KAAgBE,KAAgBlB,KAE7L,SAASoB,EAAS2L,GAEd,YADA,IAAWA,IAAOA,EAAKlN,KAChB,wBAAwB8M,KAAKI,GAExC,SAAS1L,EAAS0L,GAEd,YADA,IAAWA,IAAOA,EAAKlN,KAChB,SAAS8M,KAAKI,KAAQ3L,EAAS2L,GAE1C,SAASzL,IACL,IACI,GAAItG,OAAOsT,iBAAmBtT,OAAOsT,gBAAgBC,gBAAgB,IAAMvT,OAAOsT,gBAAgBE,kBAAmB,OAAO,EAC9H,MAAO3T,GACL,OAAO,EAEX,OAAO,EAEX,SAAS4T,EAAgBnV,EAAGoB,GACxB,OAAQ+T,EAAkBlV,OAAOmV,gBAAkB,SAASpV,EAAGoB,GAE3D,OADApB,EAAEqV,UAAYjU,EACPpB,IACRA,EAAGoB,GAEV,SAASkU,EAAeC,EAAUC,GAC9BD,EAAS5S,UAAY1C,OAAOY,OAAO2U,EAAW7S,WAC9C4S,EAAS5S,UAAUf,YAAc2T,EACjCJ,EAAgBI,EAAUC,GAE9B,SAASC,IACL,OAAQA,EAAWxV,OAAOyV,QAAU,SAASC,GACzC,IAAK,IAAIpW,EAAI,EAAGA,EAAIqW,UAAU3S,OAAQ1D,IAAK,CACvC,IAAIsW,EAASD,UAAUrW,GACvB,IAAK,IAAIuB,KAAO+U,GAAQ,IAAK1U,eAAezB,KAAKmW,EAAQ/U,KAAS6U,EAAO7U,GAAO+U,EAAO/U,IAE3F,OAAO6U,IACRvR,MAAMjF,KAAMyW,WAEnB,IAAIE,EAAgBzW,EAAoB,GACpC0W,EAAsB,mCAC1B,SAASC,EAAgBC,GAErB,YADA,IAAWA,IAAQA,EAAMvU,QAClB,WAAauU,EAAIzR,SAASC,SAErC,SAASyR,EAAkBD,GACvB,IACI,OAAO,EACT,MAAOlB,IACT,OAAO,EAEX,SAASoB,EAAgBF,QACrB,IAAWA,IAAQA,EAAMvU,QACzB,IAAI8C,EAAWyR,EAAIzR,SACnB,IAAKA,EAAU,MAAM,IAAI5B,MAAM,gCAC/B,IAAI6B,EAAWD,EAASC,SACxB,IAAKA,EAAU,MAAM,IAAI7B,MAAM,gCAC/B,GAAI,UAAY6B,EAAU,MAAO,UACjC,GAAI,WAAaA,EAAU,CACvB,IAAIC,EAAS,SAASuR,GAElB,QADA,IAAWA,IAAQA,EAAMvU,QACrBuU,EAAK,IACL,GAAIA,EAAIvR,QAAUuR,EAAIvR,SAAWuR,EAAK,OAAOA,EAAIvR,OACnD,MAAOqQ,KAJA,CAKXkB,GACF,OAAOvR,GAAUwR,IAAsBC,EAAgBzR,GAAU,WAErE,IAAIC,EAAOH,EAASG,KACpB,IAAKA,EAAM,MAAM,IAAI/B,MAAM,4BAC3B,OAAO6B,EAAW,KAAOE,EAE7B,SAASyR,EAAUH,QACf,IAAWA,IAAQA,EAAMvU,QACzB,IAAI2U,EAASF,EAAgBF,GAC7B,OAAOI,GAAUJ,EAAIrR,YAAc,IAAMqR,EAAIrR,WAAW7B,QAAQ,SAAWkT,EAAIrR,WAAayR,EAEhG,SAASC,EAAaL,GAClB,IAAK,SAASA,GACV,IACI,GAAIA,IAAQvU,OAAQ,OAAO,EAC7B,MAAOqT,IACT,IACI,IAAIwB,EAAOtW,OAAO8E,yBAAyBkR,EAAK,YAChD,GAAIM,IAAQ,IAAOA,EAAKpW,WAAY,OAAO,EAC7C,MAAO4U,IACT,IACI,GAAIiB,EAAgBC,IAAQC,IAAqB,OAAO,EAC1D,MAAOnB,IACT,IACI,GAAIoB,EAAgBF,KAASE,EAAgBzU,QAAS,OAAO,EAC/D,MAAOqT,IACT,OAAO,EAdN,CAeHkB,GAAM,OAAO,EACf,IACI,GAAIA,IAAQvU,OAAQ,OAAO,EAC3B,GAAIsU,EAAgBC,IAAQC,IAAqB,OAAO,EACxD,GAAIE,EAAU1U,UAAY0U,EAAUH,GAAM,OAAO,EACnD,MAAOlB,IACT,OAAO,EAEX,IAAIyB,EAAgB,GAChBC,EAAe,GACnB,SAASC,EAAeT,EAAKU,QACzB,IAAWA,IAAcA,GAAY,GACrC,IACI,GAAIV,IAAQvU,OAAQ,OAAO,EAC7B,MAAOqT,GACL,OAAO,EAEX,IACI,IAAKkB,EAAK,OAAO,EACnB,MAAOlB,GACL,OAAO,EAEX,IACI,GAAIkB,EAAIpR,OAAQ,OAAO,EACzB,MAAOkQ,GACL,OAAQA,GAAOA,EAAIjQ,UAAYiR,EAEnC,GAAIY,GAAaL,EAAaL,GAAM,IAChC,GAAIA,EAAIjR,WAAY,OAAO,EAC7B,MAAO+P,IACT,IACI,IAAKkB,EAAIvR,SAAWuR,EAAIhR,IAAK,OAAO,EACtC,MAAO8P,IACT,IAAI6B,EAAc,SAASC,EAAYC,GACnC,IAAK,IAAIvX,EAAI,EAAGA,EAAIsX,EAAW5T,OAAQ1D,IAAK,IACxC,GAAIsX,EAAWtX,KAAOuX,EAAM,OAAOvX,EACrC,MAAOwV,IACT,OAAQ,EAJM,CAKhByB,EAAeP,GACjB,IAAK,IAAMW,EAAa,CACpB,IAAIG,EAAQN,EAAaG,GACzB,GAAIG,GAAS,SAASA,GAClB,IAAKA,EAAM7R,cAAe,OAAO,EACjC,IAAK6R,EAAM5R,WAAY,OAAO,EAC9B,IAAI6R,EAAMD,EAAM3R,cAChB,GAAI4R,GAAOA,EAAI3R,kBAAoB2R,EAAI3R,gBAAgBC,SAASyR,GAAQ,CAEpE,IADA,IAAIrS,EAASqS,EACPrS,EAAOS,YAAcT,EAAOS,aAAeT,GAAUA,EAASA,EAAOS,WAC3E,IAAKT,EAAOC,OAASqS,EAAI3R,gBAAgBC,SAASZ,EAAOC,MAAO,OAAO,EAE3E,OAAO,EATE,CAUXoS,GAAQ,OAAO,EAErB,OAAO,EAEX,SAASE,EAASC,GACd,IACI,GAAIA,IAAQxV,OAAQ,OAAO,EAC7B,MAAOqT,GACL,GAAIA,GAAOA,EAAIjQ,UAAYiR,EAAqB,OAAO,EAE3D,IACI,GAAI,oBAAsB,GAAGlU,SAASnC,KAAKwX,GAAM,OAAO,EAC1D,MAAOnC,GACL,GAAIA,GAAOA,EAAIjQ,UAAYiR,EAAqB,OAAO,EAE3D,IACI,GAAIrU,OAAOC,QAAUuV,aAAexV,OAAOC,OAAQ,OAAO,EAC5D,MAAOoT,GACL,GAAIA,GAAOA,EAAIjQ,UAAYiR,EAAqB,OAAO,EAE3D,IACI,GAAImB,GAAOA,EAAIhY,OAASgY,EAAK,OAAO,EACtC,MAAOnC,GACL,GAAIA,GAAOA,EAAIjQ,UAAYiR,EAAqB,OAAO,EAE3D,IACI,GAAImB,GAAOA,EAAIxS,SAAWwS,EAAK,OAAO,EACxC,MAAOnC,GACL,GAAIA,GAAOA,EAAIjQ,UAAYiR,EAAqB,OAAO,EAE3D,IACI,GAAImB,GAAOA,EAAIjS,MAAQiS,EAAK,OAAO,EACrC,MAAOnC,GACL,GAAIA,GAAOA,EAAIjQ,UAAYiR,EAAqB,OAAO,EAE3D,IACI,GAAImB,GAAO,uBAAyBA,EAAI3R,oCAAqC,OAAO,EACtF,MAAOwP,GACL,OAAO,EAEX,IACI,GAAI,gBAAiBmC,GAAO,SAAUA,GAAO,aAAcA,EAAK,OAAO,EACzE,MAAOnC,IACT,OAAO,EAEX,IAAIoC,EAA4B9X,EAAoB,GACpD,SAAS+X,EAAgBpX,GACrB,OAAQoX,EAAkBnX,OAAOmV,eAAiBnV,OAAOoX,eAAiB,SAASrX,GAC/E,OAAOA,EAAEqV,WAAapV,OAAOoX,eAAerX,KAC7CA,GAEP,SAASsX,IACL,GAAI,oBAAsBC,UAAYA,QAAQC,UAAW,OAAO,EAChE,GAAID,QAAQC,UAAUC,KAAM,OAAO,EACnC,GAAI,mBAAqBC,MAAO,OAAO,EACvC,IAEI,OADAC,KAAKhV,UAAUd,SAASnC,KAAK6X,QAAQC,UAAUG,KAAM,IAAI,iBAClD,EACT,MAAOpW,GACL,OAAO,GAGf,SAASqW,EAAoBC,EAAQC,EAAMC,GACvC,OAAQH,EAAsBN,IAA8BC,QAAQC,UAAY,SAASK,EAAQC,EAAMC,GACnG,IAAI7V,EAAI,CAAE,MACVA,EAAEc,KAAKoB,MAAMlC,EAAG4V,GAChB,IAAIE,EAAW,IAAKC,SAASlX,KAAKqD,MAAMyT,EAAQ3V,IAEhD,OADA6V,GAAS5C,EAAgB6C,EAAUD,EAAMpV,WAClCqV,IACR5T,MAAM,KAAMwR,WAEnB,SAASsC,EAAgCH,GACrC,IAAII,EAAS,mBAAqBC,IAAM,IAAIA,SAAM,EAClD,OAAQF,EAAkC,SAASH,GAC/C,GAAI,OAASA,IAAwB,IAAME,SAASpW,SAASnC,KAAhCqY,GAAyChV,QAAQ,iBAAmB,OAAOgV,EAExG,GAAI,mBAAqBA,EAAO,MAAM,IAAIlU,UAAU,sDACpD,QAAI,IAAWsU,EAAQ,CACnB,GAAIA,EAAO/R,IAAI2R,GAAQ,OAAOI,EAAO/X,IAAI2X,GACzCI,EAAOpS,IAAIgS,EAAOM,GAEtB,SAASA,IACL,OAAOT,EAAoBG,EAAOnC,UAAWwB,EAAgBjY,MAAMyC,aAUvE,OARAyW,EAAQ1V,UAAY1C,OAAOY,OAAOkX,EAAMpV,UAAW,CAC/Cf,YAAa,CACTpB,MAAO6X,EACPlY,YAAY,EACZgG,UAAU,EACVmS,cAAc,KAGfnD,EAAgBkD,EAASN,KACjCA,GAEP,SAASQ,EAAiB1B,EAAYC,GAClC,IAAK,IAAIvX,EAAI,EAAGA,EAAIsX,EAAW5T,OAAQ1D,IAAK,IACxC,GAAIsX,EAAWtX,KAAOuX,EAAM,OAAOvX,EACrC,MAAOwV,IACT,OAAQ,EAEZ,IAsKIyD,EAtKAC,EAAiC,WACjC,SAASC,IAML,GALAvZ,KAAKW,UAAO,EACZX,KAAKqG,aAAU,EACfrG,KAAKsG,UAAO,EACZtG,KAAKuG,YAAS,EACdvG,KAAKW,KAAO,cAAgB,IAAM6F,KAAKC,WAAa,GAAK,KACrD,WACA,GAAI,oBAAsBC,QAAS,OAAO,EAC1C,QAAI,IAAW5F,OAAO6F,OAAQ,OAAO,EACrC,IACI,IAAI6S,EAAc,IAAI9S,QAClB+S,EAAU,GAGd,OAFA3Y,OAAO6F,OAAO8S,GACdD,EAAY5S,IAAI6S,EAAS,iBAClB,kBAAoBD,EAAYvY,IAAIwY,GAC7C,MAAO7D,GACL,OAAO,GAVX,GAYC,IACD5V,KAAKqG,QAAU,IAAIK,QACrB,MAAOkP,IACT5V,KAAKsG,KAAO,GACZtG,KAAKuG,OAAS,GAElB,IAAImT,EAASH,EAAuB/V,UAsGpC,OArGAkW,EAAO7S,sBAAwB,WAG3B,IAFA,IAAIR,EAAUrG,KAAKqG,QACfC,EAAOtG,KAAKsG,KACPlG,EAAI,EAAGA,EAAIkG,EAAKxC,OAAQ1D,IAAK,CAClC,IAAIiB,EAAQiF,EAAKlG,GACjB,GAAI0X,EAASzW,IAAUkW,EAAelW,GAAQ,CAC1C,GAAIgF,EAAS,IACTA,EAAQS,OAAOzF,GACjB,MAAOuU,IACTtP,EAAKtB,OAAO5E,EAAG,GACfJ,KAAKuG,OAAOvB,OAAO5E,EAAG,GACtBA,GAAK,KAIjBsZ,EAAO3S,kBAAoB,SAASpF,GAChC,OAAQmW,EAASnW,IAErB+X,EAAO9S,IAAM,SAASjF,EAAKN,GACvB,IAAKM,EAAK,MAAM,IAAI8B,MAAM,wBAC1B,IAAI4C,EAAUrG,KAAKqG,QACnB,GAAIA,EAAS,IACTA,EAAQO,IAAIjF,EAAKN,GACnB,MAAOuU,UACE5V,KAAKqG,QAEhB,GAAIrG,KAAK+G,kBAAkBpF,GAAM,IAC7B,IAAIhB,EAAOX,KAAKW,KACZgZ,EAAQhY,EAAIhB,GAKhB,YAJAgZ,GAASA,EAAM,KAAOhY,EAAMgY,EAAM,GAAKtY,EAAQP,OAAOC,eAAeY,EAAKhB,EAAM,CAC5EU,MAAO,CAAEM,EAAKN,GACd2F,UAAU,KAGhB,MAAO4O,IACT5V,KAAK6G,wBACL,IAAIP,EAAOtG,KAAKsG,KACZC,EAASvG,KAAKuG,OACdqT,EAAQR,EAAiB9S,EAAM3E,IAC9B,IAAMiY,GACPtT,EAAKzC,KAAKlC,GACV4E,EAAO1C,KAAKxC,IACTkF,EAAOqT,GAASvY,GAE3BqY,EAAOzY,IAAM,SAASU,GAClB,IAAKA,EAAK,MAAM,IAAI8B,MAAM,wBAC1B,IAAI4C,EAAUrG,KAAKqG,QACnB,GAAIA,EAAS,IACT,GAAIA,EAAQY,IAAItF,GAAM,OAAO0E,EAAQpF,IAAIU,GAC3C,MAAOiU,UACE5V,KAAKqG,QAEhB,GAAIrG,KAAK+G,kBAAkBpF,GAAM,IAC7B,IAAIgY,EAAQhY,EAAI3B,KAAKW,MACrB,OAAOgZ,GAASA,EAAM,KAAOhY,EAAMgY,EAAM,QAAK,EAChD,MAAO/D,IACT5V,KAAK6G,wBACL,IAAI+S,EAAQR,EAAiBpZ,KAAKsG,KAAM3E,GACxC,IAAK,IAAMiY,EAAO,OAAO5Z,KAAKuG,OAAOqT,IAEzCF,EAAO5S,OAAS,SAASnF,GACrB,IAAKA,EAAK,MAAM,IAAI8B,MAAM,wBAC1B,IAAI4C,EAAUrG,KAAKqG,QACnB,GAAIA,EAAS,IACTA,EAAQS,OAAOnF,GACjB,MAAOiU,UACE5V,KAAKqG,QAEhB,GAAIrG,KAAK+G,kBAAkBpF,GAAM,IAC7B,IAAIgY,EAAQhY,EAAI3B,KAAKW,MACrBgZ,GAASA,EAAM,KAAOhY,IAAQgY,EAAM,GAAKA,EAAM,QAAK,GACtD,MAAO/D,IACT5V,KAAK6G,wBACL,IAAIP,EAAOtG,KAAKsG,KACZsT,EAAQR,EAAiB9S,EAAM3E,IAC9B,IAAMiY,IACPtT,EAAKtB,OAAO4U,EAAO,GACnB5Z,KAAKuG,OAAOvB,OAAO4U,EAAO,KAGlCF,EAAOzS,IAAM,SAAStF,GAClB,IAAKA,EAAK,MAAM,IAAI8B,MAAM,wBAC1B,IAAI4C,EAAUrG,KAAKqG,QACnB,GAAIA,EAAS,IACT,GAAIA,EAAQY,IAAItF,GAAM,OAAO,EAC/B,MAAOiU,UACE5V,KAAKqG,QAEhB,GAAIrG,KAAK+G,kBAAkBpF,GAAM,IAC7B,IAAIgY,EAAQhY,EAAI3B,KAAKW,MACrB,SAAUgZ,GAASA,EAAM,KAAOhY,GAClC,MAAOiU,IAET,OADA5V,KAAK6G,yBACG,IAAMuS,EAAiBpZ,KAAKsG,KAAM3E,IAE9C+X,EAAOxS,SAAW,SAASvF,EAAKf,GAC5B,GAAIZ,KAAKiH,IAAItF,GAAM,OAAO3B,KAAKiB,IAAIU,GACnC,IAAIN,EAAQT,IAEZ,OADAZ,KAAK4G,IAAIjF,EAAKN,GACPA,GAEJkY,EA/H0B,GAiIrC,SAASnM,EAAgByM,GACrB,OAAOA,EAAGlZ,MAAQkZ,EAAGC,UAAYD,EAAGE,aAAe,YAEvD,SAAS1M,EAAgBwM,EAAIlZ,GACzB,WACWkZ,EAAGlZ,KACVkZ,EAAGlZ,KAAOA,EACZ,MAAOiV,IAET,OADAiE,EAAGC,SAAWD,EAAGE,YAAcpZ,EACxBkZ,EAEX,SAASvM,GAAa0M,GAClB,GAAI,mBAAqBC,KAAM,OAAOA,KAAKC,mBAAmBF,GAAKG,QAAQ,mBAAmB,SAAU3Z,EAAG4Z,GACvG,OAAOC,OAAOC,aAAaC,SAASH,EAAI,SACvCD,QAAQ,OAAQ,IACrB,GAAI,oBAAsBK,OAAQ,OAAOA,OAAOC,KAAKT,EAAK,QAAQtX,SAAS,UAAUyX,QAAQ,OAAQ,IACrG,MAAM,IAAI1W,MAAM,sCAEpB,SAAS8J,GAAayM,GAClB,GAAI,mBAAqBU,KAAM,OAAOC,mBAAmB,GAAG9V,IAAItE,KAAKma,KAAKV,IAAM,SAAUvZ,GACtF,MAAO,KAAO,KAAOA,EAAEma,WAAW,GAAGlY,SAAS,KAAKmY,OAAO,MAC1DC,KAAK,KACT,GAAI,oBAAsBN,OAAQ,OAAOA,OAAOC,KAAKT,EAAK,UAAUtX,SAAS,QAC7E,MAAM,IAAIe,MAAM,sCAEpB,SAAS+J,KACL,IAAIuN,EAAQ,mBACZ,MAAO,OAAS,aAAaZ,QAAQ,MAAM,WACvC,OAAOY,EAAMC,OAAOxU,KAAKyU,MAAMzU,KAAKC,SAAWsU,EAAMjX,YACnD,IAAMwJ,IAAa,IAAKkL,MAAM0C,cAAcL,MAAM,GAAI,IAAIV,QAAQ,IAAK,MAAMA,QAAQ,gBAAiB,IAAIgB,cAEpH,SAAS1N,KACL,GAAI,oBAAsBlL,OAAQ,OAAOA,OACzC,GAAI,oBAAsBA,OAAQ,OAAOA,OACzC,GAAI,oBAAsB,OAAQ,OAAO,OACzC,MAAM,IAAIkB,MAAM,mBAGpB,SAASiK,GAAYqK,GAEjB,GADAsB,EAAYA,GAAa,IAAIC,EACzB,MAAQvB,GAAO,iBAAmBA,GAAO,mBAAqBA,EAAK,MAAM,IAAItU,MAAM,kBACvF,IAAI2X,EAAM/B,EAAUpY,IAAI8W,GAKxB,OAJKqD,IACDA,SAAarD,EAAM,IAAMvK,KACzB6L,EAAUzS,IAAImR,EAAKqD,IAEhBA,EAEX,SAASC,GAAc1C,GACnB,IACI,OAAO2C,KAAK7M,UAAU,GAAGoM,MAAMta,KAAKoY,IAAO,SAAU4C,EAAQC,GACzD,MAAO,mBAAqBA,EAAM,WAAa9N,GAAY8N,GAAO,IAAMA,KAE9E,MAAO5F,GACL,MAAM,IAAInS,MAAM,6DAGxB,SAASkK,KACL,MAAO,GAEX,IAAI8N,GAAqB,EACrBC,GAA8B,EAClC,SAAS9N,GAAQ+N,EAAQC,QACrB,IAAWA,IAAYA,EAAU,IACjC,IACIC,EACAC,EAFAC,EAAwBH,EAAQI,cAAeA,OAAgB,IAAWD,GAAyBA,EAAuBE,EAAYL,EAAQM,KAG9IC,EAAeV,GACnBA,IAAsB,EACtB,IAAIW,EAAmB,WACnB,IAAK,IAAIC,EAAO5F,UAAU3S,OAAQ6U,EAAO,IAAI2D,MAAMD,GAAOE,EAAO,EAAGA,EAAOF,EAAME,IAAQ5D,EAAK4D,GAAQ9F,UAAU8F,GAOhH,IAAIC,EANAL,EAAeT,KACfG,EAAc,KACdC,EAAY,KACZK,EAAeV,GACfA,IAAsB,GAG1Be,EAAQR,GAAiBF,EAAYA,GAAa,IAAIxC,GAAgCpS,SAASlH,KAAM2N,IAAkBkO,EAAcA,GAAe,GACpJ,IAAIY,EAAWpB,GAAc1C,GACzB+D,EAAcF,EAAMC,GAKxB,GAJIC,GAAeT,GAAazD,KAAKmE,MAAQD,EAAYR,KAAOD,WACrDO,EAAMC,GACbC,EAAc,MAEdA,EAAa,OAAOA,EAAYrb,MACpC,IAAI6a,EAAO1D,KAAKmE,MACZtb,EAAQsa,EAAO1W,MAAMjF,KAAMyW,WAK/B,OAJA+F,EAAMC,GAAY,CACdP,KAAMA,EACN7a,MAAOA,GAEJA,GAMX,OAJA+a,EAAiBQ,MAAQ,WACrBf,EAAc,KACdC,EAAY,MAETzO,EAAgB+O,GAAmBR,EAAQjb,MAAQyM,EAAgBuO,IAAW,cAKzF,SAAS9N,GAAgB8J,GACrB,OAAOhB,EAAckG,aAAaha,QAAQ8U,GAE9C,SAAS7J,GAAe6N,GACpB,IAAIa,EAAQ,GACZ,SAASM,IAEL,IADA,IAAIC,EAAatG,UAAWuG,EAAQhd,KAC3Bid,EAAQxG,UAAU3S,OAAQ6U,EAAO,IAAI2D,MAAMW,GAAQC,EAAQ,EAAGA,EAAQD,EAAOC,IAASvE,EAAKuE,GAASzG,UAAUyG,GACvH,IAAIvb,EAAM0Z,GAAc1C,GACxB,OAAI6D,EAAMxa,eAAeL,KACzB6a,EAAM7a,GAAOgV,EAAckG,aAAavY,KAAI,WACxC,OAAOqX,EAAO1W,MAAM+X,EAAOD,MAC3B1Y,SAAQ,kBACDmY,EAAM7a,OAJqB6a,EAAM7a,GAWhD,OAHAmb,EAAwBF,MAAQ,WAC5BJ,EAAQ,IAELnP,EAAgByP,EAAyB1P,EAAgBuO,GAAU,qBAE9E,SAAS5N,GAAU4N,EAAQC,GAEvB,SAASuB,IACL,OAAOxG,EAAckG,aAAavY,IAAIqX,EAAQ3b,KAAMyW,WAGxD,YALA,IAAWmF,IAAYA,EAAU,IAIjCA,EAAQjb,OAASwc,EAAoBpD,YAAc6B,EAAQjb,KAAO,gBAC3D0M,EAAgB8P,EAAqB/P,EAAgBuO,GAAU,iBAE1E,SAAS3N,GAAc2N,EAAQyB,EAAOzE,QAClC,IAAWA,IAASA,EAAO,IAC3B,IAAI6D,EAAQb,EAAO0B,yBAA2B1B,EAAO0B,0BAA4B,GAC7E1b,EAAM0Z,GAAc1C,GACxB,OAAO6D,EAAMxa,eAAeL,GAAO6a,EAAM7a,GAAO6a,EAAM7a,GAAOyb,EAAMnY,WAAM,EAAQ0T,GAErF,SAAS1K,MACT,SAASC,GAAKyN,GACV,IAAI2B,GAAS,EACb,OAAOjQ,GAAgB,WACnB,IAAKiQ,EAED,OADAA,GAAS,EACF3B,EAAO1W,MAAMjF,KAAMyW,aAE9BrJ,EAAgBuO,GAAU,UAElC,SAASxN,GAAQ6L,GAEb,IADA,IAAIpV,EAAO,EACFxE,EAAI,EAAGA,EAAI4Z,EAAIlW,OAAQ1D,IAAKwE,GAAQoV,EAAI5Z,GAAGwa,WAAW,GAAKpU,KAAK+W,IAAInd,EAAI,GAAK,EAAG,GACzF,OAAOoG,KAAKyU,MAAMzU,KAAK+W,IAAI/W,KAAKgX,KAAK5Y,GAAO,IAEhD,SAASwJ,GAAW4L,GAEhB,IADA,IAAIpV,EAAO,GACFxE,EAAI,EAAGA,EAAI4Z,EAAIlW,OAAQ1D,IAAK,CACjC,IAAIqd,EAAQzD,EAAI5Z,GAAGwa,WAAW,GAAKxa,EACnC4Z,EAAI5Z,EAAI,KAAOqd,GAASzD,EAAI5Z,EAAI,GAAGwa,WAAW,IAAMxa,EAAI,IACxDwE,GAAQyV,OAAOC,aAAa,GAAK9T,KAAKkX,IAAID,GAAS,IAEvD,OAAO7Y,EAEX,SAASyJ,GAAM2L,EAAK2D,GAChB,IAAIC,EAAW5D,EAAI3L,MAAMsP,GACzB,GAAIC,EAAU,OAAOA,EAAS,GAElC,SAAStP,GAASyJ,EAAKpW,GACnB,OAAO,IAAIgV,EAAckG,cAAa,SAAUha,GAC5C,IAAIxB,EAAQ0W,EAAIpW,GAChB,GAAIN,EAAO,OAAOwB,EAAQxB,UACnB0W,EAAIpW,GACXb,OAAOC,eAAegX,EAAKpW,EAAK,CAC5BwX,cAAc,EACdvS,IAAK,SAAS+Q,IACTtW,EAAQsW,IAAS9U,EAAQxB,IAE9BJ,IAAK,WACD,OAAOI,QAKvB,SAASkN,GAAeqH,EAAKiI,GAEzB,QADA,IAAWA,IAAUA,EAAQ,GACzBA,GAAS,EAAG,MAAO,gCACvB,IACI,IAAKjI,EAAK,MAAO,mBAAqB,GAAGlT,SAASnC,KAAKqV,GAAO,IAC9D,GAAI,iBAAmBA,EAAK,OAAOA,EACnC,GAAIA,aAAenS,MAAO,CACtB,IAAIH,EAAQsS,GAAOA,EAAItS,MACnBqC,EAAUiQ,GAAOA,EAAIjQ,QACzB,GAAIrC,GAASqC,EAAS,OAAQ,IAAMrC,EAAMM,QAAQ+B,GAAWrC,EAAQqC,EAAU,KAAOrC,EACtF,GAAIA,EAAO,OAAOA,EAClB,GAAIqC,EAAS,OAAOA,EAExB,OAAOiQ,GAAOA,EAAIlT,UAAY,mBAAqBkT,EAAIlT,SAAWkT,EAAIlT,WAAa,GAAGA,SAASnC,KAAKqV,GACtG,MAAOkI,GACL,MAAO,mCAAqCvP,GAAeuP,EAAQD,EAAQ,IAGnF,SAASrP,GAAsBoH,GAC3B,IAAImI,EAAiB,mBAAqB,GAAGrb,SAASnC,KAAKqV,GAAO,IAClE,OAAOA,EAAMA,aAAenS,MAAQmS,EAAIjQ,SAAWoY,EAAiB,iBAAmBnI,EAAIjQ,SAAWiQ,EAAIjQ,SAAWoY,EAAiBA,EAE1I,SAAStP,GAAUkJ,GACf,MAAO,iBAAmBA,EAAOA,EAAOA,GAAQA,EAAKjV,UAAY,mBAAqBiV,EAAKjV,SAAWiV,EAAKjV,WAAa,GAAGA,SAASnC,KAAKoX,GAE7I,SAASjJ,GAAcsP,EAAU9G,GAC7B,IAAI0C,GAASoE,EAAWA,EAASC,MAAM,OAAO,IAAIra,QAAQsT,GAC1D,OAAQ,IAAM0C,GAASoE,EAASnD,MAAMjB,KAAW1C,EAErD,SAASvI,GAAYoJ,EAAKpX,EAAMud,GAC5B,IAAIC,EAAWpG,EAAIpX,GACnBoX,EAAIpX,GAAQ,WACR,IAAIyd,EAAc3H,UAAW4H,EAASre,KACtC,OAAOke,EAAQ,CACXI,QAASte,KACT2Y,KAAM,GAAGkC,MAAMta,KAAKkW,WACpB0H,SAAUA,EACVI,aAAc,WACV,OAAOJ,EAASlZ,MAAMoZ,EAAQD,OAK9C,SAASxP,GAAOmJ,EAAKrB,GACjB,IAAKA,EAAQ,OAAOqB,EACpB,GAAIjX,OAAOyV,OAAQ,OAAOzV,OAAOyV,OAAOwB,EAAKrB,GAC7C,IAAK,IAAI/U,KAAO+U,EAAQA,EAAO1U,eAAeL,KAASoW,EAAIpW,GAAO+U,EAAO/U,IACzE,OAAOoW,EAEX,SAASlJ,GAAYkJ,GACjB,GAAIjX,OAAOyF,OAAQ,OAAOzF,OAAOyF,OAAOwR,GACxC,IAAIyG,EAAS,GACb,IAAK,IAAI7c,KAAOoW,EAAKA,EAAI/V,eAAeL,IAAQ6c,EAAO3a,KAAKkU,EAAIpW,IAChE,OAAO6c,EAxIX5Q,GAAQ6Q,MAAQ,WACZ/C,GAA8BD,IAyIlC,IAAI3M,GAAiBlB,GAAQiB,IAC7B,SAASE,GAAK2P,EAAQC,GAClB,OAAOnY,KAAKmO,MAAM+J,EAASC,EAAa,KAE5C,SAAS3P,KACL,OAAOxI,KAAKwI,IAAI/J,MAAMuB,KAAMiQ,WAEhC,SAASxH,KACL,OAAOzI,KAAKyI,IAAIhK,MAAMuB,KAAMiQ,WAEhC,SAASvH,GAAQ0P,EAAKC,GAClB,IAAIC,EAAYF,EAAMC,EACtB,OAAOC,EAAYF,EAAME,EAAYD,EAAUD,EAEnD,SAASzP,GAAS6K,EAAK+E,EAAQb,GAC3B,IAAIc,EAAU,GAId,OAHAhF,EAAIG,QAAQ4E,GAAQ,SAAUpH,GAC1BqH,EAAQnb,KAAKqa,EAAUA,EAAQjZ,MAAM,KAAMwR,WAAakB,MAErDqH,EAEX,SAAS5P,GAAY6P,GACjB,MAAO,6BAA+B3R,GAAa2R,GAEvD,SAAS5P,GAAU0I,EAAKmH,QACpB,IAAWA,IAAWA,EAAS9J,SAC/B,IAAIoJ,EAAS,GACb,IAAK,IAAI7c,KAAOoW,EAAKA,EAAI/V,eAAeL,IAAQud,EAAOnH,EAAIpW,GAAMA,KAAS6c,EAAO7c,GAAOoW,EAAIpW,IAC5F,OAAO6c,EAEX,SAASlP,GAASqI,GACd,OAAOA,EAEX,SAASpI,GAAc4P,EAAMJ,GACzB,IAAIP,EAAS,GAKb,OAJAW,EAAKhF,QAAQ4E,GAAQ,SAAUK,GAE3B,OADAZ,EAAO3a,KAAKub,GACL,MAEJZ,EAEX,SAAShP,GAAgBmM,EAAQzW,GAE7B,IAAIf,EACAI,EACJ,YAHA,IAAWW,IAAUA,EAAQ,IAGtBmI,GAAgB,WACnB9I,GAAWC,aAAaD,GACxB,IAAI8a,EAAelb,EAAUA,GAAW,IAAIwS,EAAckG,aAU1D,OATAtY,EAAUZ,YAAW,WACjBQ,EAAU,KACVI,EAAU,KACVoS,EAAckG,aAAavY,IAAIqX,GAAQhZ,MAAK,SAAU6b,GAClDa,EAAaxc,QAAQ2b,MACrB,SAAU5I,GACVyJ,EAAa9b,OAAOqS,QAExB1Q,GACGma,IACPjS,EAAgBuO,GAAU,sBAElC,SAASlM,GAAakM,EAAQO,GAC1B,IAAI3X,EAOJ,OANC,SAAS+a,IACN/a,EAAUZ,YAAW,WACjBgY,IACA2D,MACApD,GAJP,GAMM,CACHnX,OAAQ,WACJP,aAAaD,KAIzB,SAASmL,GAAUsK,GACf,OAAO5E,QAAQ4E,EAAI3L,MAAM,aAE7B,SAASsB,GAAQqK,GACb,OAAO5E,QAAQ4E,EAAI3L,MAAM,qBAE7B,SAASuB,GAAmBvO,GACxB,OAAOA,EAAMqB,WAEjB,SAASmN,GAAqBxO,GAC1B,MAAO,SAAWA,GAAS,UAAYA,IAAUqO,GAAUrO,GAASkZ,SAASlZ,EAAO,IAAMsO,GAAQtO,GAASke,WAAWle,GAASA,GAEnI,SAASyO,GAAOiI,EAAKyH,EAAQC,GAIzB,IAAK,IAAI9d,UAHT,IAAW6d,IAAWA,EAAS,SAC/B,IAAWC,IAAWA,EAAS,IAC/BD,EAASA,EAASA,EAAS,IAAMA,EACjBzH,EAAKA,EAAI/V,eAAeL,IAAQ,MAAQoW,EAAIpW,IAAQ,mBAAqBoW,EAAIpW,KAASoW,EAAIpW,IAAQ2a,MAAMoD,QAAQ3H,EAAIpW,KAASoW,EAAIpW,GAAKmC,QAAUiU,EAAIpW,GAAKge,OAAM,SAAUnE,GACrL,MAAO,iBAAmBA,KACxBiE,EAAO,GAAKD,EAAS7d,EAAM,MAAQoW,EAAIpW,GAAKmZ,KAAK,KAAO/C,EAAIpW,IAAQ,iBAAmBoW,EAAIpW,GAAO8d,EAAS3P,GAAOiI,EAAIpW,GAAM,GAAK6d,EAAS7d,EAAK8d,GAAUA,EAAO,GAAKD,EAAS7d,GAAOiO,GAAmBmI,EAAIpW,KAClN,OAAO8d,EAEX,SAAS1P,GAASgI,GACd,IAAIyG,EAAS,GACb,IAAK,IAAI7c,KAAOoW,EAAK,GAAIA,EAAI/V,eAAeL,IAAQ,iBAAmBoW,EAAIpW,GAAM,CAC7E,IAAIN,EAAQ0W,EAAIpW,GACZA,EAAI0M,MAAM,aACV1M,EAAMA,EAAIkZ,MAAM,GAAI,GACpBxZ,EAAQA,EAAM4c,MAAM,KAAKpZ,IAAIgL,KAC1BxO,EAAQwO,GAAqBxO,GAGpC,IAFA,IAAIue,EAAYpB,EACZqB,EAAQle,EAAIsc,MAAM,KACb7d,EAAI,EAAGA,EAAIyf,EAAM/b,OAAQ1D,IAAK,CACnC,IAAI0f,EAAOD,EAAMzf,GACb2f,EAAS3f,EAAI,IAAMyf,EAAM/b,OACzBkc,GAAWD,GAAUrQ,GAAUmQ,EAAMzf,EAAI,IAC7C,GAAI,gBAAkB0f,GAAQ,cAAgBA,GAAQ,cAAgBA,EAAM,MAAM,IAAIrc,MAAM,mBAAqBqc,GACjHC,EAASH,EAAUE,GAAQze,EAAQue,EAAYA,EAAUE,GAAQF,EAAUE,KAAUE,EAAU,GAAK,KAG5G,OAAOxB,EAEX,SAASxO,KACL,IAAIiQ,EAAY,GACZ7c,EAAW,GACX8c,EAAU,CACVC,GAAI,SAASC,EAAWlC,GACpB,IAAImC,EAAcjd,EAASgd,GAAahd,EAASgd,IAAc,GAC/DC,EAAYxc,KAAKqa,GACjB,IAAIoC,GAAY,EAChB,MAAO,CACHvb,OAAQ,WACCub,IACDA,GAAY,EACZD,EAAYrb,OAAOqb,EAAYzc,QAAQsa,GAAU,OAKjEhQ,KAAM,SAASkS,EAAWlC,GACtB,IAAIqC,EAAWL,EAAQC,GAAGC,GAAW,WACjCG,EAASxb,SACTmZ,OAEJ,OAAOqC,GAEXC,QAAS,SAASJ,GACd,IAAK,IAAIK,EAAQhK,UAAU3S,OAAQ6U,EAAO,IAAI2D,MAAMmE,EAAQ,EAAIA,EAAQ,EAAI,GAAIC,EAAQ,EAAGA,EAAQD,EAAOC,IAAS/H,EAAK+H,EAAQ,GAAKjK,UAAUiK,GAC/I,IAAIL,EAAcjd,EAASgd,GACvBO,EAAW,GACf,GAAIN,EAOA,IANA,IAAIO,EAAQ,SAASC,GACjB,IAAI3C,EAAUmC,EAAYQ,GAC1BF,EAAS9c,KAAK8S,EAAckG,aAAavY,KAAI,WACzC,OAAO4Z,EAAQjZ,WAAM,EAAQ0T,QAG5BkI,EAAM,EAAGA,EAAMR,EAAYvc,OAAQ+c,IAAOD,EAAMC,GAE7D,OAAOlK,EAAckG,aAAalY,IAAIgc,GAAUhe,KAAKsL,KAEzD6S,YAAa,SAASV,GAClB,GAAIH,EAAUG,GAAY,OAAOzJ,EAAckG,aAAaha,UAC5Dod,EAAUG,IAAa,EACvB,IAAK,IAAIW,EAAQtK,UAAU3S,OAAQ6U,EAAO,IAAI2D,MAAMyE,EAAQ,EAAIA,EAAQ,EAAI,GAAIC,EAAQ,EAAGA,EAAQD,EAAOC,IAASrI,EAAKqI,EAAQ,GAAKvK,UAAUuK,GAC/I,OAAOd,EAAQM,QAAQvb,MAAMib,EAAS,CAAEE,GAAYa,OAAOtI,KAE/DiE,MAAO,WACHxZ,EAAW,KAGnB,OAAO8c,EAEX,SAASjQ,GAAiBiR,GACtB,OAAOA,EAAO/G,QAAQ,YAAY,SAAUgH,GACxC,MAAO,IAAMA,EAAEhG,iBAGvB,SAASjL,GAAiBgR,GACtB,OAAOA,EAAO/G,QAAQ,aAAa,SAAUgH,GACzC,OAAOA,EAAE,GAAGC,iBAGpB,SAASjR,GAAsB+Q,GAC3B,OAAOA,EAAOlG,OAAO,GAAGoG,cAAgBF,EAAOrG,MAAM,GAAGM,cAE5D,SAAS/K,GAASuH,EAAM0J,EAAMC,GAC1B,IAAKD,EAAM,OAAOC,EAElB,IADA,IAAIC,EAAYF,EAAKpD,MAAM,KAClB7d,EAAI,EAAGA,EAAImhB,EAAUzd,OAAQ1D,IAAK,CACvC,GAAI,iBAAmBuX,GAAQ,OAASA,EAAM,OAAO2J,EACrD3J,EAAOA,EAAK4J,EAAUnhB,IAE1B,YAAO,IAAWuX,EAAO2J,EAAM3J,EAEnC,SAAStH,GAAYsL,EAAQO,GACzB,IAAIsF,EAAW/R,IAAa,YACnByM,GAAQ,MAAQ,IACjBsF,EAASzc,SACT4W,OAEJ,KAER,SAASrL,GAAeyH,EAAKpW,EAAKf,GAC9B,GAAI0b,MAAMoD,QAAQ3H,IACd,GAAI,iBAAmBpW,EAAK,MAAM,IAAI+C,UAAU,iCAC7C,GAAI,iBAAmBqT,GAAO,OAASA,GAAO,iBAAmBpW,EAAK,MAAM,IAAI+C,UAAU,6BACjG5D,OAAOC,eAAegX,EAAKpW,EAAK,CAC5BwX,cAAc,EACdnY,YAAY,EACZC,IAAK,kBACM8W,EAAIpW,GACX,IAAIN,EAAQT,IAEZ,OADAmX,EAAIpW,GAAON,EACJA,GAEXuF,IAAK,SAASvF,UACH0W,EAAIpW,GACXoW,EAAIpW,GAAON,KAIvB,SAASkP,GAAUoH,GACf,MAAO,GAAGkD,MAAMta,KAAKoX,GAEzB,SAASnH,GAASmH,GACd,MAAO,iBAAmBA,GAAQ,OAASA,EAE/C,SAASlH,GAAesH,GACpB,OAAOvH,GAASuH,IAAQ,oBAAsB,GAAGrV,SAASnC,KAAKwX,GAEnE,SAASrH,GAAcqH,GACnB,IAAKtH,GAAesH,GAAM,OAAO,EACjC,IAAItV,EAAcsV,EAAItV,YACtB,GAAI,mBAAqBA,EAAa,OAAO,EAC7C,IAAIe,EAAYf,EAAYe,UAC5B,QAASiN,GAAejN,MAAgBA,EAAUxB,eAAe,iBAErE,SAAS2O,GAAcgH,EAAM8J,EAAUC,GAEnC,QADA,IAAWA,IAAYA,EAAU,IAC7BpF,MAAMoD,QAAQ/H,GAAO,CAWrB,IAVA,IAAI7T,EAAS6T,EAAK7T,OACd0a,EAAS,GACTmD,EAAS,SAASvhB,GAClBkQ,GAAekO,EAAQpe,GAAG,WACtB,IAAIwhB,EAAUF,EAAUA,EAAU,IAAMthB,EAAI,GAAKA,EAC7CyhB,EAAQJ,EAAS9J,EAAKvX,GAAIA,EAAGwhB,GAEjC,OADClR,GAAcmR,IAAUvF,MAAMoD,QAAQmC,MAAYA,EAAQlR,GAAckR,EAAOJ,EAAUG,IACnFC,MAGNzhB,EAAI,EAAGA,EAAI0D,EAAQ1D,IAAKuhB,EAAOvhB,GACxC,OAAOoe,EAEX,GAAI9N,GAAciH,GAAO,CACrB,IAAImK,EAAU,GACVC,EAAS,SAASpgB,GAClB,IAAKgW,EAAK3V,eAAeL,GAAM,MAAO,WACtC2O,GAAewR,EAASngB,GAAK,WACzB,IAAIigB,EAAUF,EAAUA,EAAU,IAAM/f,EAAM,GAAKA,EAC/CkgB,EAAQJ,EAAS9J,EAAKhW,GAAMA,EAAKigB,GAErC,OADClR,GAAcmR,IAAUvF,MAAMoD,QAAQmC,MAAYA,EAAQlR,GAAckR,EAAOJ,EAAUG,IACnFC,MAGf,IAAK,IAAIlgB,KAAOgW,EAAMoK,EAAOpgB,GAC7B,OAAOmgB,EAEX,MAAM,IAAIre,MAAM,2BAEpB,SAASmN,GAAS8F,EAAQF,EAAQ7V,EAAM2gB,GACpC,GAAI5K,EAAO1U,eAAerB,GAAO,CAC7B,IAAIqhB,EAAalhB,OAAO8E,yBAAyB8Q,EAAQ/V,GACzDG,OAAOC,eAAeyV,EAAQ7V,EAAMqhB,QACjCxL,EAAO7V,GAAQ2gB,EAE1B,SAASzQ,GAAM8M,EAASuD,EAAQe,QAC5B,IAAWA,IAAUA,EAAQ,GAC7B,iBAAmBtE,IAAYA,EAAU,IAAIuE,OAAOvE,IACpD,IAAIa,EAAS0C,EAAOrG,MAAMoH,GAAO5T,MAAMsP,GACvC,GAAIa,EAAQ,CACR,IAAI5E,EAAQ4E,EAAO5E,MACfgE,EAAWY,EAAO,GACtB,MAAO,CACHW,KAAMvB,EACNuE,OAAQ3D,EAAO3D,MAAM,GACrBoH,MAAOA,EAAQrI,EACfwI,IAAKH,EAAQrI,EAAQgE,EAAS9Z,OAC9BA,OAAQ8Z,EAAS9Z,OACjBqW,QAAS,SAASgF,GACd,OAAOvB,EAAW,GAAKA,EAAS/C,MAAM,EAAGoH,EAAQrI,GAASuF,EAAOvB,EAAS/C,MAAMjB,EAAQgE,EAAS9Z,QAAU,MAK3H,SAASgN,GAAS6M,EAASuD,GAGvB,IAFA,IAAI7M,EAAU,GACV4N,EAAQ,IACH,CACL,IAAIrE,EAAW/M,GAAM8M,EAASuD,EAAQe,GACtC,IAAKrE,EAAU,MACfvJ,EAAQxQ,KAAK+Z,GACbqE,EAAQ5T,GAAM+T,IAElB,OAAO/N,EAEX,SAAStD,GAAU1P,GACf,OAAO,MAAQA,EAEnB,SAAS2P,GAAM2K,GACX,OAAOhF,EAAckG,aAAavY,IAAIqX,GAAQhZ,MAAK,WAC/C,OAAOqO,GAAM2K,MAGrB,SAAS1K,GAAS0K,EAAQO,GAEtB,IAAI3X,EACJ,YAFA,IAAW2X,IAASA,EAAO,KAEpB7O,GAAgB,WACnB,IAAIgV,EAAc5L,UAAW6L,EAAStiB,KACtCwE,aAAaD,GACbA,EAAUZ,YAAW,WACjB,OAAOgY,EAAO1W,MAAMqd,EAAQD,KAC5BnG,KACJ9O,EAAgBuO,GAAU,eAElC,SAASzK,GAAayG,GAClB,MAAO,oBAAsB,GAAGjV,SAASnC,KAAKoX,GAElD,IAAIxG,GAAsB,SAASwK,GAC/B,IAAItV,EAAU,IAAIiT,EAClB,OAAO,SAASiJ,GACZ,IAAIC,EAASxiB,KACb,OAAOqG,EAAQa,SAASqb,GAAK,WACzB,OAAO5G,EAAOpb,KAAKiiB,EAAQD,QAInCnR,GAA6B,SAASuK,GACtC,IAAItV,EAAU,IAAIiT,EAClB,OAAO,SAASiJ,GACZ,IAAIE,EAASziB,KACb,OAAOqG,EAAQa,SAASqb,GAAK,WACzB,OAAO5G,EAAOpb,KAAKkiB,EAAQF,GAAKle,SAAQ,WACpCgC,EAAQS,OAAOyb,WAK/B,SAASrb,GAAS6Q,EAAKpW,EAAKf,GACxB,GAAImX,EAAI/V,eAAeL,GAAM,OAAOoW,EAAIpW,GACxC,IAAI6Z,EAAM5a,IAEV,OADAmX,EAAIpW,GAAO6Z,EACJA,EAEX,SAASnK,GAAQ0G,GACb,IAEI2K,EAFAC,EAAQ,GACRC,GAAU,EAEVC,EAAU,CACVjc,IAAK,SAASjG,EAAMgX,GAOhB,OANKiL,IACD7K,EAAIpX,GAAQgX,EACZkL,EAAQC,UAAS,kBACN/K,EAAIpX,OAGZgX,GAEXmL,SAAU,SAASnH,GACfiH,EAAUjH,EAAO+G,GAAYC,EAAM9e,KAAKqK,IAAK,WACzC,OAAOyN,EAAO+G,QAGtB/d,IAAK,SAASiR,GACV8M,EAAW9M,EACX,IAAIoJ,EAAU,GAEd,IADA4D,GAAU,EACJD,EAAM7e,QAAU,CAClB,IAAIif,EAAOJ,EAAMK,QACjBhE,EAAQnb,KAAKkf,KAEjB,OAAOpM,EAAckG,aAAalY,IAAIqa,GAASrc,KAAKsL,MAG5D,OAAO4U,EAEX,SAASvR,GAASuI,GACd,IAAI2E,EACArb,EACJ,IACIqb,EAAS3E,IACX,MAAOjE,GACLzS,EAAQyS,EAEZ,MAAO,CACH4I,OAAQA,EACRrb,MAAOA,GAGf,SAASoO,GAAgB0R,EAAKtL,GAC1B,IAAIiC,EAAQqJ,EAAIrf,QAAQ+T,IACvB,IAAMiC,GAASqJ,EAAIje,OAAO4U,EAAO,GAEtC,SAASpI,GAAa7Q,EAAMuiB,GACxB,GAAI,MAAQA,EAAO,MAAM,IAAIzf,MAAM,YAAc9C,EAAO,kBACxD,OAAOuiB,EAEX,SAASzR,GAAOwR,GAEZ,IADA,IAAIzE,EAAS,GACJ2E,EAAM,EAAGA,EAAMF,EAAInf,OAAQqf,IAAO3E,EAAOyE,EAAIE,KAAQ,EAC9D,OAAOriB,OAAOwF,KAAKkY,GAEvB,IAAI9M,GAAW,SAAS0R,EAAU/hB,GAC9B,OAAQ,IAAMyN,GAAesU,GAAUxf,QAAQvC,IAEnD,SAASsQ,GAAauM,GAClB,IAAImF,EAAa,GACbC,EAAwB,GAC5B,OAAO,SAAS1N,GACZ,IAAK,IAAMyN,EAAWzf,QAAQgS,GAAM,CAChCyN,EAAWxf,KAAK+R,GAChB,IAAI2N,EAAmBhV,GAAeqH,GACtC,IAAK0N,EAAsBC,GAEvB,OADAD,EAAsBC,IAAoB,EACnCrF,EAAQtI,KAK/B,IAAIhE,GAAuB,SAAS4R,GAEhC,SAASC,EAAgB9d,GACrB,IAAI+d,EAMJ,OALCA,EAASF,EAAOjjB,KAAKP,KAAM2F,IAAY3F,MAAMW,KAAO+iB,EAAOjhB,YAAY9B,KACxE,mBAAqB8C,MAAMkgB,kBAAoBlgB,MAAMkgB,kBAAkB,SAAS5jB,GAC5E,QAAI,IAAWA,EAAM,MAAM,IAAI6jB,eAAe,6DAC9C,OAAO7jB,EAF4D,CAGrE2jB,GAASA,EAAOjhB,aAAeihB,EAAOpgB,MAAQ,IAAIG,MAAMkC,GAASrC,MAC5DogB,EAEX,OAVAvN,EAAesN,EAAiBD,GAUzBC,EAXgB,CAYzB1K,EAAgCtV,QAC9BiP,GAAY,CACZmR,MAAO,GACPC,MAAO,IAEPnR,GAAa,CACboR,IAAK,YAELnR,GAAkB,GACtB,SAAS9J,KACL,IAAIkb,EAAO9O,SAAS8O,KACpB,IAAKA,EAAM,MAAM,IAAIvgB,MAAM,0BAC3B,OAAOugB,EAEX,SAASjb,KACL,OAAOqM,QAAQF,SAAS8O,OAAS,aAAe9O,SAAS+O,WAE7D,SAASjb,KACL,OAAOoM,QAAQF,SAAS8O,OAAS,gBAAkB9O,SAAS+O,WAEhE,SAAShb,GAAU+Q,GACf,OAAOE,mBAAmBF,GAE9B,SAAS9Q,KACL,OAAO8E,GAAc9E,IAAoB,WACrC,OAAO,IAAIyN,EAAckG,cAAa,SAAUha,GAC5CkG,MAAqBlG,IACrBN,OAAO+I,iBAAiB,QAAQ,WAC5B,OAAOzI,aAKvB,IAAIsG,GAAuByE,IAAQ,WAC/B,OAAO,IAAI+I,EAAckG,cAAa,SAAUha,GAC5C,GAAIkG,MAAqBC,KAAyB,OAAOnG,IACzD,IAAI2e,EAAW0C,aAAY,WACvB,GAAInb,MAAqBC,KAErB,OADAmb,cAAc3C,GACP3e,MAEX,UAGZ,SAASuG,KACL,OAAOuN,EAAckG,aAAavY,KAAI,WAClC,OAAO4Q,SAAS8O,KAAO9O,SAAS8O,KAAO7a,KAAuBxG,MAAK,WAC/D,GAAIuS,SAAS8O,KAAM,OAAO9O,SAAS8O,KACnC,MAAM,IAAIvgB,MAAM,sDAI5B,SAAS4F,GAAW+a,GAChB,OAAOpW,GAAc3E,IAAY,WAC7B,IAAIgb,EAAS,GACb,IAAKD,EAAa,OAAOC,EACzB,IAAK,IAAMD,EAAYxgB,QAAQ,KAAM,OAAOygB,EAC5C,IAAK,IAAIxD,EAAM,EAAGyD,EAAsBF,EAAYnG,MAAM,KAAM4C,EAAMyD,EAAoBxgB,OAAQ+c,IAAO,CACrG,IAAI0D,EAAOD,EAAoBzD,IAC9B0D,EAAOA,EAAKtG,MAAM,MAAM,IAAMsG,EAAK,KAAOF,EAAO1J,mBAAmB4J,EAAK,KAAO5J,mBAAmB4J,EAAK,KAE7G,OAAOF,IACP,CAAED,IAEV,SAAS9a,GAAc3I,GACnB,OAAO0I,GAAW9G,OAAO8C,SAASmf,OAAO3J,MAAM,IAAIla,GAEvD,SAAS4I,GAAoBkb,GACzB,OAAQ,IAAMA,EAAI7gB,QAAQ,MAAQ,IAAM6gB,EAAI7gB,QAAQ,MAAQ6gB,EAAIxG,MAAM,KAAK,KAAO1b,OAAO8C,SAASqf,KAAKzG,MAAM,KAAK,GAEtH,SAASzU,GAAYuO,GAEjB,YADA,IAAWA,IAAQA,EAAM,IAClBjX,OAAOwF,KAAKyR,GAAKmH,QAAO,SAAUvd,GACrC,MAAO,iBAAmBoW,EAAIpW,IAAQ,kBAAoBoW,EAAIpW,MAC9DkD,KAAI,SAAUlD,GACd,IAAI6Z,EAAMzD,EAAIpW,GACd,GAAI,iBAAmB6Z,GAAO,kBAAoBA,EAAK,MAAM,IAAI9W,UAAU,0BAC3E,OAAOuE,GAAUtH,GAAO,IAAMsH,GAAUuS,EAAI9Y,eAC5CoY,KAAK,KAEb,SAASrR,GAAYkb,EAAeC,GAEhC,YADA,IAAWA,IAAUA,EAAQ,IACtBA,GAAS9jB,OAAOwF,KAAKse,GAAO9gB,OAAS0F,GAAY8M,EAAS,GAAIjN,GAAWsb,GAAgBC,IAAUD,EAE9G,SAASjb,GAAU+a,EAAK7I,GACpB,IAEIiJ,EACAC,EAHAC,EAAQnJ,EAAQmJ,OAAS,GACzBngB,EAAOgX,EAAQhX,MAAQ,GAGvBogB,EAAaP,EAAIxG,MAAM,KAC3B6G,EAAeE,EAAW,GAC1B,IAAIC,GAAsBJ,EAAcG,EAAW,IAAI/G,MAAM,KAC7D4G,EAAcI,EAAmB,GACjC,IAAIb,EAAc3a,GAAYwb,EAAmB,GAAIF,GACjDG,EAAazb,GAAYqb,EAAclgB,GAG3C,OAFAwf,IAAgBS,EAAcA,EAAc,IAAMT,GAClDc,IAAeL,EAAcA,EAAc,IAAMK,GAC1CL,EAEX,SAASlb,GAAS8a,EAAK3N,GAEnB,YADA,IAAWA,IAAQA,EAAMvU,QAClB,IAAIoU,EAAckG,cAAa,SAAUha,GAC5CiU,EAAIzR,SAAWof,EACflb,GAAoBkb,IAAQ5hB,OAGpC,SAAS+G,KACL,IAAIub,EAAOjQ,SAASI,cAAc,uBAClC,QAASjO,KAAc9E,OAAOqS,OAAOC,MAAQ,MAAQsQ,GAEzD,SAAStb,GAAiBub,GACtB,OAAOhQ,QAAQgQ,EAAGC,aAAeD,EAAGE,cAAgBF,EAAGG,iBAAiBzhB,QAE5E,SAASgG,KACL,OAAOkE,GAAclE,IAAgB,WACjC,IAAI0b,EAAcjjB,OAAOijB,YACzB,GAAIA,GAAeA,EAAY7I,KAAO6I,EAAYC,QAAUD,EAAYC,OAAOC,YAAcF,EAAYC,OAAOE,iBAAmBnf,KAAKkX,IAAI8H,EAAY7I,MAAQnE,KAAKmE,OAAS,KAAO6I,EAAY7I,OAAS6I,EAAYC,OAAOC,WAAaF,EAAYC,OAAOE,iBAAmB,EAAG,OAAOH,KAGlS,SAASzb,KACL,OAAOqL,QAAQtL,MAEnB,SAASE,KACL,OAAOb,KAAuBxG,MAAK,WAC/B,IAAI6iB,EAAc1b,KAClB,GAAI0b,EAAa,CACb,IAAIC,EAASD,EAAYC,OACzB,OAAOA,EAAOC,YAAcD,EAAOG,eAAiBH,EAAOG,eAAiBH,EAAOC,gBAAa,MAI5G,SAASzb,GAAW4b,GAEhB,YADA,IAAWA,IAASA,EAAO,IACpBA,EAAKnjB,WAAWyX,QAAQ,KAAM,SAASA,QAAQ,KAAM,QAAQA,QAAQ,KAAM,QAAQA,QAAQ,KAAM,UAAUA,QAAQ,KAAM,SAASA,QAAQ,MAAO,UAE5J,SAASjQ,KACL,MAAO,oBAAsB3H,aAAU,IAAWA,OAAO8C,SAE7D,SAAS8E,GAAiB2b,EAAUjO,GAEhC,YADA,IAAWA,IAAQA,EAAMtV,OAAO2S,UACzB,GAAG2F,MAAMta,KAAKsX,EAAI1N,iBAAiB2b,IAE9C,SAAS1b,GAAQ2b,EAAS7H,GACtB6H,EAAQza,iBAAiB,aAAc2C,IACvC8X,EAAQza,iBAAiB,QAAS4S,GAClC6H,EAAQza,iBAAiB,YAAY,SAAU0a,GAC3C,GAAIA,EAAMC,UAAYvT,GAAUmR,OAASmC,EAAMC,UAAYvT,GAAUoR,MAAO,OAAO5F,EAAQ8H,MAGnG,SAAS3b,GAAU6b,GACf,IAAIC,EAAYD,EAAK1gB,KAAMA,OAAO,IAAW2gB,EAAY5jB,OAAO8C,SAASG,KAAO2gB,EAAW9E,EAAO6E,EAAK7E,KAAM+E,EAAeF,EAAKG,QAASA,OAAU,IAAWD,GAAgBA,EAC/K,OAAOpY,GAAc3D,IAAW,WAC5B,IAAIoa,EAAM,GAAKjf,EAAO6b,EAClBiF,EAAU,GAAGzL,MAAMta,KAAK2U,SAASqR,qBAAqB,WAC1DF,GAAWC,EAAQD,UACnB,IAAK,IAAIlD,EAAM,EAAGA,EAAMmD,EAAQxiB,OAAQqf,IAAO,CAC3C,IAAIqD,EAASF,EAAQnD,GACrB,GAAIqD,EAAOC,KAAOD,EAAOC,IAAItM,QAAQ,eAAgB,IAAI8D,MAAM,KAAK,KAAOwG,EAAK,OAAO+B,KAE3F,CAAEnF,IAEV,SAAS/W,KACL,OAAO0D,GAAc1D,IAAuB,WACxC,IACI,GAAI,oBAAsB/H,OAAQ,OAAO,EACzC,GAAIA,OAAOmkB,aAAc,CACrB,IAAIrlB,EAAQmF,KAAKC,SAAS/D,WAC1BH,OAAOmkB,aAAaC,QAAQ,yBAA0BtlB,GACtD,IAAImd,EAASjc,OAAOmkB,aAAaE,QAAQ,0BAEzC,GADArkB,OAAOmkB,aAAaG,WAAW,0BAC3BxlB,IAAUmd,EAAQ,OAAO,GAEnC,MAAO5I,IACT,OAAO,KAGf,SAASrL,KACL,IAAIuc,EAAMvkB,OAAOwR,UACbgT,EAAUD,EAAIE,UAAY,GAAG/F,OAAO6F,EAAIE,WAAa,GAGzD,OAFAF,EAAIG,UAAYF,EAAQljB,KAAKijB,EAAIG,UACjCH,EAAII,cAAgBH,EAAQljB,KAAKijB,EAAII,cAC9BH,EAAQliB,KAAI,SAAUsiB,GACzB,GAAIA,GAAUA,EAAO9Y,MAAM,0BAA2B,CAClD,IAAI+Y,EAAgBD,EAAOlJ,MAAM,QACjC,MAAO,CACHoJ,QAASD,EAAc,GACvBE,KAAMF,EAAc,IAG5B,OAAOD,GAAUA,EAAO9Y,MAAM,cAAgB,CAC1CiZ,KAAMH,GACN,QACJjI,OAAO9J,SAEf,SAAS5K,GAAY+c,EAAW1F,GAC5B0F,EAAU/c,YAAYqX,GAE1B,SAASpX,GAAUsb,GACf,OAAOA,aAAmBxjB,OAAOilB,SAAW,OAASzB,GAAW,iBAAmBA,GAAW,IAAMA,EAAQ0B,UAAY,iBAAmB1B,EAAQ2B,OAAS,iBAAmB3B,EAAQ9f,cAE3L,SAASyE,GAAeid,EAAI9P,GAExB,YADA,IAAWA,IAAQA,EAAM3C,UAClBzK,GAAUkd,GAAMA,EAAK,iBAAmBA,EAAK9P,EAAIvC,cAAcqS,QAAM,EAEhF,SAAShd,GAAWgd,EAAI9P,QACpB,IAAWA,IAAQA,EAAM3C,UACzB,IAAI6Q,EAAUrb,GAAeid,EAAI9P,GACjC,GAAIkO,EAAS,OAAOA,EACpB,MAAM,IAAItiB,MAAM,yBAA2BgL,GAAUkZ,IAEzD,SAAS/c,GAAa+c,GAClB,OAAO,IAAIhR,EAAckG,cAAa,SAAUha,EAASU,GACrD,IAAI5C,EAAO8N,GAAUkZ,GACjBvC,EAAK1a,GAAeid,GACxB,GAAIvC,EAAI,OAAOviB,EAAQuiB,GACvB,GAAIrc,KAAmB,OAAOxF,EAAO,IAAIE,MAAM,iCAAmC9C,EAAO,oBACzF,IAAI6gB,EAAW0C,aAAY,WACvB,GAAIkB,EAAK1a,GAAeid,GACpB9kB,EAAQuiB,GACRjB,cAAc3C,QACX,GAAIzY,KAEP,OADAob,cAAc3C,GACPje,EAAO,IAAIE,MAAM,iCAAmC9C,EAAO,sBAEtE,OAGZ,IAmEIinB,GAnEA/c,GAAqB,SAASgd,GAE9B,SAASC,IACL,OAAOD,EAAiB5iB,MAAMjF,KAAMyW,YAAczW,KAEtD,OAJAmW,EAAe2R,EAAgBD,GAIxBC,EALc,CAMvBlW,IACF,SAAS9G,GAAM2Z,EAAK7I,GAChB,IAAI/G,GAAS+G,EAAUA,GAAW,IAAI/G,MAAOL,EAASoH,EAAQpH,OAC1D1O,EAAM,EACNiiB,EAAO,EACXlT,IAAUtS,OAAOylB,WAAaD,EAAOvhB,KAAKmO,OAAOpS,OAAOylB,WAAanT,GAAS,GAAKtS,OAAO0lB,QAAU1lB,OAAOqS,OAAOC,QAAUkT,EAAOvhB,KAAKmO,OAAOpS,OAAOqS,OAAOC,MAAQA,GAAS,KAC9KL,IAAWjS,OAAOgS,YAAczO,EAAMU,KAAKmO,OAAOpS,OAAOgS,YAAcC,GAAU,GAAKjS,OAAO2lB,QAAU3lB,OAAOqS,OAAOJ,SAAW1O,EAAMU,KAAKmO,OAAOpS,OAAOqS,OAAOJ,OAASA,GAAU,KACnLK,GAASL,IAAWoH,EAAUtF,EAAS,CACnCxQ,IAAKA,EACLiiB,KAAMA,EACNlT,MAAOA,EACPL,OAAQA,EACRmB,OAAQ,EACRwS,QAAS,EACTC,QAAS,EACTC,UAAW,EACXC,WAAY,GACb1M,IACH,IAAIjb,EAAOib,EAAQjb,MAAQ,UACpBib,EAAQjb,KACf,IAGImW,EAOIlB,EAVJyO,EAASvjB,OAAOwF,KAAKsV,GAAS/W,KAAI,SAAUlD,GAC5C,GAAI,MAAQia,EAAQja,GAAM,OAAOA,EAAM,IAAM8M,GAAUmN,EAAQja,OAC/Dud,OAAO9J,SAAS0F,KAAK,KAEzB,IACIhE,EAAMvU,OAAOgmB,KAAK9D,EAAK9jB,EAAM0jB,GAC/B,MAAOzO,GACL,MAAM,IAAI/K,GAAmB,gCAAkC+K,EAAItS,OAASsS,EAAIjQ,UAEpF,GAAI4R,EAAeT,GAEf,MAAM,IAAIjM,GAAmB,uCAMjC,OAJAtI,OAAO+I,iBAAiB,UAAU,WAC9B,IAAIkd,EACJ,OAAO,OAASA,EAAO1R,QAAO,EAAS0R,EAAKC,WAEzC3R,EAEX,SAAS/L,GAAc+L,EAAK+O,GACxB,IACI/O,EAAI5B,SAASqT,OACbzR,EAAI5B,SAASwT,MAAM7C,GACnB/O,EAAI5B,SAASuT,QACf,MAAO7S,GACL,IACIkB,EAAIzR,SAAW,+CAAiDiW,KAAK7M,UAAUoX,GAAQ,uBACzF,MAAO8C,MAGjB,SAAS3d,GAAqB8L,EAAKsO,GAC/B,IAAIwD,EAAMxD,EAAGyD,QAAQ1N,cACrB,GAAI,SAAWyN,EAAK,MAAM,IAAInlB,MAAM,oCAAsCmlB,GAE1E,IADA,IAAI1iB,EAAkB4Q,EAAI5B,SAAShP,gBAC1B4iB,EAAM,EAAGC,EAAcxY,GAAUrK,EAAgB8iB,UAAWF,EAAMC,EAAYjlB,OAAQglB,IAAO5iB,EAAgB+iB,YAAYF,EAAYD,IAC9I,IAAK,IAAII,EAAM,EAAGC,EAAc5Y,GAAU6U,EAAG4D,UAAWE,EAAMC,EAAYrlB,OAAQolB,IAAOhjB,EAAgBsE,YAAY2e,EAAYD,IAErI,SAASje,GAASma,EAAIgE,EAAWvR,QAC7B,IAAWA,IAAQA,EAAMtV,OAAO2S,UAChCkQ,EAAGiE,WAAajE,EAAGiE,WAAWC,QAAUF,EAAYhE,EAAG5a,YAAYqN,EAAI0R,eAAeH,IAG1F,SAASle,GAAe0M,GACpB,IAAKgQ,GAAyBA,IAA0B,IAAI5P,EAA0BtR,SAASO,IAAI2Q,GAAQ,CACvG,IAAI4R,EAAW5B,GAAuB3mB,IAAI2W,GAC1C,GAAI4R,EAAU,OAAOA,EAEzB,IAAIrlB,EAAU,IAAIwS,EAAckG,cAAa,SAAUha,EAASU,GAC5DqU,EAAMtM,iBAAiB,QAAQ,YAC1B,SAASsM,GAaN,GAZC,WACG,IAAK,IAAIxX,EAAI,EAAGA,EAAIiX,EAAcvT,OAAQ1D,IAAK,CAC3C,IAAIsF,GAAS,EACb,IACIA,EAAS2R,EAAcjX,GAAGsF,OAC5B,MAAOkQ,IACLlQ,IACA4R,EAAatS,OAAO5E,EAAG,GACvBiX,EAAcrS,OAAO5E,EAAG,KARnC,GAYGwX,GAASA,EAAM7R,cAAe,IAC9BsR,EAAcxT,KAAK+T,EAAM7R,eACzBuR,EAAazT,KAAK+T,GACpB,MAAOhC,KAhBZ,CAiBCgC,GACF/U,EAAQ+U,MAEZA,EAAMtM,iBAAiB,SAAS,SAAUsK,GACtCgC,EAAM7R,cAAgBlD,EAAQ+U,GAASrU,EAAOqS,SAItD,OADAgS,GAAuBhhB,IAAIgR,EAAOzT,GAC3BA,EAEX,SAASgH,GAAiByM,GACtB,OAAO1M,GAAe0M,GAAOjV,MAAK,SAAU8mB,GACxC,IAAKA,EAAY1jB,cAAe,MAAM,IAAItC,MAAM,mCAChD,OAAOgmB,EAAY1jB,iBAG3B,SAASqF,GAAcwd,EAAKhN,EAAS2L,QACjC,IAAWqB,IAAQA,EAAM,YACzB,IAAWhN,IAAYA,EAAU,IACjCgN,EAAMA,EAAIzN,cACV,IAAI4K,EAAU7Q,SAAS9J,cAAcwd,GAIrC,GAHAhN,EAAQ8L,OAAS9Y,GAAOmX,EAAQ2B,MAAO9L,EAAQ8L,OAC/C9L,EAAQ8N,QAAU3D,EAAQ4D,UAAY/N,EAAQ8N,MAAM5O,KAAK,MACzDc,EAAQ+L,IAAM5B,EAAQ6D,aAAa,KAAMhO,EAAQ+L,IAC7C/L,EAAQiO,WAAY,IAAK,IAAIC,EAAO,EAAGC,EAAgBjpB,OAAOwF,KAAKsV,EAAQiO,YAAaC,EAAOC,EAAcjmB,OAAQgmB,IAAQ,CAC7H,IAAInoB,EAAMooB,EAAcD,GACxB/D,EAAQ6D,aAAajoB,EAAKia,EAAQiO,WAAWloB,IAIjD,GAFAia,EAAQyN,YAAcpe,GAAS8a,EAASnK,EAAQyN,YAChD9B,GAAa/c,GAAY+c,EAAWxB,GAChCnK,EAAQiK,KAAM,GAAI,WAAa+C,EAAK,CACpC,IAAKrB,IAAcxB,EAAQhgB,cAAe,MAAM,IAAItC,MAAM,8EAC1DsH,GAAcgb,EAAQhgB,cAAe6V,EAAQiK,WAC1CE,EAAQiE,UAAYpO,EAAQiK,KACnC,OAAOE,EAEX,SAAS1a,GAAOuQ,EAAS2L,QACrB,IAAW3L,IAAYA,EAAU,IACjC,IAAI8L,EAAQ9L,EAAQ8L,OAAS,GACzB9P,EAAQxM,GAAc,SAAU,CAChCye,WAAYvT,EAAS,CACjB2T,kBAAmB,QACpBrO,EAAQiO,YAAc,IACzBnC,MAAOpR,EAAS,CACZ4T,gBAAiB,cACjBC,OAAQ,QACTzC,GACH7B,KAAMjK,EAAQiK,KACd6D,MAAO9N,EAAQ8N,QAEfU,EAAO7nB,OAAOwR,UAAUE,UAAU5F,MAAM,cAK5C,OAJAuJ,EAAMyS,aAAa,OAASzS,EAAMgS,aAAa,KAAMpc,MACrDtC,GAAe0M,GACf2P,GAAa5c,GAAW4c,GAAW/c,YAAYoN,IAC9CgE,EAAQ6I,KAAO2F,IAASxS,EAAMgS,aAAa,MAAOhO,EAAQ6I,KAAO,eAC3D7M,EAEX,SAAStM,GAAiByM,EAAKiO,EAAO9H,GAElC,OADAnG,EAAIzM,iBAAiB0a,EAAO9H,GACrB,CACHnZ,OAAQ,WACJgT,EAAIuS,oBAAoBtE,EAAO9H,KAI3C,SAAS3S,GAAWwa,EAASwE,EAAYrM,GACrCA,EAAUhQ,GAAKgQ,GACf,IAAK,IAAIsM,EAAO,EAAGA,EAAOD,EAAWzmB,OAAQ0mB,IAAQzE,EAAQza,iBAAiBif,EAAWC,GAAOtM,GAChG,MAAO,CACHnZ,OAAQmJ,IAAK,WACT,IAAK,IAAIuc,EAAO,EAAGA,EAAOF,EAAWzmB,OAAQ2mB,IAAQ1E,EAAQuE,oBAAoBC,EAAWE,GAAOvM,OAI/G,IAAIwM,GAAkB,CAAE,SAAU,MAAO,KAAM,KAC/C,SAASlf,GAAaua,EAASplB,EAAMU,GACjC0kB,EAAQ2B,MAAM/mB,GAAQU,EAEtB,IADA,IAAIspB,EAAkBxa,GAAsBxP,GACnCiqB,EAAO,EAAGA,EAAOF,GAAgB5mB,OAAQ8mB,IAAQ7E,EAAQ2B,MAAM,GAAKgD,GAAgBE,GAAQD,GAAmBtpB,EAE5H,IAAIwpB,GAAyB,CAAE,iBAAkB,uBAAwB,kBAAmB,oBACxFC,GAAuB,CAAE,eAAgB,qBAAsB,gBAAiB,kBACpF,SAASrf,GAAQsa,EAASplB,EAAMoqB,EAAOxmB,GAEnC,YADA,IAAWA,IAAYA,EAAU,KAC1B,IAAIoS,EAAckG,cAAa,SAAUha,EAASU,GACrD,IAAI6hB,EAAKza,GAAWob,GACpB,IAAKX,EAAI,OAAOviB,IAChB,IACImoB,EACAC,EACAC,EACAC,EAJAC,GAAa,EAKjB,SAASC,IACL7mB,aAAawmB,GACbxmB,aAAaymB,GACbC,EAAWnmB,SACXomB,EAASpmB,SAEbmmB,EAAa3f,GAAW6Z,EAAIyF,IAAwB,SAAU7E,GACtDA,EAAMxP,SAAW4O,GAAMY,EAAMsF,gBAAkB3qB,IAC/C6D,aAAawmB,GACbhF,EAAMuF,kBACNL,EAAWnmB,SACXqmB,GAAa,EACbH,EAAatnB,YAAW,WACpB0nB,IACAxoB,MACA0B,OAGZ4mB,EAAW5f,GAAW6Z,EAAI0F,IAAsB,SAAU9E,GACtD,GAAIA,EAAMxP,SAAW4O,GAAMY,EAAMsF,gBAAkB3qB,EAE/C,OADA0qB,IACO,iBAAmBrF,EAAMsF,eAAiBtF,EAAMsF,gBAAkB3qB,EAAO4C,EAAO,iCAAmC5C,EAAO,WAAaqlB,EAAMsF,eAAiBzoB,OAG7K2I,GAAa4Z,EAAI,gBAAiBzkB,GAClCqqB,EAAernB,YAAW,WACtB,IAAKynB,EAED,OADAC,IACOxoB,MAEX,KACJkoB,GAASA,EAAMM,MAGvB,SAAS3f,GAAmBqa,GACxBA,EAAQ2B,MAAM8D,YAAY,aAAc,IAE5C,SAAS7f,GAAqBoa,GAC1BA,EAAQ2B,MAAM8D,YAAY,aAAc,SAAU,aAEtD,SAAS5f,GAAYma,GACjBA,EAAQ2B,MAAM8D,YAAY,UAAW,IAEzC,SAAS3f,GAAYka,GACjBA,EAAQ2B,MAAM8D,YAAY,UAAW,OAAQ,aAEjD,SAAS1f,GAAeia,GACpBA,GAAWA,EAAQ/f,YAAc+f,EAAQ/f,WAAWijB,YAAYlD,GAEpE,SAASha,GAAega,EAASplB,EAAMoqB,GACnC,IAAIU,EAAYhgB,GAAQsa,EAASplB,EAAMoqB,GAEvC,OADAnf,GAAYma,GACL0F,EAEX,SAASzf,GAAe+Z,EAASplB,EAAMoqB,GACnC,OAAOtf,GAAQsa,EAASplB,EAAMoqB,GAAOpoB,MAAK,WACtCkJ,GAAYka,MAGpB,SAAS9Z,GAAS8Z,EAASplB,GACvBolB,EAAQ2F,UAAUC,IAAIhrB,GAE1B,SAASuL,GAAY6Z,EAASplB,GAC1BolB,EAAQ2F,UAAUE,OAAOjrB,GAE7B,SAASwL,GAAgBiZ,GACrB,QAASA,GAAMA,EAAGpf,YAAcof,EAAGnf,eAAiBmf,EAAGnf,cAAcC,iBAAmBkf,EAAGnf,cAAcC,gBAAgBC,SAASif,IAEtI,SAAShZ,GAAqB2Z,EAAS7H,GACnCA,EAAUhQ,GAAKgQ,GACf,IAEIsD,EACAqK,EACAC,EAJAxL,GAAY,EACZyL,EAAoB,GAIpBhnB,EAAS,WACTub,GAAY,EACZ,IAAK,IAAI0L,EAAO,EAAGA,EAAOD,EAAkBjoB,OAAQkoB,IAAQD,EAAkBC,GAAMC,aACpFzK,GAAYA,EAASzc,SACrB+mB,GAAuBA,EAAoBxB,oBAAoB,SAAU4B,GACzEL,GAAoB/f,GAAe+f,IAEnCK,EAAgB,WACX5L,IACDpC,IACAnZ,MAGR,GAAIoH,GAAgB4Z,GAEhB,OADAmG,IACO,CACHnnB,OAAQA,GAGhB,GAAIxC,OAAO4pB,iBAEP,IADA,IAAIC,EAAkBrG,EAAQsG,cACxBD,GAAmB,CACrB,IAAIE,EAAmB,IAAI/pB,OAAO4pB,kBAAiB,WAC/ChgB,GAAgB4Z,IAAYmG,OAEhCI,EAAiBC,QAAQH,EAAiB,CACtCI,WAAW,IAEfT,EAAkBloB,KAAKyoB,GACvBF,EAAkBA,EAAgBC,cAe1C,OAZCR,EAAmB3W,SAAS9J,cAAc,WAAWwe,aAAa,OAAQ,kBAAoBpc,KAAa,MAC5Gqe,EAAiBnE,MAAM+E,QAAU,OACjCthB,GAAiB0gB,GAAkBlpB,MAAK,SAAU+pB,IAC7CZ,EAAsB,SAAShV,GAC5B,IAAKK,EAAaL,GAAM,MAAM,IAAIrT,MAAM,qCACxC,OAAOqT,EAFY,CAGrB4V,IAAWphB,iBAAiB,SAAU4gB,MAE5CnG,EAAQvb,YAAYqhB,GACpBrK,EAAW/R,IAAa,WACpBtD,GAAgB4Z,IAAYmG,MAC5B,KACG,CACHnnB,OAAQA,GAGhB,SAASsH,GAAW+Y,EAAIvN,QACpB,IAAWA,IAAQA,EAAMtV,OAAO2S,UAChC,IAAK,IAAIyX,EAAO,EAAGC,EAAqBziB,GAAiB,SAAUib,GAAKuH,EAAOC,EAAmB9oB,OAAQ6oB,IAAQ,CAC9G,IAAInG,EAASoG,EAAmBD,GAC5B3mB,EAAawgB,EAAOxgB,WACxB,GAAIA,EAAY,CACZ,IAAI6mB,EAAYhV,EAAIzM,cAAc,UAClCyhB,EAAU1N,KAAOqH,EAAOsG,YACxB9mB,EAAW+mB,aAAaF,EAAWrG,KAI/C,SAASla,GAAS8Y,EAAIlH,EAAS8O,GAC3B,IAAIC,OAAQ,IAAWD,EAAQ,GAAKA,EAAOE,EAAcD,EAAMpY,MAAOA,OAAQ,IAAWqY,GAAeA,EAAaC,EAAeF,EAAMzY,OAAQA,OAAS,IAAW2Y,GAAgBA,EAAcC,EAAiBH,EAAMzL,SAAUA,OAAW,IAAW4L,EAAiB,IAAMA,EAAgBC,EAAYJ,EAAMnW,IAAKA,OAAM,IAAWuW,EAAY9qB,OAAS8qB,EAC3VC,EAAelI,EAAGC,YAClBkI,EAAgBnI,EAAGE,aACnBkI,GAAW,EACftP,EAAQ,CACJrJ,MAAOyY,EACP9Y,OAAQ+Y,IAEZ,IAYIE,EACAlpB,EAbAmpB,EAAQ,WACR,IAAKF,GAAY3jB,GAAiBub,GAAK,CACnC,IAAIuI,EAAWvI,EAAGC,YACduI,EAAYxI,EAAGE,cAClBzQ,GAAS8Y,IAAaL,GAAgB9Y,GAAUoZ,IAAcL,IAAkBrP,EAAQ,CACrFrJ,MAAO8Y,EACPnZ,OAAQoZ,IAEZN,EAAeK,EACfJ,EAAgBK,IAkBxB,OAbA9W,EAAIxL,iBAAiB,SAAUoiB,QAC3B,IAAW5W,EAAI+W,iBACdJ,EAAW,IAAI3W,EAAI+W,eAAeH,IAAQnB,QAAQnH,GACnD7gB,EAAUkL,GAAaie,EAAO,GAAKlM,SAC5B,IAAW1K,EAAIqV,mBACrBsB,EAAW,IAAI3W,EAAIqV,iBAAiBuB,IAAQnB,QAAQnH,EAAI,CACrDyE,YAAY,EACZ2C,WAAW,EACXsB,SAAS,EACTC,eAAe,IAEnBxpB,EAAUkL,GAAaie,EAAO,GAAKlM,IAChCjd,EAAUkL,GAAaie,EAAOlM,GAC9B,CACHzc,OAAQ,WACJyoB,GAAW,EACXC,EAASxB,aACT1pB,OAAO+nB,oBAAoB,SAAUoD,GACrCnpB,EAAQQ,WAIpB,SAASwH,GAAoBkY,GACzB,IAAIe,EAAc1b,KAClB,GAAI0b,GAAe,mBAAqBA,EAAYwI,WAEhD,IADA,IAAIC,EAAUzI,EAAYwI,aACjB5tB,EAAI,EAAGA,EAAI6tB,EAAQnqB,OAAQ1D,IAAK,CACrC,IAAIuZ,EAAQsU,EAAQ7tB,GACpB,GAAIuZ,GAASA,EAAMhZ,MAAQ,IAAMgZ,EAAMhZ,KAAKiD,QAAQ6gB,IAAQ,iBAAmB9K,EAAMuU,SAAU,OAAO1nB,KAAKyU,MAAMtB,EAAMuU,WAInI,SAAS1hB,GAAgBuZ,GACrB,KAAMA,EAAQ/f,YAAc+f,EAAUA,EAAQ/f,WAC9C,MAAO,wBAA0B+f,EAAQrjB,WAE7C,SAAS+J,GAAcsZ,GACnB,KAAMA,EAAQ/f,YAAc+f,EAAUA,EAAQ/f,WAC9C,GAAIwG,GAAgBuZ,GAAU,OAAOA,EAEzC,SAASrZ,GAAcqZ,GACnB,IAAIoI,EAAa1hB,GAAcsZ,GAC/B,GAAIoI,GAAcA,EAAW3oB,KAAM,OAAO2oB,EAAW3oB,KAEzD,SAASmH,GAAiBoZ,GACtB,IAAIqI,EAAa1hB,GAAcqZ,GAC/B,IAAKqI,EAAY,MAAM,IAAI3qB,MAAM,gCACjC,IAAI4qB,EAAW,eAAiB7gB,KAC5B8gB,EAAOpZ,SAAS9J,cAAc,QAClCkjB,EAAK1E,aAAa,OAAQyE,GAC1BtI,EAAQvb,YAAY8jB,GACpB,IAAIC,EAAerZ,SAAS9J,cAAc,OAG1C,OAFAmjB,EAAa3E,aAAa,OAAQyE,GAClCD,EAAW5jB,YAAY+jB,GAChB/hB,GAAgB4hB,GAAczhB,GAAiB4hB,GAAgBA,EAE1E,SAAS3hB,GAAkBwY,GACvB,IAAIoJ,EAAU,SAASA,EAAQxI,GAI3B,OAHAZ,EAAGkF,oBAAoB,QAASkE,GAChCxI,EAAMyI,iBACNrJ,EAAGsJ,QACI,GAEXtJ,EAAG9Z,iBAAiB,aAAa,WAC7B8Z,EAAG9Z,iBAAiB,QAASkjB,GAC7B7qB,YAAW,WACPyhB,EAAGkF,oBAAoB,QAASkE,KAChC,MAGZ,SAAS3hB,KACL,IACI,MAAM,IAAIpJ,MAAM,KAClB,MAAOmS,GACL,OAAOA,EAAItS,OAAS,IAG5B,IAAIqrB,GAAgB,oBAAsBzZ,SAAWA,SAASyZ,cAAgB,KAC1E7hB,GAAmBc,IAAQ,WAC3B,GAAI+gB,GAAe,OAAOA,GAC1B,GAAIA,GAAgB,WAChB,IACI,IAAIrrB,EAAQuJ,KACR+hB,EAAe,kCAAkCC,KAAKvrB,GACtDwrB,EAAiBF,GAAgBA,EAAa,GAClD,IAAKE,EAAgB,OACrB,IAAK,IAAIC,EAAO,EAAGC,EAAyB,GAAGnU,MAAMta,KAAK2U,SAASqR,qBAAqB,WAAWF,UAAW0I,EAAOC,EAAuBlrB,OAAQirB,IAAQ,CACxJ,IAAIvI,EAASwI,EAAuBD,GACpC,GAAIvI,EAAOC,KAAOD,EAAOC,MAAQqI,EAAgB,OAAOtI,GAE9D,MAAO5Q,KAVO,GAWf,OAAO+Y,GACZ,MAAM,IAAIlrB,MAAM,uCAEhBwrB,GAAazhB,KACbT,GAAsBa,IAAQ,WAC9B,IAAI4Y,EACJ,IACIA,EAAS1Z,KACX,MAAO8I,GACL,OAAOqZ,GAEX,IAAI7T,EAAMoL,EAAO0I,aAAavc,GAAWoR,KACzC,GAAI3I,GAAO,iBAAmBA,EAAK,OAAOA,EAC1C,IAAKA,EAAMoL,EAAO0I,aAAavc,GAAWoR,IAAM,WAAa,iBAAmB3I,EAAK,OAAOA,EAC5F,GAAIoL,EAAOC,IAAK,CACZ,IAAI0I,EAAe/gB,GAAWkN,KAAK7M,UAAU,CACzCgY,IAAKD,EAAOC,IACZ2I,QAAS5I,EAAO4I,WAEpBhU,EAAM,OAAS+T,EAAatU,MAAMsU,EAAarrB,OAAS8O,SACrDwI,EAAM5N,KAEb,OADAgZ,EAAOoD,aAAajX,GAAWoR,IAAM,QAAS3I,GACvCA,KAEX,SAASpO,GAAWqiB,GAChB,IAAI5K,EAAM4K,EAAM5K,IAAKjO,EAAS6Y,EAAM7Y,OAAQwN,EAAOqL,EAAMrL,KAAMsL,EAAeD,EAAM1T,OAAQA,OAAS,IAAW2T,EAAe,OAASA,EACpIC,EAAOra,SAAS9J,cAAc,QAKlC,GAJAmkB,EAAK3F,aAAa,SAAUpT,GAC5B+Y,EAAK3F,aAAa,SAAUjO,GAC5B4T,EAAK3F,aAAa,SAAUnF,GAC5B8K,EAAK7H,MAAM+E,QAAU,OACjBzI,EAAM,IAAK,IAAIwL,EAAO,EAAGC,EAAgB3uB,OAAOwF,KAAK0d,GAAOwL,EAAOC,EAAc3rB,OAAQ0rB,IAAQ,CACjG,IAAIE,EACA/tB,EAAM8tB,EAAcD,GACpBG,EAAQza,SAAS9J,cAAc,SACnCukB,EAAM/F,aAAa,OAAQjoB,GAC3BguB,EAAM/F,aAAa,QAAS,OAAS8F,EAAY1L,EAAKriB,SAAQ,EAAS+tB,EAAUhtB,YACjF6sB,EAAK/kB,YAAYmlB,GAErB7mB,KAAU0B,YAAY+kB,GACtBA,EAAKK,SACL9mB,KAAUmgB,YAAYsG,GAE1B,SAASpiB,GAAW+Y,GAChB,IAAIvlB,EAAOulB,EAAKvlB,KAAMkvB,EAAgB3J,EAAK4J,SAAUA,OAAW,IAAWD,EAAgB,KAAOA,EAClG,OAAO7hB,GAAcb,IAAY,WAC7B,IAEI4iB,EAFAC,EAAc,KAAOrvB,EAAO,aAC5BsvB,EAAaziB,KAEjB,SAAS0iB,EAAShS,GACd,IACIiS,EADAC,EAAsB9lB,KAG1B,GADAylB,IAAoBI,EAAUJ,IACzBI,GAAWC,EAAqB,CACjC,IAAIC,EAAa9tB,OAAOmkB,aAAaE,QAAQoJ,GAC7CK,IAAeF,EAAU7U,KAAKgV,MAAMD,IAExCF,IAAYA,EAAU1iB,KAAYuiB,IAClCG,IAAYA,EAAU,CAClBxI,GAAIsI,IAERE,EAAQxI,KAAOwI,EAAQxI,GAAKsI,GAC5BF,EAAkBI,EAClB,IAAI3R,EAASN,EAAQiS,GAGrB,OAFAC,EAAsB7tB,OAAOmkB,aAAaC,QAAQqJ,EAAa1U,KAAK7M,UAAU0hB,IAAY1iB,KAAYuiB,GAAeG,EACrHJ,EAAkB,KACXvR,EAEX,SAAS+R,IACL,OAAOL,GAAS,SAAUC,GACtB,OAAOA,EAAQxI,MAGvB,SAAS6I,EAAWtS,GAChB,OAAOgS,GAAS,SAAUC,GACtB,IAAIM,EAAUN,EAAQO,YAClB/T,EAAMnE,KAAKmE,MAOf,OANA8T,GAAW9T,EAAM8T,EAAQE,QAAUb,IAAaW,EAAU,MAC1DA,IAAYA,EAAU,CAClBG,KAAMpjB,KACNmjB,QAAShU,IAEbwT,EAAQO,YAAcD,EACfvS,EAAQuS,MAGvB,MAAO,CACHP,SAAUA,EACVK,MAAOA,EACPM,aAAc,WACV,OAAON,MAAYN,GAEvBa,gBAAiB,SAAS5S,GACtB,OAAOsS,GAAW,SAAUC,GAExB,OADAA,EAAQM,MAAQN,EAAQM,OAAS,GAC1B7S,EAAQuS,EAAQM,WAG/BC,aAAc,WACV,OAAOR,GAAW,SAAUC,GACxB,OAAOA,EAAQG,YAI3B,CAAE,CACFjwB,KAAMA,EACNmvB,SAAUA,KAGlB,SAASmB,KACL,OAAO9jB,GAAW,CACdxM,KAAM,sBAGd,SAASuwB,GAAcvwB,GACnB,OAAOswB,KAA6BH,iBAAgB,SAAUC,GAE1D,OADAA,EAAMI,cAAgBJ,EAAMI,eAAiB,IACxC,IAAMJ,EAAMI,cAAcvtB,QAAQjD,KACnCowB,EAAMI,cAActtB,KAAKlD,IAClB,MAKnB,SAASywB,GAAiBC,GACtB,OAAO7qB,KAAKyU,MAAMzU,KAAKC,SAAW4qB,GAEtC,SAASpkB,GAAWiZ,GAChB,IAQIoL,EARA3wB,EAAOulB,EAAKvlB,KAAM4wB,EAAcrL,EAAKsL,OAAQA,OAAS,IAAWD,EAAc,GAAKA,EAAaE,EAAoBvL,EAAKwL,aAAcA,OAAe,IAAWD,EAAoBxjB,GAAgBwjB,EAAmBE,EAAqBzL,EAAK0L,cAAeA,OAAgB,IAAWD,EAAqB1jB,GAAgB0jB,EAAoBE,EAAc3L,EAAK4L,OACzWC,OAAW,IAAWF,GAAeA,EAAc,SAASlxB,GAC5D,OAAOswB,KAA6Bf,UAAS,SAAUa,GAGnD,OAFAA,EAAMiB,oBAAsBjB,EAAMiB,qBAAuB,GACzDjB,EAAMiB,oBAAoBrxB,GAAQowB,EAAMiB,oBAAoBrxB,IAASywB,GAAiB,KAC/EL,EAAMiB,oBAAoBrxB,MAJc,CAMrDA,GAAQywB,GAAiB,KAEvBa,EAAYtxB,EAAO,KAAO2wB,EAAQS,EAAWP,EAAS,OAASA,GAAU,IAAMA,GAAUO,GAAYA,EAAW,EAAIP,EAAS,UAAY,YACzIU,GAAU,EACVC,GAAS,EACb,IACI5vB,OAAOmkB,cAAgBnkB,OAAOmkB,aAAaE,QAAQjmB,KAAUwxB,GAAS,GACxE,MAAOvc,IACT,IAAIwc,EAAM,CACNC,UAAW,WACP,MAAO,SAAWf,GAASa,GAE/BG,WAAY,WACR,MAAO,SAAWhB,IAAUa,GAEhCI,aAAc,WACV,OAAON,GAEXO,IAAK,SAASC,EAAYC,GAEtB,YADA,IAAWA,IAAYA,EAAU,IAC5BR,GACLhB,GAAce,EAAY,IAAM3W,KAAK7M,UAAUikB,KAAahB,EAAa,CACrE/wB,KAAMA,EACNsxB,UAAWA,EACXS,QAASA,EACTX,SAAUA,IAEdb,GAAce,EAAY,IAAMQ,EAAa,IAAMnX,KAAK7M,UAAUikB,KAAad,EAAc,CACzFjxB,KAAMA,EACNsxB,UAAWA,EACXQ,WAAYA,EACZC,QAASA,EACTX,SAAUA,IAEPK,GAdcA,GAgBzBO,SAAU,SAASD,GAGf,YAFA,IAAWA,IAAYA,EAAU,IACjCR,GAAU,EACHE,EAAII,IAAI,QAASE,IAE5BE,YAAa,SAASF,GAElB,YADA,IAAWA,IAAYA,EAAU,IAC1BN,EAAII,IAAI,WAAYE,KAGnC,OAAON,EAEX,SAASllB,GAAmBgZ,GACxB,IAAIvlB,EAAOulB,EAAKvlB,KAAMkyB,EAAe3M,EAAK4M,QAASA,OAAU,IAAWD,EAAe,SAAWA,EAC9FE,EAAStlB,KACTulB,EAAY,KAAOryB,EAAO,KAAOmyB,EAAU,YAC3CG,EAAYF,EAAOC,GAAaD,EAAOC,IAAc,GACzD,MAAO,CACH/xB,IAAK,SAASU,EAAKuxB,GAEf,OADAA,EAAWA,GAAY,GAChBD,EAAUtxB,GAAOsxB,EAAUtxB,IAAQuxB,IAItD,IAAIC,GAAiB,GACrB,SAASthB,GAAQqU,GACb,IAAIzB,EAAMyB,EAAKzB,IAAK2O,EAAclN,EAAKvK,OAAQA,OAAS,IAAWyX,EAAc,MAAQA,EAAaC,EAAenN,EAAKoN,QAASA,OAAU,IAAWD,EAAe,GAAKA,EAAcE,EAAOrN,EAAKqN,KAAMC,EAAOtN,EAAKsN,KAAMxP,EAAOkC,EAAKlC,KAAMyP,EAAWvN,EAAKpP,IAAKA,OAAM,IAAW2c,EAAWlxB,OAASkxB,EAAUC,EAAexN,EAAK3hB,QAASA,OAAU,IAAWmvB,EAAe,EAAIA,EACzX,OAAO,IAAI/c,EAAckG,cAAa,SAAUha,EAASU,GACrD,GAAIgwB,GAAQC,GAAQD,GAAQvP,GAAQwP,GAAQD,EAAM,MAAM,IAAI9vB,MAAM,sEAElE,IADA,IAAIkwB,EAAoB,GACfxQ,EAAM,EAAG4G,EAAgBjpB,OAAOwF,KAAKgtB,GAAUnQ,EAAM4G,EAAcjmB,OAAQqf,IAAO,CACvF,IAAIxhB,EAAMooB,EAAc5G,GACxBwQ,EAAkBhyB,EAAIwZ,eAAiBmY,EAAQ3xB,GAEnD4xB,EAAOI,EAAkB,gBAAkBA,EAAkB,iBAAmB,oBAAsBH,GAAQxP,KAAU2P,EAAkB,gBAAkBA,EAAkB,iBAAmB,oDACjMA,EAAkBC,OAASD,EAAkBC,QAAU,mBACvD,IAAK,IAAI9K,EAAM,EAAGA,EAAMqK,GAAervB,OAAQglB,IAE3C,IADA,IAAI+K,GAAe,EAAIV,GAAerK,MAC7BI,EAAM,EAAGuG,EAAgB3uB,OAAOwF,KAAKutB,GAAe3K,EAAMuG,EAAc3rB,OAAQolB,IAAO,CAC5F,IAAI3M,EAAOkT,EAAcvG,GACzByK,EAAkBpX,EAAKpB,eAAiB0Y,EAAatX,GAG7D,IAAIuX,EAAM,IAAIhd,EAAIid,eA8BlB,IAAK,IAAI7W,KA7BT4W,EAAIxoB,iBAAiB,QAAQ,WACzB,IAAI0oB,EAAkB,SAASC,QAC3B,IAAWA,IAAeA,EAAa,IAEvC,IADA,IAAIzV,EAAS,GACJqC,EAAM,EAAGqT,EAAyBD,EAAWE,OAAOlW,MAAM,MAAO4C,EAAMqT,EAAuBpwB,OAAQ+c,IAAO,CAClH,IAAIuT,EAAcF,EAAuBrT,GAAK5C,MAAM,KAAMtc,EAAMyyB,EAAY,GAAI7tB,EAAS6tB,EAAYvZ,MAAM,GAC3G2D,EAAO7c,EAAIwZ,eAAiB5U,EAAOuU,KAAK,KAAKqZ,OAEjD,OAAO3V,EAPW,CAQpBxe,KAAKq0B,yBACP,IAAKr0B,KAAK2V,OAAQ,OAAOpS,EAAO,IAAIE,MAAM,cAAgBkY,EAAOR,cAAgB,IAAMsJ,EAAM,sCAC7F,IAAI6P,EAAcN,EAAgB,gBAC9BO,EAASD,IAAgB,IAAMA,EAAY1wB,QAAQ,qBAAuB,IAAM0wB,EAAY1wB,QAAQ,cACpG4wB,EAAex0B,KAAKy0B,aACxB,IACID,EAAelZ,KAAKgV,MAAMkE,GAC5B,MAAO5e,GACL,GAAI2e,EAAQ,OAAOhxB,EAAO,IAAIE,MAAM,iBAAmBzD,KAAKy0B,aAAe,MAE/E,OAAO5xB,EAAQ,CACX8S,OAAQ3V,KAAK2V,OACb2d,QAASU,EACThQ,KAAMwQ,OAEV,GACJV,EAAIxoB,iBAAiB,SAAS,SAAUopB,GACpCnxB,EAAO,IAAIE,MAAM,cAAgBkY,EAAOR,cAAgB,IAAMsJ,EAAM,YAAciQ,EAAIhyB,WAAa,SACnG,GACJoxB,EAAIvL,KAAK5M,EAAQ8I,GAAK,GACJkP,EAAmBA,EAAkB3xB,eAAekb,IAAU4W,EAAIa,iBAAiBzX,EAAOyW,EAAkBzW,IAC9HqW,EAAOvP,EAAO1I,KAAK7M,UAAU8kB,GAAQC,IAASxP,EAAOljB,OAAOwF,KAAKktB,GAAM3uB,KAAI,SAAUlD,GACjF,OAAOuY,mBAAmBvY,GAAO,KAAO6xB,EAAOtZ,mBAAmBsZ,EAAK7xB,IAAQ,OAC/EmZ,KAAK,MACTgZ,EAAIvvB,QAAUA,EACduvB,EAAIc,UAAY,WACZrxB,EAAO,IAAIE,MAAM,cAAgBkY,EAAOR,cAAgB,IAAMsJ,EAAM,oBAExEqP,EAAIe,KAAK7Q,MAGjB,SAASlS,GAAiB6J,GACtBwX,GAAetvB,KAAK8X,GAExB,IAAI5J,IAAc,EAClB,SAASC,GAASwE,EAAQ7V,EAAMqhB,GAC5BA,EAAW3gB,MAAQuM,GAAQoU,EAAW3gB,MAAO,CACzCV,KAAMA,EACNqb,eAAe,IAGvB,SAAS/J,GAAmBuE,EAAQ7V,EAAMqhB,GACtCA,EAAW3gB,MAAQ0M,GAAUiU,EAAW3gB,MAAO,CAC3CV,KAAMA,IAGd,SAASuR,GAAO8H,GACZ,MAAO,iBAAmBA,GAAO,YAAY9F,KAAK8F,GAEtD,SAAS7H,GAAK6H,GACV,MAAO,iBAAmBA,GAAO,aAAa9F,KAAK8F,GAEvD,SAAS5H,GAAMoJ,GACX,GAAI,iBAAmBA,EAAK,OAAOA,EACnC,IAAInN,EAAQmN,EAAInN,MAAM,oBACtB,IAAKA,EAAO,MAAM,IAAI5K,MAAM,kCAAoC+X,GAChE,OAAOjB,SAASlM,EAAM,GAAI,IAE9B,SAASgE,GAAKmJ,GACV,OAAOpJ,GAAMoJ,GAAO,KAExB,SAASlJ,GAAMkJ,GACX,MAAO,iBAAmBA,EAAMnJ,GAAKmJ,GAAOtJ,GAAOsJ,GAAOA,EAAMnJ,GAAKmJ,GAEzE,SAASjJ,GAAOqM,EAAK7P,GACjB,OAAOwL,SAASqE,EAAMxM,GAAMrD,GAAQ,IAAK,IAE7C,SAASyD,GAAmBsiB,EAAK7lB,GAC7B,GAAI,iBAAmB6lB,EAAK,OAAOA,EACnC,GAAI5iB,GAAO4iB,GAAM,OAAOviB,GAAOtD,EAAK6lB,GACpC,GAAI3iB,GAAK2iB,GAAM,OAAO1iB,GAAM0iB,GAC5B,MAAM,IAAIrxB,MAAM,gCAAkCqxB,GAEtD,SAASriB,GAAYkJ,EAAQqR,GACzB,IAAI0G,QAAgB,IAAW1G,EAAQ,GAAKA,GAAOzoB,QAASA,OAAU,IAAWmvB,EAAe,IAAMA,EAClGqB,EAAW,GACXpU,EAAW,GACf,OAAO,IAAIhK,EAAckG,cAAa,SAAUha,EAASU,GACrD,IAAIyxB,EAAQrxB,YAAW,WACnBoxB,EAASjxB,QAAUP,EAAO,IAAIE,MAAM,YAAcsxB,EAAS,GAAGp0B,KAAO,oBAAsB4D,EAAU,OACrGoc,EAAS7c,QAAUP,EAAO,IAAIE,MAAM,YAAckd,EAAS,GAAGhgB,KAAO,2BAA6B4D,EAAU,SAC5GA,GACA0wB,EAAS,SAASt0B,EAAMud,QACxB,IAAWA,IAAYA,EAAUjQ,IACjC,IAAImkB,EAAM,CACNzxB,KAAMA,EACNud,QAASA,GAGb,OADA6W,EAASlxB,KAAKuuB,GACP,WAEH,IADA,IAAIpV,EAAQhd,KACHqc,EAAO5F,UAAU3S,OAAQ6U,EAAO,IAAI2D,MAAMD,GAAOE,EAAO,EAAGA,EAAOF,EAAME,IAAQ5D,EAAK4D,GAAQ9F,UAAU8F,GAChHhL,GAAgBwjB,EAAU3C,GAC1B,IAAI8C,EAAY5jB,IAAS,WACrB,IAAI6jB,EACJ,OAAQA,EAAWjX,GAAS3d,KAAK0E,MAAMkwB,EAAU,CAAEnY,GAAQiE,OAAOtI,OACjE6F,EAAS0W,EAAU1W,OAAQrb,EAAQ+xB,EAAU/xB,MAClD,GAAIA,EAKA,MAJAwd,EAAS9c,KAAK,CACVlD,KAAMA,EACNwD,QAASwS,EAAckG,aAAa9Y,YAAYZ,KAE9CA,EAMV,OAJAwd,EAAS9c,KAAK,CACVlD,KAAMA,EACNwD,QAASwS,EAAckG,aAAaha,QAAQ2b,KAEzCA,IAGX4W,EAAQ,SAASz0B,EAAMkZ,GAEvB,YADA,IAAWA,IAAOA,EAAK5L,IAChB,WACH,IAAIonB,EACJ1U,EAAS9c,KAAK,CACVlD,KAAMA,EACNwD,QAASwS,EAAckG,aAAa9Y,YAAY,IAAIN,MAAM,YAAc9C,EAAO,wBAEnF,IAAK,IAAIsc,EAAQxG,UAAU3S,OAAQ6U,EAAO,IAAI2D,MAAMW,GAAQC,EAAQ,EAAGA,EAAQD,EAAOC,IAASvE,EAAKuE,GAASzG,UAAUyG,GACvH,OAAQmY,EAAMxb,GAAItZ,KAAK0E,MAAMowB,EAAK,CAAEr1B,MAAOihB,OAAOtI,MAGtD2c,EAAc,SAAS30B,EAAMud,QAC7B,IAAWA,IAAYA,EAAUjQ,IACjC,IAAImkB,EAAM,CACNzxB,KAAMA,EACNud,QAASA,GAGb,OADA6W,EAASlxB,KAAKuuB,GACP,WAEH,IADA,IAAI/T,EAASre,KACJygB,EAAQhK,UAAU3S,OAAQ6U,EAAO,IAAI2D,MAAMmE,GAAQC,EAAQ,EAAGA,EAAQD,EAAOC,IAAS/H,EAAK+H,GAASjK,UAAUiK,GACvHnP,GAAgBwjB,EAAU3C,GAC1B,IAAImD,EAAajkB,IAAS,WACtB,IAAIkkB,EACJ,OAAQA,EAAYtX,GAAS3d,KAAK0E,MAAMuwB,EAAW,CAAEnX,GAAS4C,OAAOtI,OACpE6F,EAAS+W,EAAW/W,OAAQrb,EAAQoyB,EAAWpyB,MACpD,GAAIA,EAAO,MAAMA,EAOjB,OANAwd,EAAS9c,KAAK,CACVlD,KAAMA,EACNwD,QAASwS,EAAckG,aAAaha,QAAQ2b,GAAQ7b,MAAK,WACrD,MAAM,IAAIc,MAAM,YAAc9C,EAAO,wBACrCsN,MAEDuQ,IAGfmC,EAAS9c,KAAK,CACVlD,KAAM,sBACNwD,QAASwS,EAAckG,aAAavY,KAAI,WACpC,OAAOqX,EAAO,CACVsZ,OAAQA,EACRG,MAAOA,EACPE,YAAaA,EACbnyB,MAAOiyB,EACPK,KAAM,WACF,OAAO9e,EAAckG,aAAaha,kBAKlD,SAAU4yB,IACN,OAAO9e,EAAckG,aAAavY,KAAI,WAClC,GAAIqc,EAAS7c,OAAQ,CACjB,IAAI4xB,EAAO/U,EAAS,GACpB,OAAO+U,EAAKvxB,QAAQE,SAAQ,WACxBkN,GAAgBoP,EAAU+U,MAC1B/yB,KAAK8yB,OAEb9yB,MAAK,WACL,GAAIoyB,EAASjxB,OAAQ,OAAO6S,EAAckG,aAAa3X,MAAM,IAAIvC,KAAK8yB,MAT9E,GAWKpxB,SAAQ,WACTG,aAAawwB,MACbryB,KAAKE,EAASU,W,gBCr8GoL,oBAAoBxD,MAAKA,KAA9KH,EAAOD,QAAoM,SAASyC,GAAG,IAAId,EAAE,GAAG,SAASJ,EAAEW,GAAG,GAAGP,EAAEO,GAAG,OAAOP,EAAEO,GAAGlC,QAAQ,IAAIS,EAAEkB,EAAEO,GAAG,CAACzB,EAAEyB,EAAExB,GAAE,EAAGV,QAAQ,IAAI,OAAOyC,EAAEP,GAAGtB,KAAKH,EAAET,QAAQS,EAAEA,EAAET,QAAQuB,GAAGd,EAAEC,GAAE,EAAGD,EAAET,QAAQ,OAAOuB,EAAEV,EAAE4B,EAAElB,EAAET,EAAEa,EAAEJ,EAAER,EAAE,SAAS0B,EAAEd,EAAEO,GAAGX,EAAEL,EAAEuB,EAAEd,IAAIR,OAAOC,eAAeqB,EAAEd,EAAE,CAACN,YAAW,EAAGC,IAAIY,KAAKX,EAAEA,EAAE,SAASkB,GAAG,oBAAoBjB,QAAQA,OAAOC,aAAaN,OAAOC,eAAeqB,EAAEjB,OAAOC,YAAY,CAACC,MAAM,WAAWP,OAAOC,eAAeqB,EAAE,aAAa,CAACf,OAAM,KAAMH,EAAEI,EAAE,SAASc,EAAEd,GAAG,GAAG,EAAEA,IAAIc,EAAElB,EAAEkB,IAAI,EAAEd,EAAE,OAAOc,EAAE,GAAG,EAAEd,GAAG,iBAAiBc,GAAGA,GAAGA,EAAEZ,WAAW,OAAOY,EAAE,IAAIP,EAAEf,OAAOY,OAAO,MAAM,GAAGR,EAAEA,EAAEW,GAAGf,OAAOC,eAAec,EAAE,UAAU,CAACb,YAAW,EAAGK,MAAMe,IAAI,EAAEd,GAAG,iBAAiBc,EAAE,IAAI,IAAIhC,KAAKgC,EAAElB,EAAER,EAAEmB,EAAEzB,EAAE,SAASkB,GAAG,OAAOc,EAAEd,IAAIM,KAAK,KAAKxB,IAAI,OAAOyB,GAAGX,EAAEW,EAAE,SAASO,GAAG,IAAId,EAAEc,GAAGA,EAAEZ,WAAW,WAAW,OAAOY,EAAEC,SAAS,WAAW,OAAOD,GAAG,OAAOlB,EAAER,EAAEY,EAAE,IAAIA,GAAGA,GAAGJ,EAAEL,EAAE,SAASuB,EAAEd,GAAG,MAAM,GAAGU,eAAezB,KAAK6B,EAAEd,IAAIJ,EAAEe,EAAE,GAAGf,EAAEA,EAAEgB,EAAE,GAAl4B,CAAs4B,CAAC,SAASE,EAAEd,EAAEJ,GAAG,aAAaA,EAAEA,EAAEI,GAAGJ,EAAER,EAAEY,EAAE,WAAU,WAAY,OAAOjB,KAAK,IAAIwB,EAAE,mCAAmC,SAASzB,EAAEgC,GAAG,YAAO,IAASA,IAAIA,EAAEG,QAAQ,WAAWH,EAAEiD,SAASC,SAAS,SAASvC,EAAEX,GAAG,IAAI,OAAM,EAAG,MAAMA,IAAI,OAAM,EAAG,SAASvB,EAAEuB,QAAG,IAASA,IAAIA,EAAEG,QAAQ,IAAIjB,EAAEc,EAAEiD,SAAS,IAAI/D,EAAE,MAAM,IAAImC,MAAM,gCAAgC,IAAIvC,EAAEI,EAAEgE,SAAS,IAAIpE,EAAE,MAAM,IAAIuC,MAAM,gCAAgC,GAAG,UAAUvC,EAAE,MAAM,UAAU,GAAG,WAAWA,EAAE,CAAC,IAAIW,EAAE,SAASO,GAAG,QAAG,IAASA,IAAIA,EAAEG,QAAQH,EAAE,IAAI,GAAGA,EAAEmD,QAAQnD,EAAEmD,SAASnD,EAAE,OAAOA,EAAEmD,OAAO,MAAMnD,KAA5F,CAAkGA,GAAG,OAAOP,GAAGkB,IAAIlC,EAAEgB,GAAG,WAAW,IAAIzB,EAAEkB,EAAEkE,KAAK,IAAIpF,EAAE,MAAM,IAAIqD,MAAM,4BAA4B,OAAOvC,EAAE,KAAKd,EAAE,SAASK,EAAE2B,QAAG,IAASA,IAAIA,EAAEG,QAAQ,IAAIjB,EAAET,EAAEuB,GAAG,OAAOd,GAAGc,EAAEqD,YAAY,IAAIrD,EAAEqD,WAAW7B,QAAQ,SAASxB,EAAEqD,WAAWnE,EAAE,IAAIsB,EAAE,GAAGE,EAAE,GAAG,SAASZ,EAAEE,EAAEd,QAAG,IAASA,IAAIA,GAAE,GAAI,IAAI,GAAGc,IAAIG,OAAO,OAAM,EAAG,MAAMH,GAAG,OAAM,EAAG,IAAI,IAAIA,EAAE,OAAM,EAAG,MAAMA,GAAG,OAAM,EAAG,IAAI,GAAGA,EAAEsD,OAAO,OAAM,EAAG,MAAMtD,GAAG,OAAOA,GAAGA,EAAEuD,UAAU9D,EAAE,GAAGP,GAAG,SAASc,GAAG,IAAI,SAASA,GAAG,IAAI,GAAGA,IAAIG,OAAO,OAAM,EAAG,MAAMH,IAAI,IAAI,IAAId,EAAER,OAAO8E,yBAAyBxD,EAAE,YAAY,GAAGd,IAAG,IAAKA,EAAEN,WAAW,OAAM,EAAG,MAAMoB,IAAI,IAAI,GAAGhC,EAAEgC,IAAIW,IAAI,OAAM,EAAG,MAAMX,IAAI,IAAI,GAAGvB,EAAEuB,KAAKvB,EAAE0B,QAAQ,OAAM,EAAG,MAAMH,IAAI,OAAM,EAAzO,CAA6OA,GAAG,OAAM,EAAG,IAAI,GAAGA,IAAIG,OAAO,OAAM,EAAG,GAAGnC,EAAEgC,IAAIW,IAAI,OAAM,EAAG,GAAGtC,EAAE8B,UAAU9B,EAAE2B,GAAG,OAAM,EAAG,MAAMA,IAAI,OAAM,EAAvW,CAA2WA,GAAG,IAAI,GAAGA,EAAEyD,WAAW,OAAM,EAAG,MAAMzD,IAAI,IAAI,IAAIA,EAAEmD,SAASnD,EAAE0D,IAAI,OAAM,EAAG,MAAM1D,IAAI,IAAIlB,EAAE,SAASkB,EAAEd,GAAG,IAAI,IAAIJ,EAAE,EAAEA,EAAEkB,EAAE0B,OAAO5C,IAAI,IAAI,GAAGkB,EAAElB,KAAKI,EAAE,OAAOJ,EAAE,MAAMkB,IAAI,OAAO,EAAnF,CAAsFQ,EAAER,GAAG,IAAI,IAAIlB,EAAE,CAAC,IAAIgB,EAAEY,EAAE5B,GAAG,GAAGgB,GAAG,SAASE,GAAG,IAAIA,EAAE2D,cAAc,OAAM,EAAG,IAAI3D,EAAE4D,WAAW,OAAM,EAAG,IAAI1E,EAAEc,EAAE6D,cAAc,GAAG3E,GAAGA,EAAE4E,kBAAkB5E,EAAE4E,gBAAgBC,SAAS/D,GAAG,CAAC,IAAI,IAAIlB,EAAEkB,EAAElB,EAAE8E,YAAY9E,EAAE8E,aAAa9E,GAAGA,EAAEA,EAAE8E,WAAW,IAAI9E,EAAEsE,OAAOlE,EAAE4E,gBAAgBC,SAASjF,EAAEsE,MAAM,OAAM,EAAG,OAAM,EAA5Q,CAAgRtD,GAAG,OAAM,EAAG,OAAM,EAAG,SAASxB,EAAE0B,GAAG,IAAI,GAAGA,IAAIG,OAAO,OAAM,EAAG,MAAMH,GAAG,GAAGA,GAAGA,EAAEuD,UAAU9D,EAAE,OAAM,EAAG,IAAI,GAAG,oBAAoB,GAAGa,SAASnC,KAAK6B,GAAG,OAAM,EAAG,MAAMA,GAAG,GAAGA,GAAGA,EAAEuD,UAAU9D,EAAE,OAAM,EAAG,IAAI,GAAGU,OAAOC,QAAQJ,aAAaG,OAAOC,OAAO,OAAM,EAAG,MAAMJ,GAAG,GAAGA,GAAGA,EAAEuD,UAAU9D,EAAE,OAAM,EAAG,IAAI,GAAGO,GAAGA,EAAErC,OAAOqC,EAAE,OAAM,EAAG,MAAMA,GAAG,GAAGA,GAAGA,EAAEuD,UAAU9D,EAAE,OAAM,EAAG,IAAI,GAAGO,GAAGA,EAAEmD,SAASnD,EAAE,OAAM,EAAG,MAAMA,GAAG,GAAGA,GAAGA,EAAEuD,UAAU9D,EAAE,OAAM,EAAG,IAAI,GAAGO,GAAGA,EAAE0D,MAAM1D,EAAE,OAAM,EAAG,MAAMA,GAAG,GAAGA,GAAGA,EAAEuD,UAAU9D,EAAE,OAAM,EAAG,IAAI,GAAGO,GAAG,uBAAuBA,EAAEgE,oCAAoC,OAAM,EAAG,MAAMhE,GAAG,OAAM,EAAG,IAAI,GAAG,gBAAgBA,GAAG,SAASA,GAAG,aAAaA,EAAE,OAAM,EAAG,MAAMA,IAAI,OAAM,EAAG,SAAS8B,EAAE9B,EAAEd,GAAG,IAAI,IAAIJ,EAAE,EAAEA,EAAEkB,EAAE0B,OAAO5C,IAAI,IAAI,GAAGkB,EAAElB,KAAKI,EAAE,OAAOJ,EAAE,MAAMkB,IAAI,OAAO,EAAE,IAAI/B,EAAE,WAAW,SAAS+B,IAAI,GAAGpC,KAAKW,UAAK,EAAOX,KAAKqG,aAAQ,EAAOrG,KAAKsG,UAAK,EAAOtG,KAAKuG,YAAO,EAAOvG,KAAKW,KAAK,cAAc,IAAI6F,KAAKC,WAAW,GAAG,KAAK,WAAW,GAAG,oBAAoBC,QAAQ,OAAM,EAAG,QAAG,IAAS5F,OAAO6F,OAAO,OAAM,EAAG,IAAI,IAAIvE,EAAE,IAAIsE,QAAQpF,EAAE,GAAG,OAAOR,OAAO6F,OAAOrF,GAAGc,EAAEwE,IAAItF,EAAE,iBAAiB,kBAAkBc,EAAEnB,IAAIK,GAAG,MAAMc,GAAG,OAAM,GAA5M,GAAmN,IAAIpC,KAAKqG,QAAQ,IAAIK,QAAQ,MAAMtE,IAAIpC,KAAKsG,KAAK,GAAGtG,KAAKuG,OAAO,GAAG,IAAIjF,EAAEc,EAAEoB,UAAU,OAAOlC,EAAEuF,sBAAsB,WAAW,IAAI,IAAIzE,EAAEpC,KAAKqG,QAAQ/E,EAAEtB,KAAKsG,KAAKpF,EAAE,EAAEA,EAAEI,EAAEwC,OAAO5C,IAAI,CAAC,IAAIW,EAAEP,EAAEJ,GAAG,GAAGR,EAAEmB,IAAIK,EAAEL,GAAG,CAAC,GAAGO,EAAE,IAAIA,EAAE0E,OAAOjF,GAAG,MAAMO,IAAId,EAAE0D,OAAO9D,EAAE,GAAGlB,KAAKuG,OAAOvB,OAAO9D,EAAE,GAAGA,GAAG,KAAKI,EAAEyF,kBAAkB,SAAS3E,GAAG,OAAO1B,EAAE0B,IAAId,EAAEsF,IAAI,SAASxE,EAAEd,GAAG,IAAIc,EAAE,MAAM,IAAIqB,MAAM,wBAAwB,IAAIvC,EAAElB,KAAKqG,QAAQ,GAAGnF,EAAE,IAAIA,EAAE0F,IAAIxE,EAAEd,GAAG,MAAMc,UAAUpC,KAAKqG,QAAQ,GAAGrG,KAAK+G,kBAAkB3E,GAAG,IAAI,IAAIP,EAAE7B,KAAKW,KAAKP,EAAEgC,EAAEP,GAAG,YAAYzB,GAAGA,EAAE,KAAKgC,EAAEhC,EAAE,GAAGkB,EAAER,OAAOC,eAAeqB,EAAEP,EAAE,CAACR,MAAM,CAACe,EAAEd,GAAG0F,UAAS,KAAM,MAAM5E,IAAIpC,KAAK6G,wBAAwB,IAAI9D,EAAE/C,KAAKsG,KAAKzF,EAAEb,KAAKuG,OAAO9F,EAAEyD,EAAEnB,EAAEX,IAAI,IAAI3B,GAAGsC,EAAEc,KAAKzB,GAAGvB,EAAEgD,KAAKvC,IAAIT,EAAEJ,GAAGa,GAAGA,EAAEL,IAAI,SAASmB,GAAG,IAAIA,EAAE,MAAM,IAAIqB,MAAM,wBAAwB,IAAInC,EAAEtB,KAAKqG,QAAQ,GAAG/E,EAAE,IAAI,GAAGA,EAAE2F,IAAI7E,GAAG,OAAOd,EAAEL,IAAImB,GAAG,MAAMA,UAAUpC,KAAKqG,QAAQ,GAAGrG,KAAK+G,kBAAkB3E,GAAG,IAAI,IAAIlB,EAAEkB,EAAEpC,KAAKW,MAAM,OAAOO,GAAGA,EAAE,KAAKkB,EAAElB,EAAE,QAAG,EAAO,MAAMkB,IAAIpC,KAAK6G,wBAAwB,IAAIhF,EAAEqC,EAAElE,KAAKsG,KAAKlE,GAAG,IAAI,IAAIP,EAAE,OAAO7B,KAAKuG,OAAO1E,IAAIP,EAAEwF,OAAO,SAAS1E,GAAG,IAAIA,EAAE,MAAM,IAAIqB,MAAM,wBAAwB,IAAInC,EAAEtB,KAAKqG,QAAQ,GAAG/E,EAAE,IAAIA,EAAEwF,OAAO1E,GAAG,MAAMA,UAAUpC,KAAKqG,QAAQ,GAAGrG,KAAK+G,kBAAkB3E,GAAG,IAAI,IAAIlB,EAAEkB,EAAEpC,KAAKW,MAAMO,GAAGA,EAAE,KAAKkB,IAAIlB,EAAE,GAAGA,EAAE,QAAG,GAAQ,MAAMkB,IAAIpC,KAAK6G,wBAAwB,IAAIhF,EAAE7B,KAAKsG,KAAKlG,EAAE8D,EAAErC,EAAEO,IAAI,IAAIhC,IAAIyB,EAAEmD,OAAO5E,EAAE,GAAGJ,KAAKuG,OAAOvB,OAAO5E,EAAE,KAAKkB,EAAE2F,IAAI,SAAS7E,GAAG,IAAIA,EAAE,MAAM,IAAIqB,MAAM,wBAAwB,IAAInC,EAAEtB,KAAKqG,QAAQ,GAAG/E,EAAE,IAAI,GAAGA,EAAE2F,IAAI7E,GAAG,OAAM,EAAG,MAAMA,UAAUpC,KAAKqG,QAAQ,GAAGrG,KAAK+G,kBAAkB3E,GAAG,IAAI,IAAIlB,EAAEkB,EAAEpC,KAAKW,MAAM,SAASO,GAAGA,EAAE,KAAKkB,GAAG,MAAMA,IAAI,OAAOpC,KAAK6G,yBAAyB,IAAI3C,EAAElE,KAAKsG,KAAKlE,IAAId,EAAE4F,SAAS,SAAS9E,EAAEd,GAAG,GAAGtB,KAAKiH,IAAI7E,GAAG,OAAOpC,KAAKiB,IAAImB,GAAG,IAAIlB,EAAEI,IAAI,OAAOtB,KAAK4G,IAAIxE,EAAElB,GAAGA,GAAGkB,EAArkE,O,gBCA98G,oBAAoBrC,MAAKA,KAA/MH,EAAOD,QAAqO,SAASyC,GAAG,IAAIP,EAAE,GAAG,SAASX,EAAEI,GAAG,GAAGO,EAAEP,GAAG,OAAOO,EAAEP,GAAG3B,QAAQ,IAAIS,EAAEyB,EAAEP,GAAG,CAAClB,EAAEkB,EAAEjB,GAAE,EAAGV,QAAQ,IAAI,OAAOyC,EAAEd,GAAGf,KAAKH,EAAET,QAAQS,EAAEA,EAAET,QAAQuB,GAAGd,EAAEC,GAAE,EAAGD,EAAET,QAAQ,OAAOuB,EAAEV,EAAE4B,EAAElB,EAAET,EAAEoB,EAAEX,EAAER,EAAE,SAAS0B,EAAEP,EAAEP,GAAGJ,EAAEL,EAAEuB,EAAEP,IAAIf,OAAOC,eAAeqB,EAAEP,EAAE,CAACb,YAAW,EAAGC,IAAIK,KAAKJ,EAAEA,EAAE,SAASkB,GAAG,oBAAoBjB,QAAQA,OAAOC,aAAaN,OAAOC,eAAeqB,EAAEjB,OAAOC,YAAY,CAACC,MAAM,WAAWP,OAAOC,eAAeqB,EAAE,aAAa,CAACf,OAAM,KAAMH,EAAEI,EAAE,SAASc,EAAEP,GAAG,GAAG,EAAEA,IAAIO,EAAElB,EAAEkB,IAAI,EAAEP,EAAE,OAAOO,EAAE,GAAG,EAAEP,GAAG,iBAAiBO,GAAGA,GAAGA,EAAEZ,WAAW,OAAOY,EAAE,IAAId,EAAER,OAAOY,OAAO,MAAM,GAAGR,EAAEA,EAAEI,GAAGR,OAAOC,eAAeO,EAAE,UAAU,CAACN,YAAW,EAAGK,MAAMe,IAAI,EAAEP,GAAG,iBAAiBO,EAAE,IAAI,IAAIhC,KAAKgC,EAAElB,EAAER,EAAEY,EAAElB,EAAE,SAASyB,GAAG,OAAOO,EAAEP,IAAID,KAAK,KAAKxB,IAAI,OAAOkB,GAAGJ,EAAEW,EAAE,SAASO,GAAG,IAAIP,EAAEO,GAAGA,EAAEZ,WAAW,WAAW,OAAOY,EAAEC,SAAS,WAAW,OAAOD,GAAG,OAAOlB,EAAER,EAAEmB,EAAE,IAAIA,GAAGA,GAAGX,EAAEL,EAAE,SAASuB,EAAEP,GAAG,MAAM,GAAGG,eAAezB,KAAK6B,EAAEP,IAAIX,EAAEe,EAAE,GAAGf,EAAEA,EAAEgB,EAAE,GAAl4B,CAAs4B,CAAC,SAASE,EAAEP,EAAEX,GAAG,aAAaA,EAAEA,EAAEW,GAAGX,EAAER,EAAEmB,EAAE,aAAY,WAAY,OAAO8zB,KAAKz0B,EAAER,EAAEmB,EAAE,eAAc,WAAY,OAAOqC,KAAKhD,EAAER,EAAEmB,EAAE,kBAAiB,WAAY,OAAOpB,KAAKS,EAAER,EAAEmB,EAAE,oBAAmB,WAAY,OAAOkB,KAAK7B,EAAER,EAAEmB,EAAE,oBAAmB,WAAY,OAAOnB,KAAKQ,EAAER,EAAEmB,EAAE,sBAAqB,WAAY,OAAOxB,KAAKa,EAAER,EAAEmB,EAAE,iBAAgB,WAAY,OAAOK,KAAKhB,EAAER,EAAEmB,EAAE,mBAAkB,WAAY,OAAO+zB,KAAK10B,EAAER,EAAEmB,EAAE,kBAAiB,WAAY,OAAOI,KAAKf,EAAER,EAAEmB,EAAE,oBAAmB,WAAY,OAAOg0B,KAAK30B,EAAER,EAAEmB,EAAE,qBAAoB,WAAY,OAAOi0B,KAAK50B,EAAER,EAAEmB,EAAE,uBAAsB,WAAY,OAAOk0B,KAAK70B,EAAER,EAAEmB,EAAE,mBAAkB,WAAY,OAAOm0B,KAAK90B,EAAER,EAAEmB,EAAE,qBAAoB,WAAY,OAAOo0B,KAAK/0B,EAAER,EAAEmB,EAAE,mBAAkB,WAAY,OAAOq0B,KAAKh1B,EAAER,EAAEmB,EAAE,qBAAoB,WAAY,OAAOs0B,KAAKj1B,EAAER,EAAEmB,EAAE,oBAAmB,WAAY,OAAOu0B,KAAKl1B,EAAER,EAAEmB,EAAE,sBAAqB,WAAY,OAAOrB,KAAKU,EAAER,EAAEmB,EAAE,kBAAiB,WAAY,OAAOsf,KAAKjgB,EAAER,EAAEmB,EAAE,oBAAmB,WAAY,OAAOw0B,KAAKn1B,EAAER,EAAEmB,EAAE,mBAAkB,WAAY,OAAOy0B,KAAKp1B,EAAER,EAAEmB,EAAE,qBAAoB,WAAY,OAAO00B,KAAKr1B,EAAER,EAAEmB,EAAE,iBAAgB,WAAY,OAAO20B,KAAKt1B,EAAER,EAAEmB,EAAE,mBAAkB,WAAY,OAAO40B,KAAKv1B,EAAER,EAAEmB,EAAE,sBAAqB,WAAY,OAAO60B,KAAKx1B,EAAER,EAAEmB,EAAE,wBAAuB,WAAY,OAAO80B,KAAKz1B,EAAER,EAAEmB,EAAE,QAAO,WAAY,OAAOzB,KAAKc,EAAER,EAAEmB,EAAE,oBAAmB,WAAY,OAAOe,KAAK1B,EAAER,EAAEmB,EAAE,iBAAgB,WAAY,OAAOhB,KAAKK,EAAER,EAAEmB,EAAE,iBAAgB,WAAY,OAAOiB,KAAK5B,EAAER,EAAEmB,EAAE,SAAQ,WAAY,OAAO+0B,KAAK,IAAIt1B,EAAElB,EAAE,CAACy2B,SAAS,WAAWC,MAAM,QAAQC,QAAQ,UAAUC,MAAM,QAAQC,KAAK,OAAOC,MAAM,QAAQC,OAAO,SAASC,OAAO,SAASC,OAAO,SAASC,QAAQ,UAAUC,KAAK,OAAOC,UAAU,aAAa,SAAS50B,EAAER,GAAG,MAAM,iBAAiBA,GAAG,OAAOA,GAAG,iBAAiBA,EAAEq1B,SAAS,SAAS52B,EAAEuB,GAAG,YAAO,IAASA,EAAEhC,EAAEo3B,UAAU,OAAOp1B,EAAEhC,EAAEm3B,KAAKjb,MAAMoD,QAAQtd,GAAGhC,EAAE82B,MAAM,mBAAmB90B,EAAEhC,EAAEy2B,SAAS,iBAAiBz0B,EAAEA,aAAaqB,MAAMrD,EAAE02B,MAAM,mBAAmB10B,EAAEO,KAAKvC,EAAE22B,QAAQ,oBAAoB,GAAGr0B,SAASnC,KAAK6B,GAAGhC,EAAE42B,MAAM,kBAAkB,GAAGt0B,SAASnC,KAAK6B,GAAGhC,EAAE62B,KAAK72B,EAAE+2B,OAAO,iBAAiB/0B,EAAEhC,EAAEg3B,OAAO,iBAAiBh1B,EAAEhC,EAAEi3B,OAAO,kBAAkBj1B,EAAEhC,EAAEk3B,aAAQ,EAAO,SAASx0B,EAAEV,EAAEP,GAAG,MAAM,CAAC41B,SAASr1B,EAAEs1B,QAAQ71B,GAAG,SAASpB,EAAE2B,GAAG,OAAOA,EAAE,SAASW,EAAEX,GAAG,OAAOA,EAAE,SAAS1B,EAAE0B,GAAG,OAAOA,EAAE,SAAS/B,EAAE+B,GAAG,OAAOA,EAAE,SAASF,EAAEE,GAAG,OAAOU,EAAE1C,EAAE62B,KAAK70B,EAAEu1B,UAAU,SAAS/B,EAAExzB,GAAG,OAAO,IAAIoW,KAAKpW,GAAG,SAAS8zB,EAAE9zB,GAAG,OAAOA,EAAE,SAAS+zB,EAAE/zB,GAAG,OAAOA,EAAE,SAASH,EAAEG,GAAG,OAAOU,EAAE1C,EAAE02B,MAAM,CAACnxB,QAAQvD,EAAEuD,QAAQrC,MAAMlB,EAAEkB,MAAMs0B,KAAKx1B,EAAEw1B,KAAKpE,KAAKpxB,EAAEoxB,OAAO,SAASqC,EAAEzzB,GAAG,IAAIP,EAAEO,EAAEkB,MAAMpC,EAAEkB,EAAEw1B,KAAKt2B,EAAEc,EAAEoxB,KAAKpzB,EAAE,IAAIqD,MAAMrB,EAAEuD,SAAS,OAAOvF,EAAEw3B,KAAK12B,EAAEI,IAAIlB,EAAEozB,KAAKlyB,GAAGlB,EAAEkD,MAAMzB,EAAE,OAAOzB,EAAEkD,MAAMlD,EAAE,SAAS01B,KAAK,SAASC,IAAI,MAAM,IAAItyB,MAAM,qEAAqE,SAASuyB,EAAE5zB,GAAG,OAAOA,EAAE,SAAS6zB,EAAE7zB,GAAG,OAAOA,EAAE,SAASg0B,KAAK,SAAS51B,IAAI,MAAM,IAAIiD,MAAM,oEAAoE,SAAS0d,EAAE/e,GAAG,OAAOU,EAAE1C,EAAE42B,MAAM50B,EAAEsU,QAAQ,SAAS2f,EAAEj0B,GAAG,OAAO,IAAI8f,OAAO9f,GAAG,SAASk0B,EAAEl0B,GAAG,OAAOA,EAAE,SAASm0B,EAAEn0B,GAAG,OAAOA,EAAE,SAASo0B,EAAEp0B,GAAG,OAAOA,EAAE,SAASq0B,EAAEr0B,GAAG,OAAOA,EAAE,SAASs0B,EAAEt0B,GAAG,OAAOU,EAAE1C,EAAEo3B,UAAUp1B,GAAG,SAASu0B,KAAK,IAAIkB,EAAEC,IAAIx2B,EAAE,IAAIlB,EAAEy2B,UAAUf,EAAEx0B,EAAElB,EAAE02B,OAAO70B,EAAEX,EAAElB,EAAE22B,SAASX,EAAE90B,EAAElB,EAAE42B,OAAO7V,EAAE7f,EAAElB,EAAE62B,MAAM/0B,EAAEZ,EAAElB,EAAE82B,OAAOz2B,EAAEa,EAAElB,EAAE+2B,QAAQjB,EAAE50B,EAAElB,EAAEg3B,QAAQd,EAAEh1B,EAAElB,EAAEi3B,QAAQrB,EAAE10B,EAAElB,EAAEk3B,SAAS52B,EAAEY,EAAElB,EAAEm3B,MAAMf,EAAEl1B,EAAElB,EAAEo3B,WAAWd,EAAEp1B,GAAGy2B,EAAE,GAAG,SAASpC,EAAEvzB,EAAEP,QAAG,IAASA,IAAIA,EAAEk2B,GAAG,IAAI72B,EAAEoa,KAAK7M,UAAUrM,GAAE,SAAUA,GAAG,IAAIlB,EAAElB,KAAKoC,GAAG,GAAGQ,EAAE5C,MAAM,OAAOkB,EAAE,IAAII,EAAET,EAAEK,GAAG,IAAII,EAAE,OAAOJ,EAAE,IAAId,EAAEyB,EAAEP,IAAIw2B,EAAEx2B,GAAG,OAAOlB,EAAEA,EAAEc,EAAEkB,GAAGlB,KAAK,YAAO,IAASA,EAAEd,EAAEo3B,UAAUt2B,EAAE,IAAI82B,IAAIH,EAAE,IAAIz3B,EAAEy2B,UAAUd,EAAE8B,EAAEz3B,EAAE02B,OAAOjB,EAAEgC,EAAEz3B,EAAE22B,SAASv2B,EAAEq3B,EAAEz3B,EAAE42B,OAAOX,EAAEwB,EAAEz3B,EAAE62B,MAAMrB,EAAEiC,EAAEz3B,EAAE82B,OAAOn0B,EAAE80B,EAAEz3B,EAAE+2B,QAAQhB,EAAE0B,EAAEz3B,EAAEg3B,QAAQb,EAAEsB,EAAEz3B,EAAEi3B,QAAQpB,EAAE4B,EAAEz3B,EAAEk3B,SAASj3B,EAAEw3B,EAAEz3B,EAAEm3B,MAAMd,EAAEoB,EAAEz3B,EAAEo3B,WAAWb,EAAEkB,GAAGI,EAAE,GAAG,SAAS/zB,EAAE9B,EAAEP,GAAG,QAAG,IAASA,IAAIA,EAAEo2B,GAAG71B,IAAIhC,EAAEo3B,UAAU,OAAOlc,KAAKgV,MAAMluB,GAAE,SAAUA,EAAElB,GAAG,GAAG0B,EAAE5C,MAAM,OAAOkB,EAAE,IAAII,EAAElB,EAAE,GAAGwC,EAAE1B,IAAII,EAAEJ,EAAEu2B,SAASr3B,EAAEc,EAAEw2B,UAAUp2B,EAAET,EAAEK,GAAGd,EAAEc,IAAII,EAAE,OAAOlB,EAAE,IAAI0C,EAAEjB,EAAEP,IAAI02B,EAAE12B,GAAG,OAAOwB,EAAEA,EAAE1C,EAAEgC,GAAGhC,KAAK,IAAIw2B,GAAE,M,6BCA1hK,SAASsB,EAAQvgB,GACtB,MAAgD,oBAAzC7W,GAAiB4B,SAASnC,KAAKoX,G,yoBCDjC,ICGHf,EAAsB,mCAQnB,SAASC,EAAgBC,GAK9B,YAJY,IAARA,IACFA,EAAMvU,QDVD,WCaAuU,EAAIzR,SAASC,SAEf,SAAS6yB,EAAUrhB,GAKxB,QAJY,IAARA,IACFA,EAAMvU,QAGHuU,EAIL,IACE,GAAIA,EAAIvR,QAAUuR,EAAIvR,SAAWuR,EAC/B,OAAOA,EAAIvR,OAEb,MAAOqQ,KAGJ,SAASwiB,EAAUthB,GAKxB,QAJY,IAARA,IACFA,EAAMvU,QAGHuU,IAKDqhB,EAAUrhB,GAId,IACE,OAAOA,EAAIuhB,OACX,MAAOziB,KAGJ,SAASmB,EAAkBD,GAChC,IAEE,OAAO,EACP,MAAOlB,IAGT,OAAO,EAEF,SAASoB,EAAgBF,QAClB,IAARA,IACFA,EAAMvU,QAGR,IAAI8C,EAAWyR,EAAIzR,SAEnB,IAAKA,EACH,MAAM,IAAI5B,MAAM,gCAGlB,IAAI6B,EAAWD,EAASC,SAExB,IAAKA,EACH,MAAM,IAAI7B,MAAM,gCAGlB,GD7EM,UC6EF6B,EACF,MAAOgzB,UAGT,GDhFO,WCgFHhzB,EAA6B,CAE/B,IAAIC,EAAS4yB,EAAUrhB,GAEvB,OAAIvR,GAAUwR,IAELC,EAAgBzR,GAGlB+yB,WAGT,IAAI9yB,EAAOH,EAASG,KAEpB,IAAKA,EACH,MAAM,IAAI/B,MAAM,4BAGlB,OAAO6B,EAAW,KAAOE,EAGpB,SAASyR,EAAUH,QACZ,IAARA,IACFA,EAAMvU,QAGR,IAAI2U,EAASF,EAAgBF,GAE7B,OAAII,GAAUJ,EAAIrR,YAAwD,IAA1CqR,EAAIrR,WAAW7B,QD9GzC,SCgHGkT,EAAIrR,WAGNyR,EAiDF,SAASC,EAAaL,GAE3B,IAnCK,SAA8BA,GACnC,IACE,GAAIA,IAAQvU,OACV,OAAO,EAET,MAAOqT,IAGT,IACE,IAAIwB,EAAOtW,OAAO8E,yBAAyBkR,EAAK,YAEhD,GAAIM,IAA4B,IAApBA,EAAKpW,WACf,OAAO,EAET,MAAO4U,IAGT,IACE,GAAIiB,EAAgBC,IAAQC,IAC1B,OAAO,EAET,MAAOnB,IAGT,IACE,GAAIoB,EAAgBF,KAASE,EAAgBzU,QAC3C,OAAO,EAET,MAAOqT,IAGT,OAAO,EAIF2iB,CAAqBzhB,GACxB,OAAO,EAGT,IACE,GAAIA,IAAQvU,OACV,OAAO,EAGT,GAAIsU,EAAgBC,IAAQC,IAC1B,OAAO,EAGT,GAAIE,EAAU1U,UAAY0U,EAAUH,GAClC,OAAO,EAET,MAAOlB,IAGT,OAAO,EAEF,SAAS4iB,EAAiB1hB,GAC/B,IAAKK,EAAaL,GAChB,MAAM,IAAIrT,MAAM,qCAGlB,OAAOqT,EAeF,SAAS2hB,EAAiBlzB,EAAQsc,GACvC,IAAKtc,IAAWsc,EACd,OAAO,EAGT,IAAI6W,EAAcP,EAAUtW,GAE5B,OAAI6W,EACKA,IAAgBnzB,GAGkB,IAxBtC,SAAoBuR,GACzB,IAAI0H,EAAS,GAEb,IACE,KAAO1H,EAAIvR,SAAWuR,GACpB0H,EAAO3a,KAAKiT,EAAIvR,QAChBuR,EAAMA,EAAIvR,OAEZ,MAAOqQ,IAGT,OAAO4I,EAaHma,CAAW9W,GAAOje,QAAQ2B,GAMzB,SAASqzB,EAAU9hB,GACxB,IACI+hB,EAQAC,EATAta,EAAS,GAGb,IACEqa,EAAS/hB,EAAI+hB,OACb,MAAOjjB,GACPijB,EAAS/hB,EAKX,IACEgiB,EAAMD,EAAO/0B,OACb,MAAO8R,IAGT,GAAY,IAARkjB,EACF,OAAOta,EAGT,GAAIsa,EAAK,CACP,IAAK,IAAI14B,EAAI,EAAGA,EAAI04B,EAAK14B,IAAK,CAC5B,IAAIwX,OAAQ,EAEZ,IACEA,EAAQihB,EAAOz4B,GACf,MAAOwV,GACP,SAGF4I,EAAO3a,KAAK+T,GAGd,OAAO4G,EAGT,IAAK,IAAIua,EAAK,EAAGA,EAAK,IAAKA,IAAM,CAC/B,IAAIC,OAAS,EAEb,IACEA,EAASH,EAAOE,GAChB,MAAOnjB,GACP,OAAO4I,EAGT,IAAKwa,EACH,OAAOxa,EAGTA,EAAO3a,KAAKm1B,GAGd,OAAOxa,EA2JT,IAAInH,EAAgB,GAChBC,EAAe,GACZ,SAASC,EAAeT,EAAKU,QAChB,IAAdA,IACFA,GAAY,GAGd,IACE,GAAIV,IAAQvU,OACV,OAAO,EAET,MAAOqT,GACP,OAAO,EAGT,IACE,IAAKkB,EACH,OAAO,EAET,MAAOlB,GACP,OAAO,EAGT,IACE,GAAIkB,EAAIpR,OACN,OAAO,EAET,MAAOkQ,GAEP,OAAIA,GAAOA,EAAIjQ,UAAYiR,EAO7B,GAAIY,GAAaL,EAAaL,GAC5B,IAEE,GAAIA,EAAIjR,WACN,OAAO,EAET,MAAO+P,IAKX,IACE,IAAKkB,EAAIvR,SAAWuR,EAAIhR,IACtB,OAAO,EAET,MAAO8P,IAYT,IAAI6B,EA5EN,SAAqBC,EAAYC,GAC/B,IAAK,IAAIvX,EAAI,EAAGA,EAAIsX,EAAW5T,OAAQ1D,IACrC,IACE,GAAIsX,EAAWtX,KAAOuX,EACpB,OAAOvX,EAET,MAAOwV,IAIX,OAAQ,EAkEUqjB,CAAY5hB,EAAeP,GAE7C,IAAqB,IAAjBW,EAAoB,CACtB,IAAIG,EAAQN,EAAaG,GAEzB,GAAIG,GA7GD,SAA6BA,GAClC,IAAKA,EAAM7R,cACT,OAAO,EAGT,IAAK6R,EAAM5R,WACT,OAAO,EAGT,IAAI6R,EAAMD,EAAM3R,cAEhB,GAAI4R,GAAOA,EAAI3R,kBAAoB2R,EAAI3R,gBAAgBC,SAASyR,GAAQ,CAGtE,IAFA,IAAIrS,EAASqS,EAENrS,EAAOS,YAAcT,EAAOS,aAAeT,GAEhDA,EAASA,EAAOS,WAIlB,IAAKT,EAAOC,OAASqS,EAAI3R,gBAAgBC,SAASZ,EAAOC,MACvD,OAAO,EAIX,OAAO,EAoFQ0zB,CAAoBthB,GAC/B,OAAO,EAIX,OAAO,EAiHF,SAASuhB,EAAYriB,GAQ1B,YAPY,IAARA,IACFA,EAAMvU,QAIK61B,EADbthB,EAAMA,GAAOvU,SAOA41B,EAAUrhB,SAEvB,EAqKK,SAASsiB,EAAYzb,EAAS0b,GACnC,GAAuB,iBAAZ1b,EAAsB,CAC/B,GAAsB,iBAAX0b,EACT,MD5xBgB,MC4xBT1b,GAAwB0b,IAAW1b,EAG5C,GAAIua,EAAQmB,GACV,OAAO,EAGT,GAAI/c,MAAMoD,QAAQ2Z,GAChB,OAAO,EAIX,OAAInB,EAAQva,GACNua,EAAQmB,GACH1b,EAAQjb,aAAe22B,EAAO32B,YAGnC4Z,MAAMoD,QAAQ2Z,IAKXjkB,QAAQikB,EAAOhrB,MAAMsP,MAG1BrB,MAAMoD,QAAQ/B,KACZrB,MAAMoD,QAAQ2Z,GACT/d,KAAK7M,UAAUkP,KAAarC,KAAK7M,UAAU4qB,IAGhDnB,EAAQmB,IAIL1b,EAAQ2b,MAAK,SAAUC,GAC5B,OAAOH,EAAYG,EAAYF,OAiE9B,SAASvhB,EAASC,GACvB,IACE,GAAIA,IAAQxV,OACV,OAAO,EAET,MAAOqT,GACP,GAAIA,GAAOA,EAAIjQ,UAAYiR,EACzB,OAAO,EAIX,IACE,GAA4C,oBAAxC9V,GAAiB4B,SAASnC,KAAKwX,GACjC,OAAO,EAET,MAAOnC,GACP,GAAIA,GAAOA,EAAIjQ,UAAYiR,EACzB,OAAO,EAIX,IACE,GAAIrU,OAAOC,QAAUuV,aAAexV,OAAOC,OACzC,OAAO,EAET,MAAOoT,GACP,GAAIA,GAAOA,EAAIjQ,UAAYiR,EACzB,OAAO,EAIX,IACE,GAAImB,GAAOA,EAAIhY,OAASgY,EACtB,OAAO,EAET,MAAOnC,GACP,GAAIA,GAAOA,EAAIjQ,UAAYiR,EACzB,OAAO,EAIX,IACE,GAAImB,GAAOA,EAAIxS,SAAWwS,EACxB,OAAO,EAET,MAAOnC,GACP,GAAIA,GAAOA,EAAIjQ,UAAYiR,EACzB,OAAO,EAIX,IACE,GAAImB,GAAOA,EAAIjS,MAAQiS,EACrB,OAAO,EAET,MAAOnC,GACP,GAAIA,GAAOA,EAAIjQ,UAAYiR,EACzB,OAAO,EAcX,IACE,GAAImB,GAAmD,uBAA5CA,EAAI3R,oCACb,OAAO,EAET,MAAOwP,GACP,OAAO,EAGT,IACE,GAAI,gBAAiBmC,GAAO,SAAUA,GAAO,aAAcA,EACzD,OAAO,EAET,MAAOnC,IAGT,OAAO,EA2BF,SAAS4jB,EAAY1iB,GAC1B,IACEA,EAAI2R,QACJ,MAAO7S,KCx/BJ,I,qBCaA,SAASnI,EACZqJ,QACmB,IADnBA,MAA4BvU,QAE5B,IAAMywB,EANKyG,yBAQX,OAAI3iB,IAAQvU,OAEDuU,EAAIkc,GAIsBlc,EAAIkc,GAAalc,EAAIkc,IAAc,GAW5E,IAAM0G,EAAuB,iBAAO,IAe7B,SAASC,EACZh4B,EACAi4B,GAEA,YADc,IAFdj4B,MAAM,cAEQ,IADdi4B,MAAyBF,GAElBxyB,mBAAcuG,IAAa9L,GAAK,WACnC,IAAIk4B,EAAQD,IACZ,MAAO,CACH3yB,IAAK,SAAC6yB,GACF,OAAOD,EAAM73B,eAAe83B,IAEhC74B,IAAK,SAAC64B,EAAkBC,GACpB,OAAOF,EAAM73B,eAAe83B,GACtBD,EAAMC,GACNC,GAEVnzB,IAAK,SAACkzB,EAAkBte,GAEpB,OADAqe,EAAMC,GAAYte,EACXA,GAEXwe,IAAK,SAACF,UACKD,EAAMC,IAEjB5yB,SAAU,SAAC4yB,EAAkBl5B,GACzB,OAAOsG,mBAAS2yB,EAAOC,EAAUl5B,IAErCgc,MAAO,WACHid,EAAQD,KAEZtzB,KAAM,WACF,OAAOxF,OAAOwF,KAAKuzB,QAK5B,IAAMI,EAAb,aACO,SAASC,IACZ,IAAMnH,EAAStlB,IAEf,OADAslB,EAAOoH,gBAAkBpH,EAAOoH,iBAAmB,IAAIF,EAChDlH,EAAOoH,gBAUX,SAASC,EACZz4B,EACAi4B,GAEA,YADc,IAFdj4B,MAAM,cAEQ,IADdi4B,MAAyBF,GAElBC,EAAiB,eAAezyB,SAASvF,GAAK,WACjD,IAAM04B,EAAW,IAAI3zB,UAEf4zB,EAAW,SACbxjB,GAGA,OAAOujB,EAASnzB,SAAS4P,EAAK8iB,IAGlC,MAAO,CACH3yB,IAAK,SAAC6P,GAEF,OADcwjB,EAASxjB,GACV9U,eAAeL,IAEhCV,IAAK,SAAC6V,EAAaijB,GACf,IAAMF,EAAQS,EAASxjB,GAEvB,OAAO+iB,EAAM73B,eAAeL,GAAOk4B,EAAMl4B,GAAOo4B,GAEpDnzB,IAAK,SAACkQ,EAAa0E,GAGf,OAFc8e,EAASxjB,GACjBnV,GAAO6Z,EACNA,GAEXwe,IAAK,SAACljB,UACYwjB,EAASxjB,GACVnV,IAEjBuF,SAAU,SAAC4P,EAAalW,GACpB,IAAMi5B,EAAQS,EAASxjB,GACvB,OAAO5P,mBAAS2yB,EAAOl4B,EAAKf,QC7H5C,SAAS25B,IACL,OAAOZ,EAAoB,YAAYzyB,SAAS,aAAcsG,YAUlE,SAASgtB,EACL1jB,EADJ,GAMG,IAHGI,EAGH,EAHGA,OAIIujB,EAAgBL,EAA+B,iBAC/CM,EAAkBD,EAAcx5B,IAAI6V,GAEtC4jB,GACAA,EAAgB73B,QAAQ,CACpBqU,WAIR,IAAMyjB,EAAa9d,eAAaha,QAAQ,CACpCqU,WAGJ,OADAujB,EAAc7zB,IAAIkQ,EAAK6jB,GAChBA,EAoBJ,SAASC,EACZ9jB,EADG,GAYH,OAAO+d,EADR,EARKA,MAUA/d,EC9DQ,kBDgER,CACI+jB,WAAYN,KAEhB,CACIrjB,OC1DY,ID2DZ3S,SAAS,IAEf5B,MAAK,YAAsC,IAAnC02B,EAAmC,EAAnCA,OAAgBwB,EAAmB,EAA3BrH,KAAQqH,WAItB,OAHAL,EAAoB1jB,EAAK,CACrBI,OAAQmiB,IAEL,CACHviB,MACAI,OAAQmiB,EACRwB,iBAIL,SAASC,EACZhkB,EADG,GAOiB,IAJhB+d,EAIgB,EAJhBA,KAKJ,OAAOuF,EAA+B,4BAA4BlzB,SAC9D4P,GACA,WACI,OAAO8jB,EAAS9jB,EAAK,CACjB+d,SACDlyB,MAAK,qBAAGk4B,iBEtGhB,SAASE,EAAgBjkB,GACPsjB,EAAY,gBACpBxzB,IAAIkQ,GAAK,G,WCNnB,SAAS3R,EAAUwS,GACtB,IACI,IAAKA,EACD,OAAO,EAGX,GAAuB,oBAAZrV,SAA2BqV,aAAgBrV,QAClD,OAAO,EAGX,GACsB,oBAAXC,QACkB,mBAAlBA,OAAOC,QACdmV,aAAgBpV,OAAOC,OAEvB,OAAO,EAGX,GACsB,oBAAXD,QACuB,mBAAvBA,OAAOE,aACdkV,aAAgBpV,OAAOE,YAEvB,OAAO,EAGX,IAAMC,EAAW,GAAGA,SAEpB,GAAIA,EAAU,CACV,IAAM/B,EAAO+B,EAASnC,KAAKoX,GAE3B,GACa,oBAAThX,GACS,oBAATA,GACS,uBAATA,EAEA,OAAO,EAIf,GAA6C,mBAAjCgX,EAAwBhV,KAChC,OAAO,EAEb,MAAOiT,GACL,OAAO,EAGX,OAAO,EC7CX,ICCIolB,EDDEC,EAA4B,GAC5BC,EAEF,GCHAC,EAAc,EAGlB,SAASC,IACL,IAAKD,GAAeH,EAAc,CAC9B,IAAM72B,EAAU62B,EAChBA,EAAe,KACf72B,EAAQtB,WAIT,SAASw4B,IACZF,GAAe,EAEZ,SAASG,IACZH,GAAe,EACfC,ICXG,IAAMve,EAAb,WAcI,WACIqB,GAIF,WAME,GANF,KAlBFlb,cAkBE,OAjBFC,cAiBE,OAhBFC,kBAgBE,OAfF7B,WAeE,OAdF8B,WAcE,OAbFC,cAaE,OARFC,iBAQE,OAPFC,WAOE,EACEtD,KAAKgD,UAAW,EAChBhD,KAAKiD,UAAW,EAChBjD,KAAKkD,cAAe,EACpBlD,KAAKoD,SAAW,GAEZ8a,EAAS,CACT,IAAIM,EACArb,EACAH,GAAW,EACXC,GAAW,EACXs4B,GAAU,EACdF,IAEA,IACInd,GACI,SAAAsd,GACQD,EACA,EAAK14B,QAAQ24B,IAEbx4B,GAAW,EACXwb,EAASgd,MAGjB,SAAA5lB,GACQ2lB,EACA,EAAKh4B,OAAOqS,IAEZ3S,GAAW,EACXE,EAAQyS,MAItB,MAAOA,GAGL,OAFA0lB,SACAt7B,KAAKuD,OAAOqS,GAIhB0lB,IACAC,GAAU,EAENv4B,EAEAhD,KAAK6C,QAAQ2b,GACNvb,GACPjD,KAAKuD,OAAOJ,IAjE5B,2BA+EIN,QAAA,SAAQ2b,GACJ,GAAIxe,KAAKgD,UAAYhD,KAAKiD,SACtB,OAAOjD,KAGX,GAAImF,EAAUqZ,GACV,MAAM,IAAI/a,MAAM,gDAMpB,OAHAzD,KAAKgD,UAAW,EAChBhD,KAAKqB,MAAQmd,EACbxe,KAAK0D,WACE1D,MA3Ff,EA8FIuD,OAAA,SAAOJ,GAAiC,WACpC,GAAInD,KAAKgD,UAAYhD,KAAKiD,SACtB,OAAOjD,KAGX,GAAImF,EAAUhC,GACV,MAAM,IAAIM,MAAM,+CAGpB,IAAKN,EAAO,CACR,IAAMyS,EAEFzS,GAAmC,mBAAnBA,EAAMT,SAElBS,EAAMT,WACJ5B,GAAiB4B,SAASnC,KAAK4C,GACzCA,EAAQ,IAAIM,MAAJ,gDAA2DmS,GAgBvE,OAbA5V,KAAKiD,UAAW,EAChBjD,KAAKmD,MAAQA,EAERnD,KAAKkD,cACNS,YAAW,WACF,EAAKT,cFvHnB,SACH0S,EACAzR,GAIA,IAAuC,IAAnC82B,EAAiBr3B,QAAQgS,GAA7B,CAKAqlB,EAAiBp3B,KAAK+R,GACtBjS,YAAW,WAWP,MAAMiS,IACP,GAEH,IAAK,IAAI+gB,EAAI,EAAGA,EAAIuE,EAAiCp3B,OAAQ6yB,IAEzDuE,EAAiCvE,GAAG/gB,EAAKzR,IE6F7Bs3B,CAA+Bt4B,EAAO,KAE3C,GAGPnD,KAAK0D,WACE1D,MA9Hf,EAiII+D,YAAA,SAAYZ,GAGR,OAFAnD,KAAKkD,cAAe,EACpBlD,KAAKuD,OAAOJ,GACLnD,MApIf,EAuII0D,SAAA,WACI,IAAqBV,EAAiChD,KAAjCgD,SAAUC,EAAuBjD,KAAvBiD,SAAUG,EAAapD,KAAboD,SAEzC,IAFsDpD,KAA9CqD,cAMHL,GAAaC,GAAlB,CAIAjD,KAAKqD,aAAc,EACnBg4B,IAgBA,IAdA,IAAMK,EAAQ,SACVC,EACAC,GAEA,OAAOD,EAAah5B,MAChB,SAAA64B,GACII,EAAc/4B,QAAQ24B,MAE1B,SAAA5lB,GACIgmB,EAAcr4B,OAAOqS,OAKxBxV,EAAI,EAAGA,EAAIgD,EAASU,OAAQ1D,IAAK,CACtC,MAAwCgD,EAAShD,GAAzC4D,EAAR,EAAQA,UAAWC,EAAnB,EAAmBA,QAASE,EAA5B,EAA4BA,QACxBqa,OAAM,EAEV,GAAIxb,EACA,IAEIwb,EAASxa,EAAYA,EAAUhE,KAAKqB,OAASrB,KAAKqB,MACpD,MAAOuU,GACLzR,EAAQZ,OAAOqS,GACf,cAED,GAAI3S,EAAU,CACjB,IAAKgB,EAAS,CACVE,EAAQZ,OAAOvD,KAAKmD,OACpB,SAGJ,IACIqb,EAASva,EAAQjE,KAAKmD,OACxB,MAAOyS,GACLzR,EAAQZ,OAAOqS,GACf,UAKJ4I,aAAkB3B,IACjB2B,EAAOxb,UAAYwb,EAAOvb,WAEvBub,EAAOxb,SACPmB,EAAQtB,QAAQ2b,EAAOnd,OAEvB8C,EAAQZ,OAAOib,EAAOrb,OAG1Bqb,EAAOtb,cAAe,GACfiC,EAAUqZ,GAEbA,aAAkB3B,IACjB2B,EAAOxb,UAAYwb,EAAOvb,UAEvBub,EAAOxb,SACPmB,EAAQtB,QAAQ2b,EAAOnd,OAEvB8C,EAAQZ,OAAOib,EAAOrb,OAI1Bu4B,EAAMld,EAAQra,GAGlBA,EAAQtB,QAAQ2b,GAIxBpb,EAASU,OAAS,EAClB9D,KAAKqD,aAAc,EACnBi4B,MA7NR,EAgOI34B,KAAA,SACIqB,EACAC,GAGA,GAAID,GAAkC,mBAAdA,IAA6BA,EAAUzD,KAC3D,MAAM,IAAIkD,MAAM,wDAIpB,GAAIQ,GAA8B,mBAAZA,IAA2BA,EAAQ1D,KACrD,MAAM,IAAIkD,MAAM,sDAIpB,IAAMU,EAA+B,IAAI0Y,EAQzC,OAPA7c,KAAKoD,SAASS,KAAK,CACfM,UACAH,YACAC,YAEJjE,KAAKkD,cAAe,EACpBlD,KAAK0D,WACES,GAvPf,EA0PIC,MAAA,SACIH,GAEA,OAAOjE,KAAK2C,UAAKk5B,EAAW53B,IA7PpC,EAgQII,QAAA,SAAQy3B,GAEJ,GAAIA,GAAkC,mBAAdA,IAA6BA,EAAUv7B,KAC3D,MAAM,IAAIkD,MAAM,uCAIpB,OAAOzD,KAAK2C,MACR,SAAA6b,GACI,OAAO3B,EAAavY,IAAIw3B,GAAWn5B,MAAK,WACpC,OAAO6b,QAGf,SAAA5I,GACI,OAAOiH,EAAavY,IAAIw3B,GAAWn5B,MAAK,WACpC,MAAMiT,SA/Q1B,EAqRIrR,QAAA,SAAQ2X,EAActG,GAAgD,WAClE,GAAI5V,KAAKgD,UAAYhD,KAAKiD,SACtB,OAAOjD,KAGX,IAAMuE,EAAUZ,YAAW,WACnB,EAAKX,UAAY,EAAKC,UAI1B,EAAKM,OAAOqS,GAAO,IAAInS,MAAJ,2BAAsCyY,EAAtC,SACpBA,GACH,OAAOlc,KAAK2C,MAAK,SAAA6b,GAEb,OADAha,aAAaD,GACNia,MAnSnB,EAuSI/Z,UAAA,WACI,GAAuB,oBAAZnC,QACP,MAAM,IAAIoC,UAAJ,0BAIV,OAAOpC,QAAQO,QAAQ7C,OA7S/B,EAgTW6C,QAAP,SACIxB,GAEA,OAAIA,aAAiBwb,EACVxb,EAGP8D,EAAU9D,GAEH,IAAIwb,GAAa,SAACha,EAASU,GAAV,OAAqBlC,EAAMsB,KAAKE,EAASU,OAI9D,IAAIsZ,GAAeha,QAAQxB,IA7T1C,EAgUWkC,OAAP,SAAcJ,GACV,OAAO,IAAI0Z,GAAetZ,OAAOJ,IAjUzC,EAoUWY,YAAP,SAAmBZ,GACf,OAAO,IAAI0Z,GAAe9Y,YAAYZ,IArU9C,EAwUWwB,IAAP,SACIgc,GAEA,IAAMxc,EAAU,IAAI0Y,EAChBkf,EAAQpb,EAAS7c,OACfkb,EAA0B,GAEhC,IAAK+c,EAED,OADA53B,EAAQtB,QAAQmc,GACT7a,EAuBX,IApBA,IAAMu3B,EAAQ,SACVt7B,EACAu7B,EACAC,GAEA,OAAOD,EAAah5B,MAChB,SAAA64B,GACIxc,EAAQ5e,GAAKo7B,EAGC,IAFdO,GAAS,IAGL53B,EAAQtB,QAAQmc,MAGxB,SAAApJ,GACIgmB,EAAcr4B,OAAOqS,OAKxBxV,EAAI,EAAGA,EAAIugB,EAAS7c,OAAQ1D,IAAK,CACtC,IAAMs1B,EAAO/U,EAASvgB,GAEtB,GAAIs1B,aAAgB7Y,GAChB,GAAI6Y,EAAK1yB,SAAU,CACfgc,EAAQ5e,GAAKs1B,EAAKr0B,MAClB06B,GAAS,EACT,eAED,IAAK52B,EAAUuwB,GAAO,CACzB1W,EAAQ5e,GAAKs1B,EACbqG,GAAS,EACT,SAGJL,EAAMt7B,EAAGyc,EAAaha,QAAQ6yB,GAAOvxB,GAOzC,OAJc,IAAV43B,GACA53B,EAAQtB,QAAQmc,GAGb7a,GA9Xf,EAiYWS,KAAP,SAA2C+b,GACvC,IAAMnC,EAAS,GACTwd,EAAgB,GAFiD,WAI5Dr6B,GACP,GAAIgf,EAAS3e,eAAeL,GAAM,CAC9B,IAAMN,EAAQsf,EAAShf,GAEnBwD,EAAU9D,GACV26B,EAAcn4B,KAEVxC,EAAMsB,MAAK,SAAA64B,GAEPhd,EAAO7c,GAAO65B,MAKtBhd,EAAO7c,GAAON,IAd1B,IAAK,IAAMM,KAAOgf,EAAU,EAAjBhf,GAmBX,OAAOkb,EAAalY,IAAIq3B,GAAer5B,MAAK,kBAAM6b,MAxZ1D,EA2ZW3Z,IAAP,SACIo3B,EACAtgB,GAGA,OAAOkB,EAAalY,IAAIs3B,EAAMp3B,IAAI8W,KAha1C,EAmaW7W,6BAAP,SACIoZ,GAIA,OF1YD,SACHA,GAKA,OADAgd,EAAiCr3B,KAAKqa,GAC/B,CACHnZ,OADG,WAECm2B,EAAiCl2B,OAC7Bk2B,EAAiCt3B,QAAQsa,GACzC,KEgYDpZ,CAA6BoZ,IAxa5C,EA2aW5Z,IAAP,SAMIqX,EACA2C,EACA3F,GAGA,GAAIgD,GAA4B,mBAAXA,IAA0BA,EAAOpb,KAClD,MAAM,IAAIkD,MAAM,mCAGpB,IAAI+a,EACJ6c,IAEA,IAEI7c,EAAS7C,EAAO1W,MAAMqZ,EAAS3F,GAAQ,IACzC,MAAO/C,GAGL,OAFA0lB,IAEOze,EAAatZ,OAAOqS,GAK/B,OAFA0lB,IAEOze,EAAaha,QAAQ2b,IAxcpC,EA2cWtZ,MAAP,SAAaA,GACT,OAAO,IAAI2X,GAAa,SAAAha,GACpBc,WAAWd,EAASqC,OA7chC,EAidWC,UAAP,SAAiB9D,GACb,SAAIA,GAASA,aAAiBwb,IAIvB1X,EAAU9D,IAtdzB,EAydW+D,MAAP,WAEI,OD1cEjB,EAAW62B,EAAeA,GAAgB,IC0czBne,EDzcvBue,IACOj3B,EANJ,IAIGA,GCjBV,KCPO,SAAS80B,EAAevhB,EAA8BC,GACzD,IAAK,IAAIvX,EAAI,EAAGA,EAAIsX,EAAW5T,OAAQ1D,IACnC,IACI,GAAIsX,EAAWtX,KAAOuX,EAClB,OAAOvX,EAEb,MAAOwV,IAKb,OAAQ,ECNL,ICsFHyD,EDtFSE,EAAb,WASI,aAII,GAJU,KALd5Y,UAKc,OAJd0F,aAIc,OAHdC,UAGc,OAFdC,YAEc,EAEVvG,KAAKW,KAAL,cAA2C,IAAhB6F,KAAKC,WAAoB,GAApD,KEhBD,WACH,GAAuB,oBAAZC,QACP,OAAO,EAGX,QAA6B,IAAlB5F,OAAO6F,OACd,OAAO,EAGX,IACI,IAAM6S,EAAc,IAAI9S,QAClB+S,EAAU,GAKhB,OAHA3Y,OAAO6F,OAAO8S,GACdD,EAAY5S,IAAI6S,EAFE,mCAIdD,EAAYvY,IAAIwY,GAKtB,MAAO7D,GACL,OAAO,GFJHsmB,GACA,IACIl8B,KAAKqG,QAAU,IAAIK,QACrB,MAAOkP,IAKb5V,KAAKsG,KAAO,GACZtG,KAAKuG,OAAS,GAtBtB,2BAyBIM,sBAAA,WAII,IAHA,IAAMR,EAAUrG,KAAKqG,QACfC,EAAOtG,KAAKsG,KAETlG,EAAI,EAAGA,EAAIkG,EAAKxC,OAAQ1D,IAAK,CAClC,IAAMiB,EAAQiF,EAAKlG,GAGnB,GAAI0X,EAASzW,IAAUkW,EAAelW,GAAQ,CAC1C,GAAIgF,EACA,IACIA,EAAQS,OAAOzF,GACjB,MAAOuU,IAKbtP,EAAKtB,OAAO5E,EAAG,GACfJ,KAAKuG,OAAOvB,OAAO5E,EAAG,GACtBA,GAAK,KA5CrB,EAiDI2G,kBAAA,SAAkBpF,GACd,OAAImW,EAASnW,IAlDrB,EAgEIiF,IAAA,SAAIjF,EAAQN,GACR,IAAKM,EACD,MAAM,IAAI8B,MAAJ,wBAGV,IAAM4C,EAAUrG,KAAKqG,QAErB,GAAIA,EACA,IACIA,EAAQO,IAAIjF,EAAKN,GACnB,MAAOuU,UACE5V,KAAKqG,QAIpB,GAAIrG,KAAK+G,kBAAkBpF,GACvB,IACI,IAAMhB,EAAOX,KAAKW,KACZgZ,EAAQhY,EAAIhB,GAWlB,YATIgZ,GAASA,EAAM,KAAOhY,EACtBgY,EAAM,GAAKtY,EAEXP,OAAOC,eAAeY,EAAKhB,EAAM,CAC7BU,MAAS,CAAEM,EAAKN,GAChB2F,UAAS,KAKnB,MAAO4O,IAKb5V,KAAK6G,wBAEL,IAAMP,EAAOtG,KAAKsG,KACZC,EAASvG,KAAKuG,OACdqT,EAAQqf,EAAY3yB,EAAM3E,IAEjB,IAAXiY,GACAtT,EAAKzC,KAAKlC,GACV4E,EAAO1C,KAAKxC,IAEZkF,EAAOqT,GAASvY,GA7G5B,EAiHIJ,IAAA,SAAIU,GACA,IAAKA,EACD,MAAM,IAAI8B,MAAJ,wBAGV,IAAM4C,EAAUrG,KAAKqG,QAErB,GAAIA,EACA,IACI,GAAIA,EAAQY,IAAItF,GACZ,OAAO0E,EAAQpF,IAAIU,GAEzB,MAAOiU,UACE5V,KAAKqG,QAIpB,GAAIrG,KAAK+G,kBAAkBpF,GACvB,IACI,IAAMgY,EAAQhY,EAAI3B,KAAKW,MAEvB,OAAIgZ,GAASA,EAAM,KAAOhY,EACfgY,EAAM,QAGjB,EACF,MAAO/D,IAKb5V,KAAK6G,wBAEL,IACM+S,EAAQqf,EADDj5B,KAAKsG,KACc3E,GAEhC,IAAe,IAAXiY,EAIJ,OAAO5Z,KAAKuG,OAAOqT,IAzJ3B,EA4JI9S,OAAA,SAAOnF,GACH,IAAKA,EACD,MAAM,IAAI8B,MAAJ,wBAGV,IAAM4C,EAAUrG,KAAKqG,QAErB,GAAIA,EACA,IACIA,EAAQS,OAAOnF,GACjB,MAAOiU,UACE5V,KAAKqG,QAIpB,GAAIrG,KAAK+G,kBAAkBpF,GACvB,IACI,IAAMgY,EAAQhY,EAAI3B,KAAKW,MAEnBgZ,GAASA,EAAM,KAAOhY,IACtBgY,EAAM,GAAKA,EAAM,QAAKkiB,GAE5B,MAAOjmB,IAKb5V,KAAK6G,wBAEL,IAAMP,EAAOtG,KAAKsG,KACZsT,EAAQqf,EAAY3yB,EAAM3E,IAEjB,IAAXiY,IACAtT,EAAKtB,OAAO4U,EAAO,GACnB5Z,KAAKuG,OAAOvB,OAAO4U,EAAO,KA9LtC,EAkMI3S,IAAA,SAAItF,GACA,IAAKA,EACD,MAAM,IAAI8B,MAAJ,wBAGV,IAAM4C,EAAUrG,KAAKqG,QAErB,GAAIA,EACA,IACI,GAAIA,EAAQY,IAAItF,GACZ,OAAO,EAEb,MAAOiU,UACE5V,KAAKqG,QAIpB,GAAIrG,KAAK+G,kBAAkBpF,GACvB,IACI,IAAMgY,EAAQhY,EAAI3B,KAAKW,MAEvB,SAAIgZ,GAASA,EAAM,KAAOhY,GAK5B,MAAOiU,IAQb,OAHA5V,KAAK6G,yBAGa,IADJoyB,EAAYj5B,KAAKsG,KAAM3E,IAnO7C,EAuOIuF,SAAA,SAASvF,EAAQf,GACb,GAAIZ,KAAKiH,IAAItF,GAET,OAAO3B,KAAKiB,IAAIU,GAGpB,IAAMN,EAAQT,IAEd,OADAZ,KAAK4G,IAAIjF,EAAKN,GACPA,GA/Of,KCwDO,SAASmM,IACZ,IAAMuN,EAAQ,mBASd,aARiB,aAAaZ,QAAQ,MAAM,WACxC,OAAOY,EAAMC,OAAOxU,KAAKyU,MAAMzU,KAAKC,SAAWsU,EAAMjX,YAOzD,IA5CG,SAAsBkW,GACzB,GAAoB,mBAATC,KACP,OAAOA,KACHC,mBAAmBF,GAAKG,QAAQ,mBAAmB,SAAC3Z,EAAG4Z,GACnD,OAAOC,OAAOC,aAAaC,SAASH,EAAI,SAE9CD,QAAQ,OAAQ,IAGtB,GAAsB,oBAAXK,OACP,OAAOA,OAAOC,KAAKT,EAAK,QAAQtX,SAAS,UAAUyX,QAAQ,OAAQ,IAGvE,MAAM,IAAI1W,MAAJ,sCA0BS6J,EACX,IAAIkL,MAAO0C,cAAcL,MAAM,GAAI,IAAIV,QAAQ,IAAK,MAEnDA,QAAQ,gBAAiB,IACzBgB,cA2CT,SAASE,EAAiB1C,GACtB,IACI,OAAO2C,KAAK7M,UACR6N,GAAgBzB,MAAMta,KAAKoY,IAC3B,SAAC4C,EAAQC,GACL,MAAmB,mBAARA,EACP,WA3Bb,SAAqBzD,GAGxB,GAFAsB,EAAYA,GAAa,IAAI3S,EAGzBqR,SAEgB,iBAARA,GAAmC,mBAARA,EAEnC,MAAM,IAAItU,MAAJ,kBAGV,IAAI2X,EAAM/B,EAAUpY,IAAI8W,GAOxB,OALKqD,IACDA,SAAiBrD,EAAd,IAAuBvK,IAC1B6L,EAAUzS,IAAImR,EAAKqD,IAGhBA,EAS4B1N,CAAY8N,GAA/B,IAGGA,KAGjB,MAAO5F,GACL,MAAM,IAAInS,MAAJ,6DAMP,SAASkK,IACZ,MAAO,GAQX,IAOI8N,EAAqB,EACrBC,EAA8B,EAC3B,SAAS9N,GACZ+N,EACAC,QAAmE,IAAnEA,MAVO,IAWP,IACIC,EACAC,EAFJ,EAAmDF,EAA3CI,qBAAR,SAAqCC,EAAcL,EAApBM,KAG3BC,EAAeV,EACnBA,GAAsB,EAEtB,IAxJA5B,EAwJMuC,EAAmB,WAAiD,2BAApBzD,EAAoB,yBAApBA,EAAoB,gBAQtE,IAAI6D,EAPAL,EAAeT,IACfG,EAAc,KACdC,EAAY,KACZK,EAAeV,EACfA,GAAsB,GAQtBe,EAHAR,GACAF,EAAYA,GAAa,IAAIpV,GAEXQ,SAASlH,KAAM2N,GAEzBkO,EAAcA,GAAe,GAGzC,IAAMY,EAAWpB,EAAc1C,GAC3B+D,EAAcF,EAAMC,GAWxB,GARIC,GACAT,GACAzD,KAAKmE,MAAQD,EAAYR,KAAOD,WAEzBO,EAAMC,GACbC,EAAc,MAGdA,EACA,OAAOA,EAAYrb,MAGvB,IAAM6a,EAAO1D,KAAKmE,MAEZtb,EAAQsa,EAAO1W,MAAMjF,KAAMyW,WAKjC,OAJA+F,EAAMC,GAAY,CACdP,OACA7a,SAEGA,GAWX,OARA+a,EAAiBQ,MAAQ,WACrBf,EAAc,KACdC,EAAY,MAlMb,SACHjC,EACAlZ,GACA,WAEWkZ,EAAGlZ,KAEVkZ,EAAGlZ,KAAOA,EACZ,MAAOiV,IAMT,OADAiE,EAAGC,SAAWD,EAAGE,YAAcpZ,EACxBkZ,EA0LAxM,CAFW+O,GAIVR,EAAQjb,OA9MhBkZ,EA8MwC8B,GA5M9Bhb,MAAQkZ,EAAGC,UAAYD,EAAGE,aAAe,aA0M7B,cEzKnB,SAAShR,KAEZ,OAAOqM,QAAQF,SAAS8O,OAAiC,aAAxB9O,SAAS+O,WAEvC,SAASjb,KAEZ,OAAOoM,QAAQF,SAAS8O,OAAiC,gBAAxB9O,SAAS+O,WFyK9CrW,GAAQ6Q,MAAQ,WACZ/C,EAA8BD,GA6S9B7N,IAhBG,SAAmBmK,GACtB,GAAIjX,OAAOyF,OACP,OAAOzF,OAAOyF,OAAOwR,GAGzB,IAAMyG,EAAmB,GAEzB,IAAK,IAAM7c,KAAOoW,EACVA,EAAI/V,eAAeL,IACnB6c,EAAO3a,KAAKkU,EAAIpW,IAIxB,OAAO6c,KAkvB0B/a,MErrCqBmK,IAAQ,WAC9D,OAAO,IAAIiP,gBAAa,SAACha,GACrB,GAAIkG,MAAqBC,KACrB,OAAOnG,IAGX,IAAM2e,EAAW0C,aAAY,WACzB,GAAInb,MAAqBC,KAErB,OADAmb,cAAc3C,GACP3e,MAEZ,UA+sCX,IAAI8rB,GAEoB,oBAAbzZ,SAA2BA,SAASyZ,cAAgB,KAGlD7hB,GAAqCc,IAAQ,WACtD,GAAI+gB,GACA,OAAOA,GAMX,GAFAA,GAjCJ,WACI,IACI,IAAMrrB,EAVP,WACH,IACI,MAAM,IAAIG,MAAM,KAClB,MAAOmS,GACL,OAAOA,EAAItS,OAAS,IAMNuJ,GACR+hB,EAAgB,kCAAmCC,KAAKvrB,GACxDwrB,EAAiBF,GAAgBA,EAAa,GAEpD,IAAKE,EACD,OANJ,cASqBxS,GAAgBzB,MAChCta,KAAK2U,SAASqR,qBAAqB,WACnCF,UAXL,eAWgB,CAFX,IAAMG,EAAM,KAGb,GAAIA,EAAOC,KAAOD,EAAOC,MAAQqI,EAC7B,OAAOtI,GAGjB,MAAO5Q,KAgBOumB,GAGZ,OAAOxN,GAGX,MAAM,IAAIlrB,MAAM,uCAEdwrB,GAAazhB,ICvxCnB,SAAS4uB,KAAsB,IAC3B,IAAMC,EAAkB1C,EAAY,mBADT,MAGV0C,EAAgB/1B,OAHN,eAGc,CAApC,IAAMqhB,EAAE,KAEL0U,EAAgBp7B,IAAI0mB,GAAI2U,eACxBD,EAAgBrC,IAAIrS,IAqBhC,SAAS4U,GACLC,EADJ,GASwB,IANhB3H,EAMgB,EANhBA,KAMgB,IALhBlN,UAKgB,MALXna,qBAKW,EAChBivB,EAAsDD,EAAW75B,MACjE,SAACmU,GACG,GAAIK,EAAaL,GACb,OAAO0hB,EAAiB1hB,GAAKnW,QAInC+7B,EAAoBF,EAAW75B,MAAK,SAACJ,GACvC,GAAKgV,EAAehV,GAGhB,MAAM,IAAIkB,MAAJ,4CAFN,OAAO20B,EAAU71B,GhB7DpB,QADC,YgBmENk6B,EAAkBr4B,MAAMu4B,QACxBD,EAAkBt4B,MAAMu4B,QAExB,IAAMC,EAAU,kBACZJ,EAAW75B,MAAK,SAACmU,GACb,IAAIS,EAAeT,GAInB,OAAIK,EAAaL,GACN0hB,EAAiB1hB,GAAKnW,KAG1B87B,MAkEf,MAAO,CACH9U,KAEAkV,QAAS,WACL,OAAOH,GAGXnC,cAAezsB,0BAAe,kBAC1B0uB,EAAW75B,MAAK,SAACmU,GAAD,OACZgkB,EAAoBhkB,EAAK,CACrB+d,eAEZpM,MAAM,kBAAM+T,EAAW75B,KAAK62B,IAE5BoD,UACAE,MAAM,kBACFN,EAAW75B,MAAK,SAACmU,GACbA,EAAIgmB,YAEZC,SAAU,kBACNP,EAAW75B,MAAK,SAACmU,GACb,OAAOS,EAAeT,OAG9BkmB,YAnFgB,SAChBtY,EACAuY,GAFgB,gBAEhBA,MALO,IAOPT,EAAW75B,MAAK,SAACmU,GACb,IAAMI,EAAa3U,OAAO8C,SAASC,SAAvB,KAAsC/C,OAAO8C,SAASG,KAClE,EAAsCy3B,EAA9BthB,cAAR,MXxEH,MWwEG,EAA6BqI,EAASiZ,EAATjZ,KAE7B,GAA0B,IAAtBU,EAAK9gB,QAAQ,KACb8gB,EAAO,GAAIxN,EAAWwN,OACnB,IACFA,EAAKrW,MAAM,iBACa,IAAzBqW,EAAK9gB,QAAQsT,GAEb,MAAM,IAAIzT,MAAJ,+DAC8D6X,KAAK7M,UACjEiW,IAKZ,GXtFH,SWsFO/I,EACA,OAAOihB,IAAUj6B,MAAK,SAAChC,GACnB,IAAKA,EACD,MAAM,IAAI8C,MAAJ,8CAKVuJ,qBAAW,CACPyX,IAAOC,EAEPlO,OAAO7V,EACPgb,SACAqI,YAGL,GXvGV,QWuGcrI,EAkBP,MAAM,IAAIlY,MAAJ,uBAAkCkY,GAjBxC,GAAIxE,EAAaL,GACb,IACI,GACIA,EAAIzR,UAC4B,mBAAzByR,EAAIzR,SAAS8U,QAGpB,YADArD,EAAIzR,SAAS8U,QAAQuK,GAG3B,MAAO9O,IAMbkB,EAAIzR,SAAWqf,MA+BvBwY,QAAS,SAACv8B,GAAD,OACL67B,EAAW75B,MAAK,SAACmU,GAQb,IAAMqmB,EAAahmB,EAAaL,GAC1Bc,Efg0Bf,SAA2Bd,GAChC,GAAIK,EAAaL,GAEf,OAAO0hB,EAAiB1hB,GAAKsmB,aAI/B,IAAK,IAAIC,EAAO,EAAGC,EAAyBpoB,SAAS/K,iBAAiB,UAAWkzB,EAAOC,EAAuBx5B,OAAQu5B,IAAQ,CAC7H,IAAIzlB,EAAQ0lB,EAAuBD,GAEnC,GAAIzlB,GAASA,EAAM7R,eAAiB6R,EAAM7R,gBAAkB+Q,EAC1D,OAAOc,Ge30BiB2lB,CAAkBzmB,GAEhC,IAAKqmB,EACD,MAAM,IAAI15B,MAAJ,6CAC4C9C,GAItD63B,EAAiB1hB,GAAKnW,KAAOA,EAEzBiX,GACAA,EAAMgS,aAAa,OAAQjpB,GAG/B87B,EAAoB5f,eAAaha,QAC7BlC,QDqmCoCiN,IAAQ,WAC5D,IAAI4Y,EAEJ,IACIA,EAAS1Z,KACX,MAAO8I,GACL,OAAOqZ,GAGX,IAAI7T,EAAMoL,EAAO0I,aEpzCZ,YFszCL,GAAI9T,GAAsB,iBAARA,EACd,OAAOA,EAKX,IAFAA,EAAMoL,EAAO0I,aAAiBvc,mBAEJ,iBAARyI,EACd,OAAOA,EAGX,GAAIoL,EAAOC,IAAK,CACZ,IAKM0I,EFhgCP,SAAoBnV,GAGvB,IAFA,IAAIpV,EAAO,GAEFxE,EAAI,EAAGA,EAAI4Z,EAAIlW,OAAQ1D,IAAK,CACjC,IAAIqd,EAAQzD,EAAI5Z,GAAGwa,WAAW,GAAKxa,EAE/B4Z,EAAI5Z,EAAI,KACRqd,GAASzD,EAAI5Z,EAAI,GAAGwa,WAAW,IAAMxa,EAAI,IAG7CwE,GAAQyV,OAAOC,aAAa,GAAM9T,KAAKkX,IAAID,GAAS,IAGxD,OAAO7Y,EEm/BkBwJ,CAJAkN,KAAK7M,UAAU,CAChCgY,IAFqBD,EAAjBC,IAGJ2I,QAHqB5I,EAAZ4I,WASbhU,EAAM,OAHa+T,EAAatU,MAC5BsU,EAAarrB,OEt0CM,SF00CvBsX,EAAM5N,IAIV,OADAgZ,EAAOoD,aAAiBjX,gBAAwByI,GACzCA,KGxwCP,IAAIyB,gBAAa,SAACha,GACd,GAAIN,OAAO2S,UAAY3S,OAAO2S,SAAS8O,KACnC,OAAOnhB,EAAQN,OAAO2S,SAAS8O,MAGnC,IAAMxC,EAAW0C,aAAY,WACzB,GAAI3hB,OAAO2S,UAAY3S,OAAO2S,SAAS8O,KAEnC,OADAG,cAAc3C,GACP3e,EAAQN,OAAO2S,SAAS8O,QAEpC,OF0HJ,IAAMwZ,GAAb,WASI,cAQG,IAPC3I,EAOD,EAPCA,KACA/d,EAMD,EANCA,IACA2mB,EAKD,EALCA,iBAKD,KAhBH9V,QAgBG,OAfH+V,eAAsB,EAenB,KAdHD,sBAcG,OAbHE,kBAaG,OAZHC,yBAYG,OAXH/I,UAWG,OAVHl0B,UAUG,EACCX,KAAK49B,oBAAsB,IAAI/gB,eAC/B7c,KAAKy9B,iBACDA,GACAlB,GAAoBv8B,KAAK49B,oBAAqB,CAC1C/I,SAER8E,EAAY,mBAAmB/yB,IAAI5G,KAAKuwB,QAASvwB,MAE7C8W,GACA9W,KAAK69B,UAAU/mB,EAAK,CAChB+d,SA5BhB,2BAiCItE,MAAA,WACI,OAAOvwB,KAAKy9B,iBAAiB9V,IAlCrC,EAqCIkV,QAAA,WACI,OAAO78B,KAAKy9B,iBAAiBZ,WAtCrC,EAyCIiB,QAAA,WACI,OAAO99B,KAAK68B,UAAUl6B,MAAK,SAACo7B,GACxB,MhBpPH,UgBoPUA,MA3CnB,EA+CIf,YAAA,SACItY,EACAuY,GACyB,WACzB,OAAOj9B,KAAKy9B,iBAAiBT,YAAYtY,EAAMuY,GAAMt6B,MAAK,kBAAM,MAnDxE,EAsDIi6B,QAAA,WACI,OAAO58B,KAAKy9B,iBAAiBb,WAvDrC,EA0DIM,QAAA,SAAQv8B,GAAyC,WAC7C,OAAOX,KAAKy9B,iBAAiBP,QAAQv8B,GAAMgC,MAAK,kBAAM,MA3D9D,EA8DI8lB,MAAA,WAAmC,WAC/B,OAAOzoB,KAAKy9B,iBAAiBhV,QAAQ9lB,MAAK,kBAAM,MA/DxD,EAkEIm6B,MAAA,WAAmC,WACzBkB,EAAiBh+B,KAAK89B,UACtBG,EAAiBj+B,KAAK48B,UACtBsB,EAAgBrhB,eAAajY,KAAK,CACpCk5B,QAAQE,EACRr9B,KAAQs9B,IACTt7B,MAAK,YAAuB,IAAXhC,EAAW,EAAXA,KAAW,EAApBm9B,SACQn9B,GACX4B,OAAOgmB,KAAK,GAAI5nB,MAGlBw9B,EAAen+B,KAAKy9B,iBAAiBX,QAC3C,OAAOjgB,eAAalY,IAAI,CAAEu5B,EAAeC,IAAgBx7B,MAAK,kBAAM,MA9E5E,EAiFIo6B,SAAA,WACI,OAAO/8B,KAAKy9B,iBAAiBV,YAlFrC,EAqFIqB,UAAA,WACI,OAAOp+B,KAAK29B,cAtFpB,EAyFIE,UAAA,SACI/mB,EADJ,GAOQ,IAJA+d,EAIA,EAJAA,KAKJ70B,KAAK29B,aAAe7mB,EACpB9W,KAAK49B,oBAAoB/6B,QAAQ7C,KAAK29B,cACtC39B,KAAKy9B,iBAAmBlB,GAAoBv8B,KAAK49B,oBAAqB,CAClE/I,OACAlN,GAAI3nB,KAAKuwB,UAEb6J,EAAY,oBAAoBxzB,IAAIkQ,EAAK9W,OAvGjD,EA0GIq+B,YAAA,WACI,OAAOr+B,KAAK49B,qBA3GpB,EA8GIU,YAAA,SACIxnB,EADJ,GAOyB,WAJjB+d,EAIiB,EAJjBA,KAKJ,OAAOhY,eAAavY,KAAI,WACpB,OAAI,EAAKq5B,aACE7mB,IAAQ,EAAK6mB,aAGjB9gB,eAAajY,KAAK,CACrB25B,gBAAsB,EAAKhE,gBAC3BiE,sBAAsB1D,EAAoBhkB,EAAK,CAC3C+d,WAELlyB,MAAK,YAAgD,IAC9C0L,EAD8C,EAA7CkwB,kBAA6C,EAA5BC,sBASxB,OANInwB,GACA,EAAKwvB,UAAU/mB,EAAK,CAChB+d,SAIDxmB,SAzIvB,EA8IIowB,OAAA,WACI,OAAOz+B,KAAK29B,cAAgB39B,MA/IpC,EAkJIu6B,cAAA,WACI,OAAOv6B,KAAKy9B,iBAAiBlD,iBAnJrC,EAsJI+B,YAAA,WACI,OAAOlnB,QAAQpV,KAAK29B,cAAgBpmB,EAAevX,KAAK29B,gBAvJhE,EA0JIe,UAAA,WACI,OAAO1+B,KAAKy9B,kBA3JpB,EA8JWgB,OAAP,SACI3nB,GAEA,OAAO0mB,EAAYE,cAAc5mB,GAE7BA,EAAI2nB,SACF3nB,GApKd,EAuKW4nB,UAAP,SACI5nB,EADJ,GAOwB,IAJhB+d,EAIgB,EAJhBA,KAMJ,OADAuH,KACOoB,EAAYmB,cAAc7nB,EAAK,CAClC+d,SACD6J,aAlLX,EAqLWE,YAAP,SACInB,EADJ,GAOe,IAJP5I,EAIO,EAJPA,KAMJ,OADAuH,KAEIzC,EAAyB,mBAAmB14B,IACxCw8B,EAAiB9V,KAErB,IAAI6V,EAAY,CACZC,mBACA5I,UApMhB,EAyMW6I,cAAP,SAAqB3lB,GAEjB,OAAO3C,QAAQ2C,IAAQD,EAASC,IAAQA,EAAI2lB,gBA3MpD,EA8MWiB,cAAP,SACI7nB,EADJ,GAOe,IAJP+d,EAIO,EAJPA,KAOJ,GAFAuH,KAEIoB,EAAYE,cAAc5mB,GAE1B,OAAOA,EAIX,IAAM6mB,EAAsC7mB,EAC5C,OACIsjB,EAAyB,oBAAoBn5B,IAAI08B,IACjD,IAAIH,EAAY,CACZ1mB,IAAK6mB,EACL9I,UAnOhB,KG7LA,SAASgK,GACLlX,EACAnM,EACA7a,EACA+V,EACAQ,GAEA,IAAM4nB,EAAc1E,EAAiC,eAC/C2E,EAAqBpF,EAAY,sBAEnC6D,GAAYE,cAAchnB,GAC1BqoB,EAAmBn4B,IAAI+gB,EAAI,CACvBnM,MACA7a,OACAuW,SACAR,YAGJqoB,EAAmB/E,IAAIrS,GACPmX,EAAY53B,SAASwP,GAAQ,iBAAO,MAC5CiR,GAAM,CACVzQ,SACAvW,OACA6a,MACA9E,WAKZ,SAASsoB,GACLtoB,EACAiR,GAEA,IAAMmX,EAAc1E,EAAiC,eAC/C2E,EAAqBpF,EAAY,sBAEvC,OADgBmF,EAAY53B,SAASwP,GAAQ,iBAAO,MACrCiR,IAAOoX,EAAmB99B,IAAI0mB,GAsK1C,SAASsX,GACZC,EACAhoB,EACAsE,EACA7Z,EAJG,GA/HP,MACIwe,EACA0U,EADA1U,GADJ,EA4I2B,CACnBA,GAFc,EANdA,GASA0U,KAHc,EALdA,OArIJ1U,GACA0U,EAIe,EAJfA,KAKO8E,EAA4B,oBAAoBzyB,SACnD,iBACA,WACI,OAAOiZ,Ed/FH,mBciGA,CACIjJ,OdvFI,McyFR,YAQM,IAPFR,EAOE,EAPFA,OACA2iB,EAME,EANFA,OACA7F,EAKE,EALFA,KAMQ7L,EAAa6L,EAAb7L,GAAIhnB,EAAS6yB,EAAT7yB,KACNw+B,EAAOH,GAAatoB,EAAQiR,GAElC,IAAKwX,EACD,MAAM,IAAI17B,MAAJ,0BACyB9C,EADzB,cAEE6yB,EAAK7L,GAFP,OAGM1Q,EAAU1U,SAI1B,IAAgB68B,EAA8BD,EAAtCzoB,OAAsBQ,EAAgBioB,EAAhBjoB,OAAQsE,EAAQ2jB,EAAR3jB,IACtC,OAAOqB,eAAavY,KAAI,WACpB,IAAK80B,EAAYliB,EAAQmiB,GACrB,MAAM,IAAI51B,MAAJ,WACU+vB,EAAK7yB,KADf,YACiC2a,KAAK7M,UACpCypB,kBAAQiH,EAAKjoB,QACNioB,EAAKjoB,OAAkBR,OACxByoB,EAAKjoB,QAJb,0BAK2BmiB,EAL3B,OAK0CpiB,EACxC1U,SAKZ,GAAIi7B,GAAYE,cAAc0B,GAC1B,OACIA,EAEKd,YAAY5nB,EAAQ,CACjBme,SAEHlyB,MAAK,SAAC0L,GACH,IAAKA,EACD,MAAM,IAAI5K,MAAJ,gBAEE+vB,EAAK7yB,KAFP,oDAGmDsW,EACjD1U,eAQ3BI,MACG,WACI,OAAO6Y,EAAIvW,MACP,CACIyR,SACA2iB,UAEJ7F,EAAK7a,SAGb,SAAC/C,GACG,OAAOiH,eAAavY,KAAI,WAEpB,GAAIkX,EAAIvX,QAEJ,OAAOuX,EAAIvX,QAAQ2R,MAExBjT,MAAK,WA3HxC,IAA4BgW,EAqIQ,MARI/C,EAAItS,QAEJsS,EAAItS,MAAJ,kBAA+B3C,EAA/B,UA/H+B,KAA3CgY,EAgIgB6a,EAAK7a,QAhIrBA,EAA+B,IAChDpI,oBAAUoI,GACZ9T,KAAI,SAAC0d,GACF,MAAmB,iBAARA,EACP,IAAYA,EAAZ,SAGQsZ,IAARtZ,EACO,YAGC,OAARA,EACO,OAGQ,kBAARA,EACAA,EAAI7f,WAGX4Z,MAAMoD,QAAQ6C,GACP,UAGQ,iBAARA,EACA,UAGQ,mBAARA,EACA,gBAGX,WAAmBA,EAAnB,OAEHzH,KAAK,MA8F0B,gBAGkBlF,EAAItS,OAGpBsS,QAIjBjT,MAAK,SAAC6b,GACH,MAAO,CACHA,SACAmJ,KACAhnB,iBAuC5B,IAAMgnB,EAAKnM,EAAI6jB,QAAU7xB,qBACzB0xB,EAAc1B,GAAYiB,OAAOS,GACjC,IAAIv+B,EAAO6a,EAAI1B,UAAY0B,EAAI7a,MAAQgB,EAoBvC,MAjBoB,iBAAThB,GACiB,mBAAjBA,EAAKiD,SACoB,IAAhCjD,EAAKiD,QAAQ,iBAEbjD,EAAOA,EAAKwZ,QAAQ,cAAmBxY,EAAhC,OAGP67B,GAAYE,cAAcwB,IAC1BL,GAAUlX,EAAInM,EAAK7a,EAAMu+B,EAAahoB,GAEtCgoB,EAAYb,cAAc17B,MAAK,SAACmU,GAC5B+nB,GAAUlX,EAAInM,EAAK7a,EAAMmW,EAAKI,OAGlC2nB,GAAUlX,EAAInM,EAAK7a,EAAMu+B,EAAahoB,GAGnCooB,wBd7OoB,wBc6OoC,CAC3D3X,KACAhnB,SCxPD,SAAS4+B,GACZL,EACAhoB,EACAa,EAHG,GAWG,MANFoI,EAME,EANFA,GACA0U,EAKE,EALFA,KAMJ,OAAO6J,oBAAU3mB,IAAD,MACXynB,OAAKzI,SAAU,SAACvb,EAAe7Z,GAAhB,OCVjB,SACHu9B,EACAhoB,EACAsE,EACA7Z,EAJG,GAYc,IANbwe,EAMa,EANbA,GACA0U,EAKa,EALbA,KAMJ,OAAOyK,wBhBRoB,6BgBQyC,CAChE38B,KAAMs8B,GACFC,EACAhoB,GAEA,SAACrU,EAASU,GAAV,OAAqBiY,EAAI7Y,KAAKE,EAASU,KACvC5B,EACA,CACIwe,KACA0U,WDXJ4K,CAAiBP,EAAahoB,EAAQsE,EAAK7Z,EAAK,CAC5Cwe,KACA0U,UAJI,EAMX2K,OAAK3I,UAAW,SACbrb,EACA7Z,GAFa,OAIbs9B,GAAkBC,EAAahoB,EAAQsE,EAAK7Z,EAAK,CAC7Cwe,KACA0U,UAZI,EAeX2K,OAAKrI,QAAS,SACX3b,GAEA,OAAO1D,EAAS0D,IAAQgiB,GAAYE,cAAcliB,GJgZvD,SACH0jB,EACAhoB,EACAJ,EAHG,GASa,IAJZ+d,EAIY,EAJZA,KAKJ,OAAOyK,wBX9aoB,sBWgbvB9B,GAAYkB,UAAU5nB,EAAK,CACvB+d,UI5ZM6K,CAAgBR,EAAahoB,EAAQsE,EAAK,CACxCqZ,SAEFrZ,GAtBE,IA0Bb,SAASmkB,GACZjpB,EACA2iB,EACA1zB,EAHG,GAUF,MALGkvB,EAKH,EALGA,KAMJ,OAAO+J,sBAAYj5B,IAAD,iCACmC,SAACi6B,GAAD,OCpBlD,SACHlpB,EACA2iB,EAFG,GASH,OAAO,IAAIxc,eADI,EAJXla,MDiBIk9B,CAAmBnpB,EAAQ2iB,EAAQuG,IAFzB,wBAG8B,SAACE,GAAD,ODuM7C,SACHppB,EACA2iB,EAFG,KAeiD,IAXhD1R,EAWgD,EAXhDA,GACAhnB,EAUgD,EAVhDA,KAMAk0B,EAIgD,EAJhDA,KAKEkL,EAA0B,SAAC9C,GAC7B,SAAS+C,IAEY,gBAOjB,OAAOxC,GAAYmB,cAAcjoB,EAAQ,CACrCme,SAECwJ,cACA17B,MAAK,SAACmU,GACH,IAAMqoB,EAAOH,GAAaloB,EAAK6Q,GAE/B,GAAIwX,GAAQA,EAAK3jB,MAAQwkB,EACrB,OAAOb,EAAK3jB,IAAIvW,MACZ,CACIyR,OAAOnU,OACP82B,OAAOpiB,KAGXR,GAIJ,IAAMkC,EAAO2D,GAAgBzB,MAAMta,KAAKkW,GAExC,OAAIwmB,EAAKgD,cACEpL,EACH/d,EdhThB,mBckTgB,CACI6Q,KACAhnB,OACAgY,QAEJ,CACIzB,OAAcmiB,EACd4G,eAAc,IAIfpL,EACH/d,Ed9ThB,mBcgUgB,CACI6Q,KACAhnB,OACAgY,QAEJ,CACIzB,OAAcmiB,EACd4G,eAAc,IAEpBt9B,MAAK,SAAC64B,GAAD,OAASA,EAAIhI,KAAKhV,aAIpCpa,OAAM,SAACwR,GAUJ,MAAMA,KASlB,YAhFgE,IAAnCqnB,MAA4B,IA2EzD+C,EAA2BlmB,SAAWnZ,EACtCq/B,EAA2BE,WAAa7G,EACxC2G,EAA2BG,WAAazpB,EACxCspB,EAA2BX,OAAS1X,EACpCqY,EAA2B3G,OAASA,EAC7B2G,GAGLA,EAA6BD,IAKnC,OAHAC,EAA2BC,cAAgBF,EAAwB,CAC/DE,eAAe,IAEZD,EC9SCI,CAAoB1pB,EAAQ2iB,EAAQyG,EAAoB,CACpDjL,UALM,sBAO4B,SAAC4I,GAAD,OJiZvCD,GAAYoB,YIhZuBnB,EJgZN,CAChC5I,KIhZQA,KATM,IEvCf,IAAMwL,GAAmD,GCPzD,SAASC,GACZxpB,EACAI,EACAvR,EAHG,GAWe,IANdwa,EAMc,EANdA,GACA0U,EAKc,EALdA,KAMJ,OAAOhY,eAAavY,KAAI,WACpB,IACMi8B,EADgBnG,IACalzB,SAAS4P,GAAK,iBAAO,MA4CxD,OA3CAypB,EAAaC,OAASD,EAAaC,QAAU,GAC7CD,EAAaC,OAAO38B,KAAK8B,GACzB46B,EAAan7B,MACTm7B,EAAan7B,OACbyX,eAAazX,QAAQzC,MAAK,WACtB,GAAI4U,EAAeT,GACf,MAAM,IAAIrT,MAAM,oBAGpB,IA9BwD,EA8BlDg9B,EAAoBlB,GACtBzoB,EACAI,IA/BhB,6BAgC6BqpB,EAAaC,QAAU,GAhCpD,GAiCgB,CACIrgB,KACA0U,gBAGD0L,EAAaC,OAdQ,IAe5B,IAAME,EAAa5/B,OAAOwF,KAAK+5B,IACzBM,EAAS,GAhBa,MAkBDD,EAlBC,WAkBW,CAAlC,IAAME,EAAgBF,EAAJ,GACnB,IAEIL,GAAwBO,GACpB9pB,EACA2pB,EACAvpB,GAEN,MAAOtB,GACL+qB,EAAO98B,KAAK+R,IAIpB,GAAI+qB,EAAO78B,SAAW48B,EAAW58B,OAC7B,MAAM,IAAIL,MAAJ,kDACiDk9B,EAC9C97B,KAAI,SAAC+Q,EAAKxV,GAAN,OAAgBA,EAAhB,KAAwBmO,yBAAeqH,MAC3CkF,KAAK,YAInBylB,EAAan7B,MAAMzC,MAAK,kBACpB49B,EAAan7B,YAEzBzC,KAAKg6B,QCrCL,SAASkE,GACZj8B,GAIA,OAF0B+0B,EAAY,qBAEb14B,IAAI2D,GAE1B,SAASk8B,GAAuBl8B,GACT+0B,EAAY,qBACpBK,IAAIp1B,GAoBnB,SAASm8B,GAA0Bn8B,GAEtC,OADiC+0B,EAAY,4BACb1yB,IAAIrC,GAEjC,SAASo8B,GAAT,GAQoC,IAPvCrgC,EAOuC,EAPvCA,KACAmW,EAMuC,EANvCA,IACAI,EAKuC,EALvCA,OAMM+pB,EAAmB7G,EAAY,oBAUrC,GnBzEoB,MmBiEhBtjB,IACAA,EAAM,MnBlEU,MmBqEhBI,IACAA,EAAS,OAGRvW,EACD,MAAM,IAAI8C,MAAJ,yCAZ6B,cAeZ,CAAEqT,EAAKojB,KAfK,eAeY,CAA9C,IAAMgH,EAAY,KACnB,GAAKA,EAAL,CAIA,IAAMC,EAAgBF,EAAiBhgC,IAAIigC,GAE3C,GAAKC,EAAL,CAKA,IAAMC,EAAkBD,EAAcxgC,GAEtC,GAAKygC,EAAL,CAIA,GAAIlqB,GAA4B,iBAAXA,EAAqB,CACtC,GAAIkqB,EAAgBlqB,GAChB,OAAOkqB,EAAgBlqB,GAG3B,GAAIkqB,EAAe,iBAAoB,cACDA,EAAe,iBADd,eAGhC,CAFE,WAAe7gB,EAAf,EAAeA,SAGhB,GAAI6Y,EAHH,EAAQvoB,MAGcqG,GACnB,OAAOqJ,GAMvB,GAAI6gB,EnB/GY,KmBgHZ,OAAOA,EnBhHK,SoBKjB,SAASC,GACZ3qB,EACA2iB,EACA1zB,EAHG,GAWe,IANdwa,EAMc,EANdA,GACA0U,EAKc,EALdA,KAMEjZ,EAAUolB,GAAmB,CAC/BrgC,KAAOgF,EAAQhF,KACfmW,IAAOJ,EACPQ,OAAOmiB,IAELiI,EpBjCM,qBoBkCR37B,EAAQhF,MACRgF,EAAQ6tB,MAEqB,iBAAtB7tB,EAAQ6tB,KAAK7yB,KAEZgF,EAAQ6tB,KAAK7yB,KALrB,KAMMgF,EAAQhF,KAuClB,SAAS4gC,EACLC,EACAhO,EACArwB,GAEA,OAAO0Z,eAAazX,QAAQzC,MAAK,WAC7B,IAAIgD,EAAQs6B,gBAAiB1oB,EAAeb,GAmB5C,IACI,OAAO4pB,GACH5pB,EACA2iB,EACA,CACI1R,GAAOna,qBACP6rB,OAAOpiB,EAAU1U,QACjBw7B,KpBvHX,6BoBwHWn5B,KAAOe,EAAQf,KACfjE,KAAOgF,EAAQhF,KACf6gC,MACAhO,OACArwB,SAEJ,CACIgd,KACA0U,SAGV,MAAOjf,GACL,MAAM,IAAInS,MAAJ,oCACmC69B,EADnC,OACmDrqB,IADnD,OACuE1I,yBACrEqH,QAOpB,OAAOiH,eAAalY,IAAI,CArFbkY,eAAazX,QAAQzC,MAAK,WAC7B,IAAIgD,EAAQs6B,gBAAiB1oB,EAAeb,GAI5C,IACI,OAAO4pB,GACH5pB,EACA2iB,EACA,CACI1R,GAAOna,qBACP6rB,OAAOpiB,EAAU1U,QACjBw7B,KpBnEX,wBoBoEWn5B,KAAOe,EAAQf,KACfjE,KAAOgF,EAAQhF,MAEnB,CACIwf,KACA0U,SAGV,MAAOjf,GACL,MAAM,IAAInS,MAAJ,+BAC8B69B,EAD9B,OAC8CrqB,IAD9C,OACkE1I,yBAChEqH,QA+DhBiH,eAAavY,KAAI,WACb,IAAKsX,EACD,MAAM,IAAInY,MAAJ,sCACqCkC,EAAQhF,KAD7C,SAC4D04B,EAD5D,OAC2E92B,OAAO8C,SAASC,SAD3F,KAC0G/C,OAAO8C,SAASG,KAASjD,OAAO8C,SAASo8B,UAI7J,IAAKrI,EAAYxd,EAAQ1E,OAAQmiB,GAC7B,MAAM,IAAI51B,MAAJ,kBACiB41B,EADjB,0BACmDzd,EAAQ1E,OAAOxU,YAK5E,OAAOkZ,EAAQsC,QAAQ,CACnBxH,SACA2iB,SACA7F,KAJS7tB,EAAQ6tB,UAMtB7wB,MACC,SAAC6wB,GAEG,OAAO+N,EpBjKX,UoBiK6C/N,MAE7C,SAACrwB,GACG,OAAOo+B,EpBnKX,QoBmK2C,KAAMp+B,QAIpDR,KAAKg6B,QACLv4B,OAAM,SAACwR,GACJ,GAAIgG,GAAWA,EAAQ8lB,YACnB,OAAO9lB,EAAQ8lB,YAAY9rB,GAE3B,MAAMA,KAIf,SAAS+rB,GACZjrB,EACA2iB,EACA1zB,GAEA,IAAIo7B,GAA0Bp7B,EAAQf,MAAtC,CAIA,IAAMgX,EAAUilB,GAAoBl7B,EAAQf,MAE5C,IAAKgX,EACD,MAAM,IAAInY,MAAJ,sDACqDkC,EAAQhF,KAD7D,SAC4E04B,EAD5E,OAC2F92B,OAAO8C,SAASC,SAD3G,KAC0H/C,OAAO8C,SAASG,KAASjD,OAAO8C,SAASo8B,UAI7K,IACI,IAAKrI,EAAYxd,EAAQ1E,OAAQmiB,GAC7B,MAAM,IAAI51B,MAAJ,cACa41B,EADb,0BAC+Czd,EAAQ1E,OAAOxU,YAIxE,GAAIgU,IAAWkF,EAAQ9E,IACnB,MAAM,IAAIrT,MAAJ,+CAEZ,MAAOmS,GACLgG,EAAQzX,QAAQZ,OAAOqS,GAG3BgG,EAAQ4lB,KAAM,GAEX,SAASI,GACZlrB,EACA2iB,EACA1zB,GAEA,IAAIo7B,GAA0Bp7B,EAAQf,MAAtC,CAIA,IxBymBmC+Y,EwBzmB7B/B,EAAUilB,GAAoBl7B,EAAQf,MAE5C,IAAKgX,EACD,MAAM,IAAInY,MAAJ,2DAC0DkC,EAAQhF,KADlE,SACiF04B,EADjF,OACgG92B,OAAO8C,SAASC,SADhH,KAC+H/C,OAAO8C,SAASG,KAASjD,OAAO8C,SAASo8B,UAIlL,IAAKrI,EAAYxd,EAAQ1E,OAAQmiB,GAC7B,MAAM,IAAI51B,MAAJ,mBACkB41B,EADlB,2BxBgmByB1b,EwB9lBvB/B,EAAQ1E,OxB+lBlBoF,MAAMoD,QAAQ/B,GACT,IAAMA,EAAQ7C,KAAK,OAAS,IAC1Bod,EAAQva,GACV,UAAYA,EAAQjb,WAAa,IAEjCib,EAAQjb,awB/lBf,GAAIgU,IAAWkF,EAAQ9E,IACnB,MAAM,IAAIrT,MAAJ,oDAGVq9B,GAAuBn7B,EAAQf,MpB9OvB,UoBwPJe,EAAQ67B,IAYR5lB,EAAQzX,QAAQZ,OAAOoC,EAAQxC,OpBrQ3B,YoBsQGwC,EAAQ67B,KAKf5lB,EAAQzX,QAAQtB,QAAQ,CACpB6T,SACA2iB,SACA7F,KAAM7tB,EAAQ6tB,QCpNnB,SAASqO,GACZ7b,EADG,GASC,IANA7F,EAMA,EANAA,GACA0U,EAKA,EALAA,KAMEiN,EAAmBnI,EAAY,oBAErC,IACI,IAAKp3B,QAAUA,OAAOmD,SAAWsgB,EAAMtP,OACnC,OAEN,MAAOd,GACL,OAGJ,IAAMc,EAAyBsP,EAAzBtP,OAAQ2iB,EAAiBrT,EAAjBqT,OAWR0I,EAvEV,SACIp8B,EACA+Q,EACA2iB,EAHJ,GAW6C,IACrC2I,EAPA7hB,EAMqC,EANrCA,GACA0U,EAKqC,EALrCA,KAQJ,IACImN,EAAgBrC,GAAmBjpB,EAAQ2iB,EAAQ1zB,EAAS,CACxDwa,KACA0U,SAEN,MAAOjf,GACL,OAGJ,GAAKosB,GAIwB,iBAAlBA,GAAgD,OAAlBA,EAAzC,CAIA,IAAMC,EAAgBD,EAAa,uBAEnC,GAAK1lB,MAAMoD,QAAQuiB,GAInB,OAAOA,GAkCUC,CAXclc,EAATwN,KAWqB9c,EAAQ2iB,EAAQ,CACvDlZ,KACA0U,SAGJ,GAAKkN,EAAL,CAIAhH,EAAgBrkB,GA/BZ,cAiCkBqrB,EAjClB,WAiC4B,CAA3B,IAAMp8B,EAAWo8B,EAAJ,GACd,GAAID,EAAiB76B,IAAItB,EAAQgiB,IAC7B,OAMJ,GAHAma,EAAiBl7B,IAAIjB,EAAQgiB,IAAI,GAG7BpQ,EAAeb,KAAY/Q,EAAQs6B,cACnC,OAG0C,IAA1Ct6B,EAAQ0zB,OAAOz1B,Q1BpHnB,W0BqHIy1B,EAAaf,WAGjB,IrBzHK,8BqB0HG3yB,EAAQo4B,KACRsD,GAAc3qB,EAAQ2iB,EAAQ1zB,EAAS,CACnCwa,KACA0U,SrB5HP,+BqB8HUlvB,EAAQo4B,KACf6D,GAAelrB,EAAQ2iB,EAAQ1zB,GrB9HlC,0BqB+HUA,EAAQo4B,MACf4D,GAAUjrB,EAAQ2iB,EAAQ1zB,GAEhC,MAAOiQ,GACLjS,YAAW,WACP,MAAMiS,IACP,MC7HR,SAASuK,GACZxf,EACAib,EACAsC,GAEA,IAAKvd,EACD,MAAM,IAAI8C,MAAM,iBAUpB,GALuB,mBAFvBmY,EAAUA,GAZH,MAeHsC,EAAUtC,EACVA,EAhBG,KAmBFsC,EACD,MAAM,IAAIza,MAAM,qBAGpBmY,EAAUA,GAAW,IACbjb,KAAOA,EACfib,EAAQsC,QAAUA,GAAWtC,EAAQsC,QACrC,IAAMpH,EAAM8E,EAAQrZ,OACd2U,EAAS0E,EAAQ1E,OAWjBirB,EH2FH,SAASC,EAAT,EAUH7hB,GAGF,IAXM5f,EAWN,EAXMA,KACAmW,EAUN,EAVMA,IACAI,EASN,EATMA,OAUE+pB,EAAmB7G,EAAY,oBAErC,IAAKz5B,GAAwB,iBAATA,EAChB,MAAM,IAAI8C,MAAJ,yCAGV,GAAI6Y,MAAMoD,QAAQ5I,GAAM,KACpB,IAAMurB,EAAwC,GAD1B,MAGDvrB,EAHC,eAIhBurB,EAAoBx+B,KAChBu+B,EACI,CACIzhC,OACAuW,SACAJ,IAND,MAQHyJ,IAKZ,MAAO,CACHxb,OADG,WACM,cACwBs9B,EADxB,WACwBA,EAAJ,GACNt9B,WAM/B,GAAIuX,MAAMoD,QAAQxI,GAAS,KACvB,IAAMmrB,EAAwC,GADvB,MAGJnrB,EAHI,eAInBmrB,EAAoBx+B,KAChBu+B,EACI,CACIzhC,OACAmW,MACAI,OAND,MAQHqJ,IAKZ,MAAO,CACHxb,OADG,WACM,cACwBs9B,EADxB,WACwBA,EAAJ,GACNt9B,WAM/B,IAAMu9B,EAAmBtB,GAAmB,CACxCrgC,OACAmW,MAEAI,WASJ,GANKJ,GnBjMe,MmBiMRA,IACRA,EAAMojB,KAGVhjB,EAASA,GnBrMW,ImBuMhBorB,EACA,MAAIxrB,GAAOI,EACD,IAAIzT,MAAJ,uCACsC9C,EADtC,cAC0DuW,EAAOxU,WADjE,SAEEoU,IAAQojB,IAAgB,WAAa,aAFvC,WAKCpjB,EACD,IAAIrT,MAAJ,uCACsC9C,EADtC,SAEEmW,IAAQojB,IAAgB,WAAa,aAFvC,WAKChjB,EACD,IAAIzT,MAAJ,uCACsC9C,EADtC,cAC0DuW,EAAOxU,YAGjE,IAAIe,MAAJ,uCAAkD9C,GAIhE,IAMI4hC,EACAC,EAPErB,EAAgBF,EAAiB/5B,SAAS4P,GAAK,iBAAO,MAItDsqB,EAAkBl6B,mBAASi6B,EAAexgC,GAAM,iBAAO,MACvD8hC,EAAYvrB,EAAOxU,WAkBzB,OAdIw1B,kBAAQhhB,IACRqrB,EAAiBr7B,mBAASk6B,EA7OT,oBA6O4C,iBAAM,OAOpDv9B,KANf2+B,EAAgB,CAEZ3xB,MAAOqG,EACPqJ,aAMJ6gB,EAAgBqB,GAAaliB,EAG1B,CACHxb,OADG,kBAGQq8B,EAAgBqB,GAEnBD,IACAD,EAAev9B,OAAOu9B,EAAe3+B,QAAQ4+B,EAAe,IAEvDD,EAAez+B,eAETs9B,EAAe,kBAIzBtgC,OAAOwF,KAAK86B,GAAiBt9B,eACvBq9B,EAAcxgC,GAGrBmW,IAAQhW,OAAOwF,KAAK66B,GAAer9B,QACnCm9B,EAAiBjH,IAAIljB,KG9OTsrB,CACpB,CACIzhC,OACAmW,MACAI,UAdqC,CACzCgH,QAAYtC,EAAQsC,QACpBwjB,YAAY9lB,EAAQ8mB,cACf,SAAC9sB,GACE,MAAMA,GAEdrT,OAAOuU,EACPI,OAAOA,GtBtBS,IsBuBhBvW,SAUJ,MAAO,CACHoE,OADG,WAECo9B,EAAgBp9B,WAOrB,SAASmJ,GACZvN,EACAib,EACAsC,GAQuB,mBAFvBtC,EAAUA,GAhEH,MAmEHsC,EAAUtC,EACVA,EApEG,IAuEP,IACI2E,EADEpc,EAAU,IAAI0Y,eAmBpB,OAhBAjB,EAAQ8mB,aAAe,SAAC9sB,GACpB2K,EAASxb,SACTZ,EAAQZ,OAAOqS,IAGnB2K,EAAWJ,GAAGxf,EAAMib,GAAS,SAACoK,GAI1B,GAHAzF,EAASxb,SACTZ,EAAQtB,QAAQmjB,GAEZ9H,EACA,OAAOA,EAAQ8H,MAIvB7hB,EAAQY,OAASwb,EAASxb,OAEnBZ,ELvEXk8B,GAAuB,uBAA+B,SAClDvpB,EACA2pB,EACAvpB,GAEsC,IAAlCA,EAAOtT,QtB9BP,WsB+BAsT,EjBZgB,KiB4CpBJ,EAAI6rB,YAAYlC,EAAmBvpB,IMwChC,IAAM2d,GAAiB,SAAjBA,EAAkB/d,EAAKnW,EAAM6yB,EAAM5X,GAE5C,IAAMgnB,GADNhnB,EAAUA,GAAW,IACS1E,QvBtFV,IuBuFd2rB,EAAkBjnB,EAAQrX,UCxGiB,EDyG3Cu+B,EAAelnB,EAAQrX,SC5GG,ID6G1B07B,EAAgBrkB,EAAQqkB,gBAAiB,EAC/C,OACIpjB,eAAavY,KAAI,WAGb,GA3EZ,SACI3D,EACAmW,EACAI,GAEA,IAAKvW,EACD,MAAM,IAAI8C,MAAM,iBAGpB,GAAIyT,GAEsB,iBAAXA,IACNoF,MAAMoD,QAAQxI,KACdghB,kBAAQhhB,GAET,MAAM,IAAIxS,UAAJ,gBACe/D,EADf,qBAC0C2a,KAAK7M,UAC7CyI,GAFF,oCAQd,GAAIK,EAAeT,GACf,MAAM,IAAIrT,MAAJ,gBAA2B9C,EAA3B,6BAiDFoiC,CAAgBpiC,EAAMmW,EAAK8rB,G3B2hBhC,SAAoBr9B,EAAQsc,GACjC,IAAImhB,EAAe7J,EAAYtX,GAE/B,GAAImhB,EACF,OAAIA,IAAiBz9B,EAOvB,GAAIsc,IAAUtc,EACZ,OAAO,EAGT,GApXK,SAAgBuR,QACT,IAARA,IACFA,EAAMvU,QAGR,IACE,GAAIuU,EAAIhR,IACN,OAAOgR,EAAIhR,IAEb,MAAO8P,IAGT,GAAIuiB,EAAUrhB,KAASA,EACrB,OAAOA,EAGT,IACE,GAAI2hB,EAAiBl2B,OAAQuU,IAAQvU,OAAOuD,IAC1C,OAAOvD,OAAOuD,IAEhB,MAAO8P,IAGT,IACE,GAAI6iB,EAAiB3hB,EAAKvU,SAAWA,OAAOuD,IAC1C,OAAOvD,OAAOuD,IAEhB,MAAO8P,IAGT,IAAK,IAAIqtB,EAAM,EAAGC,EA7Cb,SAASC,EAAkBrsB,GAGhC,IAFA,IAAI0H,EAAS,GAEJ4kB,EAAM,EAAGC,EAAczK,EAAU9hB,GAAMssB,EAAMC,EAAYv/B,OAAQs/B,IAAO,CAC/E,IAAIxrB,EAAQyrB,EAAYD,GACxB5kB,EAAO3a,KAAK+T,GAEZ,IAAK,IAAI0rB,EAAM,EAAGC,EAAsBJ,EAAkBvrB,GAAQ0rB,EAAMC,EAAoBz/B,OAAQw/B,IAElG9kB,EAAO3a,KADU0/B,EAAoBD,IAKzC,OAAO9kB,EAgCiC2kB,CAAkBrsB,GAAMmsB,EAAMC,EAAoBp/B,OAAQm/B,IAAO,CACvG,IAAIrrB,EAAQsrB,EAAoBD,GAEhC,IACE,GAAIrrB,EAAM9R,IACR,OAAO8R,EAAM9R,IAEf,MAAO8P,IAGT,GAAIuiB,EAAUvgB,KAAWA,EACvB,OAAOA,GA2UP4rB,CAAO3hB,KAAWA,EACpB,OAAO,EAGT,IAAK,IAAI4hB,EAAO,EAAGC,EAAc9K,EAAUrzB,GAASk+B,EAAOC,EAAY5/B,OAAQ2/B,IAG7E,GAFYC,EAAYD,KAEV5hB,EACZ,OAAO,EAIX,OAAO,E2BpjBO8hB,CAAWphC,OAAQuU,GACnB,OxBuBT,SACHA,EACAvS,EACA5D,QAGD,IAJC4D,MAAU,UAIX,IAHC5D,MAAO,UAIP,IAAIwD,EArIR,SAAyB2S,GAIrB,OADsBsjB,EAA+B,iBAChClzB,SAAS4P,GAAK,kBAAM,IAAI+F,kBAiI/B+mB,CAAgB9sB,GAS9B,OAPiB,IAAbvS,IACAJ,EAAUA,EAAQI,QACdA,EACA,IAAId,MAAU9C,EAAd,uBAA2C4D,EAA3C,QAIDJ,EwBvCY0/B,CAAiB/sB,EAAKgsB,MAIhCngC,MAAK,YACF,OArDhB,SACImU,EACAgtB,EACAC,EAHJ,GASwB,IAJhBlP,EAIgB,EAJhBA,KAMJ,OAAOhY,eAAavY,KAAI,WACpB,MAA4B,iBAAjBw/B,EACAA,EAGJjnB,eAAavY,KAAI,WACpB,OACIy/B,GACAnJ,EAAS9jB,EAAK,CACV+d,SACDlyB,MAAK,qBAAGuU,aAEhBvU,MAAK,SAACqhC,GACL,IAAK5K,EAAY0K,EAAcA,GAC3B,MAAM,IAAIrgC,MAAJ,UACSgL,oBACPq1B,GAFF,mBAGoBr1B,oBAAUq1B,IAIxC,OAAOE,QAqBIC,CAAgBntB,EAAK8rB,QADS,MAAP,GAAO,GAAhC1rB,OACoD,CACrD2d,YAGPlyB,MAAK,SAACmhC,GACH,IAAM5sB,EAAS4sB,EACTxC,EvBrHN,qBuBsHI3gC,GACA6yB,GACqB,iBAAdA,EAAK7yB,KACF6yB,EAAK7yB,KAHf,KAIMA,EAMJwD,EAAU,IAAI0Y,eACdjY,EAAWjE,EAAP,IAAiB6M,qBAE3B,IAAKyyB,EAAe,CAChB,IAAMiE,EAAyC,CAC3CvjC,OACAmW,MAEAI,SAEA/S,YJjHjB,SACHS,EACA2b,GAE0BoZ,EAAY,qBACpB/yB,IAAIhC,EAAM2b,GI8GZ4jB,CAAoBv/B,EAAMs/B,GAC1B,IAAME,EAAchK,EAChB,mBACFlzB,SAAS4P,GAAK,iBAAM,MACtBstB,EAAYvgC,KAAKM,GACjBA,EAAQC,OAAM,YJxF3B,SAAqCQ,GACP+0B,EAAY,4BACpB/yB,IAAIhC,GAAM,GIuFfy/B,CAA4Bz/B,GAC5Bk8B,GAAuBl8B,MAE3B,IAAM0/B,EtBvJnB,SAAuBxtB,GAE1B,OADqBsjB,EAAqB,gBACtBn5B,IAAI6V,GAAK,GsBqJWytB,CAAcztB,GC5JzB,IADN,IDgKD0tB,EAAkB3B,EACpB4B,EAAaH,EACbI,EAAaF,EACXhjB,EAAW/R,wBAAa,WAC1B,OAAI8H,EAAeT,GACR3S,EAAQZ,OACX,IAAIE,MAAJ,qBAC0B9C,EAD1B,YAEQujC,EAAiB1C,IACX,WACA,SAMlB0C,EAAiB5jB,UACVnc,EAAQZ,OACX,IAAIE,MAAJ,uCAC4C9C,KAKpD8jC,EAAaj+B,KAAKyI,IACdw1B,ECtLO,IDuLP,IAGgB,IAAhBC,IACAA,EAAal+B,KAAKyI,IACdy1B,EC5LG,ID6LH,IAIHR,EAAiB1C,KAAsB,IAAfiD,EAMH,IAAfC,EACAvgC,EAAQZ,OACX,IAAIE,MAAJ,+BACoC69B,EADpC,OACoDrqB,IADpD,OACwEutB,EADxE,YAFD,EALIrgC,EAAQZ,OACX,IAAIE,MAAJ,0BAC+B69B,EAD/B,OAC+CrqB,IAD/C,OACmEqtB,EADnE,UCnMG,KD+MfngC,EACKE,SAAQ,WACLmd,EAASzc,SACTq/B,EAAYp/B,OAAOo/B,EAAYxgC,QAAQO,EAAS,OAEnDC,MAAMu4B,QAGf,OAAO2D,GACHxpB,EAEAI,EACA,CACIyQ,GAAOna,qBACP6rB,OAAOpiB,EAAU1U,QACjBw7B,KvBlOX,4BuBmOWn5B,OACAjE,OACA6yB,OACAyM,iBAEJ,CACI9f,MACA0U,SAENlyB,MACE,WACI,OAAOs9B,EAAgB97B,EAAQtB,UAAYsB,KAE/C,SAACyR,GACG,MAAM,IAAInS,MAAJ,mCACkC69B,EADlC,OACkDrqB,IADlD,OACsE1I,yBACpEqH,WEjOzB,SAAS2pB,GACZL,EACAhoB,EACAa,GAEA,OAAO4sB,GAAyBzF,EAAahoB,EAAQa,EAAK,CACtDoI,MACA0U,UAGD,SAAS8K,GACZjpB,EACA2iB,EACA1zB,GAEA,OAAOi/B,GAA2BluB,EAAQ2iB,EAAQ1zB,EAAS,CACvDwa,MACA0U,UAGD,SAASgQ,GAAkB/tB,GAC9B,OAAO,IAAI0mB,GAAY,CACnB3I,QACA/d,QAGD,SAAS6nB,GACZ7nB,GAEA,OAAO0mB,GAAYmB,cAAc7nB,EAAK,CAClC+d,UAGD,SAASiQ,KJwFT,MACH3kB,EACA0U,EAKM9B,EI9FDtlB,IAAYs3B,cACbt3B,IAAYs3B,aAAc,EJuF9B5kB,GADG,EIrF2B,CACtBA,MACA0U,UJoFR1U,GACA0U,EAIK,EAJLA,MAKM9B,EAAStlB,KAERo0B,eACH9O,EAAO8O,gBACN,SAACl8B,GAAD,OACGk8B,GAAel8B,EAAS,CACpBwa,KACA0U,UAoET,YAMY,IALf1U,EAKe,EALfA,GACA0U,EAIe,EAJfA,KAKO8E,IAAmBzyB,SAAS,uBAAuB,WAEtD,OAAOoE,2BAAiB/I,OAAQ,WAAW,SAACyjB,IAjE7C,SACHA,EADG,GASC,IANA7F,EAMA,EANAA,GACA0U,EAKA,EALAA,KAMJhY,eAAavY,KAAI,WACb,IACIq4B,eAAK3W,EAAMtP,QACb,MAAOd,GACL,OAGJ,IAAMc,EAASsP,EAAMtP,QAAUsP,EAAMgf,cACjC3L,EACArT,EAAMqT,QAAWrT,EAAMif,eAAiBjf,EAAMif,cAAc5L,OAC1D7F,EAAOxN,EAAMwN,KAMnB,GAJe,SAAX6F,IACAA,EAAaf,WAGZ5hB,EAAL,CAIA,IAAK2iB,EACD,MAAM,IAAI51B,MAAJ,2CAYVo+B,GACI,CACInrB,SACA2iB,SACA7F,QAEJ,CACIrT,KACA0U,aAgBJqQ,CAAgBlf,EAAO,CACnB7F,KACA0U,eIhLRsQ,CAAkB,CACdhlB,MACA0U,U1BiDL,YAMY,IALf1U,EAKe,EALfA,GACA0U,EAIe,EAJfA,KAKO8E,EAAiB,oBAAoBzyB,SACxC,iBACA,WACI,IAAMqZ,EACFJ,EC9GA,kBDmCR,CACIjJ,OC1BY,MD4BhB,YAII,OAHAsjB,EADoB,EAArB9jB,OAC6B,CACxBQ,OAFgB,EAAbmiB,SAIA,CACHwB,WAAYN,QAqEVh1B,EAAS4zB,IAYf,OAVI5zB,GACAq1B,EAASr1B,EAAQ,CACbsvB,SACDzwB,OAAM,SAACwR,OAOP2K,K0B/DX6kB,CAAU,CACNjlB,MACA0U,WAIL,SAASwQ,KJkKT,IACG9kB,GF5LH,WAAyC,IAC5C,IAAM+kB,EAAoB3L,EAAY,qBADM,MAGzB2L,EAAkBh/B,OAHO,eAGC,CAAxC,IAAM1B,EAAI,KACL2b,EAAW+kB,EAAkBrkC,IAAI2D,GAEnC2b,IAEAA,EAASD,WAAY,GAGzBglB,EAAkBtL,IAAIp1B,IMe1B2gC,IJkKMhlB,EAAWoZ,IAA8B14B,IAAI,yBAG/Csf,EAASxb,gBvBrNNxC,OAAM,uB4B5BV,IAAMijC,IAAQ,ECGd,SAASC,GAAc3uB,GAAkC,IAC5D,IAD4D,MAC/BsjB,EAAY,mBAEHn5B,IAAI6V,EAAK,IAHa,eAG1C,KAETvT,OACG,IAAIE,MAAJ,WAEQ8T,EAAeT,GAAO,SAAW,cAFzC,qBAMH1S,MAAMu4B,QC+BfmI","file":"post-robot.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"postRobot\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"postRobot\"] = factory();\n\telse\n\t\troot[\"postRobot\"] = factory();\n})((typeof self !== 'undefined' ? self : this), function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n","// eslint-disable-next-line import/no-commonjs\nmodule.exports = require('./dist/zalgo-promise');\n","/* @flow */\n\n// $FlowFixMe\nmodule.exports = require('./dist/belter'); // eslint-disable-line import/no-commonjs\n","module.exports = require('./dist/universal-serialize'); // eslint-disable-line import/no-commonjs\n","// eslint-disable-next-line import/no-commonjs\nmodule.exports = require('./dist/cross-domain-safe-weakmap');\n","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(\"ZalgoPromise\",[],t):\"object\"==typeof exports?exports.ZalgoPromise=t():e.ZalgoPromise=t()}(\"undefined\"!=typeof self?self:this,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return{}.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=0)}([function(e,t,r){\"use strict\";function n(e){try{if(!e)return!1;if(\"undefined\"!=typeof Promise&&e instanceof Promise)return!0;if(\"undefined\"!=typeof window&&\"function\"==typeof window.Window&&e instanceof window.Window)return!1;if(\"undefined\"!=typeof window&&\"function\"==typeof window.constructor&&e instanceof window.constructor)return!1;var t={}.toString;if(t){var r=t.call(e);if(\"[object Window]\"===r||\"[object global]\"===r||\"[object DOMWindow]\"===r)return!1}if(\"function\"==typeof e.then)return!0}catch(e){return!1}return!1}r.r(t),r.d(t,\"ZalgoPromise\",(function(){return l}));var o,i=[],c=[],u=0;function s(){if(!u&&o){var e=o;o=null,e.resolve()}}function f(){u+=1}function a(){u-=1,s()}var l=function(){function e(e){var t=this;if(this.resolved=void 0,this.rejected=void 0,this.errorHandled=void 0,this.value=void 0,this.error=void 0,this.handlers=void 0,this.dispatching=void 0,this.stack=void 0,this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],e){var r,n,o=!1,i=!1,c=!1;f();try{e((function(e){c?t.resolve(e):(o=!0,r=e)}),(function(e){c?t.reject(e):(i=!0,n=e)}))}catch(e){return a(),void this.reject(e)}a(),c=!0,o?this.resolve(r):i&&this.reject(n)}}var t=e.prototype;return t.resolve=function(e){if(this.resolved||this.rejected)return this;if(n(e))throw new Error(\"Can not resolve promise with another promise\");return this.resolved=!0,this.value=e,this.dispatch(),this},t.reject=function(e){var t=this;if(this.resolved||this.rejected)return this;if(n(e))throw new Error(\"Can not reject promise with another promise\");if(!e){var r=e&&\"function\"==typeof e.toString?e.toString():{}.toString.call(e);e=new Error(\"Expected reject to be called with Error, got \"+r)}return this.rejected=!0,this.error=e,this.errorHandled||setTimeout((function(){t.errorHandled||function(e,t){if(-1===i.indexOf(e)){i.push(e),setTimeout((function(){throw e}),1);for(var r=0;r<c.length;r++)c[r](e,t)}}(e,t)}),1),this.dispatch(),this},t.asyncReject=function(e){return this.errorHandled=!0,this.reject(e),this},t.dispatch=function(){var t=this.resolved,r=this.rejected,o=this.handlers;if(!this.dispatching&&(t||r)){this.dispatching=!0,f();for(var i=function(e,t){return e.then((function(e){t.resolve(e)}),(function(e){t.reject(e)}))},c=0;c<o.length;c++){var u=o[c],s=u.onSuccess,l=u.onError,h=u.promise,d=void 0;if(t)try{d=s?s(this.value):this.value}catch(e){h.reject(e);continue}else if(r){if(!l){h.reject(this.error);continue}try{d=l(this.error)}catch(e){h.reject(e);continue}}d instanceof e&&(d.resolved||d.rejected)?(d.resolved?h.resolve(d.value):h.reject(d.error),d.errorHandled=!0):n(d)?d instanceof e&&(d.resolved||d.rejected)?d.resolved?h.resolve(d.value):h.reject(d.error):i(d,h):h.resolve(d)}o.length=0,this.dispatching=!1,a()}},t.then=function(t,r){if(t&&\"function\"!=typeof t&&!t.call)throw new Error(\"Promise.then expected a function for success handler\");if(r&&\"function\"!=typeof r&&!r.call)throw new Error(\"Promise.then expected a function for error handler\");var n=new e;return this.handlers.push({promise:n,onSuccess:t,onError:r}),this.errorHandled=!0,this.dispatch(),n},t.catch=function(e){return this.then(void 0,e)},t.finally=function(t){if(t&&\"function\"!=typeof t&&!t.call)throw new Error(\"Promise.finally expected a function\");return this.then((function(r){return e.try(t).then((function(){return r}))}),(function(r){return e.try(t).then((function(){throw r}))}))},t.timeout=function(e,t){var r=this;if(this.resolved||this.rejected)return this;var n=setTimeout((function(){r.resolved||r.rejected||r.reject(t||new Error(\"Promise timed out after \"+e+\"ms\"))}),e);return this.then((function(e){return clearTimeout(n),e}))},t.toPromise=function(){if(\"undefined\"==typeof Promise)throw new TypeError(\"Could not find Promise\");return Promise.resolve(this)},e.resolve=function(t){return t instanceof e?t:n(t)?new e((function(e,r){return t.then(e,r)})):(new e).resolve(t)},e.reject=function(t){return(new e).reject(t)},e.asyncReject=function(t){return(new e).asyncReject(t)},e.all=function(t){var r=new e,o=t.length,i=[];if(!o)return r.resolve(i),r;for(var c=function(e,t,n){return t.then((function(t){i[e]=t,0==(o-=1)&&r.resolve(i)}),(function(e){n.reject(e)}))},u=0;u<t.length;u++){var s=t[u];if(s instanceof e){if(s.resolved){i[u]=s.value,o-=1;continue}}else if(!n(s)){i[u]=s,o-=1;continue}c(u,e.resolve(s),r)}return 0===o&&r.resolve(i),r},e.hash=function(t){var r={},o=[],i=function(e){if(t.hasOwnProperty(e)){var i=t[e];n(i)?o.push(i.then((function(t){r[e]=t}))):r[e]=i}};for(var c in t)i(c);return e.all(o).then((function(){return r}))},e.map=function(t,r){return e.all(t.map(r))},e.onPossiblyUnhandledException=function(e){return function(e){return c.push(e),{cancel:function(){c.splice(c.indexOf(e),1)}}}(e)},e.try=function(t,r,n){if(t&&\"function\"!=typeof t&&!t.call)throw new Error(\"Promise.try expected a function\");var o;f();try{o=t.apply(r,n||[])}catch(t){return a(),e.reject(t)}return a(),e.resolve(o)},e.delay=function(t){return new e((function(e){setTimeout(e,t)}))},e.isPromise=function(t){return!!(t&&t instanceof e)||n(t)},e.flush=function(){return t=o=o||new e,s(),t;var t},e}()}])}));\n//# sourceMappingURL=zalgo-promise.js.map","!function(root, factory) {\n    \"object\" == typeof exports && \"object\" == typeof module ? module.exports = factory() : \"function\" == typeof define && define.amd ? define(\"belter\", [], factory) : \"object\" == typeof exports ? exports.belter = factory() : root.belter = factory();\n}(\"undefined\" != typeof self ? self : this, (function() {\n    return function(modules) {\n        var installedModules = {};\n        function __webpack_require__(moduleId) {\n            if (installedModules[moduleId]) return installedModules[moduleId].exports;\n            var module = installedModules[moduleId] = {\n                i: moduleId,\n                l: !1,\n                exports: {}\n            };\n            modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n            module.l = !0;\n            return module.exports;\n        }\n        __webpack_require__.m = modules;\n        __webpack_require__.c = installedModules;\n        __webpack_require__.d = function(exports, name, getter) {\n            __webpack_require__.o(exports, name) || Object.defineProperty(exports, name, {\n                enumerable: !0,\n                get: getter\n            });\n        };\n        __webpack_require__.r = function(exports) {\n            \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(exports, Symbol.toStringTag, {\n                value: \"Module\"\n            });\n            Object.defineProperty(exports, \"__esModule\", {\n                value: !0\n            });\n        };\n        __webpack_require__.t = function(value, mode) {\n            1 & mode && (value = __webpack_require__(value));\n            if (8 & mode) return value;\n            if (4 & mode && \"object\" == typeof value && value && value.__esModule) return value;\n            var ns = Object.create(null);\n            __webpack_require__.r(ns);\n            Object.defineProperty(ns, \"default\", {\n                enumerable: !0,\n                value: value\n            });\n            if (2 & mode && \"string\" != typeof value) for (var key in value) __webpack_require__.d(ns, key, function(key) {\n                return value[key];\n            }.bind(null, key));\n            return ns;\n        };\n        __webpack_require__.n = function(module) {\n            var getter = module && module.__esModule ? function() {\n                return module.default;\n            } : function() {\n                return module;\n            };\n            __webpack_require__.d(getter, \"a\", getter);\n            return getter;\n        };\n        __webpack_require__.o = function(object, property) {\n            return {}.hasOwnProperty.call(object, property);\n        };\n        __webpack_require__.p = \"\";\n        return __webpack_require__(__webpack_require__.s = 4);\n    }([ function(module, exports, __webpack_require__) {\n        module.exports = __webpack_require__(2);\n    }, function(module, exports, __webpack_require__) {\n        module.exports = __webpack_require__(3);\n    }, function(module, exports, __webpack_require__) {\n        \"undefined\" != typeof self && self, module.exports = function(e) {\n            var t = {};\n            function r(n) {\n                if (t[n]) return t[n].exports;\n                var o = t[n] = {\n                    i: n,\n                    l: !1,\n                    exports: {}\n                };\n                return e[n].call(o.exports, o, o.exports, r), o.l = !0, o.exports;\n            }\n            return r.m = e, r.c = t, r.d = function(e, t, n) {\n                r.o(e, t) || Object.defineProperty(e, t, {\n                    enumerable: !0,\n                    get: n\n                });\n            }, r.r = function(e) {\n                \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n                    value: \"Module\"\n                }), Object.defineProperty(e, \"__esModule\", {\n                    value: !0\n                });\n            }, r.t = function(e, t) {\n                if (1 & t && (e = r(e)), 8 & t) return e;\n                if (4 & t && \"object\" == typeof e && e && e.__esModule) return e;\n                var n = Object.create(null);\n                if (r.r(n), Object.defineProperty(n, \"default\", {\n                    enumerable: !0,\n                    value: e\n                }), 2 & t && \"string\" != typeof e) for (var o in e) r.d(n, o, function(t) {\n                    return e[t];\n                }.bind(null, o));\n                return n;\n            }, r.n = function(e) {\n                var t = e && e.__esModule ? function() {\n                    return e.default;\n                } : function() {\n                    return e;\n                };\n                return r.d(t, \"a\", t), t;\n            }, r.o = function(e, t) {\n                return {}.hasOwnProperty.call(e, t);\n            }, r.p = \"\", r(r.s = 0);\n        }([ function(e, t, r) {\n            \"use strict\";\n            function n(e) {\n                try {\n                    if (!e) return !1;\n                    if (\"undefined\" != typeof Promise && e instanceof Promise) return !0;\n                    if (\"undefined\" != typeof window && \"function\" == typeof window.Window && e instanceof window.Window) return !1;\n                    if (\"undefined\" != typeof window && \"function\" == typeof window.constructor && e instanceof window.constructor) return !1;\n                    var t = {}.toString;\n                    if (t) {\n                        var r = t.call(e);\n                        if (\"[object Window]\" === r || \"[object global]\" === r || \"[object DOMWindow]\" === r) return !1;\n                    }\n                    if (\"function\" == typeof e.then) return !0;\n                } catch (e) {\n                    return !1;\n                }\n                return !1;\n            }\n            r.r(t), r.d(t, \"ZalgoPromise\", (function() {\n                return l;\n            }));\n            var o, i = [], c = [], u = 0;\n            function s() {\n                if (!u && o) {\n                    var e = o;\n                    o = null, e.resolve();\n                }\n            }\n            function f() {\n                u += 1;\n            }\n            function a() {\n                u -= 1, s();\n            }\n            var l = function() {\n                function e(e) {\n                    var t = this;\n                    if (this.resolved = void 0, this.rejected = void 0, this.errorHandled = void 0, \n                    this.value = void 0, this.error = void 0, this.handlers = void 0, this.dispatching = void 0, \n                    this.stack = void 0, this.resolved = !1, this.rejected = !1, this.errorHandled = !1, \n                    this.handlers = [], e) {\n                        var r, n, o = !1, i = !1, c = !1;\n                        f();\n                        try {\n                            e((function(e) {\n                                c ? t.resolve(e) : (o = !0, r = e);\n                            }), (function(e) {\n                                c ? t.reject(e) : (i = !0, n = e);\n                            }));\n                        } catch (e) {\n                            return a(), void this.reject(e);\n                        }\n                        a(), c = !0, o ? this.resolve(r) : i && this.reject(n);\n                    }\n                }\n                var t = e.prototype;\n                return t.resolve = function(e) {\n                    if (this.resolved || this.rejected) return this;\n                    if (n(e)) throw new Error(\"Can not resolve promise with another promise\");\n                    return this.resolved = !0, this.value = e, this.dispatch(), this;\n                }, t.reject = function(e) {\n                    var t = this;\n                    if (this.resolved || this.rejected) return this;\n                    if (n(e)) throw new Error(\"Can not reject promise with another promise\");\n                    if (!e) {\n                        var r = e && \"function\" == typeof e.toString ? e.toString() : {}.toString.call(e);\n                        e = new Error(\"Expected reject to be called with Error, got \" + r);\n                    }\n                    return this.rejected = !0, this.error = e, this.errorHandled || setTimeout((function() {\n                        t.errorHandled || function(e, t) {\n                            if (-1 === i.indexOf(e)) {\n                                i.push(e), setTimeout((function() {\n                                    throw e;\n                                }), 1);\n                                for (var r = 0; r < c.length; r++) c[r](e, t);\n                            }\n                        }(e, t);\n                    }), 1), this.dispatch(), this;\n                }, t.asyncReject = function(e) {\n                    return this.errorHandled = !0, this.reject(e), this;\n                }, t.dispatch = function() {\n                    var t = this.resolved, r = this.rejected, o = this.handlers;\n                    if (!this.dispatching && (t || r)) {\n                        this.dispatching = !0, f();\n                        for (var i = function(e, t) {\n                            return e.then((function(e) {\n                                t.resolve(e);\n                            }), (function(e) {\n                                t.reject(e);\n                            }));\n                        }, c = 0; c < o.length; c++) {\n                            var u = o[c], s = u.onSuccess, l = u.onError, h = u.promise, d = void 0;\n                            if (t) try {\n                                d = s ? s(this.value) : this.value;\n                            } catch (e) {\n                                h.reject(e);\n                                continue;\n                            } else if (r) {\n                                if (!l) {\n                                    h.reject(this.error);\n                                    continue;\n                                }\n                                try {\n                                    d = l(this.error);\n                                } catch (e) {\n                                    h.reject(e);\n                                    continue;\n                                }\n                            }\n                            d instanceof e && (d.resolved || d.rejected) ? (d.resolved ? h.resolve(d.value) : h.reject(d.error), \n                            d.errorHandled = !0) : n(d) ? d instanceof e && (d.resolved || d.rejected) ? d.resolved ? h.resolve(d.value) : h.reject(d.error) : i(d, h) : h.resolve(d);\n                        }\n                        o.length = 0, this.dispatching = !1, a();\n                    }\n                }, t.then = function(t, r) {\n                    if (t && \"function\" != typeof t && !t.call) throw new Error(\"Promise.then expected a function for success handler\");\n                    if (r && \"function\" != typeof r && !r.call) throw new Error(\"Promise.then expected a function for error handler\");\n                    var n = new e;\n                    return this.handlers.push({\n                        promise: n,\n                        onSuccess: t,\n                        onError: r\n                    }), this.errorHandled = !0, this.dispatch(), n;\n                }, t.catch = function(e) {\n                    return this.then(void 0, e);\n                }, t.finally = function(t) {\n                    if (t && \"function\" != typeof t && !t.call) throw new Error(\"Promise.finally expected a function\");\n                    return this.then((function(r) {\n                        return e.try(t).then((function() {\n                            return r;\n                        }));\n                    }), (function(r) {\n                        return e.try(t).then((function() {\n                            throw r;\n                        }));\n                    }));\n                }, t.timeout = function(e, t) {\n                    var r = this;\n                    if (this.resolved || this.rejected) return this;\n                    var n = setTimeout((function() {\n                        r.resolved || r.rejected || r.reject(t || new Error(\"Promise timed out after \" + e + \"ms\"));\n                    }), e);\n                    return this.then((function(e) {\n                        return clearTimeout(n), e;\n                    }));\n                }, t.toPromise = function() {\n                    if (\"undefined\" == typeof Promise) throw new TypeError(\"Could not find Promise\");\n                    return Promise.resolve(this);\n                }, e.resolve = function(t) {\n                    return t instanceof e ? t : n(t) ? new e((function(e, r) {\n                        return t.then(e, r);\n                    })) : (new e).resolve(t);\n                }, e.reject = function(t) {\n                    return (new e).reject(t);\n                }, e.asyncReject = function(t) {\n                    return (new e).asyncReject(t);\n                }, e.all = function(t) {\n                    var r = new e, o = t.length, i = [];\n                    if (!o) return r.resolve(i), r;\n                    for (var c = function(e, t, n) {\n                        return t.then((function(t) {\n                            i[e] = t, 0 == (o -= 1) && r.resolve(i);\n                        }), (function(e) {\n                            n.reject(e);\n                        }));\n                    }, u = 0; u < t.length; u++) {\n                        var s = t[u];\n                        if (s instanceof e) {\n                            if (s.resolved) {\n                                i[u] = s.value, o -= 1;\n                                continue;\n                            }\n                        } else if (!n(s)) {\n                            i[u] = s, o -= 1;\n                            continue;\n                        }\n                        c(u, e.resolve(s), r);\n                    }\n                    return 0 === o && r.resolve(i), r;\n                }, e.hash = function(t) {\n                    var r = {}, o = [], i = function(e) {\n                        if (t.hasOwnProperty(e)) {\n                            var i = t[e];\n                            n(i) ? o.push(i.then((function(t) {\n                                r[e] = t;\n                            }))) : r[e] = i;\n                        }\n                    };\n                    for (var c in t) i(c);\n                    return e.all(o).then((function() {\n                        return r;\n                    }));\n                }, e.map = function(t, r) {\n                    return e.all(t.map(r));\n                }, e.onPossiblyUnhandledException = function(e) {\n                    return function(e) {\n                        return c.push(e), {\n                            cancel: function() {\n                                c.splice(c.indexOf(e), 1);\n                            }\n                        };\n                    }(e);\n                }, e.try = function(t, r, n) {\n                    if (t && \"function\" != typeof t && !t.call) throw new Error(\"Promise.try expected a function\");\n                    var o;\n                    f();\n                    try {\n                        o = t.apply(r, n || []);\n                    } catch (t) {\n                        return a(), e.reject(t);\n                    }\n                    return a(), e.resolve(o);\n                }, e.delay = function(t) {\n                    return new e((function(e) {\n                        setTimeout(e, t);\n                    }));\n                }, e.isPromise = function(t) {\n                    return !!(t && t instanceof e) || n(t);\n                }, e.flush = function() {\n                    return t = o = o || new e, s(), t;\n                    var t;\n                }, e;\n            }();\n        } ]);\n    }, function(module, exports, __webpack_require__) {\n        \"undefined\" != typeof self && self, module.exports = function(e) {\n            var t = {};\n            function r(n) {\n                if (t[n]) return t[n].exports;\n                var i = t[n] = {\n                    i: n,\n                    l: !1,\n                    exports: {}\n                };\n                return e[n].call(i.exports, i, i.exports, r), i.l = !0, i.exports;\n            }\n            return r.m = e, r.c = t, r.d = function(e, t, n) {\n                r.o(e, t) || Object.defineProperty(e, t, {\n                    enumerable: !0,\n                    get: n\n                });\n            }, r.r = function(e) {\n                \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n                    value: \"Module\"\n                }), Object.defineProperty(e, \"__esModule\", {\n                    value: !0\n                });\n            }, r.t = function(e, t) {\n                if (1 & t && (e = r(e)), 8 & t) return e;\n                if (4 & t && \"object\" == typeof e && e && e.__esModule) return e;\n                var n = Object.create(null);\n                if (r.r(n), Object.defineProperty(n, \"default\", {\n                    enumerable: !0,\n                    value: e\n                }), 2 & t && \"string\" != typeof e) for (var i in e) r.d(n, i, function(t) {\n                    return e[t];\n                }.bind(null, i));\n                return n;\n            }, r.n = function(e) {\n                var t = e && e.__esModule ? function() {\n                    return e.default;\n                } : function() {\n                    return e;\n                };\n                return r.d(t, \"a\", t), t;\n            }, r.o = function(e, t) {\n                return {}.hasOwnProperty.call(e, t);\n            }, r.p = \"\", r(r.s = 0);\n        }([ function(e, t, r) {\n            \"use strict\";\n            r.r(t), r.d(t, \"WeakMap\", (function() {\n                return l;\n            }));\n            var n = \"Call was rejected by callee.\\r\\n\";\n            function i(e) {\n                return void 0 === e && (e = window), \"about:\" === e.location.protocol;\n            }\n            function a(e) {\n                try {\n                    return !0;\n                } catch (e) {}\n                return !1;\n            }\n            function o(e) {\n                void 0 === e && (e = window);\n                var t = e.location;\n                if (!t) throw new Error(\"Can not read window location\");\n                var r = t.protocol;\n                if (!r) throw new Error(\"Can not read window protocol\");\n                if (\"file:\" === r) return \"file://\";\n                if (\"about:\" === r) {\n                    var n = function(e) {\n                        if (void 0 === e && (e = window), e) try {\n                            if (e.parent && e.parent !== e) return e.parent;\n                        } catch (e) {}\n                    }(e);\n                    return n && a() ? o(n) : \"about://\";\n                }\n                var i = t.host;\n                if (!i) throw new Error(\"Can not read window host\");\n                return r + \"//\" + i;\n            }\n            function c(e) {\n                void 0 === e && (e = window);\n                var t = o(e);\n                return t && e.mockDomain && 0 === e.mockDomain.indexOf(\"mock:\") ? e.mockDomain : t;\n            }\n            var u = [], f = [];\n            function s(e, t) {\n                void 0 === t && (t = !0);\n                try {\n                    if (e === window) return !1;\n                } catch (e) {\n                    return !0;\n                }\n                try {\n                    if (!e) return !0;\n                } catch (e) {\n                    return !0;\n                }\n                try {\n                    if (e.closed) return !0;\n                } catch (e) {\n                    return !e || e.message !== n;\n                }\n                if (t && function(e) {\n                    if (!function(e) {\n                        try {\n                            if (e === window) return !0;\n                        } catch (e) {}\n                        try {\n                            var t = Object.getOwnPropertyDescriptor(e, \"location\");\n                            if (t && !1 === t.enumerable) return !1;\n                        } catch (e) {}\n                        try {\n                            if (i(e) && a()) return !0;\n                        } catch (e) {}\n                        try {\n                            if (o(e) === o(window)) return !0;\n                        } catch (e) {}\n                        return !1;\n                    }(e)) return !1;\n                    try {\n                        if (e === window) return !0;\n                        if (i(e) && a()) return !0;\n                        if (c(window) === c(e)) return !0;\n                    } catch (e) {}\n                    return !1;\n                }(e)) try {\n                    if (e.mockclosed) return !0;\n                } catch (e) {}\n                try {\n                    if (!e.parent || !e.top) return !0;\n                } catch (e) {}\n                var r = function(e, t) {\n                    for (var r = 0; r < e.length; r++) try {\n                        if (e[r] === t) return r;\n                    } catch (e) {}\n                    return -1;\n                }(u, e);\n                if (-1 !== r) {\n                    var s = f[r];\n                    if (s && function(e) {\n                        if (!e.contentWindow) return !0;\n                        if (!e.parentNode) return !0;\n                        var t = e.ownerDocument;\n                        if (t && t.documentElement && !t.documentElement.contains(e)) {\n                            for (var r = e; r.parentNode && r.parentNode !== r; ) r = r.parentNode;\n                            if (!r.host || !t.documentElement.contains(r.host)) return !0;\n                        }\n                        return !1;\n                    }(s)) return !0;\n                }\n                return !1;\n            }\n            function d(e) {\n                try {\n                    if (e === window) return !0;\n                } catch (e) {\n                    if (e && e.message === n) return !0;\n                }\n                try {\n                    if (\"[object Window]\" === {}.toString.call(e)) return !0;\n                } catch (e) {\n                    if (e && e.message === n) return !0;\n                }\n                try {\n                    if (window.Window && e instanceof window.Window) return !0;\n                } catch (e) {\n                    if (e && e.message === n) return !0;\n                }\n                try {\n                    if (e && e.self === e) return !0;\n                } catch (e) {\n                    if (e && e.message === n) return !0;\n                }\n                try {\n                    if (e && e.parent === e) return !0;\n                } catch (e) {\n                    if (e && e.message === n) return !0;\n                }\n                try {\n                    if (e && e.top === e) return !0;\n                } catch (e) {\n                    if (e && e.message === n) return !0;\n                }\n                try {\n                    if (e && \"__unlikely_value__\" === e.__cross_domain_utils_window_check__) return !1;\n                } catch (e) {\n                    return !0;\n                }\n                try {\n                    if (\"postMessage\" in e && \"self\" in e && \"location\" in e) return !0;\n                } catch (e) {}\n                return !1;\n            }\n            function h(e, t) {\n                for (var r = 0; r < e.length; r++) try {\n                    if (e[r] === t) return r;\n                } catch (e) {}\n                return -1;\n            }\n            var l = function() {\n                function e() {\n                    if (this.name = void 0, this.weakmap = void 0, this.keys = void 0, this.values = void 0, \n                    this.name = \"__weakmap_\" + (1e9 * Math.random() >>> 0) + \"__\", function() {\n                        if (\"undefined\" == typeof WeakMap) return !1;\n                        if (void 0 === Object.freeze) return !1;\n                        try {\n                            var e = new WeakMap, t = {};\n                            return Object.freeze(t), e.set(t, \"__testvalue__\"), \"__testvalue__\" === e.get(t);\n                        } catch (e) {\n                            return !1;\n                        }\n                    }()) try {\n                        this.weakmap = new WeakMap;\n                    } catch (e) {}\n                    this.keys = [], this.values = [];\n                }\n                var t = e.prototype;\n                return t._cleanupClosedWindows = function() {\n                    for (var e = this.weakmap, t = this.keys, r = 0; r < t.length; r++) {\n                        var n = t[r];\n                        if (d(n) && s(n)) {\n                            if (e) try {\n                                e.delete(n);\n                            } catch (e) {}\n                            t.splice(r, 1), this.values.splice(r, 1), r -= 1;\n                        }\n                    }\n                }, t.isSafeToReadWrite = function(e) {\n                    return !d(e);\n                }, t.set = function(e, t) {\n                    if (!e) throw new Error(\"WeakMap expected key\");\n                    var r = this.weakmap;\n                    if (r) try {\n                        r.set(e, t);\n                    } catch (e) {\n                        delete this.weakmap;\n                    }\n                    if (this.isSafeToReadWrite(e)) try {\n                        var n = this.name, i = e[n];\n                        return void (i && i[0] === e ? i[1] = t : Object.defineProperty(e, n, {\n                            value: [ e, t ],\n                            writable: !0\n                        }));\n                    } catch (e) {}\n                    this._cleanupClosedWindows();\n                    var a = this.keys, o = this.values, c = h(a, e);\n                    -1 === c ? (a.push(e), o.push(t)) : o[c] = t;\n                }, t.get = function(e) {\n                    if (!e) throw new Error(\"WeakMap expected key\");\n                    var t = this.weakmap;\n                    if (t) try {\n                        if (t.has(e)) return t.get(e);\n                    } catch (e) {\n                        delete this.weakmap;\n                    }\n                    if (this.isSafeToReadWrite(e)) try {\n                        var r = e[this.name];\n                        return r && r[0] === e ? r[1] : void 0;\n                    } catch (e) {}\n                    this._cleanupClosedWindows();\n                    var n = h(this.keys, e);\n                    if (-1 !== n) return this.values[n];\n                }, t.delete = function(e) {\n                    if (!e) throw new Error(\"WeakMap expected key\");\n                    var t = this.weakmap;\n                    if (t) try {\n                        t.delete(e);\n                    } catch (e) {\n                        delete this.weakmap;\n                    }\n                    if (this.isSafeToReadWrite(e)) try {\n                        var r = e[this.name];\n                        r && r[0] === e && (r[0] = r[1] = void 0);\n                    } catch (e) {}\n                    this._cleanupClosedWindows();\n                    var n = this.keys, i = h(n, e);\n                    -1 !== i && (n.splice(i, 1), this.values.splice(i, 1));\n                }, t.has = function(e) {\n                    if (!e) throw new Error(\"WeakMap expected key\");\n                    var t = this.weakmap;\n                    if (t) try {\n                        if (t.has(e)) return !0;\n                    } catch (e) {\n                        delete this.weakmap;\n                    }\n                    if (this.isSafeToReadWrite(e)) try {\n                        var r = e[this.name];\n                        return !(!r || r[0] !== e);\n                    } catch (e) {}\n                    return this._cleanupClosedWindows(), -1 !== h(this.keys, e);\n                }, t.getOrSet = function(e, t) {\n                    if (this.has(e)) return this.get(e);\n                    var r = t();\n                    return this.set(e, r), r;\n                }, e;\n            }();\n        } ]);\n    }, function(module, __webpack_exports__, __webpack_require__) {\n        \"use strict\";\n        __webpack_require__.r(__webpack_exports__);\n        __webpack_require__.d(__webpack_exports__, \"getUserAgent\", (function() {\n            return getUserAgent;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isDevice\", (function() {\n            return isDevice;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isWebView\", (function() {\n            return isWebView;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isStandAlone\", (function() {\n            return isStandAlone;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isFacebookWebView\", (function() {\n            return isFacebookWebView;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isFirefox\", (function() {\n            return isFirefox;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isFirefoxIOS\", (function() {\n            return isFirefoxIOS;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isEdgeIOS\", (function() {\n            return isEdgeIOS;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isOperaMini\", (function() {\n            return isOperaMini;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isAndroid\", (function() {\n            return isAndroid;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isIos\", (function() {\n            return isIos;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isGoogleSearchApp\", (function() {\n            return isGoogleSearchApp;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isQQBrowser\", (function() {\n            return isQQBrowser;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isIosWebview\", (function() {\n            return isIosWebview;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isSFVC\", (function() {\n            return isSFVC;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isSFVCorSafari\", (function() {\n            return isSFVCorSafari;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isAndroidWebview\", (function() {\n            return isAndroidWebview;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isIE\", (function() {\n            return device_isIE;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isIECompHeader\", (function() {\n            return isIECompHeader;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isElectron\", (function() {\n            return isElectron;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isIEIntranet\", (function() {\n            return isIEIntranet;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isMacOsCna\", (function() {\n            return isMacOsCna;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"supportsPopups\", (function() {\n            return supportsPopups;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isChrome\", (function() {\n            return isChrome;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isSafari\", (function() {\n            return isSafari;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isApplePaySupported\", (function() {\n            return isApplePaySupported;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getBody\", (function() {\n            return getBody;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isDocumentReady\", (function() {\n            return isDocumentReady;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isDocumentInteractive\", (function() {\n            return isDocumentInteractive;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"urlEncode\", (function() {\n            return urlEncode;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"waitForWindowReady\", (function() {\n            return waitForWindowReady;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"waitForDocumentReady\", (function() {\n            return waitForDocumentReady;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"waitForDocumentBody\", (function() {\n            return waitForDocumentBody;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"parseQuery\", (function() {\n            return parseQuery;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getQueryParam\", (function() {\n            return getQueryParam;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"urlWillRedirectPage\", (function() {\n            return urlWillRedirectPage;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"formatQuery\", (function() {\n            return formatQuery;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"extendQuery\", (function() {\n            return extendQuery;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"extendUrl\", (function() {\n            return extendUrl;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"redirect\", (function() {\n            return redirect;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"hasMetaViewPort\", (function() {\n            return hasMetaViewPort;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isElementVisible\", (function() {\n            return isElementVisible;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getPerformance\", (function() {\n            return getPerformance;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"enablePerformance\", (function() {\n            return enablePerformance;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getPageRenderTime\", (function() {\n            return getPageRenderTime;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"htmlEncode\", (function() {\n            return htmlEncode;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isBrowser\", (function() {\n            return dom_isBrowser;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"querySelectorAll\", (function() {\n            return querySelectorAll;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"onClick\", (function() {\n            return onClick;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getScript\", (function() {\n            return getScript;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isLocalStorageEnabled\", (function() {\n            return isLocalStorageEnabled;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getBrowserLocales\", (function() {\n            return getBrowserLocales;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"appendChild\", (function() {\n            return appendChild;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isElement\", (function() {\n            return isElement;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getElementSafe\", (function() {\n            return getElementSafe;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getElement\", (function() {\n            return getElement;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"elementReady\", (function() {\n            return elementReady;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"PopupOpenError\", (function() {\n            return dom_PopupOpenError;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"popup\", (function() {\n            return popup;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"writeToWindow\", (function() {\n            return writeToWindow;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"writeElementToWindow\", (function() {\n            return writeElementToWindow;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"setStyle\", (function() {\n            return setStyle;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"awaitFrameLoad\", (function() {\n            return awaitFrameLoad;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"awaitFrameWindow\", (function() {\n            return awaitFrameWindow;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"createElement\", (function() {\n            return createElement;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"iframe\", (function() {\n            return iframe;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"addEventListener\", (function() {\n            return addEventListener;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"bindEvents\", (function() {\n            return bindEvents;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"setVendorCSS\", (function() {\n            return setVendorCSS;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"animate\", (function() {\n            return animate;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"makeElementVisible\", (function() {\n            return makeElementVisible;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"makeElementInvisible\", (function() {\n            return makeElementInvisible;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"showElement\", (function() {\n            return showElement;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"hideElement\", (function() {\n            return hideElement;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"destroyElement\", (function() {\n            return destroyElement;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"showAndAnimate\", (function() {\n            return showAndAnimate;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"animateAndHide\", (function() {\n            return animateAndHide;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"addClass\", (function() {\n            return addClass;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"removeClass\", (function() {\n            return removeClass;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isElementClosed\", (function() {\n            return isElementClosed;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"watchElementForClose\", (function() {\n            return watchElementForClose;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"fixScripts\", (function() {\n            return fixScripts;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"onResize\", (function() {\n            return onResize;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getResourceLoadTime\", (function() {\n            return getResourceLoadTime;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isShadowElement\", (function() {\n            return isShadowElement;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getShadowRoot\", (function() {\n            return getShadowRoot;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getShadowHost\", (function() {\n            return getShadowHost;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"insertShadowSlot\", (function() {\n            return insertShadowSlot;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"preventClickFocus\", (function() {\n            return preventClickFocus;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getStackTrace\", (function() {\n            return getStackTrace;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getCurrentScript\", (function() {\n            return getCurrentScript;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getCurrentScriptUID\", (function() {\n            return getCurrentScriptUID;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"submitForm\", (function() {\n            return submitForm;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"experiment\", (function() {\n            return experiment;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getGlobalNameSpace\", (function() {\n            return getGlobalNameSpace;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getStorage\", (function() {\n            return getStorage;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getFunctionName\", (function() {\n            return getFunctionName;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"setFunctionName\", (function() {\n            return setFunctionName;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"base64encode\", (function() {\n            return base64encode;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"base64decode\", (function() {\n            return base64decode;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"uniqueID\", (function() {\n            return uniqueID;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getGlobal\", (function() {\n            return getGlobal;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getObjectID\", (function() {\n            return getObjectID;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getEmptyObject\", (function() {\n            return getEmptyObject;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"memoize\", (function() {\n            return memoize;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"promiseIdentity\", (function() {\n            return promiseIdentity;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"memoizePromise\", (function() {\n            return memoizePromise;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"promisify\", (function() {\n            return promisify;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"inlineMemoize\", (function() {\n            return inlineMemoize;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"noop\", (function() {\n            return src_util_noop;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"once\", (function() {\n            return once;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"hashStr\", (function() {\n            return hashStr;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"strHashStr\", (function() {\n            return strHashStr;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"match\", (function() {\n            return match;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"awaitKey\", (function() {\n            return awaitKey;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"stringifyError\", (function() {\n            return stringifyError;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"stringifyErrorMessage\", (function() {\n            return stringifyErrorMessage;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"stringify\", (function() {\n            return stringify;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"domainMatches\", (function() {\n            return domainMatches;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"patchMethod\", (function() {\n            return patchMethod;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"extend\", (function() {\n            return extend;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"values\", (function() {\n            return util_values;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"memoizedValues\", (function() {\n            return memoizedValues;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"perc\", (function() {\n            return perc;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"min\", (function() {\n            return min;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"max\", (function() {\n            return max;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"roundUp\", (function() {\n            return roundUp;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"regexMap\", (function() {\n            return regexMap;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"svgToBase64\", (function() {\n            return svgToBase64;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"objFilter\", (function() {\n            return objFilter;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"identity\", (function() {\n            return identity;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"regexTokenize\", (function() {\n            return regexTokenize;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"promiseDebounce\", (function() {\n            return promiseDebounce;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"safeInterval\", (function() {\n            return safeInterval;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isInteger\", (function() {\n            return isInteger;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isFloat\", (function() {\n            return isFloat;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"serializePrimitive\", (function() {\n            return serializePrimitive;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"deserializePrimitive\", (function() {\n            return deserializePrimitive;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"dotify\", (function() {\n            return dotify;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"undotify\", (function() {\n            return undotify;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"eventEmitter\", (function() {\n            return eventEmitter;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"camelToDasherize\", (function() {\n            return camelToDasherize;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"dasherizeToCamel\", (function() {\n            return dasherizeToCamel;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"capitalizeFirstLetter\", (function() {\n            return capitalizeFirstLetter;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"get\", (function() {\n            return util_get;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"safeTimeout\", (function() {\n            return safeTimeout;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"defineLazyProp\", (function() {\n            return defineLazyProp;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"arrayFrom\", (function() {\n            return arrayFrom;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isObject\", (function() {\n            return isObject;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isObjectObject\", (function() {\n            return isObjectObject;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isPlainObject\", (function() {\n            return isPlainObject;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"replaceObject\", (function() {\n            return replaceObject;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"copyProp\", (function() {\n            return copyProp;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"regex\", (function() {\n            return regex;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"regexAll\", (function() {\n            return regexAll;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isDefined\", (function() {\n            return isDefined;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"cycle\", (function() {\n            return cycle;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"debounce\", (function() {\n            return debounce;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isRegex\", (function() {\n            return util_isRegex;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"weakMapMemoize\", (function() {\n            return util_weakMapMemoize;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"weakMapMemoizePromise\", (function() {\n            return util_weakMapMemoizePromise;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"getOrSet\", (function() {\n            return getOrSet;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"cleanup\", (function() {\n            return cleanup;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"tryCatch\", (function() {\n            return tryCatch;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"removeFromArray\", (function() {\n            return removeFromArray;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"assertExists\", (function() {\n            return assertExists;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"unique\", (function() {\n            return unique;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"constHas\", (function() {\n            return constHas;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"dedupeErrors\", (function() {\n            return dedupeErrors;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"ExtendableError\", (function() {\n            return util_ExtendableError;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"request\", (function() {\n            return request;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"addHeaderBuilder\", (function() {\n            return addHeaderBuilder;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"TYPES\", (function() {\n            return types_TYPES;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"memoized\", (function() {\n            return memoized;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"promise\", (function() {\n            return decorators_promise;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isPerc\", (function() {\n            return isPerc;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"isPx\", (function() {\n            return isPx;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"toNum\", (function() {\n            return toNum;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"toPx\", (function() {\n            return toPx;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"toCSS\", (function() {\n            return toCSS;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"percOf\", (function() {\n            return percOf;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"normalizeDimension\", (function() {\n            return normalizeDimension;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"wrapPromise\", (function() {\n            return wrapPromise;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"KEY_CODES\", (function() {\n            return KEY_CODES;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"ATTRIBUTES\", (function() {\n            return ATTRIBUTES;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"UID_HASH_LENGTH\", (function() {\n            return UID_HASH_LENGTH;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"iPhoneScreenHeightMatrix\", (function() {\n            return iPhoneScreenHeightMatrix;\n        }));\n        var iPhoneScreenHeightMatrix = {\n            926: {\n                device: \"iPhone 12 Pro Max\",\n                textSizeHeights: [ 752, 748, 744, 738 ],\n                zoomHeight: {\n                    1.15: [ 752, 747, 744, 738 ],\n                    1.25: [ 753, 748, 744, 738 ],\n                    1.5: [ 752, 749, 744, 738 ],\n                    1.75: [ 753, 747, 744, 739 ],\n                    2: [ 752, 748, 744 ],\n                    2.5: [ 753, 748 ],\n                    3: [ 753, 744 ]\n                },\n                maybeSafari: {\n                    2: [ 738 ],\n                    2.5: [ 745, 738 ],\n                    3: [ 747, 738 ]\n                }\n            },\n            896: {\n                device: \"iPhone XS Max, iPhone 11 Pro Max, iPhone XR, iPhone 11\",\n                textSizeHeights: [ 721, 717, 713, 707 ],\n                zoomHeight: {\n                    1.15: [ 721, 716, 713, 707 ],\n                    1.25: [ 721, 718, 713, 708 ],\n                    1.5: [ 722, 717, 713 ],\n                    1.75: [ 721, 718, 712, 707 ],\n                    2: [ 722, 718, 714, 708 ],\n                    2.5: [ 720, 718, 713, 708 ],\n                    3: [ 720, 717, 708 ]\n                },\n                maybeSafari: {\n                    1.5: [ 707 ],\n                    3: [ 714 ]\n                }\n            },\n            844: {\n                device: \"iPhone 12, iPhone 12 Pro\",\n                textSizeHeights: [ 670, 666, 662, 656 ],\n                zoomHeight: {\n                    1.15: [ 670, 666, 662 ],\n                    1.25: [ 670, 666, 663, 656 ],\n                    1.5: [ 671, 666, 662 ],\n                    1.75: [ 670, 667, 662, 656 ],\n                    2: [ 670, 666, 662 ],\n                    2.5: [ 670, 663 ],\n                    3: [ 669, 666, 663, 657 ]\n                },\n                maybeSafari: {\n                    1.15: [ 656 ],\n                    1.5: [ 656 ],\n                    2: [ 656 ],\n                    2.5: [ 665, 655 ],\n                    3: [ 663 ]\n                }\n            },\n            812: {\n                device: \"iPhone X, iPhone XS, iPhone 11 Pro, iPhone 12 Mini\",\n                textSizeHeights: [ 641, 637, 633, 627 ],\n                zoomHeight: {\n                    1.15: [ 641, 637, 633, 627 ],\n                    1.25: [ 641, 638, 633, 628 ],\n                    1.5: [ 641, 638, 633, 627 ],\n                    1.75: [ 641, 637, 634 ],\n                    2: [ 642, 638, 634, 628 ],\n                    2.5: [ 640, 638, 633, 628 ],\n                    3: [ 642, 633 ]\n                },\n                maybeSafari: {\n                    1.75: [ 627 ],\n                    3: [ 636, 627 ]\n                }\n            },\n            736: {\n                device: \"iPhone 6 Plus, iPhone 6S Plus, iPhone 7 Plus, iPhone 8 Plus\",\n                textSizeHeights: [ 628, 624, 620, 614 ],\n                zoomHeight: {\n                    1.15: [ 628, 624, 620, 614 ],\n                    1.25: [ 628, 624, 620, 614 ],\n                    1.5: [ 629, 624, 620 ],\n                    1.75: [ 628, 625, 620, 614 ],\n                    2: [ 628, 624, 620 ],\n                    2.5: [ 628, 625, 620, 615 ],\n                    3: [ 627, 624, 615 ]\n                },\n                maybeSafari: {\n                    1.5: [ 614 ],\n                    2: [ 614 ],\n                    3: [ 621 ]\n                }\n            },\n            667: {\n                device: \"iPhone 6, iPhone 6S, iPhone 7, iPhone 8,  iPhone SE2\",\n                textSizeHeights: [ 559, 555, 551, 545 ],\n                zoomHeight: {\n                    1.15: [ 559, 555, 551, 545 ],\n                    1.25: [ 559, 555, 551, 545 ],\n                    1.5: [ 560, 555, 551 ],\n                    1.75: [ 558, 555, 551 ],\n                    2: [ 560, 556, 552, 546 ],\n                    2.5: [ 560, 555, 550 ],\n                    3: [ 558, 555, 546 ]\n                },\n                maybeSafari: {\n                    1.5: [ 545 ],\n                    1.75: [ 544 ],\n                    2.5: [ 545 ],\n                    3: [ 552 ]\n                }\n            }\n        };\n        function getUserAgent() {\n            return window.navigator.mockUserAgent || window.navigator.userAgent;\n        }\n        function isDevice(userAgent) {\n            void 0 === userAgent && (userAgent = getUserAgent());\n            return !!userAgent.match(/Android|webOS|iPhone|iPad|iPod|bada|Symbian|Palm|CriOS|BlackBerry|IEMobile|WindowsMobile|Opera Mini/i);\n        }\n        function isWebView() {\n            var userAgent = getUserAgent();\n            return /(iPhone|iPod|iPad|Macintosh).*AppleWebKit(?!.*Safari)|.*WKWebView/i.test(userAgent) || /\\bwv\\b/.test(userAgent) || /Android.*Version\\/(\\d)\\.(\\d)/i.test(userAgent);\n        }\n        function isStandAlone() {\n            return !0 === window.navigator.standalone || window.matchMedia(\"(display-mode: standalone)\").matches;\n        }\n        function isFacebookWebView(ua) {\n            void 0 === ua && (ua = getUserAgent());\n            return /FBAN/.test(ua) || /FBAV/.test(ua);\n        }\n        function isFirefox(ua) {\n            void 0 === ua && (ua = getUserAgent());\n            return /Firefox/i.test(ua);\n        }\n        function isFirefoxIOS(ua) {\n            void 0 === ua && (ua = getUserAgent());\n            return /FxiOS/i.test(ua);\n        }\n        function isEdgeIOS(ua) {\n            void 0 === ua && (ua = getUserAgent());\n            return /EdgiOS/i.test(ua);\n        }\n        function isOperaMini(ua) {\n            void 0 === ua && (ua = getUserAgent());\n            return /Opera Mini/i.test(ua);\n        }\n        function isAndroid(ua) {\n            void 0 === ua && (ua = getUserAgent());\n            return /Android/.test(ua);\n        }\n        function isIos(ua) {\n            void 0 === ua && (ua = getUserAgent());\n            return /iPhone|iPod|iPad/.test(ua);\n        }\n        function isGoogleSearchApp(ua) {\n            void 0 === ua && (ua = getUserAgent());\n            return /\\bGSA\\b/.test(ua);\n        }\n        function isQQBrowser(ua) {\n            void 0 === ua && (ua = getUserAgent());\n            return /QQBrowser/.test(ua);\n        }\n        function isIosWebview(ua) {\n            void 0 === ua && (ua = getUserAgent());\n            return !!isIos(ua) && (!!isGoogleSearchApp(ua) || /.+AppleWebKit(?!.*Safari)|.*WKWebView/.test(ua));\n        }\n        function isSFVC(ua) {\n            void 0 === ua && (ua = getUserAgent());\n            if (isIos(ua)) {\n                var device = iPhoneScreenHeightMatrix[window.outerHeight];\n                if (!device) return !1;\n                var height = window.innerHeight;\n                var scale = Math.round(window.screen.width / window.innerWidth * 100) / 100;\n                var computedHeight = Math.round(height * scale);\n                return scale > 1 && device.zoomHeight[scale] ? -1 !== device.zoomHeight[scale].indexOf(computedHeight) : -1 !== device.textSizeHeights.indexOf(computedHeight);\n            }\n            return !1;\n        }\n        function isSFVCorSafari(ua) {\n            void 0 === ua && (ua = getUserAgent());\n            if (isIos(ua)) {\n                var sfvc = isSFVC(ua);\n                var device = iPhoneScreenHeightMatrix[window.outerHeight];\n                if (!device) return !1;\n                var height = window.innerHeight;\n                var scale = Math.round(window.screen.width / window.innerWidth * 100) / 100;\n                var computedHeight = Math.round(height * scale);\n                var possibleSafariSizes = device.maybeSafari;\n                var maybeSafari = !1;\n                scale > 1 && possibleSafariSizes[scale] && -1 !== possibleSafariSizes[scale].indexOf(computedHeight) && (maybeSafari = !0);\n                return sfvc || maybeSafari;\n            }\n            return !1;\n        }\n        function isAndroidWebview(ua) {\n            void 0 === ua && (ua = getUserAgent());\n            return !!isAndroid(ua) && /Version\\/[\\d.]+/.test(ua) && !isOperaMini(ua);\n        }\n        function device_isIE() {\n            return !!window.document.documentMode || Boolean(window.navigator && window.navigator.userAgent && /Edge|MSIE|rv:11/i.test(window.navigator.userAgent));\n        }\n        function isIECompHeader() {\n            var mHttp = window.document.querySelector('meta[http-equiv=\"X-UA-Compatible\"]');\n            var mContent = window.document.querySelector('meta[content=\"IE=edge\"]');\n            return !(!mHttp || !mContent);\n        }\n        function isElectron() {\n            return !(\"undefined\" == typeof process || !process.versions || !process.versions.electron);\n        }\n        function isIEIntranet() {\n            if (window.document.documentMode) try {\n                var status = window.status;\n                window.status = \"testIntranetMode\";\n                if (\"testIntranetMode\" === window.status) {\n                    window.status = status;\n                    return !0;\n                }\n                return !1;\n            } catch (err) {\n                return !1;\n            }\n            return !1;\n        }\n        function isMacOsCna() {\n            var userAgent = getUserAgent();\n            return /Macintosh.*AppleWebKit(?!.*Safari)/i.test(userAgent);\n        }\n        function supportsPopups(ua) {\n            void 0 === ua && (ua = getUserAgent());\n            return !(isIosWebview(ua) || isAndroidWebview(ua) || isOperaMini(ua) || isFirefoxIOS(ua) || isEdgeIOS(ua) || isFacebookWebView(ua) || isQQBrowser(ua) || isElectron() || isMacOsCna() || isStandAlone());\n        }\n        function isChrome(ua) {\n            void 0 === ua && (ua = getUserAgent());\n            return /Chrome|Chromium|CriOS/.test(ua);\n        }\n        function isSafari(ua) {\n            void 0 === ua && (ua = getUserAgent());\n            return /Safari/.test(ua) && !isChrome(ua);\n        }\n        function isApplePaySupported() {\n            try {\n                if (window.ApplePaySession && window.ApplePaySession.supportsVersion(3) && window.ApplePaySession.canMakePayments()) return !0;\n            } catch (e) {\n                return !1;\n            }\n            return !1;\n        }\n        function _setPrototypeOf(o, p) {\n            return (_setPrototypeOf = Object.setPrototypeOf || function(o, p) {\n                o.__proto__ = p;\n                return o;\n            })(o, p);\n        }\n        function _inheritsLoose(subClass, superClass) {\n            subClass.prototype = Object.create(superClass.prototype);\n            subClass.prototype.constructor = subClass;\n            _setPrototypeOf(subClass, superClass);\n        }\n        function _extends() {\n            return (_extends = Object.assign || function(target) {\n                for (var i = 1; i < arguments.length; i++) {\n                    var source = arguments[i];\n                    for (var key in source) ({}).hasOwnProperty.call(source, key) && (target[key] = source[key]);\n                }\n                return target;\n            }).apply(this, arguments);\n        }\n        var zalgo_promise = __webpack_require__(0);\n        var IE_WIN_ACCESS_ERROR = \"Call was rejected by callee.\\r\\n\";\n        function isAboutProtocol(win) {\n            void 0 === win && (win = window);\n            return \"about:\" === win.location.protocol;\n        }\n        function canReadFromWindow(win) {\n            try {\n                return !0;\n            } catch (err) {}\n            return !1;\n        }\n        function getActualDomain(win) {\n            void 0 === win && (win = window);\n            var location = win.location;\n            if (!location) throw new Error(\"Can not read window location\");\n            var protocol = location.protocol;\n            if (!protocol) throw new Error(\"Can not read window protocol\");\n            if (\"file:\" === protocol) return \"file://\";\n            if (\"about:\" === protocol) {\n                var parent = function(win) {\n                    void 0 === win && (win = window);\n                    if (win) try {\n                        if (win.parent && win.parent !== win) return win.parent;\n                    } catch (err) {}\n                }(win);\n                return parent && canReadFromWindow() ? getActualDomain(parent) : \"about://\";\n            }\n            var host = location.host;\n            if (!host) throw new Error(\"Can not read window host\");\n            return protocol + \"//\" + host;\n        }\n        function getDomain(win) {\n            void 0 === win && (win = window);\n            var domain = getActualDomain(win);\n            return domain && win.mockDomain && 0 === win.mockDomain.indexOf(\"mock:\") ? win.mockDomain : domain;\n        }\n        function isSameDomain(win) {\n            if (!function(win) {\n                try {\n                    if (win === window) return !0;\n                } catch (err) {}\n                try {\n                    var desc = Object.getOwnPropertyDescriptor(win, \"location\");\n                    if (desc && !1 === desc.enumerable) return !1;\n                } catch (err) {}\n                try {\n                    if (isAboutProtocol(win) && canReadFromWindow()) return !0;\n                } catch (err) {}\n                try {\n                    if (getActualDomain(win) === getActualDomain(window)) return !0;\n                } catch (err) {}\n                return !1;\n            }(win)) return !1;\n            try {\n                if (win === window) return !0;\n                if (isAboutProtocol(win) && canReadFromWindow()) return !0;\n                if (getDomain(window) === getDomain(win)) return !0;\n            } catch (err) {}\n            return !1;\n        }\n        var iframeWindows = [];\n        var iframeFrames = [];\n        function isWindowClosed(win, allowMock) {\n            void 0 === allowMock && (allowMock = !0);\n            try {\n                if (win === window) return !1;\n            } catch (err) {\n                return !0;\n            }\n            try {\n                if (!win) return !0;\n            } catch (err) {\n                return !0;\n            }\n            try {\n                if (win.closed) return !0;\n            } catch (err) {\n                return !err || err.message !== IE_WIN_ACCESS_ERROR;\n            }\n            if (allowMock && isSameDomain(win)) try {\n                if (win.mockclosed) return !0;\n            } catch (err) {}\n            try {\n                if (!win.parent || !win.top) return !0;\n            } catch (err) {}\n            var iframeIndex = function(collection, item) {\n                for (var i = 0; i < collection.length; i++) try {\n                    if (collection[i] === item) return i;\n                } catch (err) {}\n                return -1;\n            }(iframeWindows, win);\n            if (-1 !== iframeIndex) {\n                var frame = iframeFrames[iframeIndex];\n                if (frame && function(frame) {\n                    if (!frame.contentWindow) return !0;\n                    if (!frame.parentNode) return !0;\n                    var doc = frame.ownerDocument;\n                    if (doc && doc.documentElement && !doc.documentElement.contains(frame)) {\n                        var parent = frame;\n                        for (;parent.parentNode && parent.parentNode !== parent; ) parent = parent.parentNode;\n                        if (!parent.host || !doc.documentElement.contains(parent.host)) return !0;\n                    }\n                    return !1;\n                }(frame)) return !0;\n            }\n            return !1;\n        }\n        function isWindow(obj) {\n            try {\n                if (obj === window) return !0;\n            } catch (err) {\n                if (err && err.message === IE_WIN_ACCESS_ERROR) return !0;\n            }\n            try {\n                if (\"[object Window]\" === {}.toString.call(obj)) return !0;\n            } catch (err) {\n                if (err && err.message === IE_WIN_ACCESS_ERROR) return !0;\n            }\n            try {\n                if (window.Window && obj instanceof window.Window) return !0;\n            } catch (err) {\n                if (err && err.message === IE_WIN_ACCESS_ERROR) return !0;\n            }\n            try {\n                if (obj && obj.self === obj) return !0;\n            } catch (err) {\n                if (err && err.message === IE_WIN_ACCESS_ERROR) return !0;\n            }\n            try {\n                if (obj && obj.parent === obj) return !0;\n            } catch (err) {\n                if (err && err.message === IE_WIN_ACCESS_ERROR) return !0;\n            }\n            try {\n                if (obj && obj.top === obj) return !0;\n            } catch (err) {\n                if (err && err.message === IE_WIN_ACCESS_ERROR) return !0;\n            }\n            try {\n                if (obj && \"__unlikely_value__\" === obj.__cross_domain_utils_window_check__) return !1;\n            } catch (err) {\n                return !0;\n            }\n            try {\n                if (\"postMessage\" in obj && \"self\" in obj && \"location\" in obj) return !0;\n            } catch (err) {}\n            return !1;\n        }\n        var cross_domain_safe_weakmap = __webpack_require__(1);\n        function _getPrototypeOf(o) {\n            return (_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function(o) {\n                return o.__proto__ || Object.getPrototypeOf(o);\n            })(o);\n        }\n        function _isNativeReflectConstruct() {\n            if (\"undefined\" == typeof Reflect || !Reflect.construct) return !1;\n            if (Reflect.construct.sham) return !1;\n            if (\"function\" == typeof Proxy) return !0;\n            try {\n                Date.prototype.toString.call(Reflect.construct(Date, [], (function() {})));\n                return !0;\n            } catch (e) {\n                return !1;\n            }\n        }\n        function construct_construct(Parent, args, Class) {\n            return (construct_construct = _isNativeReflectConstruct() ? Reflect.construct : function(Parent, args, Class) {\n                var a = [ null ];\n                a.push.apply(a, args);\n                var instance = new (Function.bind.apply(Parent, a));\n                Class && _setPrototypeOf(instance, Class.prototype);\n                return instance;\n            }).apply(null, arguments);\n        }\n        function wrapNativeSuper_wrapNativeSuper(Class) {\n            var _cache = \"function\" == typeof Map ? new Map : void 0;\n            return (wrapNativeSuper_wrapNativeSuper = function(Class) {\n                if (null === Class || !(fn = Class, -1 !== Function.toString.call(fn).indexOf(\"[native code]\"))) return Class;\n                var fn;\n                if (\"function\" != typeof Class) throw new TypeError(\"Super expression must either be null or a function\");\n                if (void 0 !== _cache) {\n                    if (_cache.has(Class)) return _cache.get(Class);\n                    _cache.set(Class, Wrapper);\n                }\n                function Wrapper() {\n                    return construct_construct(Class, arguments, _getPrototypeOf(this).constructor);\n                }\n                Wrapper.prototype = Object.create(Class.prototype, {\n                    constructor: {\n                        value: Wrapper,\n                        enumerable: !1,\n                        writable: !0,\n                        configurable: !0\n                    }\n                });\n                return _setPrototypeOf(Wrapper, Class);\n            })(Class);\n        }\n        function util_safeIndexOf(collection, item) {\n            for (var i = 0; i < collection.length; i++) try {\n                if (collection[i] === item) return i;\n            } catch (err) {}\n            return -1;\n        }\n        var weakmap_CrossDomainSafeWeakMap = function() {\n            function CrossDomainSafeWeakMap() {\n                this.name = void 0;\n                this.weakmap = void 0;\n                this.keys = void 0;\n                this.values = void 0;\n                this.name = \"__weakmap_\" + (1e9 * Math.random() >>> 0) + \"__\";\n                if (function() {\n                    if (\"undefined\" == typeof WeakMap) return !1;\n                    if (void 0 === Object.freeze) return !1;\n                    try {\n                        var testWeakMap = new WeakMap;\n                        var testKey = {};\n                        Object.freeze(testKey);\n                        testWeakMap.set(testKey, \"__testvalue__\");\n                        return \"__testvalue__\" === testWeakMap.get(testKey);\n                    } catch (err) {\n                        return !1;\n                    }\n                }()) try {\n                    this.weakmap = new WeakMap;\n                } catch (err) {}\n                this.keys = [];\n                this.values = [];\n            }\n            var _proto = CrossDomainSafeWeakMap.prototype;\n            _proto._cleanupClosedWindows = function() {\n                var weakmap = this.weakmap;\n                var keys = this.keys;\n                for (var i = 0; i < keys.length; i++) {\n                    var value = keys[i];\n                    if (isWindow(value) && isWindowClosed(value)) {\n                        if (weakmap) try {\n                            weakmap.delete(value);\n                        } catch (err) {}\n                        keys.splice(i, 1);\n                        this.values.splice(i, 1);\n                        i -= 1;\n                    }\n                }\n            };\n            _proto.isSafeToReadWrite = function(key) {\n                return !isWindow(key);\n            };\n            _proto.set = function(key, value) {\n                if (!key) throw new Error(\"WeakMap expected key\");\n                var weakmap = this.weakmap;\n                if (weakmap) try {\n                    weakmap.set(key, value);\n                } catch (err) {\n                    delete this.weakmap;\n                }\n                if (this.isSafeToReadWrite(key)) try {\n                    var name = this.name;\n                    var entry = key[name];\n                    entry && entry[0] === key ? entry[1] = value : Object.defineProperty(key, name, {\n                        value: [ key, value ],\n                        writable: !0\n                    });\n                    return;\n                } catch (err) {}\n                this._cleanupClosedWindows();\n                var keys = this.keys;\n                var values = this.values;\n                var index = util_safeIndexOf(keys, key);\n                if (-1 === index) {\n                    keys.push(key);\n                    values.push(value);\n                } else values[index] = value;\n            };\n            _proto.get = function(key) {\n                if (!key) throw new Error(\"WeakMap expected key\");\n                var weakmap = this.weakmap;\n                if (weakmap) try {\n                    if (weakmap.has(key)) return weakmap.get(key);\n                } catch (err) {\n                    delete this.weakmap;\n                }\n                if (this.isSafeToReadWrite(key)) try {\n                    var entry = key[this.name];\n                    return entry && entry[0] === key ? entry[1] : void 0;\n                } catch (err) {}\n                this._cleanupClosedWindows();\n                var index = util_safeIndexOf(this.keys, key);\n                if (-1 !== index) return this.values[index];\n            };\n            _proto.delete = function(key) {\n                if (!key) throw new Error(\"WeakMap expected key\");\n                var weakmap = this.weakmap;\n                if (weakmap) try {\n                    weakmap.delete(key);\n                } catch (err) {\n                    delete this.weakmap;\n                }\n                if (this.isSafeToReadWrite(key)) try {\n                    var entry = key[this.name];\n                    entry && entry[0] === key && (entry[0] = entry[1] = void 0);\n                } catch (err) {}\n                this._cleanupClosedWindows();\n                var keys = this.keys;\n                var index = util_safeIndexOf(keys, key);\n                if (-1 !== index) {\n                    keys.splice(index, 1);\n                    this.values.splice(index, 1);\n                }\n            };\n            _proto.has = function(key) {\n                if (!key) throw new Error(\"WeakMap expected key\");\n                var weakmap = this.weakmap;\n                if (weakmap) try {\n                    if (weakmap.has(key)) return !0;\n                } catch (err) {\n                    delete this.weakmap;\n                }\n                if (this.isSafeToReadWrite(key)) try {\n                    var entry = key[this.name];\n                    return !(!entry || entry[0] !== key);\n                } catch (err) {}\n                this._cleanupClosedWindows();\n                return -1 !== util_safeIndexOf(this.keys, key);\n            };\n            _proto.getOrSet = function(key, getter) {\n                if (this.has(key)) return this.get(key);\n                var value = getter();\n                this.set(key, value);\n                return value;\n            };\n            return CrossDomainSafeWeakMap;\n        }();\n        function getFunctionName(fn) {\n            return fn.name || fn.__name__ || fn.displayName || \"anonymous\";\n        }\n        function setFunctionName(fn, name) {\n            try {\n                delete fn.name;\n                fn.name = name;\n            } catch (err) {}\n            fn.__name__ = fn.displayName = name;\n            return fn;\n        }\n        function base64encode(str) {\n            if (\"function\" == typeof btoa) return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, (function(m, p1) {\n                return String.fromCharCode(parseInt(p1, 16));\n            }))).replace(/[=]/g, \"\");\n            if (\"undefined\" != typeof Buffer) return Buffer.from(str, \"utf8\").toString(\"base64\").replace(/[=]/g, \"\");\n            throw new Error(\"Can not find window.btoa or Buffer\");\n        }\n        function base64decode(str) {\n            if (\"function\" == typeof atob) return decodeURIComponent([].map.call(atob(str), (function(c) {\n                return \"%\" + (\"00\" + c.charCodeAt(0).toString(16)).slice(-2);\n            })).join(\"\"));\n            if (\"undefined\" != typeof Buffer) return Buffer.from(str, \"base64\").toString(\"utf8\");\n            throw new Error(\"Can not find window.atob or Buffer\");\n        }\n        function uniqueID() {\n            var chars = \"0123456789abcdef\";\n            return \"uid_\" + \"xxxxxxxxxx\".replace(/./g, (function() {\n                return chars.charAt(Math.floor(Math.random() * chars.length));\n            })) + \"_\" + base64encode((new Date).toISOString().slice(11, 19).replace(\"T\", \".\")).replace(/[^a-zA-Z0-9]/g, \"\").toLowerCase();\n        }\n        function getGlobal() {\n            if (\"undefined\" != typeof window) return window;\n            if (\"undefined\" != typeof window) return window;\n            if (\"undefined\" != typeof global) return global;\n            throw new Error(\"No global found\");\n        }\n        var objectIDs;\n        function getObjectID(obj) {\n            objectIDs = objectIDs || new weakmap_CrossDomainSafeWeakMap;\n            if (null == obj || \"object\" != typeof obj && \"function\" != typeof obj) throw new Error(\"Invalid object\");\n            var uid = objectIDs.get(obj);\n            if (!uid) {\n                uid = typeof obj + \":\" + uniqueID();\n                objectIDs.set(obj, uid);\n            }\n            return uid;\n        }\n        function serializeArgs(args) {\n            try {\n                return JSON.stringify([].slice.call(args), (function(subkey, val) {\n                    return \"function\" == typeof val ? \"memoize[\" + getObjectID(val) + \"]\" : val;\n                }));\n            } catch (err) {\n                throw new Error(\"Arguments not serializable -- can not be used to memoize\");\n            }\n        }\n        function getEmptyObject() {\n            return {};\n        }\n        var memoizeGlobalIndex = 0;\n        var memoizeGlobalIndexValidFrom = 0;\n        function memoize(method, options) {\n            void 0 === options && (options = {});\n            var _options$thisNamespac = options.thisNamespace, thisNamespace = void 0 !== _options$thisNamespac && _options$thisNamespac, cacheTime = options.time;\n            var simpleCache;\n            var thisCache;\n            var memoizeIndex = memoizeGlobalIndex;\n            memoizeGlobalIndex += 1;\n            var memoizedFunction = function() {\n                for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) args[_key] = arguments[_key];\n                if (memoizeIndex < memoizeGlobalIndexValidFrom) {\n                    simpleCache = null;\n                    thisCache = null;\n                    memoizeIndex = memoizeGlobalIndex;\n                    memoizeGlobalIndex += 1;\n                }\n                var cache;\n                cache = thisNamespace ? (thisCache = thisCache || new weakmap_CrossDomainSafeWeakMap).getOrSet(this, getEmptyObject) : simpleCache = simpleCache || {};\n                var cacheKey = serializeArgs(args);\n                var cacheResult = cache[cacheKey];\n                if (cacheResult && cacheTime && Date.now() - cacheResult.time < cacheTime) {\n                    delete cache[cacheKey];\n                    cacheResult = null;\n                }\n                if (cacheResult) return cacheResult.value;\n                var time = Date.now();\n                var value = method.apply(this, arguments);\n                cache[cacheKey] = {\n                    time: time,\n                    value: value\n                };\n                return value;\n            };\n            memoizedFunction.reset = function() {\n                simpleCache = null;\n                thisCache = null;\n            };\n            return setFunctionName(memoizedFunction, (options.name || getFunctionName(method)) + \"::memoized\");\n        }\n        memoize.clear = function() {\n            memoizeGlobalIndexValidFrom = memoizeGlobalIndex;\n        };\n        function promiseIdentity(item) {\n            return zalgo_promise.ZalgoPromise.resolve(item);\n        }\n        function memoizePromise(method) {\n            var cache = {};\n            function memoizedPromiseFunction() {\n                var _arguments = arguments, _this = this;\n                for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) args[_key2] = arguments[_key2];\n                var key = serializeArgs(args);\n                if (cache.hasOwnProperty(key)) return cache[key];\n                cache[key] = zalgo_promise.ZalgoPromise.try((function() {\n                    return method.apply(_this, _arguments);\n                })).finally((function() {\n                    delete cache[key];\n                }));\n                return cache[key];\n            }\n            memoizedPromiseFunction.reset = function() {\n                cache = {};\n            };\n            return setFunctionName(memoizedPromiseFunction, getFunctionName(method) + \"::promiseMemoized\");\n        }\n        function promisify(method, options) {\n            void 0 === options && (options = {});\n            function promisifiedFunction() {\n                return zalgo_promise.ZalgoPromise.try(method, this, arguments);\n            }\n            options.name && (promisifiedFunction.displayName = options.name + \":promisified\");\n            return setFunctionName(promisifiedFunction, getFunctionName(method) + \"::promisified\");\n        }\n        function inlineMemoize(method, logic, args) {\n            void 0 === args && (args = []);\n            var cache = method.__inline_memoize_cache__ = method.__inline_memoize_cache__ || {};\n            var key = serializeArgs(args);\n            return cache.hasOwnProperty(key) ? cache[key] : cache[key] = logic.apply(void 0, args);\n        }\n        function src_util_noop() {}\n        function once(method) {\n            var called = !1;\n            return setFunctionName((function() {\n                if (!called) {\n                    called = !0;\n                    return method.apply(this, arguments);\n                }\n            }), getFunctionName(method) + \"::once\");\n        }\n        function hashStr(str) {\n            var hash = 0;\n            for (var i = 0; i < str.length; i++) hash += str[i].charCodeAt(0) * Math.pow(i % 10 + 1, 5);\n            return Math.floor(Math.pow(Math.sqrt(hash), 5));\n        }\n        function strHashStr(str) {\n            var hash = \"\";\n            for (var i = 0; i < str.length; i++) {\n                var total = str[i].charCodeAt(0) * i;\n                str[i + 1] && (total += str[i + 1].charCodeAt(0) * (i - 1));\n                hash += String.fromCharCode(97 + Math.abs(total) % 26);\n            }\n            return hash;\n        }\n        function match(str, pattern) {\n            var regmatch = str.match(pattern);\n            if (regmatch) return regmatch[1];\n        }\n        function awaitKey(obj, key) {\n            return new zalgo_promise.ZalgoPromise((function(resolve) {\n                var value = obj[key];\n                if (value) return resolve(value);\n                delete obj[key];\n                Object.defineProperty(obj, key, {\n                    configurable: !0,\n                    set: function(item) {\n                        (value = item) && resolve(value);\n                    },\n                    get: function() {\n                        return value;\n                    }\n                });\n            }));\n        }\n        function stringifyError(err, level) {\n            void 0 === level && (level = 1);\n            if (level >= 3) return \"stringifyError stack overflow\";\n            try {\n                if (!err) return \"<unknown error: \" + {}.toString.call(err) + \">\";\n                if (\"string\" == typeof err) return err;\n                if (err instanceof Error) {\n                    var stack = err && err.stack;\n                    var message = err && err.message;\n                    if (stack && message) return -1 !== stack.indexOf(message) ? stack : message + \"\\n\" + stack;\n                    if (stack) return stack;\n                    if (message) return message;\n                }\n                return err && err.toString && \"function\" == typeof err.toString ? err.toString() : {}.toString.call(err);\n            } catch (newErr) {\n                return \"Error while stringifying error: \" + stringifyError(newErr, level + 1);\n            }\n        }\n        function stringifyErrorMessage(err) {\n            var defaultMessage = \"<unknown error: \" + {}.toString.call(err) + \">\";\n            return err ? err instanceof Error ? err.message || defaultMessage : \"string\" == typeof err.message && err.message || defaultMessage : defaultMessage;\n        }\n        function stringify(item) {\n            return \"string\" == typeof item ? item : item && item.toString && \"function\" == typeof item.toString ? item.toString() : {}.toString.call(item);\n        }\n        function domainMatches(hostname, domain) {\n            var index = (hostname = hostname.split(\"://\")[1]).indexOf(domain);\n            return -1 !== index && hostname.slice(index) === domain;\n        }\n        function patchMethod(obj, name, handler) {\n            var original = obj[name];\n            obj[name] = function() {\n                var _arguments2 = arguments, _this2 = this;\n                return handler({\n                    context: this,\n                    args: [].slice.call(arguments),\n                    original: original,\n                    callOriginal: function() {\n                        return original.apply(_this2, _arguments2);\n                    }\n                });\n            };\n        }\n        function extend(obj, source) {\n            if (!source) return obj;\n            if (Object.assign) return Object.assign(obj, source);\n            for (var key in source) source.hasOwnProperty(key) && (obj[key] = source[key]);\n            return obj;\n        }\n        function util_values(obj) {\n            if (Object.values) return Object.values(obj);\n            var result = [];\n            for (var key in obj) obj.hasOwnProperty(key) && result.push(obj[key]);\n            return result;\n        }\n        var memoizedValues = memoize(util_values);\n        function perc(pixels, percentage) {\n            return Math.round(pixels * percentage / 100);\n        }\n        function min() {\n            return Math.min.apply(Math, arguments);\n        }\n        function max() {\n            return Math.max.apply(Math, arguments);\n        }\n        function roundUp(num, nearest) {\n            var remainder = num % nearest;\n            return remainder ? num - remainder + nearest : num;\n        }\n        function regexMap(str, regexp, handler) {\n            var results = [];\n            str.replace(regexp, (function(item) {\n                results.push(handler ? handler.apply(null, arguments) : item);\n            }));\n            return results;\n        }\n        function svgToBase64(svg) {\n            return \"data:image/svg+xml;base64,\" + base64encode(svg);\n        }\n        function objFilter(obj, filter) {\n            void 0 === filter && (filter = Boolean);\n            var result = {};\n            for (var key in obj) obj.hasOwnProperty(key) && filter(obj[key], key) && (result[key] = obj[key]);\n            return result;\n        }\n        function identity(item) {\n            return item;\n        }\n        function regexTokenize(text, regexp) {\n            var result = [];\n            text.replace(regexp, (function(token) {\n                result.push(token);\n                return \"\";\n            }));\n            return result;\n        }\n        function promiseDebounce(method, delay) {\n            void 0 === delay && (delay = 50);\n            var promise;\n            var timeout;\n            return setFunctionName((function() {\n                timeout && clearTimeout(timeout);\n                var localPromise = promise = promise || new zalgo_promise.ZalgoPromise;\n                timeout = setTimeout((function() {\n                    promise = null;\n                    timeout = null;\n                    zalgo_promise.ZalgoPromise.try(method).then((function(result) {\n                        localPromise.resolve(result);\n                    }), (function(err) {\n                        localPromise.reject(err);\n                    }));\n                }), delay);\n                return localPromise;\n            }), getFunctionName(method) + \"::promiseDebounced\");\n        }\n        function safeInterval(method, time) {\n            var timeout;\n            !function loop() {\n                timeout = setTimeout((function() {\n                    method();\n                    loop();\n                }), time);\n            }();\n            return {\n                cancel: function() {\n                    clearTimeout(timeout);\n                }\n            };\n        }\n        function isInteger(str) {\n            return Boolean(str.match(/^[0-9]+$/));\n        }\n        function isFloat(str) {\n            return Boolean(str.match(/^[0-9]+\\.[0-9]+$/));\n        }\n        function serializePrimitive(value) {\n            return value.toString();\n        }\n        function deserializePrimitive(value) {\n            return \"true\" === value || \"false\" !== value && (isInteger(value) ? parseInt(value, 10) : isFloat(value) ? parseFloat(value) : value);\n        }\n        function dotify(obj, prefix, newobj) {\n            void 0 === prefix && (prefix = \"\");\n            void 0 === newobj && (newobj = {});\n            prefix = prefix ? prefix + \".\" : prefix;\n            for (var key in obj) obj.hasOwnProperty(key) && null != obj[key] && \"function\" != typeof obj[key] && (obj[key] && Array.isArray(obj[key]) && obj[key].length && obj[key].every((function(val) {\n                return \"object\" != typeof val;\n            })) ? newobj[\"\" + prefix + key + \"[]\"] = obj[key].join(\",\") : obj[key] && \"object\" == typeof obj[key] ? newobj = dotify(obj[key], \"\" + prefix + key, newobj) : newobj[\"\" + prefix + key] = serializePrimitive(obj[key]));\n            return newobj;\n        }\n        function undotify(obj) {\n            var result = {};\n            for (var key in obj) if (obj.hasOwnProperty(key) && \"string\" == typeof obj[key]) {\n                var value = obj[key];\n                if (key.match(/^.+\\[\\]$/)) {\n                    key = key.slice(0, -2);\n                    value = value.split(\",\").map(deserializePrimitive);\n                } else value = deserializePrimitive(value);\n                var keyResult = result;\n                var parts = key.split(\".\");\n                for (var i = 0; i < parts.length; i++) {\n                    var part = parts[i];\n                    var isLast = i + 1 === parts.length;\n                    var isIndex = !isLast && isInteger(parts[i + 1]);\n                    if (\"constructor\" === part || \"prototype\" === part || \"__proto__\" === part) throw new Error(\"Disallowed key: \" + part);\n                    isLast ? keyResult[part] = value : keyResult = keyResult[part] = keyResult[part] || (isIndex ? [] : {});\n                }\n            }\n            return result;\n        }\n        function eventEmitter() {\n            var triggered = {};\n            var handlers = {};\n            var emitter = {\n                on: function(eventName, handler) {\n                    var handlerList = handlers[eventName] = handlers[eventName] || [];\n                    handlerList.push(handler);\n                    var cancelled = !1;\n                    return {\n                        cancel: function() {\n                            if (!cancelled) {\n                                cancelled = !0;\n                                handlerList.splice(handlerList.indexOf(handler), 1);\n                            }\n                        }\n                    };\n                },\n                once: function(eventName, handler) {\n                    var listener = emitter.on(eventName, (function() {\n                        listener.cancel();\n                        handler();\n                    }));\n                    return listener;\n                },\n                trigger: function(eventName) {\n                    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) args[_key3 - 1] = arguments[_key3];\n                    var handlerList = handlers[eventName];\n                    var promises = [];\n                    if (handlerList) {\n                        var _loop = function(_i2) {\n                            var handler = handlerList[_i2];\n                            promises.push(zalgo_promise.ZalgoPromise.try((function() {\n                                return handler.apply(void 0, args);\n                            })));\n                        };\n                        for (var _i2 = 0; _i2 < handlerList.length; _i2++) _loop(_i2);\n                    }\n                    return zalgo_promise.ZalgoPromise.all(promises).then(src_util_noop);\n                },\n                triggerOnce: function(eventName) {\n                    if (triggered[eventName]) return zalgo_promise.ZalgoPromise.resolve();\n                    triggered[eventName] = !0;\n                    for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) args[_key4 - 1] = arguments[_key4];\n                    return emitter.trigger.apply(emitter, [ eventName ].concat(args));\n                },\n                reset: function() {\n                    handlers = {};\n                }\n            };\n            return emitter;\n        }\n        function camelToDasherize(string) {\n            return string.replace(/([A-Z])/g, (function(g) {\n                return \"-\" + g.toLowerCase();\n            }));\n        }\n        function dasherizeToCamel(string) {\n            return string.replace(/-([a-z])/g, (function(g) {\n                return g[1].toUpperCase();\n            }));\n        }\n        function capitalizeFirstLetter(string) {\n            return string.charAt(0).toUpperCase() + string.slice(1).toLowerCase();\n        }\n        function util_get(item, path, def) {\n            if (!path) return def;\n            var pathParts = path.split(\".\");\n            for (var i = 0; i < pathParts.length; i++) {\n                if (\"object\" != typeof item || null === item) return def;\n                item = item[pathParts[i]];\n            }\n            return void 0 === item ? def : item;\n        }\n        function safeTimeout(method, time) {\n            var interval = safeInterval((function() {\n                if ((time -= 100) <= 0) {\n                    interval.cancel();\n                    method();\n                }\n            }), 100);\n        }\n        function defineLazyProp(obj, key, getter) {\n            if (Array.isArray(obj)) {\n                if (\"number\" != typeof key) throw new TypeError(\"Array key must be number\");\n            } else if (\"object\" == typeof obj && null !== obj && \"string\" != typeof key) throw new TypeError(\"Object key must be string\");\n            Object.defineProperty(obj, key, {\n                configurable: !0,\n                enumerable: !0,\n                get: function() {\n                    delete obj[key];\n                    var value = getter();\n                    obj[key] = value;\n                    return value;\n                },\n                set: function(value) {\n                    delete obj[key];\n                    obj[key] = value;\n                }\n            });\n        }\n        function arrayFrom(item) {\n            return [].slice.call(item);\n        }\n        function isObject(item) {\n            return \"object\" == typeof item && null !== item;\n        }\n        function isObjectObject(obj) {\n            return isObject(obj) && \"[object Object]\" === {}.toString.call(obj);\n        }\n        function isPlainObject(obj) {\n            if (!isObjectObject(obj)) return !1;\n            var constructor = obj.constructor;\n            if (\"function\" != typeof constructor) return !1;\n            var prototype = constructor.prototype;\n            return !!isObjectObject(prototype) && !!prototype.hasOwnProperty(\"isPrototypeOf\");\n        }\n        function replaceObject(item, replacer, fullKey) {\n            void 0 === fullKey && (fullKey = \"\");\n            if (Array.isArray(item)) {\n                var length = item.length;\n                var result = [];\n                var _loop2 = function(i) {\n                    defineLazyProp(result, i, (function() {\n                        var itemKey = fullKey ? fullKey + \".\" + i : \"\" + i;\n                        var child = replacer(item[i], i, itemKey);\n                        (isPlainObject(child) || Array.isArray(child)) && (child = replaceObject(child, replacer, itemKey));\n                        return child;\n                    }));\n                };\n                for (var i = 0; i < length; i++) _loop2(i);\n                return result;\n            }\n            if (isPlainObject(item)) {\n                var _result = {};\n                var _loop3 = function(key) {\n                    if (!item.hasOwnProperty(key)) return \"continue\";\n                    defineLazyProp(_result, key, (function() {\n                        var itemKey = fullKey ? fullKey + \".\" + key : \"\" + key;\n                        var child = replacer(item[key], key, itemKey);\n                        (isPlainObject(child) || Array.isArray(child)) && (child = replaceObject(child, replacer, itemKey));\n                        return child;\n                    }));\n                };\n                for (var key in item) _loop3(key);\n                return _result;\n            }\n            throw new Error(\"Pass an object or array\");\n        }\n        function copyProp(source, target, name, def) {\n            if (source.hasOwnProperty(name)) {\n                var descriptor = Object.getOwnPropertyDescriptor(source, name);\n                Object.defineProperty(target, name, descriptor);\n            } else target[name] = def;\n        }\n        function regex(pattern, string, start) {\n            void 0 === start && (start = 0);\n            \"string\" == typeof pattern && (pattern = new RegExp(pattern));\n            var result = string.slice(start).match(pattern);\n            if (result) {\n                var index = result.index;\n                var regmatch = result[0];\n                return {\n                    text: regmatch,\n                    groups: result.slice(1),\n                    start: start + index,\n                    end: start + index + regmatch.length,\n                    length: regmatch.length,\n                    replace: function(text) {\n                        return regmatch ? \"\" + regmatch.slice(0, start + index) + text + regmatch.slice(index + regmatch.length) : \"\";\n                    }\n                };\n            }\n        }\n        function regexAll(pattern, string) {\n            var matches = [];\n            var start = 0;\n            for (;;) {\n                var regmatch = regex(pattern, string, start);\n                if (!regmatch) break;\n                matches.push(regmatch);\n                start = match.end;\n            }\n            return matches;\n        }\n        function isDefined(value) {\n            return null != value;\n        }\n        function cycle(method) {\n            return zalgo_promise.ZalgoPromise.try(method).then((function() {\n                return cycle(method);\n            }));\n        }\n        function debounce(method, time) {\n            void 0 === time && (time = 100);\n            var timeout;\n            return setFunctionName((function() {\n                var _arguments3 = arguments, _this3 = this;\n                clearTimeout(timeout);\n                timeout = setTimeout((function() {\n                    return method.apply(_this3, _arguments3);\n                }), time);\n            }), getFunctionName(method) + \"::debounced\");\n        }\n        function util_isRegex(item) {\n            return \"[object RegExp]\" === {}.toString.call(item);\n        }\n        var util_weakMapMemoize = function(method) {\n            var weakmap = new weakmap_CrossDomainSafeWeakMap;\n            return function(arg) {\n                var _this4 = this;\n                return weakmap.getOrSet(arg, (function() {\n                    return method.call(_this4, arg);\n                }));\n            };\n        };\n        var util_weakMapMemoizePromise = function(method) {\n            var weakmap = new weakmap_CrossDomainSafeWeakMap;\n            return function(arg) {\n                var _this5 = this;\n                return weakmap.getOrSet(arg, (function() {\n                    return method.call(_this5, arg).finally((function() {\n                        weakmap.delete(arg);\n                    }));\n                }));\n            };\n        };\n        function getOrSet(obj, key, getter) {\n            if (obj.hasOwnProperty(key)) return obj[key];\n            var val = getter();\n            obj[key] = val;\n            return val;\n        }\n        function cleanup(obj) {\n            var tasks = [];\n            var cleaned = !1;\n            var cleanErr;\n            var cleaner = {\n                set: function(name, item) {\n                    if (!cleaned) {\n                        obj[name] = item;\n                        cleaner.register((function() {\n                            delete obj[name];\n                        }));\n                    }\n                    return item;\n                },\n                register: function(method) {\n                    cleaned ? method(cleanErr) : tasks.push(once((function() {\n                        return method(cleanErr);\n                    })));\n                },\n                all: function(err) {\n                    cleanErr = err;\n                    var results = [];\n                    cleaned = !0;\n                    for (;tasks.length; ) {\n                        var task = tasks.shift();\n                        results.push(task());\n                    }\n                    return zalgo_promise.ZalgoPromise.all(results).then(src_util_noop);\n                }\n            };\n            return cleaner;\n        }\n        function tryCatch(fn) {\n            var result;\n            var error;\n            try {\n                result = fn();\n            } catch (err) {\n                error = err;\n            }\n            return {\n                result: result,\n                error: error\n            };\n        }\n        function removeFromArray(arr, item) {\n            var index = arr.indexOf(item);\n            -1 !== index && arr.splice(index, 1);\n        }\n        function assertExists(name, thing) {\n            if (null == thing) throw new Error(\"Expected \" + name + \" to be present\");\n            return thing;\n        }\n        function unique(arr) {\n            var result = {};\n            for (var _i4 = 0; _i4 < arr.length; _i4++) result[arr[_i4]] = !0;\n            return Object.keys(result);\n        }\n        var constHas = function(constant, value) {\n            return -1 !== memoizedValues(constant).indexOf(value);\n        };\n        function dedupeErrors(handler) {\n            var seenErrors = [];\n            var seenStringifiedErrors = {};\n            return function(err) {\n                if (-1 === seenErrors.indexOf(err)) {\n                    seenErrors.push(err);\n                    var stringifiedError = stringifyError(err);\n                    if (!seenStringifiedErrors[stringifiedError]) {\n                        seenStringifiedErrors[stringifiedError] = !0;\n                        return handler(err);\n                    }\n                }\n            };\n        }\n        var util_ExtendableError = function(_Error) {\n            _inheritsLoose(ExtendableError, _Error);\n            function ExtendableError(message) {\n                var _this6;\n                (_this6 = _Error.call(this, message) || this).name = _this6.constructor.name;\n                \"function\" == typeof Error.captureStackTrace ? Error.captureStackTrace(function(self) {\n                    if (void 0 === self) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n                    return self;\n                }(_this6), _this6.constructor) : _this6.stack = new Error(message).stack;\n                return _this6;\n            }\n            return ExtendableError;\n        }(wrapNativeSuper_wrapNativeSuper(Error));\n        var KEY_CODES = {\n            ENTER: 13,\n            SPACE: 32\n        };\n        var ATTRIBUTES = {\n            UID: \"data-uid\"\n        };\n        var UID_HASH_LENGTH = 30;\n        function getBody() {\n            var body = document.body;\n            if (!body) throw new Error(\"Body element not found\");\n            return body;\n        }\n        function isDocumentReady() {\n            return Boolean(document.body) && \"complete\" === document.readyState;\n        }\n        function isDocumentInteractive() {\n            return Boolean(document.body) && \"interactive\" === document.readyState;\n        }\n        function urlEncode(str) {\n            return encodeURIComponent(str);\n        }\n        function waitForWindowReady() {\n            return inlineMemoize(waitForWindowReady, (function() {\n                return new zalgo_promise.ZalgoPromise((function(resolve) {\n                    isDocumentReady() && resolve();\n                    window.addEventListener(\"load\", (function() {\n                        return resolve();\n                    }));\n                }));\n            }));\n        }\n        var waitForDocumentReady = memoize((function() {\n            return new zalgo_promise.ZalgoPromise((function(resolve) {\n                if (isDocumentReady() || isDocumentInteractive()) return resolve();\n                var interval = setInterval((function() {\n                    if (isDocumentReady() || isDocumentInteractive()) {\n                        clearInterval(interval);\n                        return resolve();\n                    }\n                }), 10);\n            }));\n        }));\n        function waitForDocumentBody() {\n            return zalgo_promise.ZalgoPromise.try((function() {\n                return document.body ? document.body : waitForDocumentReady().then((function() {\n                    if (document.body) return document.body;\n                    throw new Error(\"Document ready but document.body not present\");\n                }));\n            }));\n        }\n        function parseQuery(queryString) {\n            return inlineMemoize(parseQuery, (function() {\n                var params = {};\n                if (!queryString) return params;\n                if (-1 === queryString.indexOf(\"=\")) return params;\n                for (var _i2 = 0, _queryString$split2 = queryString.split(\"&\"); _i2 < _queryString$split2.length; _i2++) {\n                    var pair = _queryString$split2[_i2];\n                    (pair = pair.split(\"=\"))[0] && pair[1] && (params[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]));\n                }\n                return params;\n            }), [ queryString ]);\n        }\n        function getQueryParam(name) {\n            return parseQuery(window.location.search.slice(1))[name];\n        }\n        function urlWillRedirectPage(url) {\n            return -1 === url.indexOf(\"#\") || 0 !== url.indexOf(\"#\") && url.split(\"#\")[0] !== window.location.href.split(\"#\")[0];\n        }\n        function formatQuery(obj) {\n            void 0 === obj && (obj = {});\n            return Object.keys(obj).filter((function(key) {\n                return \"string\" == typeof obj[key] || \"boolean\" == typeof obj[key];\n            })).map((function(key) {\n                var val = obj[key];\n                if (\"string\" != typeof val && \"boolean\" != typeof val) throw new TypeError(\"Invalid type for query\");\n                return urlEncode(key) + \"=\" + urlEncode(val.toString());\n            })).join(\"&\");\n        }\n        function extendQuery(originalQuery, props) {\n            void 0 === props && (props = {});\n            return props && Object.keys(props).length ? formatQuery(_extends({}, parseQuery(originalQuery), props)) : originalQuery;\n        }\n        function extendUrl(url, options) {\n            var query = options.query || {};\n            var hash = options.hash || {};\n            var originalUrl;\n            var originalHash;\n            var _url$split = url.split(\"#\");\n            originalHash = _url$split[1];\n            var _originalUrl$split = (originalUrl = _url$split[0]).split(\"?\");\n            originalUrl = _originalUrl$split[0];\n            var queryString = extendQuery(_originalUrl$split[1], query);\n            var hashString = extendQuery(originalHash, hash);\n            queryString && (originalUrl = originalUrl + \"?\" + queryString);\n            hashString && (originalUrl = originalUrl + \"#\" + hashString);\n            return originalUrl;\n        }\n        function redirect(url, win) {\n            void 0 === win && (win = window);\n            return new zalgo_promise.ZalgoPromise((function(resolve) {\n                win.location = url;\n                urlWillRedirectPage(url) || resolve();\n            }));\n        }\n        function hasMetaViewPort() {\n            var meta = document.querySelector(\"meta[name=viewport]\");\n            return !(isDevice() && window.screen.width < 660 && !meta);\n        }\n        function isElementVisible(el) {\n            return Boolean(el.offsetWidth || el.offsetHeight || el.getClientRects().length);\n        }\n        function getPerformance() {\n            return inlineMemoize(getPerformance, (function() {\n                var performance = window.performance;\n                if (performance && performance.now && performance.timing && performance.timing.connectEnd && performance.timing.navigationStart && Math.abs(performance.now() - Date.now()) > 1e3 && performance.now() - (performance.timing.connectEnd - performance.timing.navigationStart) > 0) return performance;\n            }));\n        }\n        function enablePerformance() {\n            return Boolean(getPerformance());\n        }\n        function getPageRenderTime() {\n            return waitForDocumentReady().then((function() {\n                var performance = getPerformance();\n                if (performance) {\n                    var timing = performance.timing;\n                    return timing.connectEnd && timing.domInteractive ? timing.domInteractive - timing.connectEnd : void 0;\n                }\n            }));\n        }\n        function htmlEncode(html) {\n            void 0 === html && (html = \"\");\n            return html.toString().replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").replace(/\"/g, \"&quot;\").replace(/'/g, \"&#39;\").replace(/\\//g, \"&#x2F;\");\n        }\n        function dom_isBrowser() {\n            return \"undefined\" != typeof window && void 0 !== window.location;\n        }\n        function querySelectorAll(selector, doc) {\n            void 0 === doc && (doc = window.document);\n            return [].slice.call(doc.querySelectorAll(selector));\n        }\n        function onClick(element, handler) {\n            element.addEventListener(\"touchstart\", src_util_noop);\n            element.addEventListener(\"click\", handler);\n            element.addEventListener(\"keypress\", (function(event) {\n                if (event.keyCode === KEY_CODES.ENTER || event.keyCode === KEY_CODES.SPACE) return handler(event);\n            }));\n        }\n        function getScript(_ref) {\n            var _ref$host = _ref.host, host = void 0 === _ref$host ? window.location.host : _ref$host, path = _ref.path, _ref$reverse = _ref.reverse, reverse = void 0 !== _ref$reverse && _ref$reverse;\n            return inlineMemoize(getScript, (function() {\n                var url = \"\" + host + path;\n                var scripts = [].slice.call(document.getElementsByTagName(\"script\"));\n                reverse && scripts.reverse();\n                for (var _i4 = 0; _i4 < scripts.length; _i4++) {\n                    var script = scripts[_i4];\n                    if (script.src && script.src.replace(/^https?:\\/\\//, \"\").split(\"?\")[0] === url) return script;\n                }\n            }), [ path ]);\n        }\n        function isLocalStorageEnabled() {\n            return inlineMemoize(isLocalStorageEnabled, (function() {\n                try {\n                    if (\"undefined\" == typeof window) return !1;\n                    if (window.localStorage) {\n                        var value = Math.random().toString();\n                        window.localStorage.setItem(\"__test__localStorage__\", value);\n                        var result = window.localStorage.getItem(\"__test__localStorage__\");\n                        window.localStorage.removeItem(\"__test__localStorage__\");\n                        if (value === result) return !0;\n                    }\n                } catch (err) {}\n                return !1;\n            }));\n        }\n        function getBrowserLocales() {\n            var nav = window.navigator;\n            var locales = nav.languages ? [].concat(nav.languages) : [];\n            nav.language && locales.push(nav.language);\n            nav.userLanguage && locales.push(nav.userLanguage);\n            return locales.map((function(locale) {\n                if (locale && locale.match(/^[a-z]{2}[-_][A-Z]{2}$/)) {\n                    var _locale$split = locale.split(/[-_]/);\n                    return {\n                        country: _locale$split[1],\n                        lang: _locale$split[0]\n                    };\n                }\n                return locale && locale.match(/^[a-z]{2}$/) ? {\n                    lang: locale\n                } : null;\n            })).filter(Boolean);\n        }\n        function appendChild(container, child) {\n            container.appendChild(child);\n        }\n        function isElement(element) {\n            return element instanceof window.Element || null !== element && \"object\" == typeof element && 1 === element.nodeType && \"object\" == typeof element.style && \"object\" == typeof element.ownerDocument;\n        }\n        function getElementSafe(id, doc) {\n            void 0 === doc && (doc = document);\n            return isElement(id) ? id : \"string\" == typeof id ? doc.querySelector(id) : void 0;\n        }\n        function getElement(id, doc) {\n            void 0 === doc && (doc = document);\n            var element = getElementSafe(id, doc);\n            if (element) return element;\n            throw new Error(\"Can not find element: \" + stringify(id));\n        }\n        function elementReady(id) {\n            return new zalgo_promise.ZalgoPromise((function(resolve, reject) {\n                var name = stringify(id);\n                var el = getElementSafe(id);\n                if (el) return resolve(el);\n                if (isDocumentReady()) return reject(new Error(\"Document is ready and element \" + name + \" does not exist\"));\n                var interval = setInterval((function() {\n                    if (el = getElementSafe(id)) {\n                        resolve(el);\n                        clearInterval(interval);\n                    } else if (isDocumentReady()) {\n                        clearInterval(interval);\n                        return reject(new Error(\"Document is ready and element \" + name + \" does not exist\"));\n                    }\n                }), 10);\n            }));\n        }\n        var dom_PopupOpenError = function(_ExtendableError) {\n            _inheritsLoose(PopupOpenError, _ExtendableError);\n            function PopupOpenError() {\n                return _ExtendableError.apply(this, arguments) || this;\n            }\n            return PopupOpenError;\n        }(util_ExtendableError);\n        function popup(url, options) {\n            var width = (options = options || {}).width, height = options.height;\n            var top = 0;\n            var left = 0;\n            width && (window.outerWidth ? left = Math.round((window.outerWidth - width) / 2) + window.screenX : window.screen.width && (left = Math.round((window.screen.width - width) / 2)));\n            height && (window.outerHeight ? top = Math.round((window.outerHeight - height) / 2) + window.screenY : window.screen.height && (top = Math.round((window.screen.height - height) / 2)));\n            width && height && (options = _extends({\n                top: top,\n                left: left,\n                width: width,\n                height: height,\n                status: 1,\n                toolbar: 0,\n                menubar: 0,\n                resizable: 1,\n                scrollbars: 1\n            }, options));\n            var name = options.name || \"\";\n            delete options.name;\n            var params = Object.keys(options).map((function(key) {\n                if (null != options[key]) return key + \"=\" + stringify(options[key]);\n            })).filter(Boolean).join(\",\");\n            var win;\n            try {\n                win = window.open(url, name, params);\n            } catch (err) {\n                throw new dom_PopupOpenError(\"Can not open popup window - \" + (err.stack || err.message));\n            }\n            if (isWindowClosed(win)) {\n                var err;\n                throw new dom_PopupOpenError(\"Can not open popup window - blocked\");\n            }\n            window.addEventListener(\"unload\", (function() {\n                var _win;\n                return null == (_win = win) ? void 0 : _win.close();\n            }));\n            return win;\n        }\n        function writeToWindow(win, html) {\n            try {\n                win.document.open();\n                win.document.write(html);\n                win.document.close();\n            } catch (err) {\n                try {\n                    win.location = \"javascript: document.open(); document.write(\" + JSON.stringify(html) + \"); document.close();\";\n                } catch (err2) {}\n            }\n        }\n        function writeElementToWindow(win, el) {\n            var tag = el.tagName.toLowerCase();\n            if (\"html\" !== tag) throw new Error(\"Expected element to be html, got \" + tag);\n            var documentElement = win.document.documentElement;\n            for (var _i6 = 0, _arrayFrom2 = arrayFrom(documentElement.children); _i6 < _arrayFrom2.length; _i6++) documentElement.removeChild(_arrayFrom2[_i6]);\n            for (var _i8 = 0, _arrayFrom4 = arrayFrom(el.children); _i8 < _arrayFrom4.length; _i8++) documentElement.appendChild(_arrayFrom4[_i8]);\n        }\n        function setStyle(el, styleText, doc) {\n            void 0 === doc && (doc = window.document);\n            el.styleSheet ? el.styleSheet.cssText = styleText : el.appendChild(doc.createTextNode(styleText));\n        }\n        var awaitFrameLoadPromises;\n        function awaitFrameLoad(frame) {\n            if ((awaitFrameLoadPromises = awaitFrameLoadPromises || new cross_domain_safe_weakmap.WeakMap).has(frame)) {\n                var _promise = awaitFrameLoadPromises.get(frame);\n                if (_promise) return _promise;\n            }\n            var promise = new zalgo_promise.ZalgoPromise((function(resolve, reject) {\n                frame.addEventListener(\"load\", (function() {\n                    !function(frame) {\n                        !function() {\n                            for (var i = 0; i < iframeWindows.length; i++) {\n                                var closed = !1;\n                                try {\n                                    closed = iframeWindows[i].closed;\n                                } catch (err) {}\n                                if (closed) {\n                                    iframeFrames.splice(i, 1);\n                                    iframeWindows.splice(i, 1);\n                                }\n                            }\n                        }();\n                        if (frame && frame.contentWindow) try {\n                            iframeWindows.push(frame.contentWindow);\n                            iframeFrames.push(frame);\n                        } catch (err) {}\n                    }(frame);\n                    resolve(frame);\n                }));\n                frame.addEventListener(\"error\", (function(err) {\n                    frame.contentWindow ? resolve(frame) : reject(err);\n                }));\n            }));\n            awaitFrameLoadPromises.set(frame, promise);\n            return promise;\n        }\n        function awaitFrameWindow(frame) {\n            return awaitFrameLoad(frame).then((function(loadedFrame) {\n                if (!loadedFrame.contentWindow) throw new Error(\"Could not find window in iframe\");\n                return loadedFrame.contentWindow;\n            }));\n        }\n        function createElement(tag, options, container) {\n            void 0 === tag && (tag = \"div\");\n            void 0 === options && (options = {});\n            tag = tag.toLowerCase();\n            var element = document.createElement(tag);\n            options.style && extend(element.style, options.style);\n            options.class && (element.className = options.class.join(\" \"));\n            options.id && element.setAttribute(\"id\", options.id);\n            if (options.attributes) for (var _i10 = 0, _Object$keys2 = Object.keys(options.attributes); _i10 < _Object$keys2.length; _i10++) {\n                var key = _Object$keys2[_i10];\n                element.setAttribute(key, options.attributes[key]);\n            }\n            options.styleSheet && setStyle(element, options.styleSheet);\n            container && appendChild(container, element);\n            if (options.html) if (\"iframe\" === tag) {\n                if (!container || !element.contentWindow) throw new Error(\"Iframe html can not be written unless container provided and iframe in DOM\");\n                writeToWindow(element.contentWindow, options.html);\n            } else element.innerHTML = options.html;\n            return element;\n        }\n        function iframe(options, container) {\n            void 0 === options && (options = {});\n            var style = options.style || {};\n            var frame = createElement(\"iframe\", {\n                attributes: _extends({\n                    allowTransparency: \"true\"\n                }, options.attributes || {}),\n                style: _extends({\n                    backgroundColor: \"transparent\",\n                    border: \"none\"\n                }, style),\n                html: options.html,\n                class: options.class\n            });\n            var isIE = window.navigator.userAgent.match(/MSIE|Edge/i);\n            frame.hasAttribute(\"id\") || frame.setAttribute(\"id\", uniqueID());\n            awaitFrameLoad(frame);\n            container && getElement(container).appendChild(frame);\n            (options.url || isIE) && frame.setAttribute(\"src\", options.url || \"about:blank\");\n            return frame;\n        }\n        function addEventListener(obj, event, handler) {\n            obj.addEventListener(event, handler);\n            return {\n                cancel: function() {\n                    obj.removeEventListener(event, handler);\n                }\n            };\n        }\n        function bindEvents(element, eventNames, handler) {\n            handler = once(handler);\n            for (var _i12 = 0; _i12 < eventNames.length; _i12++) element.addEventListener(eventNames[_i12], handler);\n            return {\n                cancel: once((function() {\n                    for (var _i14 = 0; _i14 < eventNames.length; _i14++) element.removeEventListener(eventNames[_i14], handler);\n                }))\n            };\n        }\n        var VENDOR_PREFIXES = [ \"webkit\", \"moz\", \"ms\", \"o\" ];\n        function setVendorCSS(element, name, value) {\n            element.style[name] = value;\n            var capitalizedName = capitalizeFirstLetter(name);\n            for (var _i16 = 0; _i16 < VENDOR_PREFIXES.length; _i16++) element.style[\"\" + VENDOR_PREFIXES[_i16] + capitalizedName] = value;\n        }\n        var ANIMATION_START_EVENTS = [ \"animationstart\", \"webkitAnimationStart\", \"oAnimationStart\", \"MSAnimationStart\" ];\n        var ANIMATION_END_EVENTS = [ \"animationend\", \"webkitAnimationEnd\", \"oAnimationEnd\", \"MSAnimationEnd\" ];\n        function animate(element, name, clean, timeout) {\n            void 0 === timeout && (timeout = 1e3);\n            return new zalgo_promise.ZalgoPromise((function(resolve, reject) {\n                var el = getElement(element);\n                if (!el) return resolve();\n                var hasStarted = !1;\n                var startTimeout;\n                var endTimeout;\n                var startEvent;\n                var endEvent;\n                function cleanUp() {\n                    clearTimeout(startTimeout);\n                    clearTimeout(endTimeout);\n                    startEvent.cancel();\n                    endEvent.cancel();\n                }\n                startEvent = bindEvents(el, ANIMATION_START_EVENTS, (function(event) {\n                    if (event.target === el && event.animationName === name) {\n                        clearTimeout(startTimeout);\n                        event.stopPropagation();\n                        startEvent.cancel();\n                        hasStarted = !0;\n                        endTimeout = setTimeout((function() {\n                            cleanUp();\n                            resolve();\n                        }), timeout);\n                    }\n                }));\n                endEvent = bindEvents(el, ANIMATION_END_EVENTS, (function(event) {\n                    if (event.target === el && event.animationName === name) {\n                        cleanUp();\n                        return \"string\" == typeof event.animationName && event.animationName !== name ? reject(\"Expected animation name to be \" + name + \", found \" + event.animationName) : resolve();\n                    }\n                }));\n                setVendorCSS(el, \"animationName\", name);\n                startTimeout = setTimeout((function() {\n                    if (!hasStarted) {\n                        cleanUp();\n                        return resolve();\n                    }\n                }), 200);\n                clean && clean(cleanUp);\n            }));\n        }\n        function makeElementVisible(element) {\n            element.style.setProperty(\"visibility\", \"\");\n        }\n        function makeElementInvisible(element) {\n            element.style.setProperty(\"visibility\", \"hidden\", \"important\");\n        }\n        function showElement(element) {\n            element.style.setProperty(\"display\", \"\");\n        }\n        function hideElement(element) {\n            element.style.setProperty(\"display\", \"none\", \"important\");\n        }\n        function destroyElement(element) {\n            element && element.parentNode && element.parentNode.removeChild(element);\n        }\n        function showAndAnimate(element, name, clean) {\n            var animation = animate(element, name, clean);\n            showElement(element);\n            return animation;\n        }\n        function animateAndHide(element, name, clean) {\n            return animate(element, name, clean).then((function() {\n                hideElement(element);\n            }));\n        }\n        function addClass(element, name) {\n            element.classList.add(name);\n        }\n        function removeClass(element, name) {\n            element.classList.remove(name);\n        }\n        function isElementClosed(el) {\n            return !(el && el.parentNode && el.ownerDocument && el.ownerDocument.documentElement && el.ownerDocument.documentElement.contains(el));\n        }\n        function watchElementForClose(element, handler) {\n            handler = once(handler);\n            var cancelled = !1;\n            var mutationObservers = [];\n            var interval;\n            var sacrificialFrame;\n            var sacrificialFrameWin;\n            var cancel = function() {\n                cancelled = !0;\n                for (var _i18 = 0; _i18 < mutationObservers.length; _i18++) mutationObservers[_i18].disconnect();\n                interval && interval.cancel();\n                sacrificialFrameWin && sacrificialFrameWin.removeEventListener(\"unload\", elementClosed);\n                sacrificialFrame && destroyElement(sacrificialFrame);\n            };\n            var elementClosed = function() {\n                if (!cancelled) {\n                    handler();\n                    cancel();\n                }\n            };\n            if (isElementClosed(element)) {\n                elementClosed();\n                return {\n                    cancel: cancel\n                };\n            }\n            if (window.MutationObserver) {\n                var mutationElement = element.parentElement;\n                for (;mutationElement; ) {\n                    var mutationObserver = new window.MutationObserver((function() {\n                        isElementClosed(element) && elementClosed();\n                    }));\n                    mutationObserver.observe(mutationElement, {\n                        childList: !0\n                    });\n                    mutationObservers.push(mutationObserver);\n                    mutationElement = mutationElement.parentElement;\n                }\n            }\n            (sacrificialFrame = document.createElement(\"iframe\")).setAttribute(\"name\", \"__detect_close_\" + uniqueID() + \"__\");\n            sacrificialFrame.style.display = \"none\";\n            awaitFrameWindow(sacrificialFrame).then((function(frameWin) {\n                (sacrificialFrameWin = function(win) {\n                    if (!isSameDomain(win)) throw new Error(\"Expected window to be same domain\");\n                    return win;\n                }(frameWin)).addEventListener(\"unload\", elementClosed);\n            }));\n            element.appendChild(sacrificialFrame);\n            interval = safeInterval((function() {\n                isElementClosed(element) && elementClosed();\n            }), 1e3);\n            return {\n                cancel: cancel\n            };\n        }\n        function fixScripts(el, doc) {\n            void 0 === doc && (doc = window.document);\n            for (var _i20 = 0, _querySelectorAll2 = querySelectorAll(\"script\", el); _i20 < _querySelectorAll2.length; _i20++) {\n                var script = _querySelectorAll2[_i20];\n                var parentNode = script.parentNode;\n                if (parentNode) {\n                    var newScript = doc.createElement(\"script\");\n                    newScript.text = script.textContent;\n                    parentNode.replaceChild(newScript, script);\n                }\n            }\n        }\n        function onResize(el, handler, _temp) {\n            var _ref2 = void 0 === _temp ? {} : _temp, _ref2$width = _ref2.width, width = void 0 === _ref2$width || _ref2$width, _ref2$height = _ref2.height, height = void 0 === _ref2$height || _ref2$height, _ref2$interval = _ref2.interval, interval = void 0 === _ref2$interval ? 100 : _ref2$interval, _ref2$win = _ref2.win, win = void 0 === _ref2$win ? window : _ref2$win;\n            var currentWidth = el.offsetWidth;\n            var currentHeight = el.offsetHeight;\n            var canceled = !1;\n            handler({\n                width: currentWidth,\n                height: currentHeight\n            });\n            var check = function() {\n                if (!canceled && isElementVisible(el)) {\n                    var newWidth = el.offsetWidth;\n                    var newHeight = el.offsetHeight;\n                    (width && newWidth !== currentWidth || height && newHeight !== currentHeight) && handler({\n                        width: newWidth,\n                        height: newHeight\n                    });\n                    currentWidth = newWidth;\n                    currentHeight = newHeight;\n                }\n            };\n            var observer;\n            var timeout;\n            win.addEventListener(\"resize\", check);\n            if (void 0 !== win.ResizeObserver) {\n                (observer = new win.ResizeObserver(check)).observe(el);\n                timeout = safeInterval(check, 10 * interval);\n            } else if (void 0 !== win.MutationObserver) {\n                (observer = new win.MutationObserver(check)).observe(el, {\n                    attributes: !0,\n                    childList: !0,\n                    subtree: !0,\n                    characterData: !1\n                });\n                timeout = safeInterval(check, 10 * interval);\n            } else timeout = safeInterval(check, interval);\n            return {\n                cancel: function() {\n                    canceled = !0;\n                    observer.disconnect();\n                    window.removeEventListener(\"resize\", check);\n                    timeout.cancel();\n                }\n            };\n        }\n        function getResourceLoadTime(url) {\n            var performance = getPerformance();\n            if (performance && \"function\" == typeof performance.getEntries) {\n                var entries = performance.getEntries();\n                for (var i = 0; i < entries.length; i++) {\n                    var entry = entries[i];\n                    if (entry && entry.name && 0 === entry.name.indexOf(url) && \"number\" == typeof entry.duration) return Math.floor(entry.duration);\n                }\n            }\n        }\n        function isShadowElement(element) {\n            for (;element.parentNode; ) element = element.parentNode;\n            return \"[object ShadowRoot]\" === element.toString();\n        }\n        function getShadowRoot(element) {\n            for (;element.parentNode; ) element = element.parentNode;\n            if (isShadowElement(element)) return element;\n        }\n        function getShadowHost(element) {\n            var shadowRoot = getShadowRoot(element);\n            if (shadowRoot && shadowRoot.host) return shadowRoot.host;\n        }\n        function insertShadowSlot(element) {\n            var shadowHost = getShadowHost(element);\n            if (!shadowHost) throw new Error(\"Element is not in shadow dom\");\n            var slotName = \"shadow-slot-\" + uniqueID();\n            var slot = document.createElement(\"slot\");\n            slot.setAttribute(\"name\", slotName);\n            element.appendChild(slot);\n            var slotProvider = document.createElement(\"div\");\n            slotProvider.setAttribute(\"slot\", slotName);\n            shadowHost.appendChild(slotProvider);\n            return isShadowElement(shadowHost) ? insertShadowSlot(slotProvider) : slotProvider;\n        }\n        function preventClickFocus(el) {\n            var onFocus = function onFocus(event) {\n                el.removeEventListener(\"focus\", onFocus);\n                event.preventDefault();\n                el.blur();\n                return !1;\n            };\n            el.addEventListener(\"mousedown\", (function() {\n                el.addEventListener(\"focus\", onFocus);\n                setTimeout((function() {\n                    el.removeEventListener(\"focus\", onFocus);\n                }), 1);\n            }));\n        }\n        function getStackTrace() {\n            try {\n                throw new Error(\"_\");\n            } catch (err) {\n                return err.stack || \"\";\n            }\n        }\n        var currentScript = \"undefined\" != typeof document ? document.currentScript : null;\n        var getCurrentScript = memoize((function() {\n            if (currentScript) return currentScript;\n            if (currentScript = function() {\n                try {\n                    var stack = getStackTrace();\n                    var stackDetails = /.*at [^(]*\\((.*):(.+):(.+)\\)$/gi.exec(stack);\n                    var scriptLocation = stackDetails && stackDetails[1];\n                    if (!scriptLocation) return;\n                    for (var _i22 = 0, _Array$prototype$slic2 = [].slice.call(document.getElementsByTagName(\"script\")).reverse(); _i22 < _Array$prototype$slic2.length; _i22++) {\n                        var script = _Array$prototype$slic2[_i22];\n                        if (script.src && script.src === scriptLocation) return script;\n                    }\n                } catch (err) {}\n            }()) return currentScript;\n            throw new Error(\"Can not determine current script\");\n        }));\n        var currentUID = uniqueID();\n        var getCurrentScriptUID = memoize((function() {\n            var script;\n            try {\n                script = getCurrentScript();\n            } catch (err) {\n                return currentUID;\n            }\n            var uid = script.getAttribute(ATTRIBUTES.UID);\n            if (uid && \"string\" == typeof uid) return uid;\n            if ((uid = script.getAttribute(ATTRIBUTES.UID + \"-auto\")) && \"string\" == typeof uid) return uid;\n            if (script.src) {\n                var hashedString = strHashStr(JSON.stringify({\n                    src: script.src,\n                    dataset: script.dataset\n                }));\n                uid = \"uid_\" + hashedString.slice(hashedString.length - UID_HASH_LENGTH);\n            } else uid = uniqueID();\n            script.setAttribute(ATTRIBUTES.UID + \"-auto\", uid);\n            return uid;\n        }));\n        function submitForm(_ref3) {\n            var url = _ref3.url, target = _ref3.target, body = _ref3.body, _ref3$method = _ref3.method, method = void 0 === _ref3$method ? \"post\" : _ref3$method;\n            var form = document.createElement(\"form\");\n            form.setAttribute(\"target\", target);\n            form.setAttribute(\"method\", method);\n            form.setAttribute(\"action\", url);\n            form.style.display = \"none\";\n            if (body) for (var _i24 = 0, _Object$keys4 = Object.keys(body); _i24 < _Object$keys4.length; _i24++) {\n                var _body$key;\n                var key = _Object$keys4[_i24];\n                var input = document.createElement(\"input\");\n                input.setAttribute(\"name\", key);\n                input.setAttribute(\"value\", null == (_body$key = body[key]) ? void 0 : _body$key.toString());\n                form.appendChild(input);\n            }\n            getBody().appendChild(form);\n            form.submit();\n            getBody().removeChild(form);\n        }\n        function getStorage(_ref) {\n            var name = _ref.name, _ref$lifetime = _ref.lifetime, lifetime = void 0 === _ref$lifetime ? 12e5 : _ref$lifetime;\n            return inlineMemoize(getStorage, (function() {\n                var STORAGE_KEY = \"__\" + name + \"_storage__\";\n                var newStateID = uniqueID();\n                var accessedStorage;\n                function getState(handler) {\n                    var localStorageEnabled = isLocalStorageEnabled();\n                    var storage;\n                    accessedStorage && (storage = accessedStorage);\n                    if (!storage && localStorageEnabled) {\n                        var rawStorage = window.localStorage.getItem(STORAGE_KEY);\n                        rawStorage && (storage = JSON.parse(rawStorage));\n                    }\n                    storage || (storage = getGlobal()[STORAGE_KEY]);\n                    storage || (storage = {\n                        id: newStateID\n                    });\n                    storage.id || (storage.id = newStateID);\n                    accessedStorage = storage;\n                    var result = handler(storage);\n                    localStorageEnabled ? window.localStorage.setItem(STORAGE_KEY, JSON.stringify(storage)) : getGlobal()[STORAGE_KEY] = storage;\n                    accessedStorage = null;\n                    return result;\n                }\n                function getID() {\n                    return getState((function(storage) {\n                        return storage.id;\n                    }));\n                }\n                function getSession(handler) {\n                    return getState((function(storage) {\n                        var session = storage.__session__;\n                        var now = Date.now();\n                        session && now - session.created > lifetime && (session = null);\n                        session || (session = {\n                            guid: uniqueID(),\n                            created: now\n                        });\n                        storage.__session__ = session;\n                        return handler(session);\n                    }));\n                }\n                return {\n                    getState: getState,\n                    getID: getID,\n                    isStateFresh: function() {\n                        return getID() === newStateID;\n                    },\n                    getSessionState: function(handler) {\n                        return getSession((function(session) {\n                            session.state = session.state || {};\n                            return handler(session.state);\n                        }));\n                    },\n                    getSessionID: function() {\n                        return getSession((function(session) {\n                            return session.guid;\n                        }));\n                    }\n                };\n            }), [ {\n                name: name,\n                lifetime: lifetime\n            } ]);\n        }\n        function getBelterExperimentStorage() {\n            return getStorage({\n                name: \"belter_experiment\"\n            });\n        }\n        function isEventUnique(name) {\n            return getBelterExperimentStorage().getSessionState((function(state) {\n                state.loggedBeacons = state.loggedBeacons || [];\n                if (-1 === state.loggedBeacons.indexOf(name)) {\n                    state.loggedBeacons.push(name);\n                    return !0;\n                }\n                return !1;\n            }));\n        }\n        function getRandomInteger(range) {\n            return Math.floor(Math.random() * range);\n        }\n        function experiment(_ref) {\n            var name = _ref.name, _ref$sample = _ref.sample, sample = void 0 === _ref$sample ? 50 : _ref$sample, _ref$logTreatment = _ref.logTreatment, logTreatment = void 0 === _ref$logTreatment ? src_util_noop : _ref$logTreatment, _ref$logCheckpoint = _ref.logCheckpoint, logCheckpoint = void 0 === _ref$logCheckpoint ? src_util_noop : _ref$logCheckpoint, _ref$sticky = _ref.sticky;\n            var throttle = void 0 === _ref$sticky || _ref$sticky ? function(name) {\n                return getBelterExperimentStorage().getState((function(state) {\n                    state.throttlePercentiles = state.throttlePercentiles || {};\n                    state.throttlePercentiles[name] = state.throttlePercentiles[name] || getRandomInteger(100);\n                    return state.throttlePercentiles[name];\n                }));\n            }(name) : getRandomInteger(100);\n            var group;\n            var treatment = name + \"_\" + (group = throttle < sample ? \"test\" : sample >= 50 || sample <= throttle && throttle < 2 * sample ? \"control\" : \"throttle\");\n            var started = !1;\n            var forced = !1;\n            try {\n                window.localStorage && window.localStorage.getItem(name) && (forced = !0);\n            } catch (err) {}\n            var exp = {\n                isEnabled: function() {\n                    return \"test\" === group || forced;\n                },\n                isDisabled: function() {\n                    return \"test\" !== group && !forced;\n                },\n                getTreatment: function() {\n                    return treatment;\n                },\n                log: function(checkpoint, payload) {\n                    void 0 === payload && (payload = {});\n                    if (!started) return exp;\n                    isEventUnique(treatment + \"_\" + JSON.stringify(payload)) && logTreatment({\n                        name: name,\n                        treatment: treatment,\n                        payload: payload,\n                        throttle: throttle\n                    });\n                    isEventUnique(treatment + \"_\" + checkpoint + \"_\" + JSON.stringify(payload)) && logCheckpoint({\n                        name: name,\n                        treatment: treatment,\n                        checkpoint: checkpoint,\n                        payload: payload,\n                        throttle: throttle\n                    });\n                    return exp;\n                },\n                logStart: function(payload) {\n                    void 0 === payload && (payload = {});\n                    started = !0;\n                    return exp.log(\"start\", payload);\n                },\n                logComplete: function(payload) {\n                    void 0 === payload && (payload = {});\n                    return exp.log(\"complete\", payload);\n                }\n            };\n            return exp;\n        }\n        function getGlobalNameSpace(_ref) {\n            var name = _ref.name, _ref$version = _ref.version, version = void 0 === _ref$version ? \"latest\" : _ref$version;\n            var global = getGlobal();\n            var globalKey = \"__\" + name + \"__\" + version + \"_global__\";\n            var namespace = global[globalKey] = global[globalKey] || {};\n            return {\n                get: function(key, defValue) {\n                    defValue = defValue || {};\n                    return namespace[key] = namespace[key] || defValue;\n                }\n            };\n        }\n        var headerBuilders = [];\n        function request(_ref) {\n            var url = _ref.url, _ref$method = _ref.method, method = void 0 === _ref$method ? \"get\" : _ref$method, _ref$headers = _ref.headers, headers = void 0 === _ref$headers ? {} : _ref$headers, json = _ref.json, data = _ref.data, body = _ref.body, _ref$win = _ref.win, win = void 0 === _ref$win ? window : _ref$win, _ref$timeout = _ref.timeout, timeout = void 0 === _ref$timeout ? 0 : _ref$timeout;\n            return new zalgo_promise.ZalgoPromise((function(resolve, reject) {\n                if (json && data || json && body || data && json) throw new Error(\"Only options.json or options.data or options.body should be passed\");\n                var normalizedHeaders = {};\n                for (var _i4 = 0, _Object$keys2 = Object.keys(headers); _i4 < _Object$keys2.length; _i4++) {\n                    var key = _Object$keys2[_i4];\n                    normalizedHeaders[key.toLowerCase()] = headers[key];\n                }\n                json ? normalizedHeaders[\"content-type\"] = normalizedHeaders[\"content-type\"] || \"application/json\" : (data || body) && (normalizedHeaders[\"content-type\"] = normalizedHeaders[\"content-type\"] || \"application/x-www-form-urlencoded; charset=utf-8\");\n                normalizedHeaders.accept = normalizedHeaders.accept || \"application/json\";\n                for (var _i6 = 0; _i6 < headerBuilders.length; _i6++) {\n                    var builtHeaders = (0, headerBuilders[_i6])();\n                    for (var _i8 = 0, _Object$keys4 = Object.keys(builtHeaders); _i8 < _Object$keys4.length; _i8++) {\n                        var _key = _Object$keys4[_i8];\n                        normalizedHeaders[_key.toLowerCase()] = builtHeaders[_key];\n                    }\n                }\n                var xhr = new win.XMLHttpRequest;\n                xhr.addEventListener(\"load\", (function() {\n                    var responseHeaders = function(rawHeaders) {\n                        void 0 === rawHeaders && (rawHeaders = \"\");\n                        var result = {};\n                        for (var _i2 = 0, _rawHeaders$trim$spli2 = rawHeaders.trim().split(\"\\n\"); _i2 < _rawHeaders$trim$spli2.length; _i2++) {\n                            var _line$split = _rawHeaders$trim$spli2[_i2].split(\":\"), key = _line$split[0], values = _line$split.slice(1);\n                            result[key.toLowerCase()] = values.join(\":\").trim();\n                        }\n                        return result;\n                    }(this.getAllResponseHeaders());\n                    if (!this.status) return reject(new Error(\"Request to \" + method.toLowerCase() + \" \" + url + \" failed: no response status code.\"));\n                    var contentType = responseHeaders[\"content-type\"];\n                    var isJSON = contentType && (0 === contentType.indexOf(\"application/json\") || 0 === contentType.indexOf(\"text/json\"));\n                    var responseBody = this.responseText;\n                    try {\n                        responseBody = JSON.parse(responseBody);\n                    } catch (err) {\n                        if (isJSON) return reject(new Error(\"Invalid json: \" + this.responseText + \".\"));\n                    }\n                    return resolve({\n                        status: this.status,\n                        headers: responseHeaders,\n                        body: responseBody\n                    });\n                }), !1);\n                xhr.addEventListener(\"error\", (function(evt) {\n                    reject(new Error(\"Request to \" + method.toLowerCase() + \" \" + url + \" failed: \" + evt.toString() + \".\"));\n                }), !1);\n                xhr.open(method, url, !0);\n                for (var _key2 in normalizedHeaders) normalizedHeaders.hasOwnProperty(_key2) && xhr.setRequestHeader(_key2, normalizedHeaders[_key2]);\n                json ? body = JSON.stringify(json) : data && (body = Object.keys(data).map((function(key) {\n                    return encodeURIComponent(key) + \"=\" + (data ? encodeURIComponent(data[key]) : \"\");\n                })).join(\"&\"));\n                xhr.timeout = timeout;\n                xhr.ontimeout = function() {\n                    reject(new Error(\"Request to \" + method.toLowerCase() + \" \" + url + \" has timed out\"));\n                };\n                xhr.send(body);\n            }));\n        }\n        function addHeaderBuilder(method) {\n            headerBuilders.push(method);\n        }\n        var types_TYPES = !0;\n        function memoized(target, name, descriptor) {\n            descriptor.value = memoize(descriptor.value, {\n                name: name,\n                thisNamespace: !0\n            });\n        }\n        function decorators_promise(target, name, descriptor) {\n            descriptor.value = promisify(descriptor.value, {\n                name: name\n            });\n        }\n        function isPerc(str) {\n            return \"string\" == typeof str && /^[0-9]+%$/.test(str);\n        }\n        function isPx(str) {\n            return \"string\" == typeof str && /^[0-9]+px$/.test(str);\n        }\n        function toNum(val) {\n            if (\"number\" == typeof val) return val;\n            var match = val.match(/^([0-9]+)(px|%)$/);\n            if (!match) throw new Error(\"Could not match css value from \" + val);\n            return parseInt(match[1], 10);\n        }\n        function toPx(val) {\n            return toNum(val) + \"px\";\n        }\n        function toCSS(val) {\n            return \"number\" == typeof val ? toPx(val) : isPerc(val) ? val : toPx(val);\n        }\n        function percOf(num, perc) {\n            return parseInt(num * toNum(perc) / 100, 10);\n        }\n        function normalizeDimension(dim, max) {\n            if (\"number\" == typeof dim) return dim;\n            if (isPerc(dim)) return percOf(max, dim);\n            if (isPx(dim)) return toNum(dim);\n            throw new Error(\"Can not normalize dimension: \" + dim);\n        }\n        function wrapPromise(method, _temp) {\n            var _ref$timeout = (void 0 === _temp ? {} : _temp).timeout, timeout = void 0 === _ref$timeout ? 5e3 : _ref$timeout;\n            var expected = [];\n            var promises = [];\n            return new zalgo_promise.ZalgoPromise((function(resolve, reject) {\n                var timer = setTimeout((function() {\n                    expected.length && reject(new Error(\"Expected \" + expected[0].name + \" to be called in \" + timeout + \"ms\"));\n                    promises.length && reject(new Error(\"Expected \" + promises[0].name + \" promise to complete in \" + timeout + \"ms\"));\n                }), timeout);\n                var expect = function(name, handler) {\n                    void 0 === handler && (handler = src_util_noop);\n                    var exp = {\n                        name: name,\n                        handler: handler\n                    };\n                    expected.push(exp);\n                    return function() {\n                        var _this = this;\n                        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) args[_key] = arguments[_key];\n                        removeFromArray(expected, exp);\n                        var _tryCatch = tryCatch((function() {\n                            var _handler;\n                            return (_handler = handler).call.apply(_handler, [ _this ].concat(args));\n                        })), result = _tryCatch.result, error = _tryCatch.error;\n                        if (error) {\n                            promises.push({\n                                name: name,\n                                promise: zalgo_promise.ZalgoPromise.asyncReject(error)\n                            });\n                            throw error;\n                        }\n                        promises.push({\n                            name: name,\n                            promise: zalgo_promise.ZalgoPromise.resolve(result)\n                        });\n                        return result;\n                    };\n                };\n                var avoid = function(name, fn) {\n                    void 0 === fn && (fn = src_util_noop);\n                    return function() {\n                        var _fn;\n                        promises.push({\n                            name: name,\n                            promise: zalgo_promise.ZalgoPromise.asyncReject(new Error(\"Expected \" + name + \" to not be called\"))\n                        });\n                        for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) args[_key2] = arguments[_key2];\n                        return (_fn = fn).call.apply(_fn, [ this ].concat(args));\n                    };\n                };\n                var expectError = function(name, handler) {\n                    void 0 === handler && (handler = src_util_noop);\n                    var exp = {\n                        name: name,\n                        handler: handler\n                    };\n                    expected.push(exp);\n                    return function() {\n                        var _this2 = this;\n                        for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) args[_key3] = arguments[_key3];\n                        removeFromArray(expected, exp);\n                        var _tryCatch2 = tryCatch((function() {\n                            var _handler2;\n                            return (_handler2 = handler).call.apply(_handler2, [ _this2 ].concat(args));\n                        })), result = _tryCatch2.result, error = _tryCatch2.error;\n                        if (error) throw error;\n                        promises.push({\n                            name: name,\n                            promise: zalgo_promise.ZalgoPromise.resolve(result).then((function() {\n                                throw new Error(\"Expected \" + name + \" to throw an error\");\n                            }), src_util_noop)\n                        });\n                        return result;\n                    };\n                };\n                promises.push({\n                    name: \"wrapPromise handler\",\n                    promise: zalgo_promise.ZalgoPromise.try((function() {\n                        return method({\n                            expect: expect,\n                            avoid: avoid,\n                            expectError: expectError,\n                            error: avoid,\n                            wait: function() {\n                                return zalgo_promise.ZalgoPromise.resolve();\n                            }\n                        });\n                    }))\n                });\n                (function wait() {\n                    return zalgo_promise.ZalgoPromise.try((function() {\n                        if (promises.length) {\n                            var prom = promises[0];\n                            return prom.promise.finally((function() {\n                                removeFromArray(promises, prom);\n                            })).then(wait);\n                        }\n                    })).then((function() {\n                        if (expected.length) return zalgo_promise.ZalgoPromise.delay(10).then(wait);\n                    }));\n                })().finally((function() {\n                    clearTimeout(timer);\n                })).then(resolve, reject);\n            }));\n        }\n    } ]);\n}));","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(\"xdsweakmap\",[],t):\"object\"==typeof exports?exports.xdsweakmap=t():e.xdsweakmap=t()}(\"undefined\"!=typeof self?self:this,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return{}.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=0)}([function(e,t,r){\"use strict\";r.r(t),r.d(t,\"WeakMap\",(function(){return l}));var n=\"Call was rejected by callee.\\r\\n\";function i(e){return void 0===e&&(e=window),\"about:\"===e.location.protocol}function a(e){try{return!0}catch(e){}return!1}function o(e){void 0===e&&(e=window);var t=e.location;if(!t)throw new Error(\"Can not read window location\");var r=t.protocol;if(!r)throw new Error(\"Can not read window protocol\");if(\"file:\"===r)return\"file://\";if(\"about:\"===r){var n=function(e){if(void 0===e&&(e=window),e)try{if(e.parent&&e.parent!==e)return e.parent}catch(e){}}(e);return n&&a()?o(n):\"about://\"}var i=t.host;if(!i)throw new Error(\"Can not read window host\");return r+\"//\"+i}function c(e){void 0===e&&(e=window);var t=o(e);return t&&e.mockDomain&&0===e.mockDomain.indexOf(\"mock:\")?e.mockDomain:t}var u=[],f=[];function s(e,t){void 0===t&&(t=!0);try{if(e===window)return!1}catch(e){return!0}try{if(!e)return!0}catch(e){return!0}try{if(e.closed)return!0}catch(e){return!e||e.message!==n}if(t&&function(e){if(!function(e){try{if(e===window)return!0}catch(e){}try{var t=Object.getOwnPropertyDescriptor(e,\"location\");if(t&&!1===t.enumerable)return!1}catch(e){}try{if(i(e)&&a())return!0}catch(e){}try{if(o(e)===o(window))return!0}catch(e){}return!1}(e))return!1;try{if(e===window)return!0;if(i(e)&&a())return!0;if(c(window)===c(e))return!0}catch(e){}return!1}(e))try{if(e.mockclosed)return!0}catch(e){}try{if(!e.parent||!e.top)return!0}catch(e){}var r=function(e,t){for(var r=0;r<e.length;r++)try{if(e[r]===t)return r}catch(e){}return-1}(u,e);if(-1!==r){var s=f[r];if(s&&function(e){if(!e.contentWindow)return!0;if(!e.parentNode)return!0;var t=e.ownerDocument;if(t&&t.documentElement&&!t.documentElement.contains(e)){for(var r=e;r.parentNode&&r.parentNode!==r;)r=r.parentNode;if(!r.host||!t.documentElement.contains(r.host))return!0}return!1}(s))return!0}return!1}function d(e){try{if(e===window)return!0}catch(e){if(e&&e.message===n)return!0}try{if(\"[object Window]\"==={}.toString.call(e))return!0}catch(e){if(e&&e.message===n)return!0}try{if(window.Window&&e instanceof window.Window)return!0}catch(e){if(e&&e.message===n)return!0}try{if(e&&e.self===e)return!0}catch(e){if(e&&e.message===n)return!0}try{if(e&&e.parent===e)return!0}catch(e){if(e&&e.message===n)return!0}try{if(e&&e.top===e)return!0}catch(e){if(e&&e.message===n)return!0}try{if(e&&\"__unlikely_value__\"===e.__cross_domain_utils_window_check__)return!1}catch(e){return!0}try{if(\"postMessage\"in e&&\"self\"in e&&\"location\"in e)return!0}catch(e){}return!1}function h(e,t){for(var r=0;r<e.length;r++)try{if(e[r]===t)return r}catch(e){}return-1}var l=function(){function e(){if(this.name=void 0,this.weakmap=void 0,this.keys=void 0,this.values=void 0,this.name=\"__weakmap_\"+(1e9*Math.random()>>>0)+\"__\",function(){if(\"undefined\"==typeof WeakMap)return!1;if(void 0===Object.freeze)return!1;try{var e=new WeakMap,t={};return Object.freeze(t),e.set(t,\"__testvalue__\"),\"__testvalue__\"===e.get(t)}catch(e){return!1}}())try{this.weakmap=new WeakMap}catch(e){}this.keys=[],this.values=[]}var t=e.prototype;return t._cleanupClosedWindows=function(){for(var e=this.weakmap,t=this.keys,r=0;r<t.length;r++){var n=t[r];if(d(n)&&s(n)){if(e)try{e.delete(n)}catch(e){}t.splice(r,1),this.values.splice(r,1),r-=1}}},t.isSafeToReadWrite=function(e){return!d(e)},t.set=function(e,t){if(!e)throw new Error(\"WeakMap expected key\");var r=this.weakmap;if(r)try{r.set(e,t)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e))try{var n=this.name,i=e[n];return void(i&&i[0]===e?i[1]=t:Object.defineProperty(e,n,{value:[e,t],writable:!0}))}catch(e){}this._cleanupClosedWindows();var a=this.keys,o=this.values,c=h(a,e);-1===c?(a.push(e),o.push(t)):o[c]=t},t.get=function(e){if(!e)throw new Error(\"WeakMap expected key\");var t=this.weakmap;if(t)try{if(t.has(e))return t.get(e)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e))try{var r=e[this.name];return r&&r[0]===e?r[1]:void 0}catch(e){}this._cleanupClosedWindows();var n=h(this.keys,e);if(-1!==n)return this.values[n]},t.delete=function(e){if(!e)throw new Error(\"WeakMap expected key\");var t=this.weakmap;if(t)try{t.delete(e)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e))try{var r=e[this.name];r&&r[0]===e&&(r[0]=r[1]=void 0)}catch(e){}this._cleanupClosedWindows();var n=this.keys,i=h(n,e);-1!==i&&(n.splice(i,1),this.values.splice(i,1))},t.has=function(e){if(!e)throw new Error(\"WeakMap expected key\");var t=this.weakmap;if(t)try{if(t.has(e))return!0}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e))try{var r=e[this.name];return!(!r||r[0]!==e)}catch(e){}return this._cleanupClosedWindows(),-1!==h(this.keys,e)},t.getOrSet=function(e,t){if(this.has(e))return this.get(e);var r=t();return this.set(e,r),r},e}()}])}));\n//# sourceMappingURL=cross-domain-safe-weakmap.js.map","!function(e,n){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=n():\"function\"==typeof define&&define.amd?define(\"universal-serialize\",[],n):\"object\"==typeof exports?exports[\"universal-serialize\"]=n():e[\"universal-serialize\"]=n()}(\"undefined\"!=typeof self?self:this,(function(){return function(e){var n={};function r(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=n,r.d=function(e,n,t){r.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,n){if(1&n&&(e=r(e)),8&n)return e;if(4&n&&\"object\"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,\"default\",{enumerable:!0,value:e}),2&n&&\"string\"!=typeof e)for(var i in e)r.d(t,i,function(n){return e[n]}.bind(null,i));return t},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,\"a\",n),n},r.o=function(e,n){return{}.hasOwnProperty.call(e,n)},r.p=\"\",r(r.s=0)}([function(e,n,r){\"use strict\";r.r(n),r.d(n,\"serialize\",(function(){return P})),r.d(n,\"deserialize\",(function(){return h})),r.d(n,\"serializeArray\",(function(){return c})),r.d(n,\"deserializeArray\",(function(){return a})),r.d(n,\"serializeBoolean\",(function(){return d})),r.d(n,\"deserializeBoolean\",(function(){return l})),r.d(n,\"serializeDate\",(function(){return s})),r.d(n,\"deserializeDate\",(function(){return E})),r.d(n,\"serializeError\",(function(){return p})),r.d(n,\"deserializeError\",(function(){return y})),r.d(n,\"serializeFunction\",(function(){return O})),r.d(n,\"deserializeFunction\",(function(){return z})),r.d(n,\"serializeNumber\",(function(){return v})),r.d(n,\"deserializeNumber\",(function(){return b})),r.d(n,\"serializeObject\",(function(){return N})),r.d(n,\"deserializeObject\",(function(){return R})),r.d(n,\"serializePromise\",(function(){return _})),r.d(n,\"deserializePromise\",(function(){return m})),r.d(n,\"serializeRegex\",(function(){return g})),r.d(n,\"deserializeRegex\",(function(){return T})),r.d(n,\"serializeString\",(function(){return D})),r.d(n,\"deserializeString\",(function(){return S})),r.d(n,\"serializeNull\",(function(){return A})),r.d(n,\"deserializeNull\",(function(){return U})),r.d(n,\"serializeUndefined\",(function(){return I})),r.d(n,\"deserializeUndefined\",(function(){return j})),r.d(n,\"TYPE\",(function(){return i})),r.d(n,\"isSerializedType\",(function(){return u})),r.d(n,\"determineType\",(function(){return o})),r.d(n,\"serializeType\",(function(){return f})),r.d(n,\"TYPES\",(function(){return G}));var t,i={FUNCTION:\"function\",ERROR:\"error\",PROMISE:\"promise\",REGEX:\"regex\",DATE:\"date\",ARRAY:\"array\",OBJECT:\"object\",STRING:\"string\",NUMBER:\"number\",BOOLEAN:\"boolean\",NULL:\"null\",UNDEFINED:\"undefined\"};function u(e){return\"object\"==typeof e&&null!==e&&\"string\"==typeof e.__type__}function o(e){return void 0===e?i.UNDEFINED:null===e?i.NULL:Array.isArray(e)?i.ARRAY:\"function\"==typeof e?i.FUNCTION:\"object\"==typeof e?e instanceof Error?i.ERROR:\"function\"==typeof e.then?i.PROMISE:\"[object RegExp]\"==={}.toString.call(e)?i.REGEX:\"[object Date]\"==={}.toString.call(e)?i.DATE:i.OBJECT:\"string\"==typeof e?i.STRING:\"number\"==typeof e?i.NUMBER:\"boolean\"==typeof e?i.BOOLEAN:void 0}function f(e,n){return{__type__:e,__val__:n}}function c(e){return e}function a(e){return e}function d(e){return e}function l(e){return e}function s(e){return f(i.DATE,e.toJSON())}function E(e){return new Date(e)}function N(e){return e}function R(e){return e}function p(e){return f(i.ERROR,{message:e.message,stack:e.stack,code:e.code,data:e.data})}function y(e){var n=e.stack,r=e.code,t=e.data,i=new Error(e.message);return i.code=r,t&&(i.data=t),i.stack=n+\"\\n\\n\"+i.stack,i}function O(){}function z(){throw new Error(\"Function serialization is not implemented; nothing to deserialize\")}function v(e){return e}function b(e){return e}function _(){}function m(){throw new Error(\"Promise serialization is not implemented; nothing to deserialize\")}function g(e){return f(i.REGEX,e.source)}function T(e){return new RegExp(e)}function D(e){return e}function S(e){return e}function A(e){return e}function U(e){return e}function I(e){return f(i.UNDEFINED,e)}function j(){}var x,B=((t={})[i.FUNCTION]=O,t[i.ERROR]=p,t[i.PROMISE]=_,t[i.REGEX]=g,t[i.DATE]=s,t[i.ARRAY]=c,t[i.OBJECT]=N,t[i.STRING]=D,t[i.NUMBER]=v,t[i.BOOLEAN]=d,t[i.NULL]=A,t[i.UNDEFINED]=I,t),F={};function P(e,n){void 0===n&&(n=F);var r=JSON.stringify(e,(function(e){var r=this[e];if(u(this))return r;var t=o(r);if(!t)return r;var i=n[t]||B[t];return i?i(r,e):r}));return void 0===r?i.UNDEFINED:r}var L=((x={})[i.FUNCTION]=z,x[i.ERROR]=y,x[i.PROMISE]=m,x[i.REGEX]=T,x[i.DATE]=E,x[i.ARRAY]=a,x[i.OBJECT]=R,x[i.STRING]=S,x[i.NUMBER]=b,x[i.BOOLEAN]=l,x[i.NULL]=U,x[i.UNDEFINED]=j,x),M={};function h(e,n){if(void 0===n&&(n=M),e!==i.UNDEFINED)return JSON.parse(e,(function(e,r){if(u(this))return r;var t,i;if(u(r)?(t=r.__type__,i=r.__val__):(t=o(r),i=r),!t)return i;var f=n[t]||L[t];return f?f(i,e):i}))}var G=!0}])}));\n//# sourceMappingURL=universal-serialize.js.map","export function isRegex(item) {\n  return Object.prototype.toString.call(item) === '[object RegExp]';\n} // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\nexport function noop() {// pass\n}","export var PROTOCOL = {\n  MOCK: 'mock:',\n  FILE: 'file:',\n  ABOUT: 'about:'\n};\nexport var WILDCARD = '*';\nexport var WINDOW_TYPE = {\n  IFRAME: 'iframe',\n  POPUP: 'popup'\n};","/* eslint max-lines: 0 */\nimport { isRegex, noop } from './util';\nimport { PROTOCOL, WILDCARD } from './constants';\nvar IE_WIN_ACCESS_ERROR = 'Call was rejected by callee.\\r\\n';\nexport function isFileProtocol(win) {\n  if (win === void 0) {\n    win = window;\n  }\n\n  return win.location.protocol === PROTOCOL.FILE;\n}\nexport function isAboutProtocol(win) {\n  if (win === void 0) {\n    win = window;\n  }\n\n  return win.location.protocol === PROTOCOL.ABOUT;\n}\nexport function getParent(win) {\n  if (win === void 0) {\n    win = window;\n  }\n\n  if (!win) {\n    return;\n  }\n\n  try {\n    if (win.parent && win.parent !== win) {\n      return win.parent;\n    }\n  } catch (err) {// pass\n  }\n}\nexport function getOpener(win) {\n  if (win === void 0) {\n    win = window;\n  }\n\n  if (!win) {\n    return;\n  } // Make sure we're not actually an iframe which has had window.open() called on us\n\n\n  if (getParent(win)) {\n    return;\n  }\n\n  try {\n    return win.opener;\n  } catch (err) {// pass\n  }\n}\nexport function canReadFromWindow(win) {\n  try {\n    noop(win && win.location && win.location.href);\n    return true;\n  } catch (err) {// pass\n  }\n\n  return false;\n}\nexport function getActualDomain(win) {\n  if (win === void 0) {\n    win = window;\n  }\n\n  var location = win.location;\n\n  if (!location) {\n    throw new Error(\"Can not read window location\");\n  }\n\n  var protocol = location.protocol;\n\n  if (!protocol) {\n    throw new Error(\"Can not read window protocol\");\n  }\n\n  if (protocol === PROTOCOL.FILE) {\n    return PROTOCOL.FILE + \"//\";\n  }\n\n  if (protocol === PROTOCOL.ABOUT) {\n    // @ts-ignore - trying to reassing to something that might be window\n    var parent = getParent(win);\n\n    if (parent && canReadFromWindow(parent)) {\n      // @ts-ignore\n      return getActualDomain(parent);\n    }\n\n    return PROTOCOL.ABOUT + \"//\";\n  }\n\n  var host = location.host;\n\n  if (!host) {\n    throw new Error(\"Can not read window host\");\n  }\n\n  return protocol + \"//\" + host;\n} // @ts-ignore\n\nexport function getDomain(win) {\n  if (win === void 0) {\n    win = window;\n  }\n\n  var domain = getActualDomain(win); // @ts-ignore - mockDomain\n\n  if (domain && win.mockDomain && win.mockDomain.indexOf(PROTOCOL.MOCK) === 0) {\n    // @ts-ignore - mockDomain\n    return win.mockDomain;\n  }\n\n  return domain;\n}\nexport function isBlankDomain(win) {\n  try {\n    if (!win.location.href) {\n      return true;\n    }\n\n    if (win.location.href === 'about:blank') {\n      return true;\n    }\n  } catch (err) {// pass\n  }\n\n  return false;\n}\nexport function isActuallySameDomain(win) {\n  try {\n    if (win === window) {\n      return true;\n    }\n  } catch (err) {// pass\n  }\n\n  try {\n    var desc = Object.getOwnPropertyDescriptor(win, 'location');\n\n    if (desc && desc.enumerable === false) {\n      return false;\n    }\n  } catch (err) {// pass\n  }\n\n  try {\n    if (isAboutProtocol(win) && canReadFromWindow(win)) {\n      return true;\n    }\n  } catch (err) {// pass\n  }\n\n  try {\n    if (getActualDomain(win) === getActualDomain(window)) {\n      return true;\n    }\n  } catch (err) {// pass\n  }\n\n  return false;\n}\nexport function isSameDomain(win) {\n  // @ts-ignore\n  if (!isActuallySameDomain(win)) {\n    return false;\n  }\n\n  try {\n    if (win === window) {\n      return true;\n    }\n\n    if (isAboutProtocol(win) && canReadFromWindow(win)) {\n      return true;\n    }\n\n    if (getDomain(window) === getDomain(win)) {\n      return true;\n    }\n  } catch (err) {// pass\n  }\n\n  return false;\n}\nexport function assertSameDomain(win) {\n  if (!isSameDomain(win)) {\n    throw new Error(\"Expected window to be same domain\");\n  }\n\n  return win;\n}\nexport function getParents(win) {\n  var result = [];\n\n  try {\n    while (win.parent !== win) {\n      result.push(win.parent);\n      win = win.parent;\n    }\n  } catch (err) {// pass\n  }\n\n  return result;\n}\nexport function isAncestorParent(parent, child) {\n  if (!parent || !child) {\n    return false;\n  }\n\n  var childParent = getParent(child);\n\n  if (childParent) {\n    return childParent === parent;\n  }\n\n  if (getParents(child).indexOf(parent) !== -1) {\n    return true;\n  }\n\n  return false;\n}\nexport function getFrames(win) {\n  var result = [];\n  var frames;\n\n  try {\n    frames = win.frames;\n  } catch (err) {\n    frames = win;\n  }\n\n  var len;\n\n  try {\n    len = frames.length;\n  } catch (err) {// pass\n  }\n\n  if (len === 0) {\n    return result;\n  }\n\n  if (len) {\n    for (var i = 0; i < len; i++) {\n      var frame = void 0;\n\n      try {\n        frame = frames[i];\n      } catch (err) {\n        continue;\n      }\n\n      result.push(frame);\n    }\n\n    return result;\n  }\n\n  for (var _i = 0; _i < 100; _i++) {\n    var _frame = void 0;\n\n    try {\n      _frame = frames[_i];\n    } catch (err) {\n      return result;\n    }\n\n    if (!_frame) {\n      return result;\n    }\n\n    result.push(_frame);\n  }\n\n  return result;\n}\nexport function getAllChildFrames(win) {\n  var result = [];\n\n  for (var _i3 = 0, _getFrames2 = getFrames(win); _i3 < _getFrames2.length; _i3++) {\n    var frame = _getFrames2[_i3];\n    result.push(frame);\n\n    for (var _i5 = 0, _getAllChildFrames2 = getAllChildFrames(frame); _i5 < _getAllChildFrames2.length; _i5++) {\n      var childFrame = _getAllChildFrames2[_i5];\n      result.push(childFrame);\n    }\n  }\n\n  return result;\n}\nexport function getTop(win) {\n  if (win === void 0) {\n    win = window;\n  }\n\n  try {\n    if (win.top) {\n      return win.top;\n    }\n  } catch (err) {// pass\n  }\n\n  if (getParent(win) === win) {\n    return win;\n  }\n\n  try {\n    if (isAncestorParent(window, win) && window.top) {\n      return window.top;\n    }\n  } catch (err) {// pass\n  }\n\n  try {\n    if (isAncestorParent(win, window) && window.top) {\n      return window.top;\n    }\n  } catch (err) {// pass\n  }\n\n  for (var _i7 = 0, _getAllChildFrames4 = getAllChildFrames(win); _i7 < _getAllChildFrames4.length; _i7++) {\n    var frame = _getAllChildFrames4[_i7];\n\n    try {\n      if (frame.top) {\n        return frame.top;\n      }\n    } catch (err) {// pass\n    }\n\n    if (getParent(frame) === frame) {\n      return frame;\n    }\n  }\n}\nexport function getNextOpener(win) {\n  if (win === void 0) {\n    win = window;\n  }\n\n  return getOpener(getTop(win) || win);\n}\nexport function getUltimateTop(win) {\n  if (win === void 0) {\n    win = window;\n  }\n\n  var opener = getNextOpener(win);\n\n  if (opener) {\n    return getUltimateTop(opener);\n  }\n\n  return top;\n}\nexport function getAllFramesInWindow(win) {\n  var top = getTop(win);\n\n  if (!top) {\n    throw new Error(\"Can not determine top window\");\n  }\n\n  var result = [].concat(getAllChildFrames(top), [top]); // Win may be in shadow dom\n\n  if (result.indexOf(win) === -1) {\n    result = [].concat(result, [win], getAllChildFrames(win));\n  }\n\n  return result;\n}\nexport function getAllWindows(win) {\n  if (win === void 0) {\n    win = window;\n  }\n\n  var frames = getAllFramesInWindow(win);\n  var opener = getNextOpener(win);\n\n  if (opener) {\n    return [].concat(getAllWindows(opener), frames);\n  } else {\n    return frames;\n  }\n}\nexport function isTop(win) {\n  return win === getTop(win);\n}\nexport function isFrameWindowClosed(frame) {\n  if (!frame.contentWindow) {\n    return true;\n  }\n\n  if (!frame.parentNode) {\n    return true;\n  }\n\n  var doc = frame.ownerDocument;\n\n  if (doc && doc.documentElement && !doc.documentElement.contains(frame)) {\n    var parent = frame;\n\n    while (parent.parentNode && parent.parentNode !== parent) {\n      // @ts-ignore\n      parent = parent.parentNode;\n    } // @ts-ignore\n\n\n    if (!parent.host || !doc.documentElement.contains(parent.host)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction safeIndexOf(collection, item) {\n  for (var i = 0; i < collection.length; i++) {\n    try {\n      if (collection[i] === item) {\n        return i;\n      }\n    } catch (err) {// pass\n    }\n  }\n\n  return -1;\n}\n\nvar iframeWindows = [];\nvar iframeFrames = [];\nexport function isWindowClosed(win, allowMock) {\n  if (allowMock === void 0) {\n    allowMock = true;\n  }\n\n  try {\n    if (win === window) {\n      return false;\n    }\n  } catch (err) {\n    return true;\n  }\n\n  try {\n    if (!win) {\n      return true;\n    }\n  } catch (err) {\n    return true;\n  }\n\n  try {\n    if (win.closed) {\n      return true;\n    }\n  } catch (err) {\n    // I love you so much IE\n    if (err && err.message === IE_WIN_ACCESS_ERROR) {\n      return false;\n    }\n\n    return true;\n  }\n\n  if (allowMock && isSameDomain(win)) {\n    try {\n      // @ts-ignore\n      if (win.mockclosed) {\n        return true;\n      }\n    } catch (err) {// pass\n    }\n  } // Mobile safari\n\n\n  try {\n    if (!win.parent || !win.top) {\n      return true;\n    }\n  } catch (err) {// pass\n  } // Yes, this actually happens in IE. win === win errors out when the window\n  // is from an iframe, and the iframe was removed from the page.\n\n\n  try {\n    noop(win === win); // eslint-disable-line no-self-compare\n  } catch (err) {\n    return true;\n  } // IE orphaned frame\n\n\n  var iframeIndex = safeIndexOf(iframeWindows, win);\n\n  if (iframeIndex !== -1) {\n    var frame = iframeFrames[iframeIndex];\n\n    if (frame && isFrameWindowClosed(frame)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction cleanIframes() {\n  for (var i = 0; i < iframeWindows.length; i++) {\n    var closed = false;\n\n    try {\n      closed = iframeWindows[i].closed;\n    } catch (err) {// pass\n    }\n\n    if (closed) {\n      iframeFrames.splice(i, 1);\n      iframeWindows.splice(i, 1);\n    }\n  }\n}\n\nexport function linkFrameWindow(frame) {\n  cleanIframes();\n\n  if (frame && frame.contentWindow) {\n    try {\n      iframeWindows.push(frame.contentWindow);\n      iframeFrames.push(frame);\n    } catch (err) {// pass\n    }\n  }\n}\nexport function getUserAgent(win) {\n  win = win || window; // @ts-ignore\n\n  return win.navigator.mockUserAgent || win.navigator.userAgent;\n}\nexport function getFrameByName(win, name) {\n  var winFrames = getFrames(win);\n\n  for (var _i9 = 0; _i9 < winFrames.length; _i9++) {\n    var childFrame = winFrames[_i9];\n\n    try {\n      if (isSameDomain(childFrame) && childFrame.name === name && winFrames.indexOf(childFrame) !== -1) {\n        return childFrame;\n      }\n    } catch (err) {// pass\n    }\n  }\n\n  try {\n    // @ts-ignore\n    if (winFrames.indexOf(win.frames[name]) !== -1) {\n      // @ts-ignore\n      return win.frames[name];\n    }\n  } catch (err) {// pass\n  }\n\n  try {\n    // @ts-ignore\n    if (winFrames.indexOf(win[name]) !== -1) {\n      // @ts-ignore\n      return win[name];\n    }\n  } catch (err) {// pass\n  }\n}\nexport function findChildFrameByName(win, name) {\n  var frame = getFrameByName(win, name);\n\n  if (frame) {\n    return frame;\n  }\n\n  for (var _i11 = 0, _getFrames4 = getFrames(win); _i11 < _getFrames4.length; _i11++) {\n    var childFrame = _getFrames4[_i11];\n    var namedFrame = findChildFrameByName(childFrame, name);\n\n    if (namedFrame) {\n      return namedFrame;\n    }\n  }\n}\nexport function findFrameByName(win, name) {\n  var frame = getFrameByName(win, name);\n\n  if (frame) {\n    return frame;\n  }\n\n  var top = getTop(win) || win;\n  return findChildFrameByName(top, name);\n}\nexport function isParent(win, frame) {\n  var frameParent = getParent(frame);\n\n  if (frameParent) {\n    return frameParent === win;\n  }\n\n  for (var _i13 = 0, _getFrames6 = getFrames(win); _i13 < _getFrames6.length; _i13++) {\n    var childFrame = _getFrames6[_i13];\n\n    if (childFrame === frame) {\n      return true;\n    }\n  }\n\n  return false;\n}\nexport function isOpener(parent, child) {\n  return parent === getOpener(child);\n}\nexport function getAncestor(win) {\n  if (win === void 0) {\n    win = window;\n  }\n\n  win = win || window;\n  var opener = getOpener(win);\n\n  if (opener) {\n    return opener;\n  }\n\n  var parent = getParent(win);\n\n  if (parent) {\n    return parent;\n  }\n}\nexport function getAncestors(win) {\n  var results = [];\n  var ancestor = win;\n\n  while (ancestor) {\n    // @ts-ignore\n    ancestor = getAncestor(ancestor);\n\n    if (ancestor) {\n      results.push(ancestor);\n    }\n  }\n\n  return results;\n}\nexport function isAncestor(parent, child) {\n  var actualParent = getAncestor(child);\n\n  if (actualParent) {\n    if (actualParent === parent) {\n      return true;\n    }\n\n    return false;\n  }\n\n  if (child === parent) {\n    return false;\n  }\n\n  if (getTop(child) === child) {\n    return false;\n  }\n\n  for (var _i15 = 0, _getFrames8 = getFrames(parent); _i15 < _getFrames8.length; _i15++) {\n    var frame = _getFrames8[_i15];\n\n    if (frame === child) {\n      return true;\n    }\n  }\n\n  return false;\n}\nexport function isPopup(win) {\n  if (win === void 0) {\n    win = window;\n  }\n\n  return Boolean(getOpener(win));\n}\nexport function isIframe(win) {\n  if (win === void 0) {\n    win = window;\n  }\n\n  return Boolean(getParent(win));\n}\nexport function isFullpage(win) {\n  if (win === void 0) {\n    win = window;\n  }\n\n  return Boolean(!isIframe(win) && !isPopup(win));\n}\n\nfunction anyMatch(collection1, collection2) {\n  for (var _i17 = 0; _i17 < collection1.length; _i17++) {\n    var item1 = collection1[_i17];\n\n    for (var _i19 = 0; _i19 < collection2.length; _i19++) {\n      var item2 = collection2[_i19];\n\n      if (item1 === item2) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nexport function getDistanceFromTop(win) {\n  if (win === void 0) {\n    win = window;\n  }\n\n  var distance = 0;\n  var parent = win;\n\n  while (parent) {\n    // @ts-ignore - trying to reassing to something that might be window\n    parent = getParent(parent);\n\n    if (parent) {\n      distance += 1;\n    }\n  }\n\n  return distance;\n}\nexport function getNthParent(win, n) {\n  if (n === void 0) {\n    n = 1;\n  }\n\n  var parent = win;\n\n  for (var i = 0; i < n; i++) {\n    if (!parent) {\n      return;\n    } // @ts-ignore - trying to reassing to something that might be window\n\n\n    parent = getParent(parent);\n  }\n\n  return parent;\n}\nexport function getNthParentFromTop(win, n) {\n  if (n === void 0) {\n    n = 1;\n  }\n\n  return getNthParent(win, getDistanceFromTop(win) - n);\n}\nexport function isSameTopWindow(win1, win2) {\n  var top1 = getTop(win1) || win1;\n  var top2 = getTop(win2) || win2;\n\n  try {\n    if (top1 && top2) {\n      if (top1 === top2) {\n        return true;\n      }\n\n      return false;\n    }\n  } catch (err) {// pass\n  }\n\n  var allFrames1 = getAllFramesInWindow(win1);\n  var allFrames2 = getAllFramesInWindow(win2);\n\n  if (anyMatch(allFrames1, allFrames2)) {\n    return true;\n  }\n\n  var opener1 = getOpener(top1);\n  var opener2 = getOpener(top2);\n\n  if (opener1 && anyMatch(getAllFramesInWindow(opener1), allFrames2)) {\n    return false;\n  }\n\n  if (opener2 && anyMatch(getAllFramesInWindow(opener2), allFrames1)) {\n    return false;\n  }\n\n  return false;\n}\nexport function matchDomain(pattern, origin) {\n  if (typeof pattern === 'string') {\n    if (typeof origin === 'string') {\n      return pattern === WILDCARD || origin === pattern;\n    }\n\n    if (isRegex(origin)) {\n      return false;\n    }\n\n    if (Array.isArray(origin)) {\n      return false;\n    }\n  }\n\n  if (isRegex(pattern)) {\n    if (isRegex(origin)) {\n      return pattern.toString() === origin.toString();\n    }\n\n    if (Array.isArray(origin)) {\n      return false;\n    } // @ts-ignore - earlier already shortcutted the string case\n\n\n    return Boolean(origin.match(pattern));\n  }\n\n  if (Array.isArray(pattern)) {\n    if (Array.isArray(origin)) {\n      return JSON.stringify(pattern) === JSON.stringify(origin);\n    }\n\n    if (isRegex(origin)) {\n      return false;\n    }\n\n    return pattern.some(function (subpattern) {\n      return matchDomain(subpattern, origin);\n    });\n  }\n\n  return false;\n}\nexport function stringifyDomainPattern(pattern) {\n  if (Array.isArray(pattern)) {\n    return \"(\" + pattern.join(' | ') + \")\";\n  } else if (isRegex(pattern)) {\n    return \"RegExp(\" + pattern.toString() + \")\";\n  } else {\n    return pattern.toString();\n  }\n}\nexport function getDomainFromUrl(url) {\n  var domain;\n\n  if (url.match(/^(https?|mock|file):\\/\\//)) {\n    domain = url;\n  } else {\n    return getDomain();\n  }\n\n  domain = domain.split('/').slice(0, 3).join('/');\n  return domain;\n}\nexport function onCloseWindow(win, callback, delay, maxtime) {\n  if (delay === void 0) {\n    delay = 1000;\n  }\n\n  if (maxtime === void 0) {\n    maxtime = Infinity;\n  }\n\n  var timeout;\n\n  var check = function check() {\n    if (isWindowClosed(win)) {\n      if (timeout) {\n        clearTimeout(timeout);\n      }\n\n      return callback();\n    }\n\n    if (maxtime <= 0) {\n      clearTimeout(timeout);\n    } else {\n      maxtime -= delay;\n      timeout = setTimeout(check, delay);\n    }\n  };\n\n  check();\n  return {\n    cancel: function cancel() {\n      if (timeout) {\n        clearTimeout(timeout);\n      }\n    }\n  };\n} // eslint-disable-next-line complexity\n\nexport function isWindow(obj) {\n  try {\n    if (obj === window) {\n      return true;\n    }\n  } catch (err) {\n    if (err && err.message === IE_WIN_ACCESS_ERROR) {\n      return true;\n    }\n  }\n\n  try {\n    if (Object.prototype.toString.call(obj) === '[object Window]') {\n      return true;\n    }\n  } catch (err) {\n    if (err && err.message === IE_WIN_ACCESS_ERROR) {\n      return true;\n    }\n  }\n\n  try {\n    if (window.Window && obj instanceof window.Window) {\n      return true;\n    }\n  } catch (err) {\n    if (err && err.message === IE_WIN_ACCESS_ERROR) {\n      return true;\n    }\n  }\n\n  try {\n    if (obj && obj.self === obj) {\n      return true;\n    }\n  } catch (err) {\n    if (err && err.message === IE_WIN_ACCESS_ERROR) {\n      return true;\n    }\n  }\n\n  try {\n    if (obj && obj.parent === obj) {\n      return true;\n    }\n  } catch (err) {\n    if (err && err.message === IE_WIN_ACCESS_ERROR) {\n      return true;\n    }\n  }\n\n  try {\n    if (obj && obj.top === obj) {\n      return true;\n    }\n  } catch (err) {\n    if (err && err.message === IE_WIN_ACCESS_ERROR) {\n      return true;\n    }\n  }\n\n  try {\n    // @ts-ignore this equality check is a self compare\n    if (noop(obj === obj) === '__unlikely_value__') {\n      // eslint-disable-line no-self-compare\n      return false;\n    }\n  } catch (err) {\n    return true;\n  }\n\n  try {\n    if (obj && obj.__cross_domain_utils_window_check__ === '__unlikely_value__') {\n      return false;\n    }\n  } catch (err) {\n    return true;\n  }\n\n  try {\n    if ('postMessage' in obj && 'self' in obj && 'location' in obj) {\n      return true;\n    }\n  } catch (err) {// pass\n  }\n\n  return false;\n}\nexport function isBrowser() {\n  return typeof window !== 'undefined' && typeof window.location !== 'undefined';\n}\nexport function isCurrentDomain(domain) {\n  if (!isBrowser()) {\n    return false;\n  }\n\n  return getDomain() === domain;\n}\nexport function isMockDomain(domain) {\n  return domain.indexOf(PROTOCOL.MOCK) === 0;\n}\nexport function normalizeMockUrl(url) {\n  if (!isMockDomain(getDomainFromUrl(url))) {\n    return url;\n  } // @ts-ignore - global\n\n\n  if (!__TEST__) {\n    throw new Error(\"Mock urls not supported out of test mode\");\n  }\n\n  return url.replace(/^mock:\\/\\/[^/]+/, getActualDomain(window));\n}\nexport function closeWindow(win) {\n  try {\n    win.close();\n  } catch (err) {// pass\n  }\n}\nexport function getFrameForWindow(win) {\n  if (isSameDomain(win)) {\n    // @ts-ignore\n    return assertSameDomain(win).frameElement;\n  } // @ts-ignore not an array type, but is iterable so fine\n\n\n  for (var _i21 = 0, _document$querySelect2 = document.querySelectorAll('iframe'); _i21 < _document$querySelect2.length; _i21++) {\n    var frame = _document$querySelect2[_i21];\n\n    if (frame && frame.contentWindow && frame.contentWindow === win) {\n      return frame;\n    }\n  }\n}","// export something to force webpack to see this as an ES module\nexport var TYPES = true;","import type {\n    CrossDomainWindowType,\n    SameDomainWindowType\n} from 'cross-domain-utils';\nimport { WeakMap } from 'cross-domain-safe-weakmap';\nimport { getOrSet, getCurrentScriptUID } from 'belter';\n\nexport function getGlobalKey(): string {\n    if (__POST_ROBOT__.__SCRIPT_NAMESPACE__) {\n        return `${ __POST_ROBOT__.__GLOBAL_KEY__ }_${ getCurrentScriptUID() }`;\n    } else {\n        return __POST_ROBOT__.__GLOBAL_KEY__;\n    }\n}\nexport function getGlobal(\n    win: SameDomainWindowType = window\n): Record<string, any> {\n    const globalKey = getGlobalKey();\n\n    if (win !== window) {\n        // @ts-ignore\n        return win[globalKey];\n    }\n\n    // @ts-ignore\n    const global: Record<string, any> = (win[globalKey] = win[globalKey] || {});\n    return global;\n}\nexport function deleteGlobal(): void {\n    const globalKey = getGlobalKey();\n    // @ts-ignore\n    delete window[globalKey];\n}\n\ntype ObjectGetter = () => Record<string, any>;\n\nconst getObj: ObjectGetter = () => ({});\n\ntype GetOrSet<T> = ((arg0: string, arg1: () => T) => T) &\n    ((arg0: string, arg1: () => void) => void);\n\ntype GlobalStore<T> = {\n    get: ((arg0: string, arg1: T) => T) &\n        ((arg0: string, arg1: void) => T | void);\n    set: (arg0: string, arg1: T) => T;\n    has: (arg0: string) => boolean;\n    del: (arg0: string) => void;\n    getOrSet: GetOrSet<T>;\n    reset: () => void;\n    keys: () => ReadonlyArray<string>;\n};\nexport function globalStore<T extends unknown>(\n    key = 'store',\n    defStore: ObjectGetter = getObj\n): GlobalStore<T> {\n    return getOrSet<any>(getGlobal(), key, () => {\n        let store = defStore();\n        return {\n            has: (storeKey: string) => {\n                return store.hasOwnProperty(storeKey);\n            },\n            get: (storeKey: string, defVal: T) => {\n                return store.hasOwnProperty(storeKey)\n                    ? store[storeKey]\n                    : defVal;\n            },\n            set: (storeKey: string, val: T) => {\n                store[storeKey] = val;\n                return val;\n            },\n            del: (storeKey: string) => {\n                delete store[storeKey];\n            },\n            getOrSet: (storeKey: string, getter: any) => {\n                return getOrSet(store, storeKey, getter);\n            },\n            reset: () => {\n                store = defStore();\n            },\n            keys: () => {\n                return Object.keys(store);\n            }\n        };\n    });\n}\nexport class WildCard {}\nexport function getWildcard(): WildCard {\n    const global = getGlobal();\n    global.WINDOW_WILDCARD = global.WINDOW_WILDCARD || new WildCard();\n    return global.WINDOW_WILDCARD;\n}\ntype WindowStore<T> = {\n    get: ((arg0: CrossDomainWindowType | WildCard, arg1: T) => T) &\n        ((arg0: CrossDomainWindowType | WildCard, arg1: void) => T | void);\n    set: (arg0: CrossDomainWindowType | WildCard, arg1: T) => T;\n    has: (arg0: CrossDomainWindowType | WildCard) => boolean;\n    del: (arg0: CrossDomainWindowType | WildCard) => void;\n    getOrSet: (arg0: CrossDomainWindowType | WildCard, arg1: () => T) => T;\n};\nexport function windowStore<T>(\n    key = 'store',\n    defStore: ObjectGetter = getObj\n): WindowStore<T> {\n    return globalStore<any>('windowStore').getOrSet(key, () => {\n        const winStore = new WeakMap();\n\n        const getStore = (\n            win: CrossDomainWindowType | WildCard\n        ): ReturnType<ObjectGetter> => {\n            // @ts-ignore - unknown doesnt match ObjectGetter\n            return winStore.getOrSet(win, defStore);\n        };\n\n        return {\n            has: (win: Window) => {\n                const store = getStore(win);\n                return store.hasOwnProperty(key);\n            },\n            get: (win: Window, defVal: T) => {\n                const store = getStore(win);\n                // @ts-ignore\n                return store.hasOwnProperty(key) ? store[key] : defVal;\n            },\n            set: (win: Window, val: T) => {\n                const store = getStore(win);\n                store[key] = val;\n                return val;\n            },\n            del: (win: Window) => {\n                const store = getStore(win);\n                delete store[key];\n            },\n            getOrSet: (win: Window, getter: any) => {\n                const store = getStore(win);\n                return getOrSet(store, key, getter);\n            }\n        };\n    });\n}\n","import type { CrossDomainWindowType } from 'cross-domain-utils';\nimport { getAncestor } from 'cross-domain-utils';\nimport { ZalgoPromise } from 'zalgo-promise';\nimport { uniqueID } from 'belter';\n\nimport { MESSAGE_NAME, WILDCARD } from '../conf';\nimport { windowStore, globalStore, getGlobal } from '../global';\nimport type { OnType, SendType, CancelableType } from '../types';\n\nfunction getInstanceID(): string {\n    return globalStore<string>('instance').getOrSet('instanceID', uniqueID);\n}\n\nfunction getHelloPromise(win: CrossDomainWindowType): ZalgoPromise<{\n    domain: string;\n}> {\n    const helloPromises = windowStore<ZalgoPromise<any>>('helloPromises');\n    return helloPromises.getOrSet(win, () => new ZalgoPromise());\n}\n\nfunction resolveHelloPromise(\n    win: CrossDomainWindowType,\n    // @ts-ignore\n    { domain }\n): ZalgoPromise<{\n    domain: string;\n}> {\n    const helloPromises = windowStore<ZalgoPromise<any>>('helloPromises');\n    const existingPromise = helloPromises.get(win);\n\n    if (existingPromise) {\n        existingPromise.resolve({\n            domain\n        });\n    }\n\n    const newPromise = ZalgoPromise.resolve({\n        domain\n    });\n    helloPromises.set(win, newPromise);\n    return newPromise;\n}\n\nfunction listenForHello({ on }: { on: OnType }): CancelableType {\n    return on(\n        MESSAGE_NAME.HELLO,\n        {\n            domain: WILDCARD\n        },\n        ({ source, origin }) => {\n            resolveHelloPromise(source, {\n                domain: origin\n            });\n            return {\n                instanceID: getInstanceID()\n            };\n        }\n    );\n}\n\nexport function sayHello(\n    win: CrossDomainWindowType,\n    {\n        send\n    }: {\n        send: SendType;\n    }\n): ZalgoPromise<{\n    win: CrossDomainWindowType;\n    domain: string;\n    instanceID: string;\n}> {\n    return send(\n        win,\n        MESSAGE_NAME.HELLO,\n        {\n            instanceID: getInstanceID()\n        },\n        {\n            domain: WILDCARD,\n            timeout:-1\n        }\n    ).then(({ origin, data: { instanceID } }) => {\n        resolveHelloPromise(win, {\n            domain: origin\n        });\n        return {\n            win,\n            domain: origin,\n            instanceID\n        };\n    });\n}\nexport function getWindowInstanceID(\n    win: CrossDomainWindowType,\n    {\n        send\n    }: {\n        send: SendType;\n    }\n): ZalgoPromise<string> {\n    return windowStore<ZalgoPromise<any>>('windowInstanceIDPromises').getOrSet(\n        win,\n        () => {\n            return sayHello(win, {\n                send\n            }).then(({ instanceID }) => instanceID);\n        }\n    );\n}\nexport function initHello({\n    on,\n    send\n}: {\n    on: OnType;\n    send: SendType;\n}): CancelableType {\n    return globalStore<any>('builtinListeners').getOrSet(\n        'helloListener',\n        () => {\n            const listener = listenForHello({\n                on\n            });\n            const parent = getAncestor();\n\n            if (parent) {\n                sayHello(parent, {\n                    send\n                }).catch((err) => {\n                    if (__TEST__ && getGlobal(parent)) {\n                        throw err;\n                    }\n                });\n            }\n\n            return listener;\n        }\n    );\n}\nexport function awaitWindowHello(\n    win: CrossDomainWindowType,\n    timeout = 5000,\n    name = 'Window'\n): ZalgoPromise<{\n    domain: string;\n}> {\n    let promise = getHelloPromise(win);\n\n    if (timeout !== -1) {\n        promise = promise.timeout(\n            timeout,\n            new Error(`${ name } did not load after ${ timeout }ms`)\n        );\n    }\n\n    return promise;\n}\n","export const MESSAGE_TYPE = {\n    REQUEST: 'postrobot_message_request' as const,\n    RESPONSE:'postrobot_message_response' as const,\n    ACK:     'postrobot_message_ack' as const\n};\nexport const MESSAGE_ACK = {\n    SUCCESS:'success' as const,\n    ERROR:  'error' as const\n};\nexport const MESSAGE_NAME = {\n    METHOD:     'postrobot_method' as const,\n    HELLO:      'postrobot_hello' as const,\n    OPEN_TUNNEL:'postrobot_open_tunnel' as const\n};\nexport const SEND_STRATEGY = {\n    POST_MESSAGE:'postrobot_post_message' as const,\n    BRIDGE:      'postrobot_bridge' as const,\n    GLOBAL:      'postrobot_global' as const\n};\nexport const BRIDGE_NAME_PREFIX = '__postrobot_bridge__';\nexport const POSTROBOT_PROXY = '__postrobot_proxy__';\nexport const WILDCARD = '*';\nexport const SERIALIZATION_TYPE = {\n    CROSS_DOMAIN_ZALGO_PROMISE:'cross_domain_zalgo_promise' as const,\n    CROSS_DOMAIN_FUNCTION:     'cross_domain_function' as const,\n    CROSS_DOMAIN_WINDOW:       'cross_domain_window' as const\n};\nexport const METHOD = {\n    GET: 'get' as const,\n    POST:'post' as const\n};\n","import type { CrossDomainWindowType } from 'cross-domain-utils';\n\nimport { windowStore } from '../global';\n\nexport function markWindowKnown(win: CrossDomainWindowType): void {\n    const knownWindows = windowStore('knownWindows');\n    knownWindows.set(win, true);\n}\nexport function isWindowKnown(win: CrossDomainWindowType): boolean {\n    const knownWindows = windowStore<boolean>('knownWindows');\n    return knownWindows.get(win, false);\n}\n","export function isPromise(item: unknown): boolean {\n    try {\n        if (!item) {\n            return false;\n        }\n\n        if (typeof Promise !== 'undefined' && item instanceof Promise) {\n            return true;\n        }\n\n        if (\n            typeof window !== 'undefined' &&\n            typeof window.Window === 'function' &&\n            item instanceof window.Window\n        ) {\n            return false;\n        }\n\n        if (\n            typeof window !== 'undefined' &&\n            typeof window.constructor === 'function' &&\n            item instanceof window.constructor\n        ) {\n            return false;\n        }\n\n        const toString = {}.toString;\n\n        if (toString) {\n            const name = toString.call(item);\n\n            if (\n                name === '[object Window]' ||\n                name === '[object global]' ||\n                name === '[object DOMWindow]'\n            ) {\n                return false;\n            }\n        }\n\n        if (typeof (item as {'then': any }).then === 'function') {\n            return true;\n        }\n    } catch (err) {\n        return false;\n    }\n\n    return false;\n}\n","import type { ZalgoPromise } from './promise';\n\nconst dispatchedErrors: Error[] = [];\nconst possiblyUnhandledPromiseHandlers: Array<\n    (arg0: unknown, promise?: ZalgoPromise<unknown>) => void\n> = [];\nexport function dispatchPossiblyUnhandledError<T>(\n    err: Error,\n    promise: ZalgoPromise<T>\n): void {\n\n    // @ts-ignore\n    if (dispatchedErrors.indexOf(err) !== -1) {\n        return;\n    }\n\n    // @ts-ignore\n    dispatchedErrors.push(err);\n    setTimeout(() => {\n        // @ts-ignore\n        if (__DEBUG__) {\n            // $FlowFixMe\n            throw new Error(\n                `${ err.stack || err.toString() }\\n\\nFrom promise:\\n\\n${\n                    promise.stack\n                }`\n            );\n        }\n\n        throw err;\n    }, 1);\n\n    for (let j = 0; j < possiblyUnhandledPromiseHandlers.length; j++) {\n        // @ts-ignore\n        possiblyUnhandledPromiseHandlers[j](err, promise);\n    }\n}\nexport function onPossiblyUnhandledException(\n    handler: (arg0: unknown, promise?: ZalgoPromise<unknown>) => void\n): {\n    cancel: () => void\n} {\n    possiblyUnhandledPromiseHandlers.push(handler);\n    return {\n        cancel() {\n            possiblyUnhandledPromiseHandlers.splice(\n                possiblyUnhandledPromiseHandlers.indexOf(handler),\n                1\n            );\n        }\n    };\n}\n","import type { ZalgoPromise } from './promise';\n\nlet activeCount = 0;\nlet flushPromise: ZalgoPromise<void> | null;\n\nfunction flushActive() {\n    if (!activeCount && flushPromise) {\n        const promise = flushPromise;\n        flushPromise = null;\n        promise.resolve();\n    }\n}\n\nexport function startActive(): void {\n    activeCount += 1;\n}\nexport function endActive(): void {\n    activeCount -= 1;\n    flushActive();\n}\nexport function awaitActive(\n    Zalgo: ZalgoPromise<any>\n): ZalgoPromise<void> {\n    // @ts-ignore\n    const promise = (flushPromise = flushPromise || new Zalgo());\n    flushActive();\n    return promise;\n}\n","import { isPromise } from './utils';\nimport {\n    onPossiblyUnhandledException,\n    dispatchPossiblyUnhandledError\n} from './exceptions';\nimport { startActive, endActive, awaitActive } from './flush';\n\nexport class ZalgoPromise<R extends unknown> {\n    resolved: boolean;\n    rejected: boolean;\n    errorHandled: boolean;\n    value?: R;\n    error: unknown;\n    handlers: Array<{\n        promise: ZalgoPromise<any>;\n        onSuccess: void | ((result: R) => unknown);\n        onError: void | ((error: unknown) => unknown);\n    }>;\n    dispatching?: boolean;\n    stack?: string;\n\n    constructor(\n        handler?: (\n            resolve: (result: R) => void,\n            reject: (error: unknown) => void\n        ) => void\n    ) {\n        this.resolved = false;\n        this.rejected = false;\n        this.errorHandled = false;\n        this.handlers = [];\n\n        if (handler) {\n            let result;\n            let error;\n            let resolved = false;\n            let rejected = false;\n            let isAsync = false;\n            startActive();\n\n            try {\n                handler(\n                    res => {\n                        if (isAsync) {\n                            this.resolve(res);\n                        } else {\n                            resolved = true;\n                            result = res;\n                        }\n                    },\n                    err => {\n                        if (isAsync) {\n                            this.reject(err);\n                        } else {\n                            rejected = true;\n                            error = err;\n                        }\n                    }\n                );\n            } catch (err) {\n                endActive();\n                this.reject(err);\n                return;\n            }\n\n            endActive();\n            isAsync = true;\n\n            if (resolved) {\n                // @ts-ignore - potentially undefined\n                this.resolve(result);\n            } else if (rejected) {\n                this.reject(error);\n            }\n        }\n\n        // @ts-ignore\n        if (__DEBUG__) {\n            try {\n                throw new Error(`ZalgoPromise`);\n            } catch (err) {\n                this.stack = err.stack;\n            }\n        }\n    }\n\n    resolve(result?: R): ZalgoPromise<R> {\n        if (this.resolved || this.rejected) {\n            return this;\n        }\n\n        if (isPromise(result)) {\n            throw new Error('Can not resolve promise with another promise');\n        }\n\n        this.resolved = true;\n        this.value = result;\n        this.dispatch();\n        return this;\n    }\n\n    reject(error: unknown): ZalgoPromise<R> {\n        if (this.resolved || this.rejected) {\n            return this;\n        }\n\n        if (isPromise(error)) {\n            throw new Error('Can not reject promise with another promise');\n        }\n\n        if (!error) {\n            const err =\n                // @ts-ignore\n                error && typeof error.toString === 'function'\n                    ? // @ts-ignore\n                    error.toString()\n                    : Object.prototype.toString.call(error);\n            error = new Error(`Expected reject to be called with Error, got ${ err }`);\n        }\n\n        this.rejected = true;\n        this.error = error;\n\n        if (!this.errorHandled) {\n            setTimeout(() => {\n                if (!this.errorHandled) {\n                    // @ts-ignore\n                    dispatchPossiblyUnhandledError(error, this);\n                }\n            }, 1);\n        }\n\n        this.dispatch();\n        return this;\n    }\n\n    asyncReject(error: unknown): ZalgoPromise<R> {\n        this.errorHandled = true;\n        this.reject(error);\n        return this;\n    }\n\n    dispatch(): void {\n        const { dispatching, resolved, rejected, handlers } = this;\n\n        if (dispatching) {\n            return;\n        }\n\n        if (!resolved && !rejected) {\n            return;\n        }\n\n        this.dispatching = true;\n        startActive();\n\n        const chain = <T>(\n            firstPromise: ZalgoPromise<T>,\n            secondPromise: ZalgoPromise<T>\n        ) => {\n            return firstPromise.then(\n                res => {\n                    secondPromise.resolve(res);\n                },\n                err => {\n                    secondPromise.reject(err);\n                }\n            );\n        };\n\n        for (let i = 0; i < handlers.length; i++) {\n            const { onSuccess, onError, promise } = handlers[i];\n            let result;\n\n            if (resolved) {\n                try {\n                    // @ts-ignore\n                    result = onSuccess ? onSuccess(this.value) : this.value;\n                } catch (err) {\n                    promise.reject(err);\n                    continue;\n                }\n            } else if (rejected) {\n                if (!onError) {\n                    promise.reject(this.error);\n                    continue;\n                }\n\n                try {\n                    result = onError(this.error);\n                } catch (err) {\n                    promise.reject(err);\n                    continue;\n                }\n            }\n\n            if (\n                result instanceof ZalgoPromise &&\n                (result.resolved || result.rejected)\n            ) {\n                if (result.resolved) {\n                    promise.resolve(result.value);\n                } else {\n                    promise.reject(result.error);\n                }\n\n                result.errorHandled = true;\n            } else if (isPromise(result)) {\n                if (\n                    result instanceof ZalgoPromise &&\n                    (result.resolved || result.rejected)\n                ) {\n                    if (result.resolved) {\n                        promise.resolve(result.value);\n                    } else {\n                        promise.reject(result.error);\n                    }\n                } else {\n                    // @ts-ignore\n                    chain(result, promise);\n                }\n            } else {\n                promise.resolve(result);\n            }\n        }\n\n        handlers.length = 0;\n        this.dispatching = false;\n        endActive();\n    }\n\n    then<X extends unknown, Y extends unknown>(\n        onSuccess: void | ((result: R) => ZalgoPromise<X> | Y),\n        onError: void | ((error: unknown) => ZalgoPromise<X> | Y)\n    ): ZalgoPromise<X | Y> {\n        // @ts-ignore\n        if (onSuccess && typeof onSuccess !== 'function' && !onSuccess.call) {\n            throw new Error('Promise.then expected a function for success handler');\n        }\n\n        // @ts-ignore\n        if (onError && typeof onError !== 'function' && !onError.call) {\n            throw new Error('Promise.then expected a function for error handler');\n        }\n\n        // @ts-ignore\n        const promise: ZalgoPromise<X | Y> = new ZalgoPromise();\n        this.handlers.push({\n            promise,\n            onSuccess,\n            onError\n        });\n        this.errorHandled = true;\n        this.dispatch();\n        return promise;\n    }\n\n    catch<X extends unknown, Y extends unknown>(\n        onError: (error: unknown) => ZalgoPromise<X> | Y\n    ): ZalgoPromise<X | Y> {\n        return this.then(undefined, onError);\n    }\n\n    finally(onFinally: () => unknown): ZalgoPromise<R> {\n        // @ts-ignore\n        if (onFinally && typeof onFinally !== 'function' && !onFinally.call) {\n            throw new Error('Promise.finally expected a function');\n        }\n\n        // @ts-ignore - doesn't match ZalgoPromise<R>\n        return this.then(\n            result => {\n                return ZalgoPromise.try(onFinally).then(() => {\n                    return result;\n                });\n            },\n            err => {\n                return ZalgoPromise.try(onFinally).then(() => {\n                    throw err;\n                });\n            }\n        );\n    }\n\n    timeout(time: number, err: Error | null | undefined): ZalgoPromise<R> {\n        if (this.resolved || this.rejected) {\n            return this;\n        }\n\n        const timeout = setTimeout(() => {\n            if (this.resolved || this.rejected) {\n                return;\n            }\n\n            this.reject(err || new Error(`Promise timed out after ${ time }ms`));\n        }, time);\n        return this.then(result => {\n            clearTimeout(timeout);\n            return result;\n        });\n    }\n\n    toPromise(): Promise<R> {\n        if (typeof Promise === 'undefined') {\n            throw new TypeError(`Could not find Promise`);\n        }\n\n        // @ts-ignore\n        return Promise.resolve(this); // eslint-disable-line compat/compat\n    }\n\n    static resolve<X extends unknown>(\n        value?: X | ZalgoPromise<X>\n    ): ZalgoPromise<X> {\n        if (value instanceof ZalgoPromise) {\n            return value;\n        }\n\n        if (isPromise(value)) {\n            // @ts-ignore is it a promise or a value who knows\n            return new ZalgoPromise((resolve, reject) => value.then(resolve, reject));\n        }\n\n        // @ts-ignore is it a promise or a value who knows\n        return new ZalgoPromise().resolve(value);\n    }\n\n    static reject(error: unknown): ZalgoPromise<unknown> {\n        return new ZalgoPromise().reject(error);\n    }\n\n    static asyncReject(error: unknown): ZalgoPromise<unknown> {\n        return new ZalgoPromise().asyncReject(error);\n    }\n\n    static all<X extends ReadonlyArray<unknown>>(\n        promises: X\n    ): ZalgoPromise<unknown> {\n        const promise = new ZalgoPromise();\n        let count = promises.length;\n        const results: Array<unknown> = [];\n\n        if (!count) {\n            promise.resolve(results);\n            return promise;\n        }\n\n        const chain = <T>(\n            i: number,\n            firstPromise: ZalgoPromise<T>,\n            secondPromise: ZalgoPromise<T>\n        ) => {\n            return firstPromise.then(\n                res => {\n                    results[i] = res;\n                    count -= 1;\n\n                    if (count === 0) {\n                        promise.resolve(results);\n                    }\n                },\n                err => {\n                    secondPromise.reject(err);\n                }\n            );\n        };\n\n        for (let i = 0; i < promises.length; i++) {\n            const prom = promises[i];\n\n            if (prom instanceof ZalgoPromise) {\n                if (prom.resolved) {\n                    results[i] = prom.value;\n                    count -= 1;\n                    continue;\n                }\n            } else if (!isPromise(prom)) {\n                results[i] = prom;\n                count -= 1;\n                continue;\n            }\n\n            chain(i, ZalgoPromise.resolve(prom), promise);\n        }\n\n        if (count === 0) {\n            promise.resolve(results);\n        }\n\n        return promise;\n    }\n\n    static hash<O extends Record<string, any>>(promises: O): ZalgoPromise<any> {\n        const result = {};\n        const awaitPromises = [];\n\n        for (const key in promises) {\n            if (promises.hasOwnProperty(key)) {\n                const value = promises[key];\n\n                if (isPromise(value)) {\n                    awaitPromises.push(\n                        // @ts-ignore\n                        value.then(res => {\n                            // @ts-ignore\n                            result[key] = res;\n                        })\n                    );\n                } else {\n                    // @ts-ignore\n                    result[key] = value;\n                }\n            }\n        }\n\n        return ZalgoPromise.all(awaitPromises).then(() => result);\n    }\n\n    static map<T, X>(\n        items: ReadonlyArray<T>,\n        method: (arg0: T) => ZalgoPromise<X> | X\n    ): ZalgoPromise<ReadonlyArray<X>> {\n        // @ts-ignore\n        return ZalgoPromise.all(items.map(method));\n    }\n\n    static onPossiblyUnhandledException(\n        handler: (err: unknown) => void\n    ): {\n        cancel: () => void;\n    } {\n        return onPossiblyUnhandledException(handler);\n    }\n\n    static try<\n    X extends unknown,\n    Y extends unknown,\n    C extends unknown,\n    A extends ReadonlyArray<unknown>\n>(\n        method: (...args: A) => ZalgoPromise<X> | Y,\n        context?: C,\n        args?: A\n    ): ZalgoPromise<X | Y> {\n    // @ts-ignore\n        if (method && typeof method !== 'function' && !method.call) {\n            throw new Error('Promise.try expected a function');\n        }\n\n        let result;\n        startActive();\n\n        try {\n        // @ts-ignore\n            result = method.apply(context, args || []);\n        } catch (err) {\n            endActive();\n            // @ts-ignore\n            return ZalgoPromise.reject(err);\n        }\n\n        endActive();\n        // @ts-ignore\n        return ZalgoPromise.resolve(result);\n    }\n\n    static delay(delay: number): ZalgoPromise<void> {\n        return new ZalgoPromise(resolve => {\n            setTimeout(resolve, delay);\n        });\n    }\n\n    static isPromise(value: unknown): boolean {\n        if (value && value instanceof ZalgoPromise) {\n            return true;\n        }\n\n        return isPromise(value);\n    }\n\n    static flush(): ZalgoPromise<void> {\n    // @ts-ignore\n        return awaitActive(ZalgoPromise);\n    }\n}\n","export function safeIndexOf<T>(collection: ReadonlyArray<T>, item: T): number {\n    for (let i = 0; i < collection.length; i++) {\n        try {\n            if (collection[i] === item) {\n                return i;\n            }\n        } catch (err) {\n            // pass\n        }\n    }\n\n    return -1;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport function noop(...args: ReadonlyArray<unknown>): void {\n    // pass\n}\n","import { isWindow, isWindowClosed } from 'cross-domain-utils';\n\nimport { hasNativeWeakMap } from './native';\nimport { noop, safeIndexOf } from './util';\n\nexport class CrossDomainSafeWeakMap<\n    K extends Record<string, any>,\n    V extends unknown\n> {\n    name: string;\n    weakmap: WeakMap<K, V> | null | undefined;\n    keys: Array<K>;\n    values: Array<V>;\n\n    constructor() {\n        // eslint-disable-next-line no-bitwise\n        this.name = `__weakmap_${ (Math.random() * 1e9) >>> 0 }__`;\n\n        if (hasNativeWeakMap()) {\n            try {\n                this.weakmap = new WeakMap();\n            } catch (err) {\n                // pass\n            }\n        }\n\n        this.keys = [];\n        this.values = [];\n    }\n\n    _cleanupClosedWindows(): void {\n        const weakmap = this.weakmap;\n        const keys = this.keys;\n\n        for (let i = 0; i < keys.length; i++) {\n            const value = keys[i];\n\n            // @ts-ignore `isWindowClosed` takes window which V is not\n            if (isWindow(value) && isWindowClosed(value)) {\n                if (weakmap) {\n                    try {\n                        weakmap.delete(value);\n                    } catch (err) {\n                        // pass\n                    }\n                }\n\n                keys.splice(i, 1);\n                this.values.splice(i, 1);\n                i -= 1;\n            }\n        }\n    }\n\n    isSafeToReadWrite(key: K): boolean {\n        if (isWindow(key)) {\n            return false;\n        }\n\n        try {\n            noop(key && key.self);\n            noop(key && key[this.name]);\n        } catch (err) {\n            return false;\n        }\n\n        return true;\n    }\n\n    set(key: K, value: V): void {\n        if (!key) {\n            throw new Error(`WeakMap expected key`);\n        }\n\n        const weakmap = this.weakmap;\n\n        if (weakmap) {\n            try {\n                weakmap.set(key, value);\n            } catch (err) {\n                delete this.weakmap;\n            }\n        }\n\n        if (this.isSafeToReadWrite(key)) {\n            try {\n                const name = this.name;\n                const entry = key[name];\n\n                if (entry && entry[0] === key) {\n                    entry[1] = value;\n                } else {\n                    Object.defineProperty(key, name, {\n                        value:   [ key, value ],\n                        writable:true\n                    });\n                }\n\n                return;\n            } catch (err) {\n                // pass\n            }\n        }\n\n        this._cleanupClosedWindows();\n\n        const keys = this.keys;\n        const values = this.values;\n        const index = safeIndexOf(keys, key);\n\n        if (index === -1) {\n            keys.push(key);\n            values.push(value);\n        } else {\n            values[index] = value;\n        }\n    }\n\n    get(key: K): V | void {\n        if (!key) {\n            throw new Error(`WeakMap expected key`);\n        }\n\n        const weakmap = this.weakmap;\n\n        if (weakmap) {\n            try {\n                if (weakmap.has(key)) {\n                    return weakmap.get(key);\n                }\n            } catch (err) {\n                delete this.weakmap;\n            }\n        }\n\n        if (this.isSafeToReadWrite(key)) {\n            try {\n                const entry = key[this.name];\n\n                if (entry && entry[0] === key) {\n                    return entry[1];\n                }\n\n                return;\n            } catch (err) {\n                // pass\n            }\n        }\n\n        this._cleanupClosedWindows();\n\n        const keys = this.keys;\n        const index = safeIndexOf(keys, key);\n\n        if (index === -1) {\n            return;\n        }\n\n        return this.values[index];\n    }\n\n    delete(key: K): void {\n        if (!key) {\n            throw new Error(`WeakMap expected key`);\n        }\n\n        const weakmap = this.weakmap;\n\n        if (weakmap) {\n            try {\n                weakmap.delete(key);\n            } catch (err) {\n                delete this.weakmap;\n            }\n        }\n\n        if (this.isSafeToReadWrite(key)) {\n            try {\n                const entry = key[this.name];\n\n                if (entry && entry[0] === key) {\n                    entry[0] = entry[1] = undefined;\n                }\n            } catch (err) {\n                // pass\n            }\n        }\n\n        this._cleanupClosedWindows();\n\n        const keys = this.keys;\n        const index = safeIndexOf(keys, key);\n\n        if (index !== -1) {\n            keys.splice(index, 1);\n            this.values.splice(index, 1);\n        }\n    }\n\n    has(key: K): boolean {\n        if (!key) {\n            throw new Error(`WeakMap expected key`);\n        }\n\n        const weakmap = this.weakmap;\n\n        if (weakmap) {\n            try {\n                if (weakmap.has(key)) {\n                    return true;\n                }\n            } catch (err) {\n                delete this.weakmap;\n            }\n        }\n\n        if (this.isSafeToReadWrite(key)) {\n            try {\n                const entry = key[this.name];\n\n                if (entry && entry[0] === key) {\n                    return true;\n                }\n\n                return false;\n            } catch (err) {\n                // pass\n            }\n        }\n\n        this._cleanupClosedWindows();\n\n        const index = safeIndexOf(this.keys, key);\n        return index !== -1;\n    }\n\n    getOrSet(key: K, getter: () => V): V {\n        if (this.has(key)) {\n            // @ts-ignore\n            return this.get(key);\n        }\n\n        const value = getter();\n        this.set(key, value);\n        return value;\n    }\n}\n","/* eslint max-lines: 0 */\nimport { ZalgoPromise } from 'zalgo-promise';\nimport { WeakMap } from 'cross-domain-safe-weakmap/src';\n\nimport type { CancelableType } from './types';\n\nexport function getFunctionName<T extends (...args: Array<any>) => any>(\n    fn: T): string {\n    // @ts-ignore - cant infer this all from T\n    return fn.name || fn.__name__ || fn.displayName || 'anonymous';\n}\nexport function setFunctionName<T extends (...args: Array<any>) => any>(\n    fn: T,\n    name: string): T {\n    try {\n        // @ts-ignore this should be readonly\n        delete fn.name;\n        // @ts-ignore this should be readonly\n        fn.name = name;\n    } catch (err) {\n        // pass\n    }\n\n    // @ts-ignore this should be readonly\n    fn.__name__ = fn.displayName = name;\n    return fn;\n}\nexport function base64encode(str: string): string {\n    if (typeof btoa === 'function') {\n        return btoa(\n            encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, (m, p1) => {\n                return String.fromCharCode(parseInt(p1, 16));\n            })\n        ).replace(/[=]/g, '');\n    }\n\n    if (typeof Buffer !== 'undefined') {\n        return Buffer.from(str, 'utf8').toString('base64').replace(/[=]/g, '');\n    }\n\n    throw new Error(`Can not find window.btoa or Buffer`);\n}\nexport function base64decode(str: string): string {\n    if (typeof atob === 'function') {\n        return decodeURIComponent(\n            Array.prototype.map\n                .call(atob(str), (c) => {\n                    return (\n                        `%${  (`00${  c.charCodeAt(0).toString(16) }`).slice(-2) }`\n                    );\n                })\n                .join('')\n        );\n    }\n\n    if (typeof Buffer !== 'undefined') {\n        return Buffer.from(str, 'base64').toString('utf8');\n    }\n\n    throw new Error(`Can not find window.atob or Buffer`);\n}\nexport function uniqueID(): string {\n    const chars = '0123456789abcdef';\n    const randomID = 'xxxxxxxxxx'.replace(/./g, () => {\n        return chars.charAt(Math.floor(Math.random() * chars.length));\n    });\n    const timeID = base64encode(\n        new Date().toISOString().slice(11, 19).replace('T', '.')\n    )\n        .replace(/[^a-zA-Z0-9]/g, '')\n        .toLowerCase();\n    return `uid_${ randomID }_${ timeID }`;\n}\nexport function getGlobal(): Record<string, any> {\n    if (typeof window !== 'undefined') {\n        return window;\n    }\n\n    if (typeof global !== 'undefined') {\n        return global;\n    }\n\n    // @ts-ignore - globals\n    if (typeof __GLOBAL__ !== 'undefined') {\n        // @ts-ignore - globals\n        return __GLOBAL__;\n    }\n\n    throw new Error(`No global found`);\n}\n\nlet objectIDs: any;\nexport function getObjectID(obj: Record<string, any>): string {\n    objectIDs = objectIDs || new WeakMap();\n\n    if (\n        obj === null ||\n        obj === undefined ||\n        (typeof obj !== 'object' && typeof obj !== 'function')\n    ) {\n        throw new Error(`Invalid object`);\n    }\n\n    let uid = objectIDs.get(obj);\n\n    if (!uid) {\n        uid = `${ typeof obj }:${ uniqueID() }`;\n        objectIDs.set(obj, uid);\n    }\n\n    return uid;\n}\n\nfunction serializeArgs<T>(args: ReadonlyArray<T>): string {\n    try {\n        return JSON.stringify(\n            Array.prototype.slice.call(args),\n            (subkey, val) => {\n                if (typeof val === 'function') {\n                    return `memoize[${ getObjectID(val) }]`;\n                }\n\n                return val;\n            }\n        );\n    } catch (err) {\n        throw new Error(\n            `Arguments not serializable -- can not be used to memoize`\n        );\n    }\n}\n\nexport function getEmptyObject(): Record<string, undefined> {\n    return {};\n}\ntype MemoizeOptions = {\n    name?: string;\n    time?: number;\n    thisNamespace?: boolean;\n};\n\nconst getDefaultMemoizeOptions = (): MemoizeOptions => {\n    return {};\n};\n\nexport type Memoized<F> = F & {\n    reset: () => void;\n};\nlet memoizeGlobalIndex = 0;\nlet memoizeGlobalIndexValidFrom = 0;\nexport function memoize<F extends (...args: Array<any>) => any>(\n    method: F,\n    options: MemoizeOptions = getDefaultMemoizeOptions()): Memoized<F> {\n    const { thisNamespace = false, time: cacheTime } = options;\n    let simpleCache: any;\n    let thisCache: any;\n    let memoizeIndex = memoizeGlobalIndex;\n    memoizeGlobalIndex += 1;\n\n    const memoizedFunction = function memoizedFunction(...args: any): unknown {\n        if (memoizeIndex < memoizeGlobalIndexValidFrom) {\n            simpleCache = null;\n            thisCache = null;\n            memoizeIndex = memoizeGlobalIndex;\n            memoizeGlobalIndex += 1;\n        }\n\n        let cache;\n\n        if (thisNamespace) {\n            thisCache = thisCache || new WeakMap();\n            // @ts-ignore this is any\n            cache = thisCache.getOrSet(this, getEmptyObject);\n        } else {\n            cache = simpleCache = simpleCache || {};\n        }\n\n        const cacheKey = serializeArgs(args);\n        let cacheResult = cache[cacheKey];\n\n        if (\n            cacheResult &&\n            cacheTime &&\n            Date.now() - cacheResult.time < cacheTime\n        ) {\n            delete cache[cacheKey];\n            cacheResult = null;\n        }\n\n        if (cacheResult) {\n            return cacheResult.value;\n        }\n\n        const time = Date.now();\n        // @ts-ignore\n        const value = method.apply(this, arguments);\n        cache[cacheKey] = {\n            time,\n            value\n        };\n        return value;\n    };\n\n    memoizedFunction.reset = () => {\n        simpleCache = null;\n        thisCache = null;\n    };\n\n    // @ts-ignore\n    const result: F = memoizedFunction;\n    // @ts-ignore\n    return setFunctionName(\n        result,\n        `${ options.name || getFunctionName(method) }::memoized`\n    );\n}\n\nmemoize.clear = () => {\n    memoizeGlobalIndexValidFrom = memoizeGlobalIndex;\n};\n\nexport function promiseIdentity<T extends unknown>(\n    item: ZalgoPromise<T> | T\n): ZalgoPromise<T> {\n    return ZalgoPromise.resolve(item);\n}\nexport function memoizePromise<R>(\n    method: (...args: ReadonlyArray<any>) => ZalgoPromise<R>\n): (...args: ReadonlyArray<any>) => ZalgoPromise<R> {\n    let cache: Record<string, any> = {};\n\n    function memoizedPromiseFunction(\n        ...args: ReadonlyArray<any>\n    ): ZalgoPromise<R> {\n        const key: string = serializeArgs(args);\n\n        if (cache.hasOwnProperty(key)) {\n            return cache[key];\n        }\n\n        cache[key] = ZalgoPromise.try(() =>\n            // @ts-ignore\n            method.apply(this, arguments)).finally(() => {\n            delete cache[key];\n        });\n        return cache[key];\n    }\n\n    memoizedPromiseFunction.reset = () => {\n        cache = {};\n    };\n\n    return setFunctionName(\n        memoizedPromiseFunction,\n        `${ getFunctionName(method) }::promiseMemoized`\n    );\n}\ntype PromisifyOptions = {\n    name?: string;\n};\n\nconst getDefaultPromisifyOptions = (): PromisifyOptions => {\n    return {};\n};\n\nexport function promisify<R>(\n    method: (...args: ReadonlyArray<any>) => R,\n    options: PromisifyOptions = getDefaultPromisifyOptions()\n): (...args: ReadonlyArray<any>) => ZalgoPromise<R> {\n    function promisifiedFunction(): ZalgoPromise<R> {\n        // @ts-ignore\n        return ZalgoPromise.try(method, this, arguments);\n    }\n\n    if (options.name) {\n        promisifiedFunction.displayName = `${ options.name }:promisified`;\n    }\n\n    return setFunctionName(\n        promisifiedFunction,\n        `${ getFunctionName(method) }::promisified`\n    );\n}\nexport function inlineMemoize<R>(\n    // eslint-disable-next-line no-shadow\n    method: (...args: ReadonlyArray<any>) => R,\n    // eslint-disable-next-line no-shadow\n    logic: (...args: ReadonlyArray<any>) => R,\n    args: ReadonlyArray<any> = []\n): R {\n    // @ts-ignore\n    const cache: Record<string, R> = (method.__inline_memoize_cache__ = method.__inline_memoize_cache__ || {});\n    const key = serializeArgs(args);\n\n    if (cache.hasOwnProperty(key)) {\n        return cache[key];\n    }\n\n    const result = (cache[key] = logic(...args));\n    return result;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport function noop(...args: ReadonlyArray<unknown>): void {\n    // pass\n}\n\nexport function once(\n    method: (...args: Array<any>) => any\n): (...args: Array<any>) => any {\n    let called = false;\n\n    const onceFunction = function (): unknown {\n        if (!called) {\n            called = true;\n            // @ts-ignore\n            return method.apply(this, arguments);\n        }\n    };\n\n    return setFunctionName(onceFunction, `${ getFunctionName(method) }::once`);\n}\nexport function hashStr(str: string): number {\n    let hash = 0;\n\n    for (let i = 0; i < str.length; i++) {\n        hash += str[i].charCodeAt(0) * Math.pow((i % 10) + 1, 5);\n    }\n\n    return Math.floor(Math.pow(Math.sqrt(hash), 5));\n}\nexport function strHashStr(str: string): string {\n    let hash = '';\n\n    for (let i = 0; i < str.length; i++) {\n        let total = str[i].charCodeAt(0) * i;\n\n        if (str[i + 1]) {\n            total += str[i + 1].charCodeAt(0) * (i - 1);\n        }\n\n        hash += String.fromCharCode(97 + (Math.abs(total) % 26));\n    }\n\n    return hash;\n}\nexport function match(str: string, pattern: RegExp): string | null | undefined {\n    const regmatch = str.match(pattern);\n\n    if (regmatch) {\n        return regmatch[1];\n    }\n}\nexport function awaitKey<T extends unknown>(\n    obj: Record<string, any>,\n    key: string\n): ZalgoPromise<T> {\n    return new ZalgoPromise((resolve: Function) => {\n        let value = obj[key];\n\n        if (value) {\n            return resolve(value);\n        }\n\n        delete obj[key];\n        Object.defineProperty(obj, key, {\n            configurable: true,\n\n            set(item) {\n                value = item;\n\n                if (value) {\n                    resolve(value);\n                }\n            },\n\n            get(): T {\n                return value;\n            }\n        });\n    });\n}\nexport function stringifyError(err: unknown, level = 1): string {\n    if (level >= 3) {\n        return 'stringifyError stack overflow';\n    }\n\n    try {\n        if (!err) {\n            return `<unknown error: ${ Object.prototype.toString.call(err) }>`;\n        }\n\n        if (typeof err === 'string') {\n            return err;\n        }\n\n        if (err instanceof Error) {\n            const stack = err && err.stack;\n            const message = err && err.message;\n\n            if (stack && message) {\n                if (stack.indexOf(message) !== -1) {\n                    return stack;\n                } else {\n                    return `${ message }\\n${ stack }`;\n                }\n            } else if (stack) {\n                return stack;\n            } else if (message) {\n                return message;\n            }\n        }\n\n        // @ts-ignore\n        if (err && err.toString && typeof err.toString === 'function') {\n            // @ts-ignore\n            return err.toString();\n        }\n\n        return Object.prototype.toString.call(err);\n    } catch (newErr) {\n        return `Error while stringifying error: ${ stringifyError(\n            newErr,\n            level + 1\n        ) }`;\n    }\n}\nexport function stringifyErrorMessage(err: Error): string {\n    const defaultMessage = `<unknown error: ${ Object.prototype.toString.call(\n        err\n    ) }>`;\n\n    if (!err) {\n        return defaultMessage;\n    }\n\n    if (err instanceof Error) {\n        return err.message || defaultMessage;\n    }\n\n    // @ts-ignore\n    if (typeof err.message === 'string') {\n        // @ts-ignore\n        return err.message || defaultMessage;\n    }\n\n    return defaultMessage;\n}\nexport function stringify(item: unknown): string {\n    if (typeof item === 'string') {\n        return item;\n    }\n\n    // @ts-ignore\n    if (item && item.toString && typeof item.toString === 'function') {\n        // @ts-ignore\n        return item.toString();\n    }\n\n    return Object.prototype.toString.call(item);\n}\nexport function domainMatches(hostname: string, domain: string): boolean {\n    hostname = hostname.split('://')[1];\n    const index = hostname.indexOf(domain);\n    return index !== -1 && hostname.slice(index) === domain;\n}\nexport function patchMethod(\n    obj: Record<string, any>,\n    name: string,\n    handler: (...args: Array<any>) => any\n): void {\n    const original = obj[name];\n\n    obj[name] = function patchedMethod(): unknown {\n        return handler({\n            context:     this,\n            args:        Array.prototype.slice.call(arguments),\n            original,\n            // @ts-ignore\n            callOriginal:() => original.apply(this, arguments)\n        });\n    };\n}\nexport function extend<\n    T extends Record<string, any> | ((...args: Array<any>) => any)\n>(obj: T, source: Record<string, any>): T {\n    if (!source) {\n        return obj;\n    }\n\n    if (Object.assign) {\n        return Object.assign(obj, source);\n    }\n\n    for (const key in source) {\n        if (source.hasOwnProperty(key)) {\n            // @ts-ignore\n            obj[key] = source[key];\n        }\n    }\n\n    return obj;\n}\nexport function values<T>(obj: Record<string, T>): ReadonlyArray<T> {\n    if (Object.values) {\n        return Object.values(obj);\n    }\n\n    const result: Array<T> = [];\n\n    for (const key in obj) {\n        if (obj.hasOwnProperty(key)) {\n            result.push(obj[key]);\n        }\n    }\n\n    return result;\n}\nexport const memoizedValues: <T>(arg0: Record<string, T>) => ReadonlyArray<T> =\n    memoize(values);\nexport function perc(pixels: number, percentage: number): number {\n    return Math.round((pixels * percentage) / 100);\n}\nexport function min(...args: ReadonlyArray<number>): number {\n    return Math.min(...args);\n}\nexport function max(...args: ReadonlyArray<number>): number {\n    return Math.max(...args);\n}\nexport function roundUp(num: number, nearest: number): number {\n    const remainder = num % nearest;\n    return remainder ? num - remainder + nearest : num;\n}\nexport function regexMap<T>(\n    str: string,\n    regexp: RegExp,\n    handler: () => T\n): ReadonlyArray<T> {\n    const results: T[] = [];\n    // @ts-ignore\n    str.replace(regexp, function regexMapMatcher(item: string) {\n        // @ts-ignore\n        results.push(handler ? handler.apply(null, arguments) : item);\n    });\n    return results;\n}\nexport function svgToBase64(svg: string): string {\n    return `data:image/svg+xml;base64,${ base64encode(svg) }`;\n}\nexport function objFilter<T, R>(\n    obj: Record<string, T>,\n    filter: (arg0: T, arg1: string | null | undefined) => unknown = Boolean\n): Record<string, R> {\n    const result: Record<string, R> = {};\n\n    for (const key in obj) {\n        if (!obj.hasOwnProperty(key) || !filter(obj[key], key)) {\n            continue;\n        }\n\n        // @ts-ignore expect R but gets T\n        result[key] = obj[key];\n    }\n\n    return result;\n}\nexport function identity<T>(item: T): T {\n    return item;\n}\nexport function regexTokenize(\n    text: string,\n    regexp: RegExp\n): ReadonlyArray<string> {\n    const result: string[] = [];\n    text.replace(regexp, (token) => {\n        result.push(token);\n        return '';\n    });\n    return result;\n}\nexport function promiseDebounce<T>(\n    method: () => ZalgoPromise<T> | T,\n    delay = 50\n): () => ZalgoPromise<T> {\n    let promise: any;\n    let timeout: any;\n\n    const promiseDebounced = function (): ZalgoPromise<T> {\n        if (timeout) {\n            clearTimeout(timeout);\n        }\n\n        const localPromise = (promise = promise || new ZalgoPromise());\n        timeout = setTimeout(() => {\n            promise = null;\n            timeout = null;\n            ZalgoPromise.try(method).then(\n                (result: T) => {\n                    localPromise.resolve(result);\n                },\n                (err: unknown) => {\n                    localPromise.reject(err);\n                }\n            );\n        }, delay);\n        return localPromise;\n    };\n\n    return setFunctionName(\n        promiseDebounced,\n        `${ getFunctionName(method) }::promiseDebounced`\n    );\n}\nexport function safeInterval(\n    method: (...args: Array<any>) => any,\n    time: number\n): {\n    cancel: () => void;\n} {\n    let timeout: any;\n\n    function loop() {\n        timeout = setTimeout(() => {\n            method();\n            loop();\n        }, time);\n    }\n\n    loop();\n    return {\n        cancel() {\n            clearTimeout(timeout);\n        }\n    };\n}\nexport function isInteger(str: string): boolean {\n    return Boolean(str.match(/^[0-9]+$/));\n}\nexport function isFloat(str: string): boolean {\n    return Boolean(str.match(/^[0-9]+\\.[0-9]+$/));\n}\nexport function serializePrimitive(value: string | number | boolean): string {\n    return value.toString();\n}\nexport function deserializePrimitive(value: string): string | number | boolean {\n    if (value === 'true') {\n        return true;\n    } else if (value === 'false') {\n        return false;\n    } else if (isInteger(value)) {\n        return parseInt(value, 10);\n    } else if (isFloat(value)) {\n        return parseFloat(value);\n    } else {\n        return value;\n    }\n}\nexport function dotify(\n    obj: Record<string, any>,\n    prefix = '',\n    newobj: Record<string, any> = {}\n): Record<string, string> {\n    prefix = prefix ? `${ prefix }.` : prefix;\n\n    for (const key in obj) {\n        if (\n            !obj.hasOwnProperty(key) ||\n            obj[key] === undefined ||\n            obj[key] === null ||\n            typeof obj[key] === 'function'\n        ) {\n            continue;\n        } else if (\n            obj[key] &&\n            Array.isArray(obj[key]) &&\n            obj[key].length &&\n            obj[key].every((val: any) => typeof val !== 'object')\n        ) {\n            newobj[`${ prefix }${ key }[]`] = obj[key].join(',');\n        } else if (obj[key] && typeof obj[key] === 'object') {\n            newobj = dotify(obj[key], `${ prefix }${ key }`, newobj);\n        } else {\n            newobj[`${ prefix }${ key }`] = serializePrimitive(obj[key]);\n        }\n    }\n\n    return newobj;\n}\nexport function undotify(obj: Record<string, string>): Record<string, any> {\n    const result: Record<string, any> = {};\n\n    for (let key in obj) {\n        if (!obj.hasOwnProperty(key) || typeof obj[key] !== 'string') {\n            continue;\n        }\n\n        let value: any = obj[key];\n\n        if (key.match(/^.+\\[\\]$/)) {\n            key = key.slice(0, -2);\n            value = value.split(',').map(deserializePrimitive);\n        } else {\n            value = deserializePrimitive(value);\n        }\n\n        let keyResult = result;\n        const parts = key.split('.');\n\n        for (let i = 0; i < parts.length; i++) {\n            const part = parts[i];\n            const isLast = i + 1 === parts.length;\n            const isIndex = !isLast && isInteger(parts[i + 1]);\n\n            if (\n                part === 'constructor' ||\n                part === 'prototype' ||\n                part === '__proto__'\n            ) {\n                throw new Error(`Disallowed key: ${ part }`);\n            }\n\n            if (isLast) {\n                keyResult[part] = value;\n            } else {\n                keyResult = keyResult[part] =\n                    keyResult[part] || (isIndex ? [] : {});\n            }\n        }\n    }\n\n    return result;\n}\nexport type EventEmitterType = {\n    on: (\n        eventName: string,\n        handler: (...args: Array<any>) => any\n    ) => CancelableType;\n    once: (\n        eventName: string,\n        handler: (...args: Array<any>) => any\n    ) => CancelableType;\n    trigger: (\n        eventName: string,\n        ...args: ReadonlyArray<unknown>\n    ) => ZalgoPromise<void>;\n    triggerOnce: (\n        eventName: string,\n        ...args: ReadonlyArray<unknown>\n    ) => ZalgoPromise<void>;\n    reset: () => void;\n};\nexport function eventEmitter(): EventEmitterType {\n    const triggered = {};\n    let handlers = {};\n    const emitter = {\n        on(\n            eventName: string,\n            handler: (...args: Array<any>) => any\n        ): CancelableType {\n            // @ts-ignore\n            const handlerList = (handlers[eventName] = handlers[eventName] || []);\n            handlerList.push(handler);\n            let cancelled = false;\n            return {\n                cancel() {\n                    if (!cancelled) {\n                        cancelled = true;\n                        handlerList.splice(handlerList.indexOf(handler), 1);\n                    }\n                }\n            };\n        },\n\n        once(\n            eventName: string,\n            handler: (...args: Array<any>) => any\n        ): CancelableType {\n            const listener = emitter.on(eventName, () => {\n                listener.cancel();\n                handler();\n            });\n            return listener;\n        },\n\n        trigger(\n            eventName: string,\n            ...args: ReadonlyArray<unknown>\n        ): ZalgoPromise<void> {\n            // @ts-ignore\n            const handlerList = handlers[eventName];\n            const promises = [];\n\n            if (handlerList) {\n                for (const handler of handlerList) {\n                    promises.push(ZalgoPromise.try(() => handler(...args)));\n                }\n            }\n\n            return ZalgoPromise.all(promises).then(noop);\n        },\n\n        triggerOnce(\n            eventName: string,\n            ...args: ReadonlyArray<unknown>\n        ): ZalgoPromise<void> {\n            // @ts-ignore\n            if (triggered[eventName]) {\n                return ZalgoPromise.resolve();\n            }\n\n            // @ts-ignore\n            triggered[eventName] = true;\n            return emitter.trigger(eventName, ...args);\n        },\n\n        reset() {\n            handlers = {};\n        }\n    };\n    return emitter;\n}\nexport function camelToDasherize(string: string): string {\n    return string.replace(/([A-Z])/g, (g) => {\n        return `-${ g.toLowerCase() }`;\n    });\n}\nexport function dasherizeToCamel(string: string): string {\n    return string.replace(/-([a-z])/g, (g) => {\n        return g[1].toUpperCase();\n    });\n}\nexport function capitalizeFirstLetter(string: string): string {\n    return string.charAt(0).toUpperCase() + string.slice(1).toLowerCase();\n}\nexport function get(\n    item: Record<string, any>,\n    path: string,\n    def: unknown\n): unknown {\n    if (!path) {\n        return def;\n    }\n\n    const pathParts = path.split('.');\n\n    // Loop through each section of our key path\n    for (let i = 0; i < pathParts.length; i++) {\n        // If we have an object, we can get the key\n        if (typeof item === 'object' && item !== null) {\n            item = item[pathParts[i]]; // Otherwise, we should return the default (undefined if not provided)\n        } else {\n            return def;\n        }\n    }\n\n    // If our final result is undefined, we should return the default\n    return item === undefined ? def : item;\n}\nexport function safeTimeout(\n    method: (...args: Array<any>) => any,\n    time: number\n): void {\n    const interval = safeInterval(() => {\n        time -= 100;\n\n        if (time <= 0) {\n            interval.cancel();\n            method();\n        }\n    }, 100);\n}\nexport function defineLazyProp<T>(\n    obj: Record<string, any> | ReadonlyArray<unknown>,\n    key: string | number,\n    getter: () => T\n): void {\n    if (Array.isArray(obj)) {\n        if (typeof key !== 'number') {\n            throw new TypeError(`Array key must be number`);\n        }\n    } else if (typeof obj === 'object' && obj !== null) {\n        if (typeof key !== 'string') {\n            throw new TypeError(`Object key must be string`);\n        }\n    }\n\n    Object.defineProperty(obj, key, {\n        configurable:true,\n        enumerable:  true,\n        get:         () => {\n            // @ts-ignore\n            delete obj[key];\n            const value = getter();\n            // @ts-ignore\n            obj[key] = value;\n            return value;\n        },\n        set: (value: T) => {\n            // @ts-ignore\n            delete obj[key];\n            // @ts-ignore\n            obj[key] = value;\n        }\n    });\n}\nexport function arrayFrom<T>(item: Iterable<T>): ReadonlyArray<T> {\n    return Array.prototype.slice.call(item);\n}\nexport function isObject(item: unknown): boolean {\n    return typeof item === 'object' && item !== null;\n}\nexport function isObjectObject(obj: unknown): boolean {\n    return (\n        isObject(obj) &&\n        Object.prototype.toString.call(obj) === '[object Object]'\n    );\n}\nexport function isPlainObject(obj: unknown): boolean {\n    if (!isObjectObject(obj)) {\n        return false;\n    }\n\n    // @ts-ignore\n    const constructor = obj.constructor;\n\n    if (typeof constructor !== 'function') {\n        return false;\n    }\n\n    const prototype = constructor.prototype;\n\n    if (!isObjectObject(prototype)) {\n        return false;\n    }\n\n    if (!prototype.hasOwnProperty('isPrototypeOf')) {\n        return false;\n    }\n\n    return true;\n}\nexport function replaceObject<\n    T extends ReadonlyArray<unknown> | Record<string, any>\n>(\n    item: T,\n    replacer: (arg0: unknown, arg1: string | number, arg2: string) => unknown,\n    fullKey = ''\n): T {\n    if (Array.isArray(item)) {\n        const length = item.length;\n        const result: Array<unknown> = [];\n\n        for (let i = 0; i < length; i++) {\n            defineLazyProp(result, i, () => {\n                const itemKey = fullKey ? `${ fullKey }.${ i }` : `${ i }`;\n                const el = item[i];\n                let child = replacer(el, i, itemKey);\n\n                if (isPlainObject(child) || Array.isArray(child)) {\n                    // @ts-ignore\n                    child = replaceObject(child, replacer, itemKey);\n                }\n\n                return child;\n            });\n        }\n\n        // @ts-ignore\n        return result;\n    } else if (isPlainObject(item)) {\n        const result = {};\n\n        for (const key in item) {\n            if (!item.hasOwnProperty(key)) {\n                continue;\n            }\n\n            defineLazyProp(result, key, () => {\n                const itemKey = fullKey ? `${ fullKey }.${ key }` : `${ key }`;\n                const el = item[key];\n                let child = replacer(el, key, itemKey);\n\n                if (isPlainObject(child) || Array.isArray(child)) {\n                    // @ts-ignore\n                    child = replaceObject(child, replacer, itemKey);\n                }\n\n                return child;\n            });\n        }\n\n        // @ts-ignore\n        return result;\n    } else {\n        throw new Error(`Pass an object or array`);\n    }\n}\nexport function copyProp(\n    source: Record<string, any>,\n    target: Record<string, any>,\n    name: string,\n    def: unknown\n): void {\n    if (source.hasOwnProperty(name)) {\n        const descriptor = Object.getOwnPropertyDescriptor(source, name);\n        // @ts-ignore\n        Object.defineProperty(target, name, descriptor);\n    } else {\n        target[name] = def;\n    }\n}\ntype RegexResultType = {\n    text: string;\n    groups: ReadonlyArray<string>;\n    start: number;\n    end: number;\n    length: number;\n    replace: (text: string) => string;\n};\nexport function regex(\n    pattern: string | RegExp,\n    string: string,\n    start = 0\n): RegexResultType | null | undefined {\n    if (typeof pattern === 'string') {\n        // eslint-disable-next-line security/detect-non-literal-regexp\n        pattern = new RegExp(pattern);\n    }\n\n    const result = string.slice(start).match(pattern);\n\n    if (!result) {\n        return;\n    }\n\n    const index: number = result.index as number;\n    const regmatch = result[0];\n    return {\n        text:  regmatch,\n        groups:result.slice(1),\n        start: start + index,\n        end:   start + index + regmatch.length,\n        length:regmatch.length,\n\n        replace(text: string): string {\n            if (!regmatch) {\n                return '';\n            }\n\n            return `${ regmatch.slice(0, start + index) }${ text }${ regmatch.slice(\n                index + regmatch.length\n            ) }`;\n        }\n    };\n}\nexport function regexAll(\n    pattern: string | RegExp,\n    string: string\n): ReadonlyArray<RegexResultType> {\n    const matches = [];\n    let start = 0;\n\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n        const regmatch = regex(pattern, string, start);\n\n        if (!regmatch) {\n            break;\n        }\n\n        matches.push(regmatch);\n        // @ts-ignore\n        start = match.end;\n    }\n\n    return matches;\n}\nexport function isDefined(value: unknown | null | undefined): boolean {\n    return value !== null && value !== undefined;\n}\nexport function cycle(\n    method: (...args: Array<any>) => any\n): ZalgoPromise<void> {\n    // @ts-ignore - not even sure what to do with this\n    return ZalgoPromise.try(method).then(() => cycle(method));\n}\nexport function debounce<T>(\n    method: (...args: ReadonlyArray<unknown>) => T,\n    time = 100\n): (...args: ReadonlyArray<unknown>) => void {\n    let timeout: NodeJS.Timeout;\n\n    const debounceWrapper = function () {\n        clearTimeout(timeout);\n        timeout = setTimeout(() => {\n            // @ts-ignore\n            return method.apply(this, arguments);\n        }, time);\n    };\n\n    return setFunctionName(\n        debounceWrapper,\n        `${ getFunctionName(method) }::debounced`\n    );\n}\nexport function isRegex(item: unknown): boolean {\n    return Object.prototype.toString.call(item) === '[object RegExp]';\n}\ntype FunctionProxy<T extends (...args: Array<any>) => any> = (method: T) => T;\nexport const weakMapMemoize: FunctionProxy<any> = <R extends unknown>(\n    method: (arg: any) => R\n): ((...args: ReadonlyArray<any>) => R) => {\n    const weakmap = new WeakMap();\n    return function weakmapMemoized(arg: any): R {\n        // @ts-ignore\n        return weakmap.getOrSet(arg, () => method.call(this, arg));\n    };\n};\ntype FunctionPromiseProxy<\n    R extends unknown,\n    T extends (...args: ReadonlyArray<unknown>) => ZalgoPromise<R>\n> = (arg0: T) => T;\nexport const weakMapMemoizePromise: FunctionPromiseProxy<any, any> = <\n    R extends unknown\n>(\n        method: (arg: any) => ZalgoPromise<R>\n    ): ((...args: ReadonlyArray<any>) => ZalgoPromise<R>) => {\n    const weakmap = new WeakMap();\n    return function weakmapMemoizedPromise(arg: any): ZalgoPromise<R> {\n        // @ts-ignore\n        return weakmap.getOrSet(arg, () =>\n            // @ts-ignore\n            method.call(this, arg).finally(() => {\n                weakmap.delete(arg);\n            }));\n    };\n};\nexport function getOrSet<T extends unknown>(\n    obj: Record<string, any>,\n    key: string,\n    getter: () => T\n): T {\n    if (obj.hasOwnProperty(key)) {\n        return obj[key];\n    }\n\n    const val = getter();\n    obj[key] = val;\n    return val;\n}\nexport type CleanupType = {\n    set: <T extends unknown>(arg0: string, arg1: T) => T;\n    register: (arg0: (...args: Array<any>) => any) => void;\n    all: (err?: unknown) => ZalgoPromise<void>;\n};\nexport function cleanup(obj: Record<string, any>): CleanupType {\n    const tasks: any = [];\n    let cleaned = false;\n    let cleanErr: any;\n    const cleaner = {\n        set<T extends unknown>(name: string, item: T): T {\n            if (!cleaned) {\n                obj[name] = item;\n                cleaner.register(() => {\n                    delete obj[name];\n                });\n            }\n\n            return item;\n        },\n\n        register(method: (...args: Array<any>) => any) {\n            if (cleaned) {\n                method(cleanErr);\n            } else {\n                tasks.push(once(() => method(cleanErr)));\n            }\n        },\n\n        all(err?: unknown): ZalgoPromise<void> {\n            cleanErr = err;\n            const results = [];\n            cleaned = true;\n\n            while (tasks.length) {\n                const task = tasks.shift();\n                results.push(task());\n            }\n\n            return ZalgoPromise.all(results).then(noop);\n        }\n    };\n    return cleaner;\n}\nexport function tryCatch<T>(fn: () => T):\n    | {\n          result: T;\n          error: void;\n      }\n    | {\n          result: T | undefined;\n          error: unknown;\n      } {\n    let result;\n    let error;\n\n    try {\n        result = fn();\n    } catch (err) {\n        error = err;\n    }\n\n    return {\n        result,\n        error\n    };\n}\nexport function removeFromArray<X, T extends Array<X>>(arr: T, item: X): void {\n    const index = arr.indexOf(item);\n\n    if (index !== -1) {\n        arr.splice(index, 1);\n    }\n}\nexport function assertExists<T>(name: string, thing: void | null | T): T {\n    if (thing === null || typeof thing === 'undefined') {\n        throw new Error(`Expected ${ name } to be present`);\n    }\n\n    return thing;\n}\nexport function unique(arr: ReadonlyArray<string>): ReadonlyArray<string> {\n    const result: Record<string, boolean> = {};\n\n    for (const item of arr) {\n        result[item] = true;\n    }\n\n    return Object.keys(result);\n}\nexport const constHas = <\n    X extends string | boolean | number,\n    T extends Record<string, X>\n>(\n        constant: T,\n        value: X\n    ): boolean => {\n    return memoizedValues(constant).indexOf(value) !== -1;\n};\nexport function dedupeErrors<T>(\n    handler: (arg0: unknown) => T\n): (arg0: unknown) => T | void {\n    const seenErrors: unknown[] = [];\n    const seenStringifiedErrors: Record<string, unknown> = {};\n    return (err) => {\n        if (seenErrors.indexOf(err) !== -1) {\n            return;\n        }\n\n        seenErrors.push(err);\n        const stringifiedError = stringifyError(err);\n\n        if (seenStringifiedErrors[stringifiedError]) {\n            return;\n        }\n\n        seenStringifiedErrors[stringifiedError] = true;\n        return handler(err);\n    };\n}\nexport class ExtendableError extends Error {\n    constructor(message: string) {\n        super(message);\n        // eslint-disable-next-line unicorn/custom-error-definition\n        this.name = this.constructor.name;\n\n        if (typeof Error.captureStackTrace === 'function') {\n            Error.captureStackTrace(this, this.constructor);\n        } else {\n            this.stack = new Error(message).stack;\n        }\n    }\n}\n","export function hasNativeWeakMap(): boolean {\n    if (typeof WeakMap === 'undefined') {\n        return false;\n    }\n\n    if (typeof Object.freeze === 'undefined') {\n        return false;\n    }\n\n    try {\n        const testWeakMap = new WeakMap();\n        const testKey = {};\n        const testValue = '__testvalue__';\n        Object.freeze(testKey);\n        testWeakMap.set(testKey, testValue);\n\n        if (testWeakMap.get(testKey) === testValue) {\n            return true;\n        }\n\n        return false;\n    } catch (err) {\n        return false;\n    }\n}\n","/* eslint max-lines: off, unicorn/prefer-event-key: off */\nimport { ZalgoPromise } from 'zalgo-promise';\nimport type {\n    SameDomainWindowType,\n    CrossDomainWindowType\n} from 'cross-domain-utils';\nimport {\n    linkFrameWindow,\n    isWindowClosed,\n    assertSameDomain\n} from 'cross-domain-utils';\nimport { WeakMap } from 'cross-domain-safe-weakmap';\n\nimport {\n    inlineMemoize,\n    memoize,\n    noop,\n    stringify,\n    capitalizeFirstLetter,\n    once,\n    extend,\n    safeInterval,\n    uniqueID,\n    arrayFrom,\n    ExtendableError,\n    strHashStr\n} from './util';\nimport { isDevice } from './device';\nimport { KEY_CODES, ATTRIBUTES, UID_HASH_LENGTH } from './constants';\nimport type { CancelableType } from './types';\n\ntype ElementRefType = string | HTMLElement;\nexport function getBody(): HTMLBodyElement | HTMLElement {\n    // eslint-disable-next-line compat/compat\n    const body = document.body;\n\n    if (!body) {\n        throw new Error(`Body element not found`);\n    }\n\n    return body;\n}\nexport function isDocumentReady(): boolean {\n    // eslint-disable-next-line compat/compat\n    return Boolean(document.body) && document.readyState === 'complete';\n}\nexport function isDocumentInteractive(): boolean {\n    // eslint-disable-next-line compat/compat\n    return Boolean(document.body) && document.readyState === 'interactive';\n}\nexport function urlEncode(str: string): string {\n    return encodeURIComponent(str);\n}\nexport function waitForWindowReady(): ZalgoPromise<void> {\n    return inlineMemoize(waitForWindowReady, (): ZalgoPromise<void> => {\n        return new ZalgoPromise((resolve: Function) => {\n            if (isDocumentReady()) {\n                resolve();\n            }\n\n            window.addEventListener('load', () => resolve());\n        });\n    });\n}\ntype WaitForDocumentReady = () => ZalgoPromise<void>;\nexport const waitForDocumentReady: WaitForDocumentReady = memoize(() => {\n    return new ZalgoPromise((resolve: Function) => {\n        if (isDocumentReady() || isDocumentInteractive()) {\n            return resolve();\n        }\n\n        const interval = setInterval(() => {\n            if (isDocumentReady() || isDocumentInteractive()) {\n                clearInterval(interval);\n                return resolve();\n            }\n        }, 10);\n    });\n});\nexport function waitForDocumentBody(): ZalgoPromise<\n    HTMLElement | HTMLBodyElement\n    > {\n    return ZalgoPromise.try(() => {\n        if (document.body) {\n            return document.body;\n        }\n\n        return waitForDocumentReady().then(() => {\n            if (document.body) {\n                return document.body;\n            }\n\n            throw new Error('Document ready but document.body not present');\n        });\n    });\n}\nexport function parseQuery(queryString: string): Record<string, any> {\n    return inlineMemoize(\n        parseQuery,\n        (): Record<string, any> => {\n            const params = {};\n\n            if (!queryString) {\n                return params;\n            }\n\n            if (queryString.indexOf('=') === -1) {\n                return params;\n            }\n\n            for (let pair of queryString.split('&')) {\n                // @ts-ignore - should we actually be using a temp variable here. this seems strange\n                pair = pair.split('=');\n\n                if (pair[0] && pair[1]) {\n                    // @ts-ignore - params is untyped\n                    params[decodeURIComponent(pair[0])] = decodeURIComponent(\n                        pair[1]\n                    );\n                }\n            }\n\n            return params;\n        },\n        [ queryString ]\n    );\n}\nexport function getQueryParam(name: string): string {\n    return parseQuery(window.location.search.slice(1))[name];\n}\nexport function urlWillRedirectPage(url: string): boolean {\n    if (url.indexOf('#') === -1) {\n        return true;\n    }\n\n    if (url.indexOf('#') === 0) {\n        return false;\n    }\n\n    if (url.split('#')[0] === window.location.href.split('#')[0]) {\n        return false;\n    }\n\n    return true;\n}\nexport type Query = Record<string, boolean | string>;\nexport function formatQuery(obj: Query = {}): string {\n    return Object.keys(obj)\n        .filter((key) => {\n            return (\n                typeof obj[key] === 'string' || typeof obj[key] === 'boolean'\n            );\n        })\n        .map((key) => {\n            const val = obj[key];\n\n            if (typeof val !== 'string' && typeof val !== 'boolean') {\n                throw new TypeError(`Invalid type for query`);\n            }\n\n            return `${ urlEncode(key) }=${ urlEncode(val.toString()) }`;\n        })\n        .join('&');\n}\nexport function extendQuery(originalQuery: string, props: Query = {}): string {\n    if (!props || !Object.keys(props).length) {\n        return originalQuery;\n    }\n\n    return formatQuery({ ...parseQuery(originalQuery), ...props });\n}\nexport function extendUrl(\n    url: string,\n    options: {\n        query?: Query;\n        hash?: Query;\n    }\n): string {\n    const query = options.query || {};\n    const hash = options.hash || {};\n    let originalUrl;\n    let originalQuery;\n    let originalHash;\n    [ originalUrl, originalHash ] = url.split('#');\n    [ originalUrl, originalQuery ] = originalUrl.split('?');\n    const queryString = extendQuery(originalQuery, query);\n    const hashString = extendQuery(originalHash, hash);\n\n    if (queryString) {\n        originalUrl = `${ originalUrl }?${ queryString }`;\n    }\n\n    if (hashString) {\n        originalUrl = `${ originalUrl }#${ hashString }`;\n    }\n\n    return originalUrl;\n}\nexport function redirect(\n    url: string,\n    win: CrossDomainWindowType = window\n): ZalgoPromise<void> {\n    // @ts-upgrade TODO: - Need to get in zalgo promise defs\n    return new ZalgoPromise((resolve: Function) => {\n        // @ts-ignore\n        win.location = url;\n\n        if (!urlWillRedirectPage(url)) {\n            resolve();\n        }\n    });\n}\nexport function hasMetaViewPort(): boolean {\n    const meta = document.querySelector('meta[name=viewport]');\n\n    if (isDevice() && window.screen.width < 660 && !meta) {\n        return false;\n    }\n\n    return true;\n}\nexport function isElementVisible(el: HTMLElement): boolean {\n    return Boolean(\n        el.offsetWidth || el.offsetHeight || el.getClientRects().length\n    );\n}\nexport function getPerformance(): Performance | null | undefined {\n    return inlineMemoize(getPerformance, (): Performance | null | undefined => {\n        const performance = window.performance;\n\n        if (\n            performance &&\n            performance.now &&\n            performance.timing &&\n            performance.timing.connectEnd &&\n            performance.timing.navigationStart &&\n            Math.abs(performance.now() - Date.now()) > 1000 &&\n            performance.now() -\n                (performance.timing.connectEnd -\n                    performance.timing.navigationStart) >\n                0\n        ) {\n            return performance;\n        }\n    });\n}\nexport function enablePerformance(): boolean {\n    return Boolean(getPerformance());\n}\nexport function getPageRenderTime(): ZalgoPromise<number | null | undefined> {\n    return waitForDocumentReady().then(() => {\n        const performance = getPerformance();\n\n        if (!performance) {\n            return;\n        }\n\n        const timing = performance.timing;\n\n        if (timing.connectEnd && timing.domInteractive) {\n            return timing.domInteractive - timing.connectEnd;\n        }\n    });\n}\nexport function htmlEncode(html = ''): string {\n    return html\n        .toString()\n        .replace(/&/g, '&amp;')\n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;')\n        .replace(/\"/g, '&quot;')\n        .replace(/'/g, '&#39;')\n        .replace(/\\//g, '&#x2F;');\n}\nexport function isBrowser(): boolean {\n    return typeof window !== 'undefined' && window.location !== undefined;\n}\nexport function querySelectorAll(\n    selector: string,\n    doc: HTMLDocument = window.document\n): ReadonlyArray<HTMLElement> {\n    return Array.prototype.slice.call(doc.querySelectorAll(selector));\n}\nexport function onClick(\n    element: HTMLElement,\n    handler: (arg0: Event) => void\n): void {\n    element.addEventListener('touchstart', noop);\n    element.addEventListener('click', handler);\n    element.addEventListener('keypress', (event: Event) => {\n        if (\n            // @ts-ignore\n            event.keyCode === KEY_CODES.ENTER ||\n            // @ts-ignore\n            event.keyCode === KEY_CODES.SPACE\n        ) {\n            return handler(event);\n        }\n    });\n}\nexport function getScript({\n    host = window.location.host,\n    path,\n    reverse = false\n}: {\n    host?: string;\n    path: string;\n    reverse?: boolean;\n}): HTMLScriptElement | null | undefined {\n    return inlineMemoize(\n        getScript,\n        (): HTMLScriptElement | null | undefined => {\n            const url = `${ host }${ path }`;\n            const scripts = Array.prototype.slice.call(\n                document.getElementsByTagName('script')\n            );\n\n            if (reverse) {\n                scripts.reverse();\n            }\n\n            for (const script of scripts) {\n                if (!script.src) {\n                    continue;\n                }\n\n                const src = script.src\n                    .replace(/^https?:\\/\\//, '')\n                    .split('?')[0];\n\n                if (src === url) {\n                    return script;\n                }\n            }\n        },\n        [ path ]\n    );\n}\nexport function isLocalStorageEnabled(): boolean {\n    return inlineMemoize(isLocalStorageEnabled, () => {\n        try {\n            if (typeof window === 'undefined') {\n                return false;\n            }\n\n            if (window.localStorage) {\n                const value = Math.random().toString();\n                window.localStorage.setItem('__test__localStorage__', value);\n                const result = window.localStorage.getItem(\n                    '__test__localStorage__'\n                );\n                window.localStorage.removeItem('__test__localStorage__');\n\n                if (value === result) {\n                    return true;\n                }\n            }\n        } catch (err) {\n            // pass\n        }\n\n        return false;\n    });\n}\nexport function getBrowserLocales(): Array<{\n    country?: string;\n    lang: string;\n}> {\n    const nav = window.navigator;\n    const locales = nav.languages ? [ ...nav.languages ] : [];\n\n    if (nav.language) {\n        locales.push(nav.language);\n    }\n\n    // @ts-ignore - userLanguage isnt on navigator natively\n    if (nav.userLanguage) {\n        // @ts-ignore - userLanguage isnt on navigator natively\n        locales.push(nav.userLanguage);\n    }\n\n    // @ts-ignore can't guarantee that lang won't be undefined with this logic\n    return locales\n        .map((locale) => {\n            if (locale && locale.match(/^[a-z]{2}[-_][A-Z]{2}$/)) {\n                const [ lang, country ] = locale.split(/[-_]/);\n                return {\n                    country,\n                    lang\n                };\n            }\n\n            if (locale && locale.match(/^[a-z]{2}$/)) {\n                return {\n                    lang: locale\n                };\n            }\n\n            return null;\n        })\n        .filter(Boolean);\n}\nexport function appendChild(\n    container: HTMLElement,\n    child: HTMLElement | Text\n): void {\n    container.appendChild(child);\n}\nexport function isElement(element: unknown): boolean {\n    if (element instanceof window.Element) {\n        return true;\n    }\n\n    if (\n        element !== null &&\n        typeof element === 'object' &&\n        // @ts-ignore\n        element.nodeType === 1 &&\n        // @ts-ignore\n        typeof element.style === 'object' &&\n        // @ts-ignore\n        typeof element.ownerDocument === 'object'\n    ) {\n        return true;\n    }\n\n    return false;\n}\nexport function getElementSafe(\n    id: ElementRefType,\n    doc: Document | HTMLElement = document\n): HTMLElement | null | undefined {\n    if (isElement(id)) {\n        // @ts-ignore\n        return id;\n    }\n\n    if (typeof id === 'string') {\n        return doc.querySelector(id) as HTMLElement;\n    }\n}\nexport function getElement(\n    id: ElementRefType,\n    doc: Document | HTMLElement = document\n): HTMLElement {\n    const element = getElementSafe(id, doc);\n\n    if (element) {\n        return element;\n    }\n\n    throw new Error(`Can not find element: ${ stringify(id) }`);\n}\nexport function elementReady(id: ElementRefType): ZalgoPromise<HTMLElement> {\n    // @ts-upgrade TODO: add zalgo promise types\n    return new ZalgoPromise((resolve: Function, reject: Function) => {\n        const name = stringify(id);\n        let el = getElementSafe(id);\n\n        if (el) {\n            return resolve(el);\n        }\n\n        if (isDocumentReady()) {\n            return reject(\n                new Error(\n                    `Document is ready and element ${ name } does not exist`\n                )\n            );\n        }\n\n        const interval = setInterval(() => {\n            el = getElementSafe(id);\n\n            if (el) {\n                resolve(el);\n                clearInterval(interval);\n                return;\n            }\n\n            if (isDocumentReady()) {\n                clearInterval(interval);\n                return reject(\n                    new Error(\n                        `Document is ready and element ${ name } does not exist`\n                    )\n                );\n            }\n        }, 10);\n    });\n}\n// eslint-disable-next-line unicorn/custom-error-definition\nexport class PopupOpenError extends ExtendableError {}\ntype PopupOptions = {\n    name?: string;\n    width?: number;\n    height?: number;\n    top?: number;\n    left?: number;\n    status?: 0 | 1;\n    resizable?: 0 | 1;\n    toolbar?: 0 | 1;\n    menubar?: 0 | 1;\n    scrollbars?: 0 | 1;\n};\nexport function popup(\n    url: string,\n    options?: PopupOptions\n): CrossDomainWindowType {\n    options = options || {};\n    const { width, height } = options;\n    let top = 0;\n    let left = 0;\n\n    if (width) {\n        if (window.outerWidth) {\n            left = Math.round((window.outerWidth - width) / 2) + window.screenX;\n        } else if (window.screen.width) {\n            left = Math.round((window.screen.width - width) / 2);\n        }\n    }\n\n    if (height) {\n        if (window.outerHeight) {\n            top =\n                Math.round((window.outerHeight - height) / 2) + window.screenY;\n        } else if (window.screen.height) {\n            top = Math.round((window.screen.height - height) / 2);\n        }\n    }\n\n    if (width && height) {\n        options = {\n            top,\n            left,\n            width,\n            height,\n            status:    1,\n            toolbar:   0,\n            menubar:   0,\n            resizable: 1,\n            scrollbars:1,\n            ...options\n        };\n    }\n\n    const name = options.name || '';\n    delete options.name;\n    const params = Object.keys(options)\n        // eslint-disable-next-line array-callback-return\n        .map((key) => {\n            // @ts-ignore\n            if (options[key] !== null && options[key] !== undefined) {\n                // @ts-ignore options object is untyped\n                return `${ key }=${ stringify(options[key]) }`;\n            }\n        })\n        .filter(Boolean)\n        .join(',');\n    let win: Window | null;\n\n    try {\n        win = window.open(url, name, params) as Window;\n    } catch (err) {\n        throw new PopupOpenError(\n            `Can not open popup window - ${ err.stack || err.message }`\n        );\n    }\n\n    if (isWindowClosed(win)) {\n        const err = new PopupOpenError(`Can not open popup window - blocked`);\n        throw err;\n    }\n\n    window.addEventListener('unload', () => win?.close());\n    return win;\n}\nexport function writeToWindow(win: SameDomainWindowType, html: string): void {\n    try {\n        win.document.open();\n        win.document.write(html);\n        win.document.close();\n    } catch (err) {\n        try {\n            // @ts-ignore\n            win.location = `javascript: document.open(); document.write(${ JSON.stringify(\n                html\n            ) }); document.close();`;\n        } catch (err2) {\n            // pass\n        }\n    }\n}\nexport function writeElementToWindow(\n    win: SameDomainWindowType,\n    el: HTMLElement\n): void {\n    const tag = el.tagName.toLowerCase();\n\n    if (tag !== 'html') {\n        throw new Error(`Expected element to be html, got ${ tag }`);\n    }\n\n    const documentElement = win.document.documentElement;\n\n    // @ts-ignore\n    for (const child of arrayFrom(documentElement.children)) {\n        // @ts-ignore\n        documentElement.removeChild(child);\n    }\n\n    // @ts-ignore - HTMLCollection not assignable to unknown\n    for (const child of arrayFrom(el.children)) {\n        // @ts-ignore\n        documentElement.appendChild(child);\n    }\n}\nexport function setStyle(\n    el: HTMLElement,\n    styleText: string,\n    doc: Document = window.document\n): void {\n    // @ts-ignore\n    if (el.styleSheet) {\n        // @ts-ignore\n        el.styleSheet.cssText = styleText;\n    } else {\n        el.appendChild(doc.createTextNode(styleText));\n    }\n}\nexport type ElementOptionsType = {\n    style?: Record<string, string>;\n    id?: string;\n    class?: ReadonlyArray<string> | null | undefined;\n    attributes?: Record<string, string>;\n    styleSheet?: string | null | undefined;\n    html?: string | null | undefined;\n};\n\nlet awaitFrameLoadPromises: WeakMap<\n    HTMLIFrameElement,\n    ZalgoPromise<HTMLIFrameElement>\n>;\nexport function awaitFrameLoad(\n    frame: HTMLIFrameElement\n): ZalgoPromise<HTMLIFrameElement> {\n    awaitFrameLoadPromises = awaitFrameLoadPromises || new WeakMap();\n\n    if (awaitFrameLoadPromises.has(frame)) {\n        const promise = awaitFrameLoadPromises.get(frame);\n\n        if (promise) {\n            return promise;\n        }\n    }\n\n    const promise = new ZalgoPromise<HTMLIFrameElement>(\n        (resolve: Function, reject: Function) => {\n            frame.addEventListener('load', () => {\n                linkFrameWindow(frame);\n                resolve(frame);\n            });\n            frame.addEventListener('error', (err: Event) => {\n                if (frame.contentWindow) {\n                    resolve(frame);\n                } else {\n                    reject(err);\n                }\n            });\n        }\n    );\n    awaitFrameLoadPromises.set(frame, promise);\n    return promise;\n}\n\nexport function awaitFrameWindow(\n    frame: HTMLIFrameElement\n): ZalgoPromise<CrossDomainWindowType> {\n    return awaitFrameLoad(frame).then((loadedFrame: any) => {\n        if (!loadedFrame.contentWindow) {\n            throw new Error(`Could not find window in iframe`);\n        }\n\n        return loadedFrame.contentWindow;\n    });\n}\n\nconst getDefaultCreateElementOptions = (): ElementOptionsType => {\n    return {};\n};\n\nexport function createElement(\n    // eslint-disable-next-line default-param-last\n    tag = 'div',\n    // eslint-disable-next-line default-param-last\n    options: ElementOptionsType = getDefaultCreateElementOptions(),\n    container: HTMLElement | null | undefined\n): HTMLElement {\n    tag = tag.toLowerCase();\n    const element = document.createElement(tag);\n\n    if (options.style) {\n        extend(element.style, options.style);\n    }\n\n    if (options.class) {\n        element.className = options.class.join(' ');\n    }\n\n    if (options.id) {\n        element.setAttribute('id', options.id);\n    }\n\n    if (options.attributes) {\n        for (const key of Object.keys(options.attributes)) {\n            element.setAttribute(key, options.attributes[key]);\n        }\n    }\n\n    if (options.styleSheet) {\n        setStyle(element, options.styleSheet);\n    }\n\n    if (container) {\n        appendChild(container, element);\n    }\n\n    if (options.html) {\n        if (tag === 'iframe') {\n            // @ts-ignore\n            if (!container || !element.contentWindow) {\n                throw new Error(\n                    `Iframe html can not be written unless container provided and iframe in DOM`\n                );\n            }\n\n            // @ts-ignore\n            writeToWindow(element.contentWindow, options.html);\n        } else {\n            element.innerHTML = options.html;\n        }\n    }\n\n    return element;\n}\ntype StringMap = Record<string, string>;\nexport type IframeElementOptionsType = {\n    style?: StringMap;\n    class?: ReadonlyArray<string> | null | undefined;\n    attributes?: StringMap;\n    styleSheet?: string | null | undefined;\n    html?: string | null | undefined;\n    url?: string | null | undefined;\n};\n\nconst getDefaultIframeOptions = (): IframeElementOptionsType => {\n    return {};\n};\n\nconst getDefaultStringMap = (): StringMap => {\n    return {};\n};\n\nexport function iframe(\n    // eslint-disable-next-line default-param-last\n    options: IframeElementOptionsType = getDefaultIframeOptions(),\n    container: HTMLElement | null | undefined\n): HTMLIFrameElement {\n    const attributes = options.attributes || getDefaultStringMap();\n    const style = options.style || getDefaultStringMap();\n    const newAttributes = {\n        allowTransparency: 'true',\n        ...attributes\n    };\n    const newStyle = {\n        backgroundColor:'transparent',\n        border:         'none',\n        ...style\n    };\n    // @ts-ignore - no 3rd argument for container supplied to createElement\n    const frame = createElement('iframe', {\n        attributes:newAttributes,\n        style:     newStyle,\n        html:      options.html,\n        class:     options.class\n    });\n    const isIE = window.navigator.userAgent.match(/MSIE|Edge/i);\n\n    if (!frame.hasAttribute('id')) {\n        frame.setAttribute('id', uniqueID());\n    }\n\n    // @ts-ignore\n    awaitFrameLoad(frame);\n\n    if (container) {\n        const el = getElement(container);\n        el.appendChild(frame);\n    }\n\n    if (options.url || isIE) {\n        frame.setAttribute('src', options.url || 'about:blank');\n    }\n\n    // @ts-ignore\n    return frame;\n}\nexport function addEventListener(\n    obj: HTMLElement,\n    event: string,\n    // eslint-disable-next-line no-shadow\n    handler: (event: Event) => void\n): CancelableType {\n    obj.addEventListener(event, handler);\n    return {\n        cancel() {\n            obj.removeEventListener(event, handler);\n        }\n    };\n}\nexport function bindEvents(\n    element: HTMLElement,\n    eventNames: ReadonlyArray<string>,\n    handler: (event: Event) => void\n): CancelableType {\n    handler = once(handler);\n\n    for (const eventName of eventNames) {\n        element.addEventListener(eventName, handler);\n    }\n\n    return {\n        cancel: once(() => {\n            for (const eventName of eventNames) {\n                element.removeEventListener(eventName, handler);\n            }\n        })\n    };\n}\nconst VENDOR_PREFIXES = [ 'webkit', 'moz', 'ms', 'o' ];\nexport function setVendorCSS(\n    element: HTMLElement,\n    name: string,\n    value: string\n): void {\n    // @ts-ignore\n    element.style[name] = value;\n    const capitalizedName = capitalizeFirstLetter(name);\n\n    for (const prefix of VENDOR_PREFIXES) {\n        // @ts-ignore\n        element.style[`${ prefix }${ capitalizedName }`] = value;\n    }\n}\nconst ANIMATION_START_EVENTS = [\n    'animationstart',\n    'webkitAnimationStart',\n    'oAnimationStart',\n    'MSAnimationStart'\n];\nconst ANIMATION_END_EVENTS = [\n    'animationend',\n    'webkitAnimationEnd',\n    'oAnimationEnd',\n    'MSAnimationEnd'\n];\nexport function animate(\n    element: ElementRefType,\n    name: string,\n    clean: (arg0: (...args: Array<any>) => any) => void,\n    timeout = 1000\n): ZalgoPromise<void> {\n    // @ts-upgrade TODO - zalgo promise types\n    return new ZalgoPromise((resolve: Function, reject: Function) => {\n        const el = getElement(element);\n\n        if (!el) {\n            return resolve();\n        }\n\n        let hasStarted = false;\n        // eslint-disable-next-line prefer-const\n        let startTimeout: NodeJS.Timeout;\n        let endTimeout: NodeJS.Timeout;\n        // eslint-disable-next-line prefer-const\n        let startEvent: CancelableType;\n        // eslint-disable-next-line prefer-const\n        let endEvent: CancelableType;\n\n        function cleanUp() {\n            clearTimeout(startTimeout);\n            clearTimeout(endTimeout);\n            startEvent.cancel();\n            endEvent.cancel();\n        }\n\n        startEvent = bindEvents(el, ANIMATION_START_EVENTS, (event) => {\n            // @ts-ignore\n            if (event.target !== el || event.animationName !== name) {\n                return;\n            }\n\n            clearTimeout(startTimeout);\n            event.stopPropagation();\n            startEvent.cancel();\n            hasStarted = true;\n            endTimeout = setTimeout(() => {\n                cleanUp();\n                resolve();\n            }, timeout);\n        });\n        endEvent = bindEvents(el, ANIMATION_END_EVENTS, (event) => {\n            // @ts-ignore\n            if (event.target !== el || event.animationName !== name) {\n                return;\n            }\n\n            cleanUp();\n\n            if (\n                // @ts-ignore\n                typeof event.animationName === 'string' &&\n                // @ts-ignore\n                event.animationName !== name\n            ) {\n                return reject(\n                    // @ts-ignore\n                    `Expected animation name to be ${ name }, found ${ event.animationName }`\n                );\n            }\n\n            return resolve();\n        });\n        setVendorCSS(el, 'animationName', name);\n        startTimeout = setTimeout(() => {\n            if (!hasStarted) {\n                cleanUp();\n                return resolve();\n            }\n        }, 200);\n\n        if (clean) {\n            clean(cleanUp);\n        }\n    });\n}\nexport function makeElementVisible(element: HTMLElement): void {\n    element.style.setProperty('visibility', '');\n}\nexport function makeElementInvisible(element: HTMLElement): void {\n    element.style.setProperty('visibility', 'hidden', 'important');\n}\nexport function showElement(element: HTMLElement): void {\n    element.style.setProperty('display', '');\n}\nexport function hideElement(element: HTMLElement): void {\n    element.style.setProperty('display', 'none', 'important');\n}\nexport function destroyElement(element: HTMLElement): void {\n    if (element && element.parentNode) {\n        element.parentNode.removeChild(element);\n    }\n}\nexport function showAndAnimate(\n    element: HTMLElement,\n    name: string,\n    clean: (arg0: (...args: Array<any>) => any) => void\n): ZalgoPromise<void> {\n    const animation = animate(element, name, clean);\n    showElement(element);\n    return animation;\n}\nexport function animateAndHide(\n    element: HTMLElement,\n    name: string,\n    clean: (arg0: (...args: Array<any>) => any) => void\n): ZalgoPromise<void> {\n    return animate(element, name, clean).then(() => {\n        hideElement(element);\n    });\n}\nexport function addClass(element: HTMLElement, name: string): void {\n    element.classList.add(name);\n}\nexport function removeClass(element: HTMLElement, name: string): void {\n    element.classList.remove(name);\n}\nexport function isElementClosed(el: HTMLElement): boolean {\n    if (\n        !el ||\n        !el.parentNode ||\n        !el.ownerDocument ||\n        !el.ownerDocument.documentElement ||\n        !el.ownerDocument.documentElement.contains(el)\n    ) {\n        return true;\n    }\n\n    return false;\n}\nexport function watchElementForClose(\n    element: HTMLElement,\n    handler: () => unknown\n): CancelableType {\n    handler = once(handler);\n    let cancelled = false;\n    const mutationObservers: MutationObserver[] = [];\n    // eslint-disable-next-line prefer-const\n    let interval: CancelableType;\n    // eslint-disable-next-line prefer-const\n    let sacrificialFrame: HTMLIFrameElement;\n    let sacrificialFrameWin: HTMLIFrameElement;\n\n    const cancel = () => {\n        cancelled = true;\n\n        for (const observer of mutationObservers) {\n            observer.disconnect();\n        }\n\n        if (interval) {\n            interval.cancel();\n        }\n\n        if (sacrificialFrameWin) {\n            // eslint-disable-next-line no-use-before-define\n            sacrificialFrameWin.removeEventListener('unload', elementClosed);\n        }\n\n        if (sacrificialFrame) {\n            destroyElement(sacrificialFrame);\n        }\n    };\n\n    const elementClosed = () => {\n        if (!cancelled) {\n            handler();\n            cancel();\n        }\n    };\n\n    if (isElementClosed(element)) {\n        elementClosed();\n        return {\n            cancel\n        };\n    }\n\n    // Strategy 1: Mutation observer\n    if (window.MutationObserver) {\n        let mutationElement = element.parentElement;\n\n        while (mutationElement) {\n            const mutationObserver = new window.MutationObserver(() => {\n                if (isElementClosed(element)) {\n                    elementClosed();\n                }\n            });\n            mutationObserver.observe(mutationElement, {\n                childList: true\n            });\n            mutationObservers.push(mutationObserver);\n            mutationElement = mutationElement.parentElement;\n        }\n    }\n\n    // Strategy 2: Sacrificial iframe\n    sacrificialFrame = document.createElement('iframe');\n    sacrificialFrame.setAttribute('name', `__detect_close_${ uniqueID() }__`);\n    sacrificialFrame.style.display = 'none';\n    // @ts-ignore\n    awaitFrameWindow(sacrificialFrame).then((frameWin: HTMLIFrameElement) => {\n        // @ts-ignore\n        sacrificialFrameWin = assertSameDomain(frameWin);\n        sacrificialFrameWin.addEventListener('unload', elementClosed);\n    });\n    element.appendChild(sacrificialFrame);\n\n    // Strategy 3: Poller\n    const check = () => {\n        if (isElementClosed(element)) {\n            elementClosed();\n        }\n    };\n\n    interval = safeInterval(check, 1000);\n    return {\n        cancel\n    };\n}\nexport function fixScripts(\n    el: HTMLElement,\n    doc: Document = window.document\n): void {\n    // @ts-ignore - querySelectorAll takes a document not element\n    for (const script of querySelectorAll('script', el)) {\n        const parentNode = script.parentNode;\n\n        if (!parentNode) {\n            continue;\n        }\n\n        const newScript = doc.createElement('script');\n        // @ts-ignore textContent can be null\n        newScript.text = script.textContent;\n        parentNode.replaceChild(newScript, script);\n    }\n}\ntype OnResizeOptions = {\n    width?: boolean;\n    height?: boolean;\n    interval?: number;\n    win?: SameDomainWindowType;\n};\nexport function onResize(\n    el: HTMLElement,\n    handler: (arg0: { width: number; height: number }) => void,\n    {\n        width = true,\n        height = true,\n        interval = 100,\n        win = window\n    }: OnResizeOptions = {}\n): {\n    cancel: () => void;\n} {\n    let currentWidth = el.offsetWidth;\n    let currentHeight = el.offsetHeight;\n    let canceled = false;\n    handler({\n        width: currentWidth,\n        height:currentHeight\n    });\n\n    const check = () => {\n        if (canceled || !isElementVisible(el)) {\n            return;\n        }\n\n        const newWidth = el.offsetWidth;\n        const newHeight = el.offsetHeight;\n\n        if (\n            (width && newWidth !== currentWidth) ||\n            (height && newHeight !== currentHeight)\n        ) {\n            handler({\n                width: newWidth,\n                height:newHeight\n            });\n        }\n\n        currentWidth = newWidth;\n        currentHeight = newHeight;\n    };\n\n    let observer: MutationObserver;\n    let timeout: CancelableType;\n    win.addEventListener('resize', check);\n\n    // @ts-ignore\n    if (typeof win.ResizeObserver !== 'undefined') {\n        // @ts-ignore\n        observer = new win.ResizeObserver(check);\n        observer.observe(el);\n        timeout = safeInterval(check, interval * 10);\n        // @ts-ignore\n    } else if (typeof win.MutationObserver !== 'undefined') {\n        // @ts-ignore\n        observer = new win.MutationObserver(check);\n        observer.observe(el, {\n            attributes:   true,\n            childList:    true,\n            subtree:      true,\n            characterData:false\n        });\n        timeout = safeInterval(check, interval * 10);\n    } else {\n        timeout = safeInterval(check, interval);\n    }\n\n    return {\n        cancel: () => {\n            canceled = true;\n            observer.disconnect();\n            window.removeEventListener('resize', check);\n            timeout.cancel();\n        }\n    };\n}\nexport function getResourceLoadTime(url: string): number | null | undefined {\n    const performance = getPerformance();\n\n    if (!performance) {\n        return;\n    }\n\n    if (typeof performance.getEntries !== 'function') {\n        return;\n    }\n\n    const entries = performance.getEntries();\n\n    for (let i = 0; i < entries.length; i++) {\n        const entry = entries[i];\n\n        if (\n            entry &&\n            entry.name &&\n            entry.name.indexOf(url) === 0 &&\n            typeof entry.duration === 'number'\n        ) {\n            return Math.floor(entry.duration);\n        }\n    }\n}\nexport function isShadowElement(element: Node): boolean {\n    while (element.parentNode) {\n        element = element.parentNode;\n    }\n\n    return element.toString() === '[object ShadowRoot]';\n}\nexport function getShadowRoot(element: Node): Node | null | undefined {\n    while (element.parentNode) {\n        element = element.parentNode;\n    }\n\n    if (isShadowElement(element)) {\n        return element;\n    }\n}\nexport function getShadowHost(element: Node): HTMLElement | null | undefined {\n    const shadowRoot = getShadowRoot(element);\n\n    // @ts-ignore\n    if (shadowRoot && shadowRoot.host) {\n        // @ts-ignore\n        return shadowRoot.host;\n    }\n}\nexport function insertShadowSlot(element: HTMLElement): HTMLElement {\n    const shadowHost = getShadowHost(element);\n\n    if (!shadowHost) {\n        throw new Error(`Element is not in shadow dom`);\n    }\n\n    const slotName = `shadow-slot-${ uniqueID() }`;\n    const slot = document.createElement('slot');\n    slot.setAttribute('name', slotName);\n    element.appendChild(slot);\n    const slotProvider = document.createElement('div');\n    slotProvider.setAttribute('slot', slotName);\n    shadowHost.appendChild(slotProvider);\n\n    if (isShadowElement(shadowHost)) {\n        return insertShadowSlot(slotProvider);\n    }\n\n    return slotProvider;\n}\nexport function preventClickFocus(el: HTMLElement): void {\n    const onFocus = (event: Event) => {\n        el.removeEventListener('focus', onFocus);\n        event.preventDefault();\n        el.blur();\n        return false;\n    };\n\n    el.addEventListener('mousedown', () => {\n        el.addEventListener('focus', onFocus);\n        setTimeout(() => {\n            el.removeEventListener('focus', onFocus);\n        }, 1);\n    });\n}\nexport function getStackTrace(): string {\n    try {\n        throw new Error('_');\n    } catch (err) {\n        return err.stack || '';\n    }\n}\n\nfunction inferCurrentScript(): HTMLScriptElement | null | undefined {\n    try {\n        const stack = getStackTrace();\n        const stackDetails = (/.*at [^(]*\\((.*):(.+):(.+)\\)$/gi).exec(stack);\n        const scriptLocation = stackDetails && stackDetails[1];\n\n        if (!scriptLocation) {\n            return;\n        }\n\n        for (const script of Array.prototype.slice\n            .call(document.getElementsByTagName('script'))\n            .reverse()) {\n            if (script.src && script.src === scriptLocation) {\n                return script;\n            }\n        }\n    } catch (err) {\n        // pass\n    }\n}\n\nlet currentScript =\n    // eslint-disable-next-line compat/compat\n    typeof document !== 'undefined' ? document.currentScript : null;\ntype GetCurrentScript = () => HTMLScriptElement;\n// @ts-ignore = need memo helper\nexport const getCurrentScript: GetCurrentScript = memoize(() => {\n    if (currentScript) {\n        return currentScript;\n    }\n\n    // @ts-ignore\n    currentScript = inferCurrentScript();\n\n    if (currentScript) {\n        return currentScript;\n    }\n\n    throw new Error('Can not determine current script');\n});\nconst currentUID = uniqueID();\ntype GetCurrentScriptUID = () => string;\nexport const getCurrentScriptUID: GetCurrentScriptUID = memoize(() => {\n    let script;\n\n    try {\n        script = getCurrentScript();\n    } catch (err) {\n        return currentUID;\n    }\n\n    let uid = script.getAttribute(ATTRIBUTES.UID);\n\n    if (uid && typeof uid === 'string') {\n        return uid;\n    }\n\n    uid = script.getAttribute(`${ ATTRIBUTES.UID }-auto`);\n\n    if (uid && typeof uid === 'string') {\n        return uid;\n    }\n\n    if (script.src) {\n        const { src, dataset } = script;\n        const stringToHash = JSON.stringify({\n            src,\n            dataset\n        });\n        const hashedString = strHashStr(stringToHash);\n        const hashResult = hashedString.slice(\n            hashedString.length - UID_HASH_LENGTH\n        );\n        uid = `uid_${ hashResult }`;\n    } else {\n        uid = uniqueID();\n    }\n\n    script.setAttribute(`${ ATTRIBUTES.UID }-auto`, uid);\n    return uid;\n});\ntype SubmitFormOptions = {\n    url: string;\n    target: string;\n    body?: Record<string, string | boolean>;\n    method?: string;\n};\nexport function submitForm({\n    url,\n    target,\n    body,\n    method = 'post'\n}: SubmitFormOptions): void {\n    const form = document.createElement('form');\n    form.setAttribute('target', target);\n    form.setAttribute('method', method);\n    form.setAttribute('action', url);\n    form.style.display = 'none';\n\n    if (body) {\n        for (const key of Object.keys(body)) {\n            const input = document.createElement('input');\n            input.setAttribute('name', key);\n            input.setAttribute('value', body[key]?.toString());\n            form.appendChild(input);\n        }\n    }\n\n    getBody().appendChild(form);\n    form.submit();\n    getBody().removeChild(form);\n}\n","import { $Values } from 'utility-types';\nimport type { CrossDomainWindowType, DomainMatcher } from 'cross-domain-utils';\nimport {\n    isSameDomain,\n    isWindowClosed,\n    closeWindow,\n    getOpener,\n    WINDOW_TYPE,\n    isWindow,\n    assertSameDomain,\n    getFrameForWindow\n} from 'cross-domain-utils';\nimport { ZalgoPromise } from 'zalgo-promise';\nimport { uniqueID, memoizePromise, noop, submitForm } from 'belter';\nimport type { CustomSerializedType } from 'universal-serialize';\nimport { serializeType } from 'universal-serialize';\n\nimport { SERIALIZATION_TYPE, METHOD } from '../conf';\nimport { windowStore, globalStore } from '../global';\nimport { getWindowInstanceID } from '../lib';\nimport { linkWindow } from '../bridge';\nimport type { SendType } from '../types';\n\nfunction cleanupProxyWindows() {\n    const idToProxyWindow = globalStore('idToProxyWindow');\n\n    for (const id of idToProxyWindow.keys()) {\n        // @ts-ignore\n        if (idToProxyWindow.get(id).shouldClean()) {\n            idToProxyWindow.del(id);\n        }\n    }\n}\n\ntype SetLocationOptions = {\n    method?: $Values<typeof METHOD>;\n    body?: Record<string, string | boolean>;\n};\ntype SerializedWindowType = {\n    id: string;\n    getType: () => ZalgoPromise<$Values<typeof WINDOW_TYPE>>;\n    close: () => ZalgoPromise<void>;\n    focus: () => ZalgoPromise<void>;\n    isClosed: () => ZalgoPromise<boolean>;\n    setLocation: (url: string, opts?: SetLocationOptions) => ZalgoPromise<void>;\n    getName: () => ZalgoPromise<string | null | undefined>;\n    setName: (arg0: string) => ZalgoPromise<void>;\n    getInstanceID: () => ZalgoPromise<string>;\n};\n\nfunction getSerializedWindow(\n    winPromise: ZalgoPromise<CrossDomainWindowType>,\n    {\n        send,\n        id = uniqueID()\n    }: {\n        send: SendType;\n        id?: string;\n    }\n): SerializedWindowType {\n    let windowNamePromise: ZalgoPromise<string | undefined> = winPromise.then(\n        (win) => {\n            if (isSameDomain(win)) {\n                return assertSameDomain(win).name;\n            }\n        }\n    );\n    const windowTypePromise = winPromise.then((window) => {\n        if (!isWindowClosed(window)) {\n            return getOpener(window) ? WINDOW_TYPE.POPUP : WINDOW_TYPE.IFRAME;\n        } else {\n            throw new Error(`Window is closed, can not determine type`);\n        }\n    });\n    windowNamePromise.catch(noop);\n    windowTypePromise.catch(noop);\n\n    const getName = (): ZalgoPromise<string | undefined> =>\n        winPromise.then((win) => {\n            if (isWindowClosed(win)) {\n                return;\n            }\n\n            if (isSameDomain(win)) {\n                return assertSameDomain(win).name;\n            }\n\n            return windowNamePromise;\n        });\n\n    const getDefaultSetLocationOptions = () => {\n        return {};\n    };\n\n    const setLocation = (\n        href: string,\n        opts: SetLocationOptions = getDefaultSetLocationOptions()\n    ) =>\n        winPromise.then((win) => {\n            const domain = `${ window.location.protocol }//${ window.location.host }`;\n            const { method = METHOD.GET, body } = opts;\n\n            if (href.indexOf('/') === 0) {\n                href = `${ domain }${ href }`;\n            } else if (\n                !href.match(/^https?:\\/\\//) &&\n                href.indexOf(domain) !== 0\n            ) {\n                throw new Error(\n                    `Expected url to be http or https url, or absolute path, got ${ JSON.stringify(\n                        href\n                    ) }`\n                );\n            }\n\n            if (method === METHOD.POST) {\n                return getName().then((name) => {\n                    if (!name) {\n                        throw new Error(\n                            `Can not post to window without target name`\n                        );\n                    }\n\n                    submitForm({\n                        url:   href,\n                        // @ts-ignore unknown is not string\n                        target:name,\n                        method,\n                        body\n                    });\n                });\n            } else if (method === METHOD.GET) {\n                if (isSameDomain(win)) {\n                    try {\n                        if (\n                            win.location &&\n                            typeof win.location.replace === 'function'\n                        ) {\n                            win.location.replace(href);\n                            return;\n                        }\n                    } catch (err) {\n                        // pass\n                    }\n                }\n\n                // @ts-ignore\n                win.location = href;\n            } else {\n                throw new Error(`Unsupported method: ${ method }`);\n            }\n        });\n\n    return {\n        id,\n        // @ts-ignore\n        getType: () => {\n            return windowTypePromise;\n        },\n        // @ts-ignore\n        getInstanceID: memoizePromise(() =>\n            winPromise.then((win) =>\n                getWindowInstanceID(win, {\n                    send\n                }))),\n        close:() => winPromise.then(closeWindow),\n        // @ts-ignore\n        getName,\n        focus:() =>\n            winPromise.then((win) => {\n                win.focus();\n            }),\n        isClosed: () =>\n            winPromise.then((win) => {\n                return isWindowClosed(win);\n            }),\n        // @ts-ignore\n        setLocation,\n        setName: (name) =>\n            winPromise.then((win) => {\n                if (__POST_ROBOT__.__IE_POPUP_SUPPORT__) {\n                    linkWindow({\n                        win,\n                        name\n                    });\n                }\n\n                const sameDomain = isSameDomain(win);\n                const frame = getFrameForWindow(win);\n\n                if (!sameDomain) {\n                    throw new Error(\n                        `Can not set name for cross-domain window: ${ name }`\n                    );\n                }\n\n                assertSameDomain(win).name = name;\n\n                if (frame) {\n                    frame.setAttribute('name', name);\n                }\n\n                windowNamePromise = ZalgoPromise.resolve<string | undefined>(\n                    name\n                );\n            })\n    };\n}\n\nexport class ProxyWindow {\n    id?: string;\n    isProxyWindow: true = true;\n    serializedWindow: SerializedWindowType;\n    actualWindow: CrossDomainWindowType | null | undefined;\n    actualWindowPromise: ZalgoPromise<CrossDomainWindowType>;\n    send?: SendType;\n    name?: string;\n\n    constructor({\n        send,\n        win,\n        serializedWindow\n    }: {\n        win?: CrossDomainWindowType;\n        serializedWindow?: SerializedWindowType;\n        send: SendType;\n    }) {\n        this.actualWindowPromise = new ZalgoPromise();\n        this.serializedWindow =\n            serializedWindow ||\n            getSerializedWindow(this.actualWindowPromise, {\n                send\n            });\n        globalStore('idToProxyWindow').set(this.getID(), this);\n\n        if (win) {\n            this.setWindow(win, {\n                send\n            });\n        }\n    }\n\n    getID(): string {\n        return this.serializedWindow.id;\n    }\n\n    getType(): ZalgoPromise<$Values<typeof WINDOW_TYPE>> {\n        return this.serializedWindow.getType();\n    }\n\n    isPopup(): ZalgoPromise<boolean> {\n        return this.getType().then((type) => {\n            return type === WINDOW_TYPE.POPUP;\n        });\n    }\n\n    setLocation(\n        href: string,\n        opts?: SetLocationOptions\n    ): ZalgoPromise<ProxyWindow> {\n        return this.serializedWindow.setLocation(href, opts).then(() => this);\n    }\n\n    getName(): ZalgoPromise<string | null | undefined> {\n        return this.serializedWindow.getName();\n    }\n\n    setName(name: string): ZalgoPromise<ProxyWindow> {\n        return this.serializedWindow.setName(name).then(() => this);\n    }\n\n    close(): ZalgoPromise<ProxyWindow> {\n        return this.serializedWindow.close().then(() => this);\n    }\n\n    focus(): ZalgoPromise<ProxyWindow> {\n        const isPopupPromise = this.isPopup();\n        const getNamePromise = this.getName();\n        const reopenPromise = ZalgoPromise.hash({\n            isPopup:isPopupPromise,\n            name:   getNamePromise\n        }).then(({ isPopup, name }) => {\n            if (isPopup && name) {\n                window.open('', name);\n            }\n        });\n        const focusPromise = this.serializedWindow.focus();\n        return ZalgoPromise.all([ reopenPromise, focusPromise ]).then(() => this);\n    }\n\n    isClosed(): ZalgoPromise<boolean> {\n        return this.serializedWindow.isClosed();\n    }\n\n    getWindow(): CrossDomainWindowType | null | undefined {\n        return this.actualWindow;\n    }\n\n    setWindow(\n        win: CrossDomainWindowType,\n        {\n            send\n        }: {\n            send: SendType;\n        }\n    ): void {\n        this.actualWindow = win;\n        this.actualWindowPromise.resolve(this.actualWindow);\n        this.serializedWindow = getSerializedWindow(this.actualWindowPromise, {\n            send,\n            id: this.getID()\n        });\n        windowStore('winToProxyWindow').set(win, this);\n    }\n\n    awaitWindow(): ZalgoPromise<CrossDomainWindowType> {\n        return this.actualWindowPromise;\n    }\n\n    matchWindow(\n        win: CrossDomainWindowType,\n        {\n            send\n        }: {\n            send: SendType;\n        }\n    ): ZalgoPromise<boolean> {\n        return ZalgoPromise.try(() => {\n            if (this.actualWindow) {\n                return win === this.actualWindow;\n            }\n\n            return ZalgoPromise.hash({\n                proxyInstanceID:      this.getInstanceID(),\n                knownWindowInstanceID:getWindowInstanceID(win, {\n                    send\n                })\n            }).then(({ proxyInstanceID, knownWindowInstanceID }) => {\n                const match = proxyInstanceID === knownWindowInstanceID;\n\n                if (match) {\n                    this.setWindow(win, {\n                        send\n                    });\n                }\n\n                return match;\n            });\n        });\n    }\n\n    unwrap(): CrossDomainWindowType | ProxyWindow {\n        return this.actualWindow || this;\n    }\n\n    getInstanceID(): ZalgoPromise<string> {\n        return this.serializedWindow.getInstanceID();\n    }\n\n    shouldClean(): boolean {\n        return Boolean(this.actualWindow && isWindowClosed(this.actualWindow));\n    }\n\n    serialize(): SerializedWindowType {\n        return this.serializedWindow;\n    }\n\n    static unwrap(\n        win: CrossDomainWindowType | ProxyWindow\n    ): CrossDomainWindowType | ProxyWindow {\n        return ProxyWindow.isProxyWindow(win)\n            ? // @ts-ignore\n            win.unwrap()\n            : win;\n    }\n\n    static serialize(\n        win: CrossDomainWindowType | ProxyWindow,\n        {\n            send\n        }: {\n            send: SendType;\n        }\n    ): SerializedWindowType {\n        cleanupProxyWindows();\n        return ProxyWindow.toProxyWindow(win, {\n            send\n        }).serialize();\n    }\n\n    static deserialize(\n        serializedWindow: SerializedWindowType,\n        {\n            send\n        }: {\n            send: SendType;\n        }\n    ): ProxyWindow {\n        cleanupProxyWindows();\n        return (\n            globalStore<ProxyWindow>('idToProxyWindow').get(\n                serializedWindow.id\n            ) ||\n            new ProxyWindow({\n                serializedWindow,\n                send\n            })\n        );\n    }\n\n    static isProxyWindow(obj: CrossDomainWindowType | ProxyWindow): boolean {\n        // @ts-ignore\n        return Boolean(obj && !isWindow(obj) && obj.isProxyWindow);\n    }\n\n    static toProxyWindow(\n        win: CrossDomainWindowType | ProxyWindow,\n        {\n            send\n        }: {\n            send: SendType;\n        }\n    ): ProxyWindow {\n        cleanupProxyWindows();\n\n        if (ProxyWindow.isProxyWindow(win)) {\n            // @ts-ignore\n            return win;\n        }\n\n        // @ts-ignore\n        const actualWindow: CrossDomainWindowType = win;\n        return (\n            windowStore<ProxyWindow>('winToProxyWindow').get(actualWindow) ||\n            new ProxyWindow({\n                win: actualWindow,\n                send\n            })\n        );\n    }\n}\nexport type SerializedWindow = CustomSerializedType<\n    typeof SERIALIZATION_TYPE.CROSS_DOMAIN_WINDOW,\n    SerializedWindowType\n>;\nexport function serializeWindow(\n    destination: CrossDomainWindowType | ProxyWindow,\n    domain: DomainMatcher,\n    win: CrossDomainWindowType,\n    {\n        send\n    }: {\n        send: SendType;\n    }\n): SerializedWindow {\n    return serializeType(\n        SERIALIZATION_TYPE.CROSS_DOMAIN_WINDOW,\n        ProxyWindow.serialize(win, {\n            send\n        })\n    );\n}\nexport function deserializeWindow(\n    source: CrossDomainWindowType | ProxyWindow,\n    origin: string,\n    win: SerializedWindowType,\n    {\n        send\n    }: {\n        send: SendType;\n    }\n): ProxyWindow {\n    return ProxyWindow.deserialize(win, {\n        send\n    });\n}\n","export const KEY_CODES = {\n    ENTER:13,\n    SPACE:32\n};\nexport const ATTRIBUTES = {\n    UID: 'data-uid'\n};\nexport const UID_HASH_LENGTH = 30;\n","import { ZalgoPromise } from 'zalgo-promise';\nimport type { CrossDomainWindowType } from 'cross-domain-utils';\nimport {\n    getDomain,\n    isSameDomain,\n    isOpener,\n    isSameTopWindow,\n    matchDomain,\n    getUserAgent,\n    getDomainFromUrl\n} from 'cross-domain-utils/src';\nimport { noop } from 'belter/src';\n\nimport { BRIDGE_NAME_PREFIX } from '../conf';\nimport { windowStore } from '../global';\n\nexport function needsBridgeForBrowser(): boolean {\n    if (getUserAgent(window).match(/MSIE|trident|edge\\/12|edge\\/13/i)) {\n        return true;\n    }\n\n    return false;\n}\nexport function needsBridgeForWin(win: CrossDomainWindowType): boolean {\n    if (!isSameTopWindow(window, win)) {\n        return true;\n    }\n\n    return false;\n}\nexport function needsBridgeForDomain(\n    domain: string | null | undefined,\n    win: CrossDomainWindowType | null | undefined\n): boolean {\n    if (domain) {\n        if (getDomain() !== getDomainFromUrl(domain)) {\n            return true;\n        }\n    } else if (win) {\n        if (!isSameDomain(win)) {\n            return true;\n        }\n    }\n\n    return false;\n}\nexport function needsBridge({\n    win,\n    domain\n}: {\n    win?: CrossDomainWindowType;\n    domain?: string;\n}): boolean {\n    if (!needsBridgeForBrowser()) {\n        return false;\n    }\n\n    if (domain && !needsBridgeForDomain(domain, win)) {\n        return false;\n    }\n\n    if (win && !needsBridgeForWin(win)) {\n        return false;\n    }\n\n    return true;\n}\nexport function getBridgeName(domain: string): string {\n    domain = domain || getDomainFromUrl(domain);\n    const sanitizedDomain = domain.replace(/[^a-zA-Z0-9]+/g, '_');\n    const id = `${ BRIDGE_NAME_PREFIX }_${ sanitizedDomain }`;\n    return id;\n}\nexport function isBridge(): boolean {\n    return Boolean(window.name && window.name === getBridgeName(getDomain()));\n}\nexport const documentBodyReady: ZalgoPromise<HTMLBodyElement | HTMLElement> =\n    new ZalgoPromise((resolve) => {\n        if (window.document && window.document.body) {\n            return resolve(window.document.body);\n        }\n\n        const interval = setInterval(() => {\n            if (window.document && window.document.body) {\n                clearInterval(interval);\n                return resolve(window.document.body);\n            }\n        }, 10);\n    });\nexport function registerRemoteWindow(win: CrossDomainWindowType): void {\n    const remoteWindowPromises = windowStore('remoteWindowPromises');\n    remoteWindowPromises.getOrSet(win, () => new ZalgoPromise());\n}\nexport function findRemoteWindow(\n    win: CrossDomainWindowType\n): ZalgoPromise<\n    (\n        remoteWin: CrossDomainWindowType,\n        message: string,\n        remoteDomain: string\n    ) => void\n> {\n    const remoteWindowPromises = windowStore<ZalgoPromise<any>>(\n        'remoteWindowPromises'\n    );\n    const remoteWinPromise = remoteWindowPromises.get(win);\n\n    if (!remoteWinPromise) {\n        throw new Error(`Remote window promise not found`);\n    }\n\n    return remoteWinPromise;\n}\ntype SendMessageType = {\n    (arg0: string): void;\n    fireAndForget: (arg0: string) => void;\n};\nexport function registerRemoteSendMessage(\n    win: CrossDomainWindowType,\n    domain: string,\n    sendMessage: SendMessageType\n): void {\n    const sendMessageWrapper = (\n        remoteWin: CrossDomainWindowType,\n        remoteDomain: string,\n        message: string\n    ) => {\n        if (remoteWin !== win) {\n            throw new Error(`Remote window does not match window`);\n        }\n\n        if (!matchDomain(remoteDomain, domain)) {\n            throw new Error(\n                `Remote domain ${ remoteDomain } does not match domain ${ domain }`\n            );\n        }\n\n        sendMessage.fireAndForget(message);\n    };\n\n    findRemoteWindow(win).resolve(sendMessageWrapper);\n}\nexport function rejectRemoteSendMessage(\n    win: CrossDomainWindowType,\n    err: Error\n): void {\n    findRemoteWindow(win).reject(err).catch(noop);\n}\nexport function sendBridgeMessage(\n    win: CrossDomainWindowType,\n    domain: string,\n    message: string\n): ZalgoPromise<void> {\n    const messagingChild = isOpener(window, win);\n    const messagingParent = isOpener(win, window);\n\n    if (!messagingChild && !messagingParent) {\n        throw new Error(\n            `Can only send messages to and from parent and popup windows`\n        );\n    }\n\n    return findRemoteWindow(win).then((sendMessage) => {\n        return sendMessage(win, domain, message);\n    });\n}\n","import type { CrossDomainWindowType, DomainMatcher } from 'cross-domain-utils';\nimport { matchDomain, getDomain } from 'cross-domain-utils';\nimport { ZalgoPromise } from 'zalgo-promise';\nimport { uniqueID, isRegex, arrayFrom } from 'belter';\nimport type { CustomSerializedType } from 'universal-serialize';\nimport { serializeType } from 'universal-serialize';\n\nimport { MESSAGE_NAME, WILDCARD, SERIALIZATION_TYPE } from '../conf';\nimport { windowStore, globalStore } from '../global';\nimport type { OnType, SendType, CancelableType } from '../types';\n\nimport { ProxyWindow } from './window';\n\ntype StoredMethod = {\n    name: string;\n    domain: DomainMatcher;\n    val: (...args: Array<any>) => any;\n    source: CrossDomainWindowType | ProxyWindow;\n};\n\nfunction addMethod(\n    id: string,\n    val: (...args: Array<any>) => any,\n    name: string,\n    source: CrossDomainWindowType | ProxyWindow,\n    domain: DomainMatcher\n) {\n    const methodStore = windowStore<Record<string, any>>('methodStore');\n    const proxyWindowMethods = globalStore('proxyWindowMethods');\n\n    if (ProxyWindow.isProxyWindow(source)) {\n        proxyWindowMethods.set(id, {\n            val,\n            name,\n            domain,\n            source\n        });\n    } else {\n        proxyWindowMethods.del(id);\n        const methods = methodStore.getOrSet(source, () => ({}));\n        methods[id] = {\n            domain,\n            name,\n            val,\n            source\n        };\n    }\n}\n\nfunction lookupMethod(\n    source: CrossDomainWindowType,\n    id: string\n): StoredMethod | null | undefined {\n    const methodStore = windowStore<Record<string, any>>('methodStore');\n    const proxyWindowMethods = globalStore('proxyWindowMethods');\n    const methods = methodStore.getOrSet(source, () => ({}));\n    return methods[id] || proxyWindowMethods.get(id);\n}\n\nfunction stringifyArguments(args: ReadonlyArray<unknown> = []): string {\n    return arrayFrom(args)\n        .map((arg) => {\n            if (typeof arg === 'string') {\n                return `'${ arg }'`;\n            }\n\n            if (arg === undefined) {\n                return 'undefined';\n            }\n\n            if (arg === null) {\n                return 'null';\n            }\n\n            if (typeof arg === 'boolean') {\n                return arg.toString();\n            }\n\n            if (Array.isArray(arg)) {\n                return '[ ... ]';\n            }\n\n            if (typeof arg === 'object') {\n                return '{ ... }';\n            }\n\n            if (typeof arg === 'function') {\n                return '() => { ... }';\n            }\n\n            return `<${ typeof arg }>`;\n        })\n        .join(', ');\n}\n\nfunction listenForFunctionCalls({\n    on,\n    send\n}: {\n    on: OnType;\n    send: SendType;\n}): CancelableType {\n    return globalStore<CancelableType>('builtinListeners').getOrSet(\n        'functionCalls',\n        () => {\n            return on(\n                MESSAGE_NAME.METHOD,\n                {\n                    domain: WILDCARD\n                },\n                ({\n                    source,\n                    origin,\n                    data\n                }: {\n                    source: CrossDomainWindowType;\n                    origin: string;\n                    data: Record<string, any>;\n                }) => {\n                    const { id, name } = data;\n                    const meth = lookupMethod(source, id);\n\n                    if (!meth) {\n                        throw new Error(\n                            `Could not find method '${ name }' with id: ${\n                                data.id\n                            } in ${ getDomain(window) }`\n                        );\n                    }\n\n                    const { source: methodSource, domain, val } = meth;\n                    return ZalgoPromise.try(() => {\n                        if (!matchDomain(domain, origin)) {\n                            throw new Error(\n                                `Method '${ data.name }' domain ${ JSON.stringify(\n                                    isRegex(meth.domain)\n                                        ? (meth.domain as RegExp).source\n                                        : meth.domain\n                                ) } does not match origin ${ origin } in ${ getDomain(\n                                    window\n                                ) }`\n                            );\n                        }\n\n                        if (ProxyWindow.isProxyWindow(methodSource)) {\n                            return (\n                                methodSource\n                                    // @ts-ignore\n                                    .matchWindow(source, {\n                                        send\n                                    })\n                                    .then((match: any) => {\n                                        if (!match) {\n                                            throw new Error(\n                                                `Method call '${\n                                                    data.name\n                                                }' failed - proxy window does not match source in ${ getDomain(\n                                                    window\n                                                ) }`\n                                            );\n                                        }\n                                    })\n                            );\n                        }\n                    })\n                        .then(\n                            () => {\n                                return val.apply(\n                                    {\n                                        source,\n                                        origin\n                                    },\n                                    data.args\n                                );\n                            },\n                            (err: any) => {\n                                return ZalgoPromise.try(() => {\n                                    // @ts-ignore val returns any any\n                                    if (val.onError) {\n                                        // @ts-ignore val returns any any\n                                        return val.onError(err);\n                                    }\n                                }).then(() => {\n                                    // @ts-ignore\n                                    if (err.stack) {\n                                        // @ts-ignore\n                                        err.stack = `Remote call to ${ name }(${ stringifyArguments(\n                                            data.args\n                                            // @ts-ignore\n                                        ) }) failed\\n\\n${ err.stack }`;\n                                    }\n\n                                    throw err;\n                                });\n                            }\n                        )\n                        .then((result) => {\n                            return {\n                                result,\n                                id,\n                                name\n                            };\n                        });\n                }\n            );\n        }\n    );\n}\n\nexport type SerializedFunction = CustomSerializedType<\n    typeof SERIALIZATION_TYPE.CROSS_DOMAIN_FUNCTION,\n    {\n        id: string;\n        name: string;\n    }\n>;\n\ntype SerializableFunction<T> = {\n    (): ZalgoPromise<T> | T;\n    __id__?: string;\n    __name__?: string;\n};\nexport function serializeFunction<T>(\n    destination: CrossDomainWindowType | ProxyWindow,\n    domain: DomainMatcher,\n    val: SerializableFunction<T>,\n    key: string,\n    {\n        on,\n        send\n    }: {\n        on: OnType;\n        send: SendType;\n    }\n): SerializedFunction {\n    listenForFunctionCalls({\n        on,\n        send\n    });\n    const id = val.__id__ || uniqueID();\n    destination = ProxyWindow.unwrap(destination);\n    let name = val.__name__ || val.name || key;\n\n    if (\n        typeof name === 'string' &&\n        typeof name.indexOf === 'function' &&\n        name.indexOf('anonymous::') === 0\n    ) {\n        name = name.replace('anonymous::', `${ key }::`);\n    }\n\n    if (ProxyWindow.isProxyWindow(destination)) {\n        addMethod(id, val, name, destination, domain);\n        // @ts-ignore\n        destination.awaitWindow().then((win) => {\n            addMethod(id, val, name, win, domain);\n        });\n    } else {\n        addMethod(id, val, name, destination, domain);\n    }\n\n    return serializeType(SERIALIZATION_TYPE.CROSS_DOMAIN_FUNCTION, {\n        id,\n        name\n    });\n}\nexport function deserializeFunction<T>(\n    source: CrossDomainWindowType | ProxyWindow,\n    origin: string,\n    {\n        id,\n        name\n    }: {\n        id: string;\n        name: string;\n    },\n    {\n        send\n    }: {\n        send: SendType;\n    }\n): (...args: ReadonlyArray<unknown>) => ZalgoPromise<T> {\n    const getDeserializedFunction = (opts: Record<string, any> = {}) => {\n        function crossDomainFunctionWrapper<\n            X extends unknown\n        >(): ZalgoPromise<X> {\n            let originalStack: Error | string | undefined;\n\n            if (__DEBUG__) {\n                originalStack = new Error(`Original call to ${ name }():`).stack;\n            }\n\n            return ProxyWindow.toProxyWindow(source, {\n                send\n            })\n                .awaitWindow()\n                .then((win) => {\n                    const meth = lookupMethod(win, id);\n\n                    if (meth && meth.val !== crossDomainFunctionWrapper) {\n                        return meth.val.apply(\n                            {\n                                source:window,\n                                origin:getDomain()\n                            },\n                            // @ts-ignore arguments not assignable to any[]\n                            arguments\n                        );\n                    } else {\n                        // @ts-ignore\n                        const args = Array.prototype.slice.call(arguments);\n\n                        if (opts.fireAndForget) {\n                            return send(\n                                win,\n                                MESSAGE_NAME.METHOD,\n                                {\n                                    id,\n                                    name,\n                                    args\n                                },\n                                {\n                                    domain:       origin,\n                                    fireAndForget:true\n                                }\n                            );\n                        } else {\n                            return send(\n                                win,\n                                MESSAGE_NAME.METHOD,\n                                {\n                                    id,\n                                    name,\n                                    args\n                                },\n                                {\n                                    domain:       origin,\n                                    fireAndForget:false\n                                }\n                            ).then((res) => res.data.result);\n                        }\n                    }\n                })\n                .catch((err: any) => {\n                    // @ts-ignore\n                    if (__DEBUG__ && originalStack && err.stack) {\n                        err.stack = `Remote call to ${ name }(${ stringifyArguments(\n                            // @ts-ignore\n                            arguments\n                            // @ts-ignore\n                        ) }) failed\\n\\n${ err.stack }\\n\\n${ originalStack }`;\n                    }\n\n                    throw err;\n                });\n        }\n\n        crossDomainFunctionWrapper.__name__ = name;\n        crossDomainFunctionWrapper.__origin__ = origin;\n        crossDomainFunctionWrapper.__source__ = source;\n        crossDomainFunctionWrapper.__id__ = id;\n        crossDomainFunctionWrapper.origin = origin;\n        return crossDomainFunctionWrapper;\n    };\n\n    const crossDomainFunctionWrapper = getDeserializedFunction();\n    // @ts-ignore\n    crossDomainFunctionWrapper.fireAndForget = getDeserializedFunction({\n        fireAndForget: true\n    });\n    return crossDomainFunctionWrapper;\n}\n","import type { CrossDomainWindowType, DomainMatcher } from 'cross-domain-utils';\nimport { isWindow } from 'cross-domain-utils';\nimport type { Thenable } from 'universal-serialize';\nimport { TYPE, serialize, deserialize } from 'universal-serialize';\n\nimport { SERIALIZATION_TYPE } from '../conf';\nimport type { OnType, SendType } from '../types';\n\nimport type { SerializedFunction } from './function';\nimport { serializeFunction, deserializeFunction } from './function';\nimport type { SerializedPromise } from './promise';\nimport { serializePromise, deserializePromise } from './promise';\nimport type { SerializedWindow } from './window';\nimport { serializeWindow, deserializeWindow, ProxyWindow } from './window';\n\nexport function serializeMessage<T extends unknown>(\n    destination: CrossDomainWindowType | ProxyWindow,\n    domain: DomainMatcher,\n    obj: T,\n    {\n        on,\n        send\n    }: {\n        on: OnType;\n        send: SendType;\n    }\n): string {\n    return serialize(obj, {\n        [TYPE.PROMISE]: (val: Thenable, key: string): SerializedPromise =>\n            serializePromise(destination, domain, val, key, {\n                on,\n                send\n            }),\n        [TYPE.FUNCTION]: (\n            val: (...args: Array<any>) => any,\n            key: string\n        ): SerializedFunction =>\n            serializeFunction(destination, domain, val, key, {\n                on,\n                send\n            }),\n        // @ts-ignore args dont match\n        [TYPE.OBJECT]: (\n            val: CrossDomainWindowType\n        ): Record<string, any> | SerializedWindow => {\n            return isWindow(val) || ProxyWindow.isProxyWindow(val)\n                ? serializeWindow(destination, domain, val, {\n                    send\n                })\n                : val;\n        }\n    });\n}\nexport function deserializeMessage<T extends unknown>(\n    source: CrossDomainWindowType | ProxyWindow,\n    origin: string,\n    message: string,\n    {\n        send\n    }: {\n        on: OnType;\n        send: SendType;\n    }\n): T {\n    return deserialize(message, {\n        [SERIALIZATION_TYPE.CROSS_DOMAIN_ZALGO_PROMISE]: (serializedPromise) =>\n            deserializePromise(source, origin, serializedPromise),\n        [SERIALIZATION_TYPE.CROSS_DOMAIN_FUNCTION]: (serializedFunction) =>\n            deserializeFunction(source, origin, serializedFunction, {\n                send\n            }),\n        [SERIALIZATION_TYPE.CROSS_DOMAIN_WINDOW]: (serializedWindow) =>\n            deserializeWindow(source, origin, serializedWindow, {\n                send\n            })\n    });\n}\n","import type { CrossDomainWindowType, DomainMatcher } from 'cross-domain-utils';\nimport { ZalgoPromise } from 'zalgo-promise';\nimport type { CustomSerializedType, Thenable } from 'universal-serialize';\nimport { serializeType } from 'universal-serialize';\n\nimport { SERIALIZATION_TYPE } from '../conf';\nimport type { OnType, SendType } from '../types';\n\nimport type { SerializedFunction } from './function';\nimport { serializeFunction } from './function';\nimport { ProxyWindow } from './window';\n\nexport type SerializedPromise = CustomSerializedType<\n    typeof SERIALIZATION_TYPE.CROSS_DOMAIN_ZALGO_PROMISE,\n    {\n        then: SerializedFunction;\n    }\n>;\nexport function serializePromise(\n    destination: CrossDomainWindowType | ProxyWindow,\n    domain: DomainMatcher,\n    val: Thenable,\n    key: string,\n    {\n        on,\n        send\n    }: {\n        on: OnType;\n        send: SendType;\n    }\n): SerializedPromise {\n    return serializeType(SERIALIZATION_TYPE.CROSS_DOMAIN_ZALGO_PROMISE, {\n        then: serializeFunction(\n            destination,\n            domain,\n            // @ts-ignore this does not match Thenable\n            (resolve, reject) => val.then(resolve, reject),\n            key,\n            {\n                on,\n                send\n            }\n        )\n    });\n}\nexport function deserializePromise<T>(\n    source: CrossDomainWindowType | ProxyWindow,\n    origin: string,\n    {\n        then\n    }: {\n        then: (...args: Array<any>) => any;\n    }\n): ZalgoPromise<T> {\n    return new ZalgoPromise(then);\n}\n","import { $Values } from 'utility-types';\nimport type { CrossDomainWindowType } from 'cross-domain-utils';\nimport {\n    isSameDomain,\n    isSameTopWindow,\n    isActuallySameDomain,\n    getActualDomain,\n    getDomain,\n    PROTOCOL\n} from 'cross-domain-utils';\n\nimport { SEND_STRATEGY, WILDCARD } from '../../conf';\nimport { needsGlobalMessagingForBrowser } from '../../lib';\nimport { getGlobal } from '../../global';\nimport {\n    sendBridgeMessage,\n    needsBridgeForBrowser,\n    isBridge\n} from '../../bridge';\n\ntype SendStrategies = Record<\n    $Values<typeof SEND_STRATEGY>,\n    (arg0: CrossDomainWindowType, arg1: string, arg2: string) => void\n>;\n\nexport const SEND_MESSAGE_STRATEGIES: Partial<SendStrategies> = {};\n\nSEND_MESSAGE_STRATEGIES[SEND_STRATEGY.POST_MESSAGE] = (\n    win: CrossDomainWindowType,\n    serializedMessage: string,\n    domain: string\n) => {\n    if (domain.indexOf(PROTOCOL.FILE) === 0) {\n        domain = WILDCARD;\n    }\n\n    if (__TEST__) {\n        if (\n            needsGlobalMessagingForBrowser() &&\n            isSameTopWindow(window, win) === false\n        ) {\n            return;\n        }\n\n        if (domain.indexOf(PROTOCOL.MOCK) === 0) {\n            if (!isActuallySameDomain(win)) {\n                throw new Error(\n                    `Attempting to send message to mock domain ${ domain }, but window is actually cross-domain`\n                );\n            }\n\n            // $FlowFixMe\n            const windowDomain = getDomain(win);\n\n            if (windowDomain !== domain) {\n                throw new Error(\n                    `Mock domain target ${ domain } does not match window domain ${ windowDomain }`\n                );\n            }\n\n            // $FlowFixMe\n            domain = getActualDomain(win);\n        }\n    }\n\n    win.postMessage(serializedMessage, domain);\n};\n\nif (__POST_ROBOT__.__IE_POPUP_SUPPORT__) {\n    SEND_MESSAGE_STRATEGIES[SEND_STRATEGY.BRIDGE] = (\n        win: CrossDomainWindowType,\n        serializedMessage: string,\n        domain: string\n    ) => {\n        if (!needsBridgeForBrowser() && !isBridge()) {\n            throw new Error(`Bridge not needed for browser`);\n        }\n\n        if (isSameDomain(win)) {\n            throw new Error(\n                `Post message through bridge disabled between same domain windows`\n            );\n        }\n\n        if (isSameTopWindow(window, win) !== false) {\n            throw new Error(\n                `Can only use bridge to communicate between two different windows, not between frames`\n            );\n        }\n\n        sendBridgeMessage(win, domain, serializedMessage);\n    };\n}\n\nif (\n    __POST_ROBOT__.__IE_POPUP_SUPPORT__ ||\n    __POST_ROBOT__.__GLOBAL_MESSAGE_SUPPORT__\n) {\n    SEND_MESSAGE_STRATEGIES[SEND_STRATEGY.GLOBAL] = (\n        win: CrossDomainWindowType,\n        serializedMessage: string\n    ) => {\n        if (!needsGlobalMessagingForBrowser()) {\n            throw new Error(`Global messaging not needed for browser`);\n        }\n\n        if (!isSameDomain(win)) {\n            throw new Error(\n                `Post message through global disabled between different domain windows`\n            );\n        }\n\n        if (isSameTopWindow(window, win) !== false) {\n            throw new Error(\n                `Can only use global to communicate between two different windows, not between frames`\n            );\n        }\n\n        // $FlowFixMe\n        const foreignGlobal = getGlobal(win);\n\n        if (!foreignGlobal) {\n            throw new Error(`Can not find postRobot global on foreign window`);\n        }\n\n        foreignGlobal.receiveMessage({\n            source:window,\n            origin:getDomain(),\n            data:  serializedMessage\n        });\n    };\n}\n","import { ZalgoPromise } from 'zalgo-promise';\nimport type { CrossDomainWindowType } from 'cross-domain-utils';\nimport { isWindowClosed } from 'cross-domain-utils';\nimport { stringifyError, noop } from 'belter';\n\nimport { serializeMessage } from '../../serialize';\nimport { windowStore, getGlobalKey } from '../../global';\nimport type { Message, PackedMessages } from '../types';\nimport type { OnType, SendType } from '../../types';\n\nimport { SEND_MESSAGE_STRATEGIES } from './strategies';\n\nfunction packMessages(messages: ReadonlyArray<Message>): PackedMessages {\n    return {\n        [getGlobalKey()]: messages\n    };\n}\n\nexport function sendMessage(\n    win: CrossDomainWindowType,\n    domain: string,\n    message: Message,\n    {\n        on,\n        send\n    }: {\n        on: OnType;\n        send: SendType;\n    }\n): ZalgoPromise<void> {\n    return ZalgoPromise.try(() => {\n        const messageBuffer = windowStore<any>();\n        const domainBuffer = messageBuffer.getOrSet(win, () => ({}));\n        domainBuffer.buffer = domainBuffer.buffer || [];\n        domainBuffer.buffer.push(message);\n        domainBuffer.flush =\n            domainBuffer.flush ||\n            ZalgoPromise.flush().then(() => {\n                if (isWindowClosed(win)) {\n                    throw new Error('Window is closed');\n                }\n\n                const serializedMessage = serializeMessage(\n                    win,\n                    domain,\n                    packMessages(domainBuffer.buffer || []),\n                    {\n                        on,\n                        send\n                    }\n                );\n                delete domainBuffer.buffer;\n                const strategies = Object.keys(SEND_MESSAGE_STRATEGIES);\n                const errors = [];\n\n                for (const strategyName of strategies) {\n                    try {\n                        // @ts-ignore - retype the strategies as proper const\n                        SEND_MESSAGE_STRATEGIES[strategyName](\n                            win,\n                            serializedMessage,\n                            domain\n                        );\n                    } catch (err) {\n                        errors.push(err);\n                    }\n                }\n\n                if (errors.length === strategies.length) {\n                    throw new Error(\n                        `All post-robot messaging strategies failed:\\n\\n${ errors\n                            .map((err, i) => `${ i }. ${ stringifyError(err) }`)\n                            .join('\\n\\n') }`\n                    );\n                }\n            });\n        return domainBuffer.flush.then(() => {\n            delete domainBuffer.flush;\n        });\n    }).then(noop);\n}\n","import type { ZalgoPromise } from 'zalgo-promise';\nimport type { CrossDomainWindowType, DomainMatcher } from 'cross-domain-utils';\nimport { matchDomain } from 'cross-domain-utils';\nimport { isRegex, getOrSet, CancelableType } from 'belter';\n\nimport type { WildCard } from '../global';\nimport { getWildcard, globalStore, windowStore } from '../global';\nimport { WILDCARD } from '../conf';\n\nexport function resetListeners(): void {\n    const responseListeners = globalStore('responseListeners');\n    const erroredResponseListeners = globalStore('erroredResponseListeners');\n    responseListeners.reset();\n    erroredResponseListeners.reset();\n}\nconst __DOMAIN_REGEX__ = '__domain_regex__';\nexport type RequestListenerType = {\n    handler: (arg0: {\n        source: CrossDomainWindowType;\n        origin: string;\n        data: unknown;\n    }) => unknown | ZalgoPromise<unknown>;\n    handleError: (err: unknown) => void;\n    window: CrossDomainWindowType | null | undefined;\n    name: string;\n    domain: DomainMatcher;\n};\nexport type ResponseListenerType = {\n    name: string;\n    win: CrossDomainWindowType;\n    domain: DomainMatcher;\n    promise: ZalgoPromise<any>;\n    ack?: boolean | null | undefined;\n    cancelled?: boolean | null | undefined;\n};\nexport function addResponseListener(\n    hash: string,\n    listener: ResponseListenerType\n): void {\n    const responseListeners = globalStore('responseListeners');\n    responseListeners.set(hash, listener);\n}\nexport function getResponseListener(\n    hash: string\n): ResponseListenerType | null | undefined {\n    const responseListeners = globalStore('responseListeners');\n    // @ts-ignore responseListeners is unknown\n    return responseListeners.get(hash);\n}\nexport function deleteResponseListener(hash: string): void {\n    const responseListeners = globalStore('responseListeners');\n    responseListeners.del(hash);\n}\nexport function cancelResponseListeners(): void {\n    const responseListeners = globalStore('responseListeners');\n\n    for (const hash of responseListeners.keys()) {\n        const listener = responseListeners.get(hash);\n\n        if (listener) {\n            // @ts-ignore\n            listener.cancelled = true;\n        }\n\n        responseListeners.del(hash);\n    }\n}\nexport function markResponseListenerErrored(hash: string): void {\n    const erroredResponseListeners = globalStore('erroredResponseListeners');\n    erroredResponseListeners.set(hash, true);\n}\nexport function isResponseListenerErrored(hash: string): boolean {\n    const erroredResponseListeners = globalStore('erroredResponseListeners');\n    return erroredResponseListeners.has(hash);\n}\nexport function getRequestListener({\n    name,\n    win,\n    domain\n}: {\n    name: string;\n    win: (CrossDomainWindowType | WildCard) | null | undefined;\n    domain: (string | RegExp) | null | undefined;\n}): RequestListenerType | null | undefined {\n    const requestListeners = windowStore('requestListeners');\n\n    if (win === WILDCARD) {\n        win = null;\n    }\n\n    if (domain === WILDCARD) {\n        domain = null;\n    }\n\n    if (!name) {\n        throw new Error(`Name required to get request listener`);\n    }\n\n    for (const winQualifier of [ win, getWildcard() ]) {\n        if (!winQualifier) {\n            continue;\n        }\n\n        const nameListeners = requestListeners.get(winQualifier);\n\n        if (!nameListeners) {\n            continue;\n        }\n\n        // @ts-ignore what is nameListeners type\n        const domainListeners = nameListeners[name];\n\n        if (!domainListeners) {\n            continue;\n        }\n\n        if (domain && typeof domain === 'string') {\n            if (domainListeners[domain]) {\n                return domainListeners[domain];\n            }\n\n            if (domainListeners[__DOMAIN_REGEX__]) {\n                for (const { regex, listener } of domainListeners[\n                    __DOMAIN_REGEX__\n                ]) {\n                    if (matchDomain(regex, domain)) {\n                        return listener;\n                    }\n                }\n            }\n        }\n\n        if (domainListeners[WILDCARD]) {\n            return domainListeners[WILDCARD];\n        }\n    }\n}\nexport function addRequestListener(\n    {\n        name,\n        win,\n        domain\n    }: {\n        name: string;\n        win: (CrossDomainWindowType | WildCard) | null | undefined;\n        domain: DomainMatcher | null | undefined;\n    },\n    listener: RequestListenerType\n): {\n    cancel: () => void;\n} {\n    const requestListeners = windowStore('requestListeners');\n\n    if (!name || typeof name !== 'string') {\n        throw new Error(`Name required to add request listener`);\n    }\n\n    if (Array.isArray(win)) {\n        const listenersCollection: CancelableType[] = [];\n\n        for (const item of win) {\n            listenersCollection.push(\n                addRequestListener(\n                    {\n                        name,\n                        domain,\n                        win: item\n                    },\n                    listener\n                )\n            );\n        }\n\n        return {\n            cancel() {\n                for (const cancelListener of listenersCollection) {\n                    cancelListener.cancel();\n                }\n            }\n        };\n    }\n\n    if (Array.isArray(domain)) {\n        const listenersCollection: CancelableType[] = [];\n\n        for (const item of domain) {\n            listenersCollection.push(\n                addRequestListener(\n                    {\n                        name,\n                        win,\n                        domain: item\n                    },\n                    listener\n                )\n            );\n        }\n\n        return {\n            cancel() {\n                for (const cancelListener of listenersCollection) {\n                    cancelListener.cancel();\n                }\n            }\n        };\n    }\n\n    const existingListener = getRequestListener({\n        name,\n        win,\n        // @ts-ignore domain is unknown\n        domain\n    });\n\n    if (!win || win === WILDCARD) {\n        win = getWildcard();\n    }\n\n    domain = domain || WILDCARD;\n\n    if (existingListener) {\n        if (win && domain) {\n            throw new Error(\n                `Request listener already exists for ${ name } on domain ${ domain.toString() } for ${\n                    win === getWildcard() ? 'wildcard' : 'specified'\n                } window`\n            );\n        } else if (win) {\n            throw new Error(\n                `Request listener already exists for ${ name } for ${\n                    win === getWildcard() ? 'wildcard' : 'specified'\n                } window`\n            );\n        } else if (domain) {\n            throw new Error(\n                `Request listener already exists for ${ name } on domain ${ domain.toString() }`\n            );\n        } else {\n            throw new Error(`Request listener already exists for ${ name }`);\n        }\n    }\n\n    const nameListeners = requestListeners.getOrSet(win, () => ({})) as Record<\n        string,\n        any\n    >;\n    const domainListeners = getOrSet(nameListeners, name, () => ({}));\n    const strDomain = domain.toString();\n    let regexListeners: { regex: RegExp; listener: any }[];\n    let regexListener: { regex: RegExp; listener: any };\n\n    if (isRegex(domain)) {\n        regexListeners = getOrSet(domainListeners, __DOMAIN_REGEX__, () => []);\n        regexListener = {\n            // @ts-ignore wasn't narrowed\n            regex: domain,\n            listener\n        };\n        // @ts-ignore wasn't narrowed\n        regexListeners.push(regexListener);\n    } else {\n        // @ts-ignore\n        domainListeners[strDomain] = listener;\n    }\n\n    return {\n        cancel() {\n            // @ts-ignore\n            delete domainListeners[strDomain];\n\n            if (regexListener) {\n                regexListeners.splice(regexListeners.indexOf(regexListener, 1));\n\n                if (!regexListeners.length) {\n                    // @ts-ignore\n                    delete domainListeners[__DOMAIN_REGEX__];\n                }\n            }\n\n            if (!Object.keys(domainListeners).length) {\n                delete nameListeners[name];\n            }\n\n            if (win && !Object.keys(nameListeners).length) {\n                requestListeners.del(win);\n            }\n        }\n    };\n}\n","import { $Values } from 'utility-types';\nimport { ZalgoPromise } from 'zalgo-promise';\nimport type { CrossDomainWindowType } from 'cross-domain-utils';\nimport {\n    getDomain,\n    isWindowClosed,\n    matchDomain,\n    stringifyDomainPattern\n} from 'cross-domain-utils';\nimport { noop, stringifyError, uniqueID } from 'belter';\n\nimport { MESSAGE_TYPE, MESSAGE_ACK, MESSAGE_NAME } from '../../conf';\nimport { sendMessage } from '../send';\nimport {\n    getRequestListener,\n    getResponseListener,\n    deleteResponseListener,\n    isResponseListenerErrored\n} from '../listeners';\nimport type {\n    RequestMessage,\n    AckResponseMessage,\n    ResponseMessage\n} from '../types';\nimport type { OnType, SendType } from '../../types';\n\nexport function handleRequest(\n    source: CrossDomainWindowType,\n    origin: string,\n    message: RequestMessage,\n    {\n        on,\n        send\n    }: {\n        on: OnType;\n        send: SendType;\n    }\n): ZalgoPromise<void> {\n    const options = getRequestListener({\n        name:  message.name,\n        win:   source,\n        domain:origin\n    });\n    const logName =\n        message.name === MESSAGE_NAME.METHOD &&\n        message.data &&\n        // @ts-ignore need a better type assertion over unknown\n        typeof message.data.name === 'string'\n            ? // @ts-ignore need a better type assertion over unknown\n            `${ message.data.name }()`\n            : message.name;\n\n    if (__DEBUG__) {\n        // eslint-disable-next-line no-console\n        console.info('receive::req', logName, origin, '\\n\\n', message.data);\n    }\n\n    function sendAck(): ZalgoPromise<void | ZalgoPromise<void>> {\n        return ZalgoPromise.flush().then(() => {\n            if (message.fireAndForget || isWindowClosed(source)) {\n                return;\n            }\n\n            try {\n                return sendMessage(\n                    source,\n                    origin,\n                    {\n                        id:    uniqueID(),\n                        origin:getDomain(window),\n                        type:  MESSAGE_TYPE.ACK,\n                        hash:  message.hash,\n                        name:  message.name\n                    },\n                    {\n                        on,\n                        send\n                    }\n                );\n            } catch (err) {\n                throw new Error(\n                    `Send ack message failed for ${ logName } in ${ getDomain() }\\n\\n${ stringifyError(\n                        err\n                    ) }`\n                );\n            }\n        });\n    }\n\n    function sendResponse(\n        ack: $Values<typeof MESSAGE_ACK>,\n        data: Record<string, any> | null | undefined,\n        error?: unknown | null | undefined\n    ): ZalgoPromise<void | ZalgoPromise<void>> {\n        return ZalgoPromise.flush().then(() => {\n            if (message.fireAndForget || isWindowClosed(source)) {\n                return;\n            }\n\n            if (__DEBUG__) {\n                if (ack === MESSAGE_ACK.SUCCESS) {\n                    console.info('respond::res', logName, origin, '\\n\\n', data); // eslint-disable-line no-console\n                } else if (ack === MESSAGE_ACK.ERROR) {\n                    // eslint-disable-next-line no-console\n                    console.error(\n                        'respond::err',\n                        logName,\n                        origin,\n                        '\\n\\n',\n                        error\n                    );\n                }\n            }\n\n            try {\n                return sendMessage(\n                    source,\n                    origin,\n                    {\n                        id:    uniqueID(),\n                        origin:getDomain(window),\n                        type:  MESSAGE_TYPE.RESPONSE,\n                        hash:  message.hash,\n                        name:  message.name,\n                        ack,\n                        data,\n                        error\n                    },\n                    {\n                        on,\n                        send\n                    }\n                );\n            } catch (err) {\n                throw new Error(\n                    `Send response message failed for ${ logName } in ${ getDomain() }\\n\\n${ stringifyError(\n                        err\n                    ) }`\n                );\n            }\n        });\n    }\n\n    return ZalgoPromise.all([\n        sendAck(),\n        ZalgoPromise.try(() => {\n            if (!options) {\n                throw new Error(\n                    `No handler found for post message: ${ message.name } from ${ origin } in ${ window.location.protocol }//${ window.location.host }${ window.location.pathname }`\n                );\n            }\n\n            if (!matchDomain(options.domain, origin)) {\n                throw new Error(\n                    `Request origin ${ origin } does not match domain ${ options.domain.toString() }`\n                );\n            }\n\n            const data = message.data;\n            return options.handler({\n                source,\n                origin,\n                data\n            });\n        }).then(\n            (data) => {\n                // @ts-ignore\n                return sendResponse(MESSAGE_ACK.SUCCESS, data);\n            },\n            (error) => {\n                return sendResponse(MESSAGE_ACK.ERROR, null, error);\n            }\n        )\n    ])\n        .then(noop)\n        .catch((err) => {\n            if (options && options.handleError) {\n                return options.handleError(err);\n            } else {\n                throw err;\n            }\n        });\n}\nexport function handleAck(\n    source: CrossDomainWindowType,\n    origin: string,\n    message: AckResponseMessage\n): void {\n    if (isResponseListenerErrored(message.hash)) {\n        return;\n    }\n\n    const options = getResponseListener(message.hash);\n\n    if (!options) {\n        throw new Error(\n            `No handler found for post message ack for message: ${ message.name } from ${ origin } in ${ window.location.protocol }//${ window.location.host }${ window.location.pathname }`\n        );\n    }\n\n    try {\n        if (!matchDomain(options.domain, origin)) {\n            throw new Error(\n                `Ack origin ${ origin } does not match domain ${ options.domain.toString() }`\n            );\n        }\n\n        if (source !== options.win) {\n            throw new Error(`Ack source does not match registered window`);\n        }\n    } catch (err) {\n        options.promise.reject(err);\n    }\n\n    options.ack = true;\n}\nexport function handleResponse(\n    source: CrossDomainWindowType,\n    origin: string,\n    message: ResponseMessage\n): void | ZalgoPromise<void> {\n    if (isResponseListenerErrored(message.hash)) {\n        return;\n    }\n\n    const options = getResponseListener(message.hash);\n\n    if (!options) {\n        throw new Error(\n            `No handler found for post message response for message: ${ message.name } from ${ origin } in ${ window.location.protocol }//${ window.location.host }${ window.location.pathname }`\n        );\n    }\n\n    if (!matchDomain(options.domain, origin)) {\n        throw new Error(\n            `Response origin ${ origin } does not match domain ${ stringifyDomainPattern(\n                options.domain\n            ) }`\n        );\n    }\n\n    if (source !== options.win) {\n        throw new Error(`Response source does not match registered window`);\n    }\n\n    deleteResponseListener(message.hash);\n    const logName =\n        message.name === MESSAGE_NAME.METHOD &&\n        message.data &&\n        // @ts-ignore - narrowing failed\n        typeof message.data.name === 'string'\n            ? // @ts-ignore - narrowing failed\n            `${ message.data.name }()`\n            : message.name;\n\n    if (message.ack === MESSAGE_ACK.ERROR) {\n        if (__DEBUG__) {\n            // eslint-disable-next-line no-console\n            console.error(\n                'receive::err',\n                logName,\n                origin,\n                '\\n\\n',\n                message.error\n            );\n        }\n\n        options.promise.reject(message.error);\n    } else if (message.ack === MESSAGE_ACK.SUCCESS) {\n        if (__DEBUG__) {\n            console.info('receive::res', logName, origin, '\\n\\n', message.data); // eslint-disable-line no-console\n        }\n\n        options.promise.resolve({\n            source,\n            origin,\n            data: message.data\n        });\n    }\n}\n","import { ZalgoPromise } from 'zalgo-promise';\nimport type { CrossDomainWindowType } from 'cross-domain-utils';\nimport {\n    isWindowClosed,\n    getDomain,\n    isSameTopWindow,\n    PROTOCOL\n} from 'cross-domain-utils';\nimport { addEventListener, noop } from 'belter';\n\nimport type { Message } from '../types';\nimport { MESSAGE_TYPE } from '../../conf';\nimport { markWindowKnown, needsGlobalMessagingForBrowser } from '../../lib';\nimport { deserializeMessage } from '../../serialize';\nimport { getGlobal, globalStore, getGlobalKey } from '../../global';\nimport type {\n    OnType,\n    SendType,\n    MessageEvent,\n    CancelableType\n} from '../../types';\n\nimport { handleRequest, handleResponse, handleAck } from './types';\n\nfunction deserializeMessages(\n    message: string,\n    source: CrossDomainWindowType,\n    origin: string,\n    {\n        on,\n        send\n    }: {\n        on: OnType;\n        send: SendType;\n    }\n): ReadonlyArray<Message> | null | undefined {\n    let parsedMessage: any;\n\n    try {\n        parsedMessage = deserializeMessage(source, origin, message, {\n            on,\n            send\n        });\n    } catch (err) {\n        return;\n    }\n\n    if (!parsedMessage) {\n        return;\n    }\n\n    if (typeof parsedMessage !== 'object' || parsedMessage === null) {\n        return;\n    }\n\n    const parseMessages = parsedMessage[getGlobalKey()];\n\n    if (!Array.isArray(parseMessages)) {\n        return;\n    }\n\n    return parseMessages;\n}\n\nexport function receiveMessage(\n    event: MessageEvent,\n    {\n        on,\n        send\n    }: {\n        on: OnType;\n        send: SendType;\n    }\n): void {\n    const receivedMessages = globalStore('receivedMessages');\n\n    try {\n        if (!window || window.closed || !event.source) {\n            return;\n        }\n    } catch (err) {\n        return;\n    }\n\n    let { source, origin, data } = event;\n\n    if (__TEST__) {\n        if (isWindowClosed(source)) {\n            return;\n        }\n\n        // $FlowFixMe\n        origin = getDomain(source);\n    }\n\n    const messages = deserializeMessages(data, source, origin, {\n        on,\n        send\n    });\n\n    if (!messages) {\n        return;\n    }\n\n    markWindowKnown(source);\n\n    for (const message of messages) {\n        if (receivedMessages.has(message.id)) {\n            return;\n        }\n\n        receivedMessages.set(message.id, true);\n\n        // @ts-ignore message is unknown\n        if (isWindowClosed(source) && !message.fireAndForget) {\n            return;\n        }\n\n        if (message.origin.indexOf(PROTOCOL.FILE) === 0) {\n            origin = `${ PROTOCOL.FILE }//`;\n        }\n\n        try {\n            if (message.type === MESSAGE_TYPE.REQUEST) {\n                handleRequest(source, origin, message, {\n                    on,\n                    send\n                });\n            } else if (message.type === MESSAGE_TYPE.RESPONSE) {\n                handleResponse(source, origin, message);\n            } else if (message.type === MESSAGE_TYPE.ACK) {\n                handleAck(source, origin, message);\n            }\n        } catch (err) {\n            setTimeout(() => {\n                throw err;\n            }, 0);\n        }\n    }\n}\nexport function setupGlobalReceiveMessage({\n    on,\n    send\n}: {\n    on: OnType;\n    send: SendType;\n}): void {\n    const global = getGlobal();\n\n    global.receiveMessage =\n        global.receiveMessage ||\n        ((message: any) =>\n            receiveMessage(message, {\n                on,\n                send\n            }));\n}\ntype ListenerEvent = {\n    source: CrossDomainWindowType;\n    origin: string;\n    data: string;\n    sourceElement: CrossDomainWindowType;\n    originalEvent?: {\n        origin: string;\n    };\n};\nexport function messageListener(\n    event: ListenerEvent,\n    {\n        on,\n        send\n    }: {\n        on: OnType;\n        send: SendType;\n    }\n): void {\n    ZalgoPromise.try(() => {\n        try {\n            noop(event.source);\n        } catch (err) {\n            return;\n        }\n\n        const source = event.source || event.sourceElement;\n        let origin =\n            event.origin || (event.originalEvent && event.originalEvent.origin);\n        const data = event.data;\n\n        if (origin === 'null') {\n            origin = `${ PROTOCOL.FILE }//`;\n        }\n\n        if (!source) {\n            return;\n        }\n\n        if (!origin) {\n            throw new Error(`Post message did not have origin domain`);\n        }\n\n        if (__TEST__) {\n            if (\n                needsGlobalMessagingForBrowser() &&\n                isSameTopWindow(source, window) === false\n            ) {\n                return;\n            }\n        }\n\n        receiveMessage(\n            {\n                source,\n                origin,\n                data\n            },\n            {\n                on,\n                send\n            }\n        );\n    });\n}\nexport function listenForMessages({\n    on,\n    send\n}: {\n    on: OnType;\n    send: SendType;\n}): CancelableType {\n    return globalStore<any>().getOrSet('postMessageListener', () => {\n        // @ts-ignore addEventListener takes an HTMLELement not Window like\n        return addEventListener(window, 'message', (event) => {\n            // @ts-ignore\n            messageListener(event, {\n                on,\n                send\n            });\n        });\n    });\n}\nexport function stopListenForMessages(): void {\n    const listener = globalStore<CancelableType>().get('postMessageListener');\n\n    if (listener) {\n        listener.cancel();\n    }\n}\n","import { ZalgoPromise } from 'zalgo-promise';\n\nimport type { RequestListenerType } from '../drivers';\nimport { addRequestListener } from '../drivers';\nimport { WILDCARD } from '../conf';\nimport type { ServerOptionsType, HandlerType, CancelableType } from '../types';\n\nconst getDefaultServerOptions = (): ServerOptionsType => {\n    return {};\n};\n\nexport function on(\n    name: string,\n    options: ServerOptionsType | HandlerType,\n    handler?: HandlerType | null | undefined\n): CancelableType {\n    if (!name) {\n        throw new Error('Expected name');\n    }\n\n    options = options || getDefaultServerOptions();\n\n    if (typeof options === 'function') {\n        handler = options;\n        options = getDefaultServerOptions();\n    }\n\n    if (!handler) {\n        throw new Error('Expected handler');\n    }\n\n    options = options || {};\n    options.name = name;\n    options.handler = handler || options.handler;\n    const win = options.window;\n    const domain = options.domain;\n    const listenerOptions: RequestListenerType = {\n        handler:    options.handler,\n        handleError:options.errorHandler ||\n            ((err) => {\n                throw err;\n            }),\n        window:win,\n        domain:domain || WILDCARD,\n        name\n    };\n    const requestListener = addRequestListener(\n        {\n            name,\n            win,\n            domain\n        },\n        listenerOptions\n    );\n    return {\n        cancel() {\n            requestListener.cancel();\n        }\n    };\n}\ntype CancelableZalgoPromise<T> = ZalgoPromise<T> & {\n    cancel: () => void;\n};\nexport function once(\n    name: string,\n    options?: ServerOptionsType | HandlerType,\n    handler?: HandlerType\n): CancelableZalgoPromise<{\n    source: unknown;\n    origin: string;\n    data: Record<string, any>;\n}> {\n    options = options || getDefaultServerOptions();\n\n    if (typeof options === 'function') {\n        handler = options;\n        options = getDefaultServerOptions();\n    }\n\n    const promise = new ZalgoPromise();\n    let listener: CancelableType; // eslint-disable-line prefer-const\n\n    options.errorHandler = (err) => {\n        listener.cancel();\n        promise.reject(err);\n    };\n\n    listener = on(name, options, (event) => {\n        listener.cancel();\n        promise.resolve(event);\n\n        if (handler) {\n            return handler(event);\n        }\n    });\n    // @ts-ignore\n    promise.cancel = listener.cancel;\n    // @ts-ignore\n    return promise;\n}\n","import { ZalgoPromise } from 'zalgo-promise';\nimport type { CrossDomainWindowType, DomainMatcher } from 'cross-domain-utils';\nimport {\n    isAncestor,\n    isWindowClosed,\n    getDomain,\n    matchDomain\n} from 'cross-domain-utils';\nimport {\n    uniqueID,\n    isRegex,\n    noop,\n    safeInterval,\n    stringify,\n    stringifyError\n} from 'belter';\n\nimport {\n    CHILD_WINDOW_TIMEOUT,\n    MESSAGE_TYPE,\n    WILDCARD,\n    MESSAGE_NAME,\n    ACK_TIMEOUT,\n    RES_TIMEOUT,\n    ACK_TIMEOUT_KNOWN,\n    RESPONSE_CYCLE_TIME\n} from '../conf';\nimport type { ResponseListenerType } from '../drivers';\nimport {\n    sendMessage,\n    addResponseListener,\n    deleteResponseListener,\n    markResponseListenerErrored\n} from '../drivers';\nimport { awaitWindowHello, sayHello, isWindowKnown } from '../lib';\nimport { windowStore } from '../global';\nimport type { SendType } from '../types';\n\nimport { on } from './on';\n\nfunction validateOptions(\n    name: string,\n    win: CrossDomainWindowType,\n    domain: DomainMatcher | null | undefined\n) {\n    if (!name) {\n        throw new Error('Expected name');\n    }\n\n    if (domain) {\n        if (\n            typeof domain !== 'string' &&\n            !Array.isArray(domain) &&\n            !isRegex(domain)\n        ) {\n            throw new TypeError(\n                `Can not send ${ name }. Expected domain ${ JSON.stringify(\n                    domain\n                ) } to be a string, array, or regex`\n            );\n        }\n    }\n\n    if (isWindowClosed(win)) {\n        throw new Error(`Can not send ${ name }. Target window is closed`);\n    }\n}\n\nfunction normalizeDomain(\n    win: CrossDomainWindowType,\n    targetDomain: DomainMatcher,\n    actualDomain: string | null | undefined,\n    {\n        send\n    }: {\n        send: SendType;\n    }\n): ZalgoPromise<string> {\n    // @ts-ignore revist ZalgoPromise.try types\n    return ZalgoPromise.try(() => {\n        if (typeof targetDomain === 'string') {\n            return targetDomain;\n        }\n\n        return ZalgoPromise.try(() => {\n            return (\n                actualDomain ||\n                sayHello(win, {\n                    send\n                }).then(({ domain }) => domain)\n            );\n        }).then((normalizedDomain) => {\n            if (!matchDomain(targetDomain, targetDomain)) {\n                throw new Error(\n                    `Domain ${ stringify(\n                        targetDomain\n                    ) } does not match ${ stringify(targetDomain) }`\n                );\n            }\n\n            return normalizedDomain;\n        });\n    });\n}\n\nexport const send: SendType = (win, name, data, options) => {\n    options = options || {};\n    const domainMatcher = options.domain || WILDCARD;\n    const responseTimeout = options.timeout || RES_TIMEOUT;\n    const childTimeout = options.timeout || CHILD_WINDOW_TIMEOUT;\n    const fireAndForget = options.fireAndForget || false;\n    return (\n        ZalgoPromise.try(() => {\n            validateOptions(name, win, domainMatcher);\n\n            if (isAncestor(window, win)) {\n                return awaitWindowHello(win, childTimeout);\n            }\n        })\n            // @ts-ignore\n            .then(({ domain: actualDomain } = {}) => {\n                return normalizeDomain(win, domainMatcher, actualDomain, {\n                    send\n                });\n            })\n            .then((targetDomain) => {\n                const domain = targetDomain;\n                const logName =\n                    name === MESSAGE_NAME.METHOD &&\n                    data &&\n                    typeof data.name === 'string'\n                        ? `${ data.name }()`\n                        : name;\n\n                if (__DEBUG__) {\n                    console.info('send::req', logName, domain, '\\n\\n', data); // eslint-disable-line no-console\n                }\n\n                const promise = new ZalgoPromise<any>();\n                const hash = `${ name }_${ uniqueID() }`;\n\n                if (!fireAndForget) {\n                    const responseListener: ResponseListenerType = {\n                        name,\n                        win,\n                        // @ts-ignore expects string but may get ZalgoPromise\n                        domain,\n                        // @ts-ignore promise is unknown T\n                        promise\n                    };\n                    addResponseListener(hash, responseListener);\n                    const reqPromises = windowStore<ZalgoPromise<any>[]>(\n                        'requestPromises'\n                    ).getOrSet(win, () => []);\n                    reqPromises.push(promise);\n                    promise.catch(() => {\n                        markResponseListenerErrored(hash);\n                        deleteResponseListener(hash);\n                    });\n                    const totalAckTimeout = isWindowKnown(win)\n                        ? ACK_TIMEOUT_KNOWN\n                        : ACK_TIMEOUT;\n                    const totalResTimeout = responseTimeout;\n                    let ackTimeout = totalAckTimeout;\n                    let resTimeout = totalResTimeout;\n                    const interval = safeInterval(() => {\n                        if (isWindowClosed(win)) {\n                            return promise.reject(\n                                new Error(\n                                    `Window closed for ${ name } before ${\n                                        responseListener.ack\n                                            ? 'response'\n                                            : 'ack'\n                                    }`\n                                )\n                            );\n                        }\n\n                        if (responseListener.cancelled) {\n                            return promise.reject(\n                                new Error(\n                                    `Response listener was cancelled for ${ name }`\n                                )\n                            );\n                        }\n\n                        ackTimeout = Math.max(\n                            ackTimeout - RESPONSE_CYCLE_TIME,\n                            0\n                        );\n\n                        if (resTimeout !== -1) {\n                            resTimeout = Math.max(\n                                resTimeout - RESPONSE_CYCLE_TIME,\n                                0\n                            );\n                        }\n\n                        if (!responseListener.ack && ackTimeout === 0) {\n                            return promise.reject(\n                                new Error(\n                                    `No ack for postMessage ${ logName } in ${ getDomain() } in ${ totalAckTimeout }ms`\n                                )\n                            );\n                        } else if (resTimeout === 0) {\n                            return promise.reject(\n                                new Error(\n                                    `No response for postMessage ${ logName } in ${ getDomain() } in ${ totalResTimeout }ms`\n                                )\n                            );\n                        }\n                    }, RESPONSE_CYCLE_TIME);\n                    promise\n                        .finally(() => {\n                            interval.cancel();\n                            reqPromises.splice(reqPromises.indexOf(promise, 1));\n                        })\n                        .catch(noop);\n                }\n\n                return sendMessage(\n                    win,\n                    // @ts-ignore expects string but might get ZalgoPromise\n                    domain,\n                    {\n                        id:    uniqueID(),\n                        origin:getDomain(window),\n                        type:  MESSAGE_TYPE.REQUEST,\n                        hash,\n                        name,\n                        data,\n                        fireAndForget\n                    },\n                    {\n                        on,\n                        send\n                    }\n                ).then(\n                    () => {\n                        return fireAndForget ? promise.resolve() : promise;\n                    },\n                    (err) => {\n                        throw new Error(\n                            `Send request message failed for ${ logName } in ${ getDomain() }\\n\\n${ stringifyError(\n                                err\n                            ) }`\n                        );\n                    }\n                );\n            })\n    );\n};\n","export const BRIDGE_TIMEOUT = 5000;\nexport const CHILD_WINDOW_TIMEOUT = 5000;\nexport const ACK_TIMEOUT = 2000;\nexport const ACK_TIMEOUT_KNOWN = 10000;\nexport const RES_TIMEOUT: number = __TEST__ ? 2000 : -1;\nexport const RESPONSE_CYCLE_TIME = 500;\n","import type { CrossDomainWindowType, DomainMatcher } from 'cross-domain-utils';\n\nimport { initHello } from './lib';\nimport {\n    listenForMessages,\n    stopListenForMessages,\n    receiveMessage,\n    setupGlobalReceiveMessage,\n    cancelResponseListeners\n} from './drivers';\nimport { getGlobal, deleteGlobal } from './global';\nimport { on, send } from './public';\nimport { setupBridge } from './bridge';\nimport {\n    serializeMessage as internalSerializeMessage,\n    deserializeMessage as internalDeserializeMessage,\n    ProxyWindow\n} from './serialize';\n\nexport function serializeMessage<T>(\n    destination: CrossDomainWindowType | ProxyWindow,\n    domain: DomainMatcher,\n    obj: T\n): string {\n    return internalSerializeMessage(destination, domain, obj, {\n        on,\n        send\n    });\n}\nexport function deserializeMessage<T extends unknown>(\n    source: CrossDomainWindowType | ProxyWindow,\n    origin: string,\n    message: string\n): T {\n    return internalDeserializeMessage(source, origin, message, {\n        on,\n        send\n    });\n}\nexport function createProxyWindow(win?: CrossDomainWindowType): ProxyWindow {\n    return new ProxyWindow({\n        send,\n        win\n    });\n}\nexport function toProxyWindow(\n    win: CrossDomainWindowType | ProxyWindow\n): ProxyWindow {\n    return ProxyWindow.toProxyWindow(win, {\n        send\n    });\n}\nexport function setup(): void {\n    if (!getGlobal().initialized) {\n        getGlobal().initialized = true;\n        setupGlobalReceiveMessage({\n            on,\n            send\n        });\n        listenForMessages({\n            on,\n            send\n        });\n\n        if (__POST_ROBOT__.__IE_POPUP_SUPPORT__) {\n            setupBridge({\n                on,\n                send,\n                receiveMessage\n            });\n        }\n\n        initHello({\n            on,\n            send\n        });\n    }\n}\nexport function destroy(): void {\n    cancelResponseListeners();\n    stopListenForMessages();\n    deleteGlobal();\n}\n","import type { ZalgoPromise } from 'zalgo-promise';\nimport type { CrossDomainWindowType, DomainMatcher } from 'cross-domain-utils';\n// export something to force webpack to see this as an ES module\nexport const TYPES = true;\n\nexport type CancelableType = {\n    cancel: () => void;\n};\nexport type ErrorHandlerType = (err: unknown) => void;\nexport type HandlerType = (arg0: {\n    source: CrossDomainWindowType;\n    origin: string;\n    data: any;\n}) => void | any | ZalgoPromise<any>;\n\nexport type ServerOptionsType = {\n    handler?: HandlerType | null | undefined;\n    errorHandler?: ErrorHandlerType | null | undefined;\n    window?: CrossDomainWindowType;\n    name?: string | null | undefined;\n    domain?: DomainMatcher | null | undefined;\n    once?: boolean | null | undefined;\n    errorOnClose?: boolean | null | undefined;\n};\nexport type OnType = (\n    name: string,\n    options: ServerOptionsType | HandlerType,\n    handler?: HandlerType | null | undefined\n) => CancelableType;\ntype RegularRequestOptionsType = {\n    domain?: DomainMatcher | null | undefined;\n    fireAndForget?: false;\n    timeout?: number | null | undefined;\n};\ntype FireAndForgetRequestOptionsType = {\n    domain?: DomainMatcher | null | undefined;\n    fireAndForget: true;\n    timeout?: number | null | undefined;\n};\nexport type RequestOptionsType =\n    | RegularRequestOptionsType\n    | FireAndForgetRequestOptionsType;\nexport type ResponseMessageEvent = {\n    source: CrossDomainWindowType;\n    origin: string;\n    data: Record<string, any>;\n};\ntype RegularSendType = (\n    win: CrossDomainWindowType,\n    name: string,\n    data?: Record<string, any> | null | undefined,\n    options?: RegularRequestOptionsType\n) => ZalgoPromise<ResponseMessageEvent>;\ntype FireAndForgetSendType = (\n    win: CrossDomainWindowType,\n    name: string,\n    data?: Record<string, any> | null | undefined,\n    options?: FireAndForgetRequestOptionsType\n) => ZalgoPromise<void>;\nexport type SendType = RegularSendType & FireAndForgetSendType;\nexport type MessageEvent = {\n    source: CrossDomainWindowType;\n    origin: string;\n    data: string;\n};\n\nexport type CrossDomainFunctionType<A, R> = {\n    (...args: Array<A>): ZalgoPromise<R>;\n    fireAndForget: (...args: Array<A>) => ZalgoPromise<void>;\n    __id__?: string;\n    __name__?: string;\n};\nexport type ReceiveMessageType = (\n    arg0: MessageEvent,\n    arg1: {\n        on: OnType;\n        send: SendType;\n    }\n) => void;\n","import type { CrossDomainWindowType } from 'cross-domain-utils';\nimport { isWindowClosed } from 'cross-domain-utils';\nimport { noop } from 'belter';\n\nimport { windowStore } from './global';\n\nexport function cleanUpWindow(win: CrossDomainWindowType): void {\n    const requestPromises: any = windowStore('requestPromises');\n\n    for (const promise of requestPromises.get(win, [])) {\n        promise\n            .reject(\n                new Error(\n                    `Window ${\n                        isWindowClosed(win) ? 'closed' : 'cleaned up'\n                    } before response`\n                )\n            )\n            .catch(noop);\n    }\n}\n","import { setup } from './setup';\nimport {\n    setupBridge,\n    openBridge,\n    linkWindow,\n    linkUrl,\n    isBridge,\n    needsBridge,\n    needsBridgeForBrowser,\n    hasBridge,\n    needsBridgeForWin,\n    needsBridgeForDomain,\n    destroyBridges\n} from './bridge';\n\nexport { ZalgoPromise as Promise } from 'zalgo-promise/src';\nexport * from './types';\nexport { ProxyWindow } from './serialize';\nexport {\n    setup,\n    destroy,\n    serializeMessage,\n    deserializeMessage,\n    createProxyWindow,\n    toProxyWindow\n} from './setup';\nexport { on, once, send } from './public';\nexport { markWindowKnown } from './lib';\nexport { cleanUpWindow } from './clean';\n// @ts-expect-error\nexport let bridge;\n\nif (__POST_ROBOT__.__IE_POPUP_SUPPORT__) {\n    bridge = {\n        setupBridge,\n        openBridge,\n        linkWindow,\n        linkUrl,\n        isBridge,\n        needsBridge,\n        needsBridgeForBrowser,\n        hasBridge,\n        needsBridgeForWin,\n        needsBridgeForDomain,\n        destroyBridges\n    };\n}\n\nif (__POST_ROBOT__.__AUTO_SETUP__) {\n    setup();\n}\n"],"sourceRoot":""}